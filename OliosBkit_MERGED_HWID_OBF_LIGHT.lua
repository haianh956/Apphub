-- OliosBkit MERGED | Light Obfuscation
local b64="Ci0tIE9saW9zQmtpdCBNRVJHRUQgKENvcmUgKyBNZW51KQotLSBnZXRnZW52KCkuS2V5IGJhc2VkLCBIV0lEIGRldmljZSBiaW5kCi0tIE5PVEU6IFRoaXMgaXMgYSBtZXJnZWQgYnVpbGQKCi0tIE9MSU9TIFBSRU1JVU0gfCBERUxUQSBTQUZFIChERVZJQ0UgSFdJRCB8IE5PIFVJKQotLSBPTkxZIGdldGdlbnYoKS5LZXkgc3VwcG9ydGVkCi0tIDEgREVWSUNFID0gMSBLRVkKCnJlcGVhdCB0YXNrLndhaXQoKSB1bnRpbCBnYW1lOklzTG9hZGVkKCkgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgoKbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIExvY2FsUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCBSYnhBbmFseXRpY3NTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSYnhBbmFseXRpY3NTZXJ2aWNlIikKCi0tID09PT09IERFVklDRSBIV0lEID09PT09CmxvY2FsIGZ1bmN0aW9uIGdldEhXSUQoKQogICAgcmV0dXJuIFJieEFuYWx5dGljc1NlcnZpY2U6R2V0Q2xpZW50SWQoKQplbmQKCi0tID09PT09IFZBTElEIEtFWVMgPT09PT0KbG9jYWwgVkFMSURfS0VZUyA9IHsKICAgIFsiT0xJT1MtQUxQSEEiXSA9IHRydWUsCiAgICBbIk9MSU9TLUJFVEEiXSAgPSB0cnVlLAogICAgWyJPTElPUy1QUk8iXSAgID0gdHJ1ZSwKICAgIFsiT0xJT1MtVklQIl0gICA9IHRydWUKfQoKLS0gPT09PT0gS0VZIEJJTkRTIChSVU5USU1FKSA9PT09PQpsb2NhbCBCSU5EUyA9IHt9CgotLSA9PT09PSBSRUFEIEtFWSA9PT09PQppZiB0eXBlKGdldGdlbnYpIH49ICJmdW5jdGlvbiIgb3IgdHlwZShnZXRnZW52KCkuS2V5KSB+PSAic3RyaW5nIiBvciBnZXRnZW52KCkuS2V5ID09ICIiIHRoZW4KICAgIExvY2FsUGxheWVyOktpY2soIk5PIEtFWSBQUk9WSURFRCIpCiAgICByZXR1cm4KZW5kCgpsb2NhbCBrZXkgPSBzdHJpbmcudXBwZXIoZ2V0Z2VudigpLktleSkKCmlmIG5vdCBWQUxJRF9LRVlTW2tleV0gdGhlbgogICAgTG9jYWxQbGF5ZXI6S2ljaygiSU5WQUxJRCBLRVkiKQogICAgcmV0dXJuCmVuZAoKbG9jYWwgaHdpZCA9IGdldEhXSUQoKQppZiBCSU5EU1trZXldIGFuZCBCSU5EU1trZXldIH49IGh3aWQgdGhlbgogICAgTG9jYWxQbGF5ZXI6S2ljaygiSFdJRCBJTlZBTElEIikKICAgIHJldHVybgplbmQKCkJJTkRTW2tleV0gPSBod2lkCgotLSA9PT09PSBNQUlOIFNDUklQVCBTVEFSVCA9PT09PQpwcmludCgiT0xJT1MgVU5MT0NLRUQgfCBERVZJQ0UgVkVSSUZJRUQgfCBOTyBVSSIpCgotLSBwdXQgZmFybSAvIG1lbnUgY29kZSBiZWxvdwoKCgotLSA9PT09PSBNRU5VIEFGVEVSIEtFWSBQQVNTIChGSVgpID09PT09CmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgUGxheWVyR3VpID0gTG9jYWxQbGF5ZXI6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKQoKcGNhbGwoZnVuY3Rpb24oKQogICAgaWYgUGxheWVyR3VpOkZpbmRGaXJzdENoaWxkKCJPbGlvc01lbnUiKSB0aGVuCiAgICAgICAgUGxheWVyR3VpLk9saW9zTWVudTpEZXN0cm95KCkKICAgIGVuZAplbmQpCgpsb2NhbCBndWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpCmd1aS5OYW1lID0gIk9saW9zTWVudSIKZ3VpLlJlc2V0T25TcGF3biA9IGZhbHNlCmd1aS5QYXJlbnQgPSBQbGF5ZXJHdWkKCmxvY2FsIGZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIsIGd1aSkKZnJhbWUuU2l6ZSA9IFVEaW0yLmZyb21TY2FsZSgwLjM1LCAwLjMpCmZyYW1lLlBvc2l0aW9uID0gVURpbTIuZnJvbVNjYWxlKDAuMzI1LCAwLjM1KQpmcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsMjAsMjApCmZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKZnJhbWUuVmlzaWJsZSA9IHRydWUKCmxvY2FsIHRpdGxlID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCBmcmFtZSkKdGl0bGUuU2l6ZSA9IFVEaW0yLmZyb21TY2FsZSgxLCAwLjI1KQp0aXRsZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQp0aXRsZS5UZXh0ID0gIk9MSU9TIE1FTlUiCnRpdGxlLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsMjU1LDI1NSkKdGl0bGUuVGV4dFNjYWxlZCA9IHRydWUKCnByaW50KCJbTUVOVV0gTWVudSBsb2FkZWQgc3VjY2Vzc2Z1bGx5IikKCgotLSA9PT09PSBNRU5VIElOSkVDVCA9PT09PQoKLS0gPT09PT09PT09PT09PT09PT0gT05FLVRJTUUgS0VZIFNZU1RFTSAoREVMVEEgU0FGRSkgPT09PT09PT09PT09PT09PT0KbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIExvY2FsUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgoKLS0gQ0hBTkdFIC8gTUFOQUdFIFlPVVIgS0VZUyBIRVJFCmxvY2FsIFZhbGlkS2V5cyA9IHsKICAgIFsiMTgyNzE1MjgxNzYzNjIwMTUiXSA9IHRydWUsCiAgICBbIjEwMDExMzQzNjMzOTE0MjAxNSJdID0gdHJ1ZQp9CgotLSBPbmUtdGltZSBwZXIgdXNlciBtYXJrZXIgKGxvY2FsIG1hY2hpbmUpCmxvY2FsIFVzZWRGaWxlID0gIkJsb3hGcnVpdHNfS2V5X1VzZWQudHh0IgoKaWYgbm90IGlzZmlsZSB0aGVuCiAgICAtLSBFeGVjdXRvciBkb2Vzbid0IHN1cHBvcnQgZmlsZXN5c3RlbTsgYWxsb3cgZXhlY3V0aW9uIHRvIGF2b2lkIGZhbHNlIGJsb2NrcwplbHNlCiAgICBpZiBpc2ZpbGUoVXNlZEZpbGUpIHRoZW4KICAgICAgICAtLSBVc2VyIGFscmVhZHkgdmFsaWRhdGVkIGJlZm9yZQogICAgZWxzZQogICAgICAgIGxvY2FsIGlucHV0S2V5ID0gIiIKICAgICAgICBpZiBnZXRjbGlwYm9hcmQgdGhlbgogICAgICAgICAgICBpbnB1dEtleSA9IHRvc3RyaW5nKGdldGNsaXBib2FyZCgpKQogICAgICAgIGVuZAoKICAgICAgICBpZiBWYWxpZEtleXNbaW5wdXRLZXldIHRoZW4KICAgICAgICAgICAgd3JpdGVmaWxlKFVzZWRGaWxlLCBpbnB1dEtleSkKICAgICAgICBlbHNlCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIExvY2FsUGxheWVyOktpY2soIkludmFsaWQgb3IgYWxyZWFkeSB1c2VkIGtleS5cbkdldCBhIG5ldyBrZXkgZnJvbSBhZG1pbi4iKQogICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVuZAogICAgZW5kCmVuZAotLSA9PT09PT09PT09PT09PT09PSBFTkQgS0VZIFNZU1RFTSA9PT09PT09PT09PT09PT09PQoKCmxvY2FsIHYxNCA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL2dpdGh1Yi5jb20vZGF3aWQtc2NyaXB0cy9GbHVlbnQvcmVsZWFzZXMvbGF0ZXN0L2Rvd25sb2FkL21haW4ubHVhIikpKCk7CmxvY2FsIHYxNSA9IHYxNDpDcmVhdGVXaW5kb3coewogICAgVGl0bGUgPSAiRmFGYSBCZXRhIEh1Yi1CbG94IEZydWl0IFsgUHJlbWl1bSBdIiwtLSBOZ3UKICAgIFN1YlRpdGxlID0gIkJ5IG5ndSIsLS0gCiAgICBUYWJXaWR0aCA9IDE2MCwKICAgIFRoZW1lID0gIkRhcmsiLC0tCiAgICBBY3J5bGljID0gZmFsc2UsCiAgICBTaXplID0gVURpbTIuZnJvbU9mZnNldCg1MDAsIDMyMCksCiAgICBNaW5pbWl6ZUtleSA9IEVudW0uS2V5Q29kZS5FbmQKfSk7CmxvY2FsIHYxNiA9IHsKICAgIEhvbWUgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgSW5mb3JtYXRpb24iCiAgICB9KSwKICAgIE1haW4gPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgRmFybWluZyIKICAgIH0pLAogICAgU2VhID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFZvbGNhbm8gQW5kIFNlYSBFdmVudCIKICAgIH0pLAogICAgSVRNID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIEZhcm1pbmcgT3RoZXIiCiAgICB9KSwKICAgIFNldHRpbmcgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJTZXR0aW5nIEZhcm0iCiAgICB9KSwKICAgIFN0YXR1cyA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBTdGF0dXMgQW5kIFNlcnZlciIKICAgIH0pLAogICAgU3RhdHMgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgU3RhdHMiCiAgICB9KSwKICAgIFBsYXllciA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBMb2NhbCBQbGF5ZXIiCiAgICB9KSwKICAgIFRlbGVwb3J0ID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFRlbGVwb3J0IgogICAgfSksCiAgICBWaXN1YWwgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgVmlzdWFsIgogICAgfSksCiAgICBGcnVpdCA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBFc3AgQW5kIEZydWl0IgogICAgfSksCiAgICBSYWlkID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFJhaWQiCiAgICB9KSwKICAgIFJhY2UgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgVXBncmFkZSBSYWNlIgogICAgfSksCiAgICBTaG9wID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFNob3AiCiAgICB9KSwKICAgIE1pc2MgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgTWlzYyIKICAgIH0pCn07CmxvY2FsIHYxNyA9IHYxNC5PcHRpb25zOwpsb2NhbCB2MTggPSBnYW1lLlBsYWNlSWQ7CmlmICh2MTggPT0gMjc1MzkxNTU0OSkgdGhlbgogICAgU2VhMSA9IHRydWU7CmVsc2VpZiAodjE4ID09IDQ0NDIyNzIxODMpIHRoZW4KICAgIFNlYTIgPSB0cnVlOwplbHNlaWYgKHYxOCA9PSA3NDQ5NDIzNjM1KSB0aGVuCiAgICBTZWEzID0gdHJ1ZTsKZWxzZQogICAgZ2FtZTpTaHV0ZG93bigpOwplbmQKZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuSWRsZWQ6Y29ubmVjdChmdW5jdGlvbigpCiAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6QnV0dG9uMkRvd24oVmVjdG9yMi5uZXcoMCwgMCksIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSk7CiAgICB3YWl0KCk7CiAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6QnV0dG9uMlVwKFZlY3RvcjIubmV3KDAsIDApLCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUpOwplbmQpOwpTZWExID0gZmFsc2U7ClNlYTIgPSBmYWxzZTsKU2VhMyA9IGZhbHNlOwpsb2NhbCB2MTkgPSBnYW1lLlBsYWNlSWQ7CmlmICh2MTkgPT0gMjc1MzkxNTU0OSkgdGhlbgogICAgU2VhMSA9IHRydWU7CmVsc2VpZiAodjE5ID09IDQ0NDIyNzIxODMpIHRoZW4KICAgIFNlYTIgPSB0cnVlOwplbHNlaWYgKHYxOSA9PSA3NDQ5NDIzNjM1KSB0aGVuCiAgICBTZWEzID0gdHJ1ZTsKZW5kCmZ1bmN0aW9uIENoZWNrTGV2ZWwoKQogICAgbG9jYWwgdjE5NyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWU7CiAgICBpZiBTZWExIHRoZW4KICAgICAgICBpZiAoKHYxOTcgPT0gMSkgb3IgKHYxOTcgPD0gOSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkJhbmRpdCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkJhbmRpdCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJCYW5kaXRRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJCYW5kaXQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMDYwLjkzODM1NDQ5MjIsIDE2LjQ1NTA2NjY4MDkwOCwgMTU0Ny43ODQxNzk2ODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMDM4LjU1MzM0NDcyNjYsIDQxLjI5NjI0OTM4OTY0OCwgMTU3Ni41MDk4ODc2OTUzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEwKSBvciAodjE5NyA8PSAxNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1vbmtleSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1vbmtleSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJKdW5nbGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIk1vbmtleSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTYwMS42NTUzOTU1MDc4LCAzNi44NTIxMzQ3MDQ1OSwgMTUzLjM4ODA5MjA0MTAyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE0NDguMTQ0NjUzMzIwMywgNTAuODUxOTkzNTYwNzkxLCA2My42MDcxODUzNjM3Nyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNSkgb3IgKHYxOTcgPD0gMjkpIG9yIChTZWxlY3RNb25zdGVyID09ICJHb3JpbGxhIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiR29yaWxsYSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJKdW5nbGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkdvcmlsbGEiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2MDEuNjU1Mzk1NTA3OCwgMzYuODUyMTM0NzA0NTksIDE1My4zODgwOTIwNDEwMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMTQyLjY0ODgwMzcxMDksIDQwLjQ2MjM0ODkzNzk4OCwgLSA1MTUuMzkyMjcyOTQ5MjIpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMzApIG9yICh2MTk3IDw9IDM5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkJ1Z2d5UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMTQwLjE3NjE0NzQ2MDksIDQuNzUyMDQ5NDQ2MTA2LCAzODI3LjQwNTc2MTcxODgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTIwMS4wODgxMzQ3NjU2LCA0MC42Mjg5NDA1ODIyNzUsIDM4NTcuNTk2Njc5Njg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA0MCkgb3IgKHYxOTcgPD0gNTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJCcnV0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkJydXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkJ1Z2d5UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQnJ1dGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDExNDAuMTc2MTQ3NDYwOSwgNC43NTIwNDk0NDYxMDYsIDM4MjcuNDA1NzYxNzE4OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMzg3LjUzMjQ3MDcwMzEsIDI0LjU5MjAzNTI5MzU3OSwgNDEwMC45NTc1MTk1MzEzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDYwKSBvciAodjE5NyA8PSA3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRlc2VydCBCYW5kaXQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEZXNlcnQgQmFuZGl0IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlc2VydFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRGVzZXJ0IEJhbmRpdCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDg5Ni41MTcyMTE5MTQwNiwgNi40Mzg0NjE3ODA1NDgxLCA0MzkwLjE0OTQxNDA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDk4NC45OTg5NjI0MDIzNCwgMTYuMTA5NTUyMzgzNDIzLCA0NDE3LjkxMDE1NjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDc1KSBvciAodjE5NyA8PSA4OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRlc2VydCBPZmZpY2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRGVzZXJ0IE9mZmljZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVzZXJ0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEZXNlcnQgT2ZmaWNlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDg5Ni41MTcyMTE5MTQwNiwgNi40Mzg0NjE3ODA1NDgxLCA0MzkwLjE0OTQxNDA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDE1NDcuMTUxMDAwOTc2NiwgMTQuNDUyMDM4NzY0OTU0LCA0MzgxLjgwMDI5Mjk2ODgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gOTApIG9yICh2MTk3IDw9IDk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU25vdyBCYW5kaXQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTbm93IEJhbmRpdCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTbm93UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTbm93IEJhbmRpdCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDEzODYuODA3MzczMDQ2OSwgODcuMjcyNzg5MDAxNDY1LCAtIDEyOTguMzU3NjY2MDE1Nik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTM1Ni4zMDI4NTY0NDUzLCAxMDUuNzY4NjUzODY5NjMsIC0gMTMyOC4yNDE4MjEyODkxKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEwMCkgb3IgKHYxOTcgPD0gMTE5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU25vd21hbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNub3dtYW4iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU25vd1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vd21hbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDEzODYuODA3MzczMDQ2OSwgODcuMjcyNzg5MDAxNDY1LCAtIDEyOTguMzU3NjY2MDE1Nik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTIxOC43OTU2NTQyOTY5LCAxMzguMDExODQwODIwMzEsIC0gMTQ4OC4wMjYyNDUxMTcyKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEyMCkgb3IgKHYxOTcgPD0gMTQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ2hpZWYgUGV0dHkgT2ZmaWNlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNoaWVmIFBldHR5IE9mZmljZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ2hpZWYgUGV0dHkgT2ZmaWNlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTAzNS40OTYwOTM3NSwgMjguNjc3ODM1NDY0NDc4LCA0MzI0LjE4NDA4MjAzMTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNDkzMS4xNTUyNzM0Mzc1LCA2NS43OTMxMTM3MDg0OTYsIDQxMjEuODM5MzU1NDY4OCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNTApIG9yICh2MTk3IDw9IDE3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNreSBCYW5kaXQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTa3kgQmFuZGl0IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2t5IEJhbmRpdCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDg0Mi4xMzcyMDcwMzEzLCA3MTcuNjk1NDM0NTcwMzEsIC0gMjYyMy4wNDgzMzk4NDM4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDQ5NTUuNjQxMTEzMjgxMywgMzY1LjQ2MzY1MzU2NDQ1LCAtIDI5MDguMTg2NTIzNDM3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNzUpIG9yICh2MTk3IDw9IDE4OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRhcmsgTWFzdGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRGFyayBNYXN0ZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEYXJrIE1hc3RlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDg0Mi4xMzcyMDcwMzEzLCA3MTcuNjk1NDM0NTcwMzEsIC0gMjYyMy4wNDgzMzk4NDM4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDUxNDguMTY1MDM5MDYyNSwgNDM5LjA0NTcxNTMzMjAzLCAtIDIzMzIuOTYxMTgxNjQwNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxOTApIG9yICh2MTk3IDw9IDIwOSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlByaXNvbmVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUHJpc29uZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiUHJpc29uZXJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlByaXNvbmVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTMxMC42MDU0NywgMC4zNTAwMTQ5MjUsIDQ3NC45NDY1OTQsIDAuMDE3NTAxNzExOCwgMCwgMC45OTk4NDY5MzUsIDAsIDEsIDAsIC0gMC45OTk4NDY5MzUsIDAsIDAuMDE3NTAxNzExOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNDkzNy4zMTg4NSwgMC4zMzIwMzEzOTksIDY0OS41NzQ1MjQsIDAuNjk0NjQ5ODE2LCAwLCAtIDAuNzE5MzQ4MDczLCAwLCAxLCAwLCAwLjcxOTM0ODA3MywgMCwgMC42OTQ2NDk4MTYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjEwKSBvciAodjE5NyA8PSAyNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJEYW5nZXJvdXMgUHJpc29uZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEYW5nZXJvdXMgUHJpc29uZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiUHJpc29uZXJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkRhbmdlcm91cyBQcmlzb25lciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDUzMTAuNjA1NDcsIDAuMzUwMDE0OTI1LCA0NzQuOTQ2NTk0LCAwLjAxNzUwMTcxMTgsIDAsIDAuOTk5ODQ2OTM1LCAwLCAxLCAwLCAtIDAuOTk5ODQ2OTM1LCAwLCAwLjAxNzUwMTcxMTgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDUwOTkuNjYyNiwgMC4zNTE1NjI2NzksIDEwNTUuNzU4MywgMC44OTg5MDY4MjcsIDAsIC0gMC40MzgxMzk4NTYsIDAsIDEsIDAsIDAuNDM4MTM5ODU2LCAwLCAwLjg5ODkwNjgyNyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNTApIG9yICh2MTk3IDw9IDI3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlRvZ2EgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlRvZ2EgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDb2xvc3NldW1RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlRvZ2EgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTU3Ny43ODkwNjI1LCA3LjQxNTE0MjA1OTMyNjIsIC0gMjk4NC40ODM4ODY3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE4NzIuNTE2NjAxNTYyNSwgNDkuMDgwMjE1NDU0MTAyLCAtIDI5MTMuODEwNTQ2ODc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI3NSkgb3IgKHYxOTcgPD0gMjk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiR2xhZGlhdG9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiR2xhZGlhdG9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNvbG9zc2V1bVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR2xhZGlhdG9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNTc3Ljc4OTA2MjUsIDcuNDE1MTQyMDU5MzI2MiwgLSAyOTg0LjQ4Mzg4NjcxODgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTUyMS4zNzQwMjM0Mzc1LCA4MS4yMDMxNzA3NzYzNjcsIC0gMzA2Ni4zMTM5NjQ4NDM4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDMwMCkgb3IgKHYxOTcgPD0gMzI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWlsaXRhcnkgU29sZGllciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1pbGl0YXJ5IFNvbGRpZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFnbWFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIk1pbGl0YXJ5IFNvbGRpZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDUzMTYuMTE1NzIyNjU2MywgMTIuMjYyODMxNjg3OTI3LCA4NTE3LjAwMzkwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDUzNjkuMDAwNDg4MjgxMywgNjEuMjQzNTI2NDU4NzQsIDg1NTYuNDkyMTg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAzMjUpIG9yICh2MTk3IDw9IDM3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1pbGl0YXJ5IFNweSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1pbGl0YXJ5IFNweSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYWdtYVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWlsaXRhcnkgU3B5IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1MzE2LjExNTcyMjY1NjMsIDEyLjI2MjgzMTY4NzkyNywgODUxNy4wMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1Nzg3LjAwMjkzLCA3NS44MjYyNjM0LCA4NjUxLjY5OTIyLCAwLjgzODU5MDU2MiwgMCwgLSAwLjU0NDc2MjE5NCwgMCwgMSwgMCwgMC41NDQ3NjIxOTQsIDAsIDAuODM4NTkwNTYyKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDM3NSkgb3IgKHYxOTcgPD0gMzk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRmlzaG1hbiBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmlzaG1hbiBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZpc2htYW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkZpc2htYW4gV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYxMTIyLjY1MjM0Mzc1LCAxOC40OTc0NDIyNDU0ODMsIDE1NjkuMzk5NzgwMjczNCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjA4NDQuMTA1NDY4NzUsIDk4LjQ2Mjg3NTM2NjIxMSwgMTI5OC4zOTg1NTk1NzAzKTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDMwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCAxMS42Nzk2ODc1LCAxODE5Ljc4NDE3OTY4NzUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA0MDApIG9yICh2MTk3IDw9IDQ0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZpc2htYW4gQ29tbWFuZG8iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJGaXNobWFuIENvbW1hbmRvIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZpc2htYW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkZpc2htYW4gQ29tbWFuZG8iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MTEyMi42NTIzNDM3NSwgMTguNDk3NDQyMjQ1NDgzLCAxNTY5LjM5OTc4MDI3MzQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDYxNzM4LjM5ODQzNzUsIDY0LjIwNzMyMTE2Njk5MiwgMTQzMy44Mzc1MjQ0MTQxKTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDMwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCAxMS42Nzk2ODc1LCAxODE5Ljc4NDE3OTY4NzUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMCkgb3IgKHYxOTcgPD0gNDc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiR29kJ3MgR3VhcmQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJHb2QncyBHdWFyZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAxUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJHb2QncyBHdWFyZCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDcyMS44NjAzNTE1NjI1LCA4NDUuMzAyOTc4NTE1NjMsIC0gMTk1My44NDg5OTkwMjM0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDQ2MjguMDQ5ODA0Njg3NSwgODY2LjkyODc3MTk3MjY2LCAtIDE5MzEuMjM1MjI5NDkyMik7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAzMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA0NjA3LjgyMjc1LCA4NzIuNTQyNDgsIC0gMTY2Ny41NTY4OCkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDQ3NSkgb3IgKHYxOTcgPD0gNTI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2hhbmRhIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2hhbmRhIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreUV4cDFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoYW5kYSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNzg2My4xNTk2Njc5Njg4LCA1NTQ1LjUxOTA0Mjk2ODgsIC0gMzc4LjQyMjY2ODQ1NzAzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDc2ODUuMTQ3NDYwOTM3NSwgNTYwMS4wNzUxOTUzMTI1LCAtIDQ0MS4zODg3NjM0Mjc3Myk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAzMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA3ODk0LjYxNzY3NTc4MTMsIDU1NDcuMTQxNjAxNTYyNSwgLSAzODAuMjkxMTk4NzMwNDcpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA1MjUpIG9yICh2MTk3IDw9IDU0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlJveWFsIFNxdWFkIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUm95YWwgU3F1YWQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5RXhwMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUm95YWwgU3F1YWQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDc5MDMuMzgyODEyNSwgNTYzNS45ODk3NDYwOTM4LCAtIDE0MTAuOTIzODI4MTI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDc2NTQuMjUxNDY0ODQzOCwgNTYzNy4xMDc5MTAxNTYzLCAtIDE0MDcuNzU1MDA0ODgyOCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA1NTApIG9yICh2MTk3IDw9IDYyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlJveWFsIFNvbGRpZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJSb3lhbCBTb2xkaWVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreUV4cDJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlJveWFsIFNvbGRpZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDc5MDMuMzgyODEyNSwgNTYzNS45ODk3NDYwOTM4LCAtIDE0MTAuOTIzODI4MTI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDc3NjAuNDEwNjQ0NTMxMywgNTY3OS45MDc3MTQ4NDM4LCAtIDE4ODQuODExMjc5Mjk2OSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA2MjUpIG9yICh2MTk3IDw9IDY0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkdhbGxleSBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJHYWxsZXkgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZvdW50YWluUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJHYWxsZXkgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTI1OC4yNzg4MDg1OTM4LCAzOC41MjY5MzE3NjI2OTUsIDQwNTAuMDQ0OTIxODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1NTU3LjE2ODQ1NzAzMTMsIDE1Mi4zMjcxNzg5NTUwOCwgMzk5OC43NzU4Nzg5MDYzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID49IDY1MCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkdhbGxleSBDYXB0YWluIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiR2FsbGV5IENhcHRhaW4iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRm91bnRhaW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkdhbGxleSBDYXB0YWluIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTI1OC4yNzg4MDg1OTM4LCAzOC41MjY5MzE3NjI2OTUsIDQwNTAuMDQ0OTIxODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1Njc3LjY3NzI0NjA5MzgsIDkyLjc4NjEwOTkyNDMxNiwgNDk2Ni42MzIzMjQyMTg4KTsKICAgICAgICBlbmQKICAgIGVuZAogICAgaWYgU2VhMiB0aGVuCiAgICAgICAgaWYgKCh2MTk3ID09IDcwMCkgb3IgKHYxOTcgPD0gNzI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUmFpZGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUmFpZGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkFyZWExUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJSYWlkZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQyNy43MjU2Nzc0OTAyMywgNzIuOTk2MzQ1NTIwMDIsIDE4MzUuOTQyNjI2OTUzMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjguODc0NTY1MTI0NTEyLCA5My42MzU2NDMwMDUzNzEsIDI0MjkuNjc1MjkyOTY4OCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA3MjUpIG9yICh2MTk3IDw9IDc3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1lcmNlbmFyeSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1lcmNlbmFyeSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWVyY2VuYXJ5IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0MjcuNzI1Njc3NDkwMjMsIDcyLjk5NjM0NTUyMDAyLCAxODM1Ljk0MjYyNjk1MzEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gODY0Ljg1MDA5NzY1NjI1LCAxMjIuNDcxMDQ2NDQ3NzUsIDE0NTMuMTUwNTEyNjk1Myk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA3NzUpIG9yICh2MTk3IDw9IDc5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlN3YW4gUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU3dhbiBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQXJlYTJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlN3YW4gUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjM1LjYxMTUxMTIzMDQ3LCA3My4wOTYzNTE2MjM1MzUsIDkxNy44MTI5ODgyODEyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTA2NS4zNjY5NDMzNTk0LCAxMzcuNjQwMTIxNDU5OTYsIDEzMjQuMzc5ODgyODEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA4MDApIG9yICh2MTk3IDw9IDg3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZhY3RvcnkgU3RhZmYiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJGYWN0b3J5IFN0YWZmIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkFyZWEyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGYWN0b3J5IFN0YWZmIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjM1LjYxMTUxMTIzMDQ3LCA3My4wOTYzNTE2MjM1MzUsIDkxNy44MTI5ODgyODEyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTMzLjIyMDQ1ODk4NDM4LCAxMjguNDY4NzY1MjU4NzksIDM1NS42MjYxNTk2Njc5Nyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA4NzUpIG9yICh2MTk3IDw9IDg5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1hcmluZSBMaWV1dGVuYW4iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNYXJpbmUgTGlldXRlbmFudCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYXJpbmVRdWVzdDMiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNYXJpbmUgTGlldXRlbmFudCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMjQ0MC45OTM0MDgyMDMxLCA3My4wNDE5MDgyNjQxNiwgLSAzMjE3LjcwODI1MTk1MzEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMjQ4OS4yNjIyMDcwMzEzLCA4NC42MTM1OTQwNTUxNzYsIC0gMzE1MS44ODMwNTY2NDA2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDkwMCkgb3IgKHYxOTcgPD0gOTQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWFyaW5lIENhcHRhaW4iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNYXJpbmUgQ2FwdGFpbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYXJpbmVRdWVzdDMiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNYXJpbmUgQ2FwdGFpbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMjQ0MC45OTM0MDgyMDMxLCA3My4wNDE5MDgyNjQxNiwgLSAzMjE3LjcwODI1MTk1MzEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMjMzNS4yMDI2MzY3MTg4LCA3OS43ODY2NTkyNDA3MjMsIC0gMzI0NS44Njc0MzE2NDA2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDk1MCkgb3IgKHYxOTcgPD0gOTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiWm9tYmllIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiWm9tYmllIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlpvbWJpZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiWm9tYmllIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1NDk0LjM0MTMwODU5MzgsIDQ4LjUwNTkzMTg1NDI0OCwgLSA3OTQuNTkwOTQyMzgyODEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTUzNi40OTcwNzAzMTI1LCAxMDEuMDg1Nzc3MjgyNzEsIC0gODM1LjU5MDc1OTI3NzM0KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDk3NSkgb3IgKHYxOTcgPD0gOTk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiVmFtcGlyZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlZhbXBpcmUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiWm9tYmllUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJWYW1waXJlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1NDk0LjM0MTMwODU5MzgsIDQ4LjUwNTkzMTg1NDI0OCwgLSA3OTQuNTkwOTQyMzgyODEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTgwNi4xMDk4NjMyODEzLCAxNi43MjI1Mjg0NTc2NDIsIC0gMTE2NC40Mzg0NzY1NjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEwMDApIG9yICh2MTk3IDw9IDEwNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTbm93IFRyb29wZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTbm93IFRyb29wZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU25vd01vdW50YWluUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTbm93IFRyb29wZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MDcuMDU5NjMxMzQ3NjYsIDQwMS40NDc4MTQ5NDE0MSwgLSA1MzcwLjU1NDY4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDUzNS4yMTA1MTAyNTM5MSwgNDMyLjc0MjA5NTk0NzI3LCAtIDU0ODQuOTE2NTAzOTA2Myk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMDUwKSBvciAodjE5NyA8PSAxMDk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiV2ludGVyIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJXaW50ZXIgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTbm93TW91bnRhaW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIldpbnRlciBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjA3LjA1OTYzMTM0NzY2LCA0MDEuNDQ3ODE0OTQxNDEsIC0gNTM3MC41NTQ2ODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMjM0LjQ0NDk0NjI4OTEsIDQ1Ni45NTQxOTMxMTUyMywgLSA1MTc0LjEzMDg1OTM3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMTAwKSBvciAodjE5NyA8PSAxMTI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTGFiIFN1Ym9yZGluYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTGFiIFN1Ym9yZGluYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkljZVNpZGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkxhYiBTdWJvcmRpbmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNjA2MS44NDE3OTY4NzUsIDE1LjkyNjY3MTk4MTgxMiwgLSA0OTAyLjAzODU3NDIxODgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTcyMC41NTc2MTcxODc1LCA2My4zMDk0NzExMzAzNzEsIC0gNDc4NC42MTAzNTE1NjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDExMjUpIG9yICh2MTk3IDw9IDExNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJIb3JuZWQgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkhvcm5lZCBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkljZVNpZGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkhvcm5lZCBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA2MDYxLjg0MTc5Njg3NSwgMTUuOTI2NjcxOTgxODEyLCAtIDQ5MDIuMDM4NTc0MjE4OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA2MjkyLjc1MTk1MzEyNSwgOTEuMTgxOTgzOTQ3NzU0LCAtIDU1MDIuNjQ5OTAyMzQzOCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMTc1KSBvciAodjE5NyA8PSAxMTk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWFnbWEgTmluamEiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNYWdtYSBOaW5qYSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXJlU2lkZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFnbWEgTmluamEiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDU0MjkuMDQ3MzYzMjgxMywgMTUuOTc3NTY1NzY1MzgxLCAtIDUyOTcuOTYxNDI1NzgxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1NDYxLjgzODg2NzE4NzUsIDEzMC4zNjM0Nzk2MTQyNiwgLSA1ODM2LjQ3MDIxNDg0MzgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTIwMCkgb3IgKHYxOTcgPD0gMTI0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkxhdmEgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTGF2YSBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRmlyZVNpZGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkxhdmEgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1NDI5LjA0NzM2MzI4MTMsIDE1Ljk3NzU2NTc2NTM4MSwgLSA1Mjk3Ljk2MTQyNTc4MTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTI1MS4xODg5NjQ4NDM4LCA1NS4xNjQ1MzU1MjI0NjEsIC0gNDc3NC40MDk2Njc5Njg4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEyNTApIG9yICh2MTk3IDw9IDEyNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTaGlwIERlY2toYW5kIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2hpcCBEZWNraGFuZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTaGlwUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2hpcCBEZWNraGFuZCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDEwNDAuMjkyNzI0NjA5NCwgMTI1LjA4MjkzMTUxODU1LCAzMjkxMS4wMzkwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg5MjEuMTIzNjU3MjI2NTYsIDEyNS45ODM5NTUzODMzLCAzMzA4OC4zMjgxMjUpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEyNzUpIG9yICh2MTk3IDw9IDEyOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTaGlwIEVuZ2luZWVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2hpcCBFbmdpbmVlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTaGlwUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2hpcCBFbmdpbmVlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDEwNDAuMjkyNzI0NjA5NCwgMTI1LjA4MjkzMTUxODU1LCAzMjkxMS4wMzkwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg4ODYuMjgxNzk5MzE2NDEsIDQwLjQ3NzkwMTQ1ODc0LCAzMjgwMC44MzIwMzEyNSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTMwMCkgb3IgKHYxOTcgPD0gMTMyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNoaXAgU3Rld2FyZCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNoaXAgU3Rld2FyZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTaGlwUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2hpcCBTdGV3YXJkIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoOTcxLjQyMDY1NDI5Njg4LCAxMjUuMDgyOTMxNTE4NTUsIDMzMjQ1LjU0Mjk2ODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg5NDMuODU1MDQxNTAzOTEsIDEyOS41ODE4MzI4ODU3NCwgMzM0NDQuMzY3MTg3NSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTMyNSkgb3IgKHYxOTcgPD0gMTM0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNoaXAgT2ZmaWNlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNoaXAgT2ZmaWNlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTaGlwUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2hpcCBPZmZpY2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoOTcxLjQyMDY1NDI5Njg4LCAxMjUuMDgyOTMxNTE4NTUsIDMzMjQ1LjU0Mjk2ODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg5NTUuMzg0NTgyNTE5NTMsIDE4MS4wODMzNTg3NjQ2NSwgMzMzMzEuODkwNjI1KTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMzUwKSBvciAodjE5NyA8PSAxMzc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQXJjdGljIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJBcmN0aWMgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGcm9zdFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQXJjdGljIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1NjY4LjEzNzIwNzAzMTMsIDI4LjIwMjUzMTgxNDU3NSwgLSA2NDg0LjYwMDU4NTkzNzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDU5MzUuNDU0MTAxNTYyNSwgNzcuMjYwMTY5OTgyOTEsIC0gNjQ3Mi43NTY4MzU5Mzc1KTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA2NTA4LjU1ODEwNTQ2ODgsIDg5LjAzNDk5NjAzMjcxNSwgLSAxMzIuODM5NTM4NTc0MjIpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMzc1KSBvciAodjE5NyA8PSAxNDI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU25vdyBMdXJrZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTbm93IEx1cmtlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGcm9zdFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vdyBMdXJrZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1NjY4LjEzNzIwNzAzMTMsIDI4LjIwMjUzMTgxNDU3NSwgLSA2NDg0LjYwMDU4NTkzNzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDU2MjguNDgyNDIxODc1LCA1Ny41NzQ5OTY5NDgyNDIsIC0gNjYxOC4zNDgxNDQ1MzEzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE0MjUpIG9yICh2MTk3IDw9IDE0NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTZWEgU29sZGllciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNlYSBTb2xkaWVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZvcmdvdHRlblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2VhIFNvbGRpZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDMwNTQuNTgyNzYzNjcxOSwgMjM2Ljg3MjEzMTM0NzY2LCAtIDEwMTQ3Ljc5MDAzOTA2Myk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAzMTg1LjAxNTM4MDg1OTQsIDU4Ljc4OTA4OTIwMjg4MSwgLSA5NjYzLjYwNjQ0NTMxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPj0gMTQ1MCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIldhdGVyIEZpZ2h0ZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJXYXRlciBGaWdodGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZvcmdvdHRlblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiV2F0ZXIgRmlnaHRlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMzA1NC41ODI3NjM2NzE5LCAyMzYuODcyMTMxMzQ3NjYsIC0gMTAxNDcuNzkwMDM5MDYzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDMyNjIuOTMwMTc1NzgxMywgMjk4LjY5MDM2ODY1MjM0LCAtIDEwNTUyLjUyOTI5Njg3NSk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGlmIFNlYTMgdGhlbgogICAgICAgIGlmICgodjE5NyA9PSAxNTAwKSBvciAodjE5NyA8PSAxNTI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUGlyYXRlIE1pbGxpb25haXJlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUGlyYXRlIE1pbGxpb25haXJlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlBpcmF0ZVBvcnRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlBpcmF0ZSBNaWxsaW9uYWlyZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDUwLjEwNDY0NDc3NTM5MDYsIDEwNy42ODE0NTc1MTk1MzEyNSwgNTk1MC43MjYwNzQyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxOTMuOTkyMjc5MDUyNzM0MzgsIDU2LjEyNTAyNjcwMjg4MDg2LCA1NzU1Ljc4ODA4NTkzNzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTUyNSkgb3IgKHYxOTcgPD0gMTU3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBpc3RvbCBCaWxsaW9uYWlyZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBpc3RvbCBCaWxsaW9uYWlyZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJQaXJhdGVQb3J0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQaXN0b2wgQmlsbGlvbmFpcmUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ1MC4xMDQ2NDQ3NzUzOTA2LCAxMDcuNjgxNDU3NTE5NTMxMjUsIDU5NTAuNzI2MDc0MjE4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTg4LjE0NDYyMjgwMjczNDM4LCA4NC40OTYxMzE4OTY5NzI2NiwgNjMzNy4wNDE5OTIxODc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE1NzUpIG9yICh2MTk3IDw9IDE1OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJEcmFnb24gQ3JldyBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRHJhZ29uIENyZXcgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEcmFnb25DcmV3UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEcmFnb24gQ3JldyBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjczNS4xMTA4Mzk4NDM3NSwgMTI2Ljk5MDQ2MzI1NjgzNTk0LCAtIDcxMS4wOTc5NjE0MjU3ODEyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2NjE1LjIzMzM5ODQzNzUsIDUwLjg0NzY3OTEzODE4MzU5NCwgLSA5NzguOTM0MDgyMDMxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTYwMCkgb3IgKHYxOTcgPD0gMTYyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRyYWdvbiBDcmV3IEFyY2hlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRyYWdvbiBDcmV3IEFyY2hlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEcmFnb25DcmV3UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEcmFnb24gQ3JldyBBcmNoZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2NzM1LjExMDgzOTg0Mzc1LCAxMjYuOTkwNDYzMjU2ODM1OTQsIC0gNzExLjA5Nzk2MTQyNTc4MTIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDY4MTguNTg5MzU1NDY4NzUsIDQ4My43MTg5OTQxNDA2MjUsIDUxMi43MjY4MDY2NDA2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTYyNSkgb3IgKHYxOTcgPD0gMTY0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkh5ZHJhIEVuZm9yY2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSHlkcmEgRW5mb3JjZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVmVub21DcmV3UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJIeWRyYSBFbmZvcmNlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDU0NDYuODc5Mzk0NTMxMywgNjAxLjYyOTQ1NTU2NjQxLCA3NDkuNDU2NzI2MDc0MjIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDQ1NDcuMTE1MjM0Mzc1LCAxMDAxLjYwMjA1MDc4MTI1LCAzMzQuMTk1NDY1MDg3ODkwNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNjUwKSBvciAodjE5NyA8PSAxNjk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiVmVub21vdXMgQXNzYWlsYW50IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiVmVub21vdXMgQXNzYWlsYW50IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlZlbm9tQ3Jld1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiVmVub21vdXMgQXNzYWlsYW50IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTQ0Ni44NzkzOTQ1MzEzLCA2MDEuNjI5NDU1NTY2NDEsIDc0OS40NTY3MjYwNzQyMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNDYzNy44ODUyNTM5MDYyNSwgMTA3Ny44NTU5NTcwMzEyNSwgODgyLjQxODM5NTk5NjA5MzgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTcwMCkgb3IgKHYxOTcgPD0gMTcyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1hcmluZSBDb21tb2RvcmUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNYXJpbmUgQ29tbW9kb3JlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVRyZWVJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNYXJpbmUgQ29tbW9kb3JlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMjE3OS45ODgyODEyNSwgMjguNzMxMjM5MzE4ODQ4LCAtIDY3NDAuMDU1MTc1NzgxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMjE5OC4wMDYzNDc2NTYzLCAxMjguNzEwNzU0Mzk0NTMsIC0gNzEwOS41MDQzOTQ1MzEzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE3MjUpIG9yICh2MTk3IDw9IDE3NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNYXJpbmUgUmVhciBBZG1pcmFsIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFyaW5lIFJlYXIgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYXJpbmVUcmVlSXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIFJlYXIgQWRtaXJhbCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDIxNzkuOTg4MjgxMjUsIDI4LjczMTIzOTMxODg0OCwgLSA2NzQwLjA1NTE3NTc4MTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDMyOTQuMzE0MjA4OTg0NCwgMzg1LjQxMTI1NDg4MjgxLCAtIDcwNDguNjM0Mjc3MzQzOCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNzc1KSBvciAodjE5NyA8PSAxNzk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRmlzaG1hbiBSYWlkZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJGaXNobWFuIFJhaWRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kMyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkZpc2htYW4gUmFpZGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMDU4Mi43NTk3NjU2MjUsIDMzMS43ODg0NTIxNDg0NCwgLSA4NzU3LjY2NjAxNTYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMDU1My4yNjg1NTQ2ODgsIDUyMS4zODQzOTk0MTQwNiwgLSA4MTc2Ljk0NTgwMDc4MTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTgwMCkgb3IgKHYxOTcgPD0gMTgyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZpc2htYW4gQ2FwdGFpbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZpc2htYW4gQ2FwdGFpbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kMyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkZpc2htYW4gQ2FwdGFpbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTA1ODMuMDk5NjA5Mzc1LCAzMzEuNzg4NDUyMTQ4NDQsIC0gODc1OS40NjM4NjcxODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEwNzg5LjQwMTM2NzE4OCwgNDI3LjE4NjM3MDg0OTYxLCAtIDkxMzEuNDQyMzgyODEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxODI1KSBvciAodjE5NyA8PSAxODQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRm9yZXN0IFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZvcmVzdCBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkZvcmVzdCBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEzMjMyLjY2MjEwOTM3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2MjYuNDgxOTMzNTkzOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMzQ4OS4zOTc0NjA5MzgsIDQwMC4zMDM0OTczMTQ0NSwgLSA3NzcwLjI1MTk1MzEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxODUwKSBvciAodjE5NyA8PSAxODk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk15dGhvbG9naWNhbCBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk15dGhvbG9naWNhbCBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEzMjMyLjY2MjEwOTM3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2MjYuNDgxOTMzNTkzOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMzUwOC42MTYyMTA5MzgsIDU4Mi40NjIyODAyNzM0NCwgLSA2OTg1LjMwMzcxMDkzNzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTkwMCkgb3IgKHYxOTcgPD0gMTkyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkp1bmdsZSBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJKdW5nbGUgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSnVuZ2xlIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTI2ODIuMDk2Njc5Njg4LCAzOTAuODg2NTM1NjQ0NTMsIC0gOTkwMi4xMjQwMjM0Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEyMjY3LjEwMzUxNTYyNSwgNDU5Ljc1MjYyNDUxMTcyLCAtIDEwMjc3LjIwMDE5NTMxMyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxOTI1KSBvciAodjE5NyA8PSAxOTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTXVza2V0ZWVyIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk11c2tldGVlciBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNdXNrZXRlZXIgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMjY4Mi4wOTY2Nzk2ODgsIDM5MC44ODY1MzU2NDQ1MywgLSA5OTAyLjEyNDAyMzQzNzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTMyOTEuNTA3ODEyNSwgNTIwLjQ3MzM4ODY3MTg4LCAtIDk5MDQuNjM4NjcxODc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE5NzUpIG9yICh2MTk3IDw9IDE5OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJSZWJvcm4gU2tlbGV0b24iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJSZWJvcm4gU2tlbGV0b24iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSGF1bnRlZFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlJlYm9ybiBTa2VsZXRvbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gOTQ4MC44MDc2MiwgMTQyLjEzMDY2MSwgNTU2Ni4zNzMwNSwgLSAwLjAwNjU1NTAzMDU5LCA0LjUyOTU0MjNlLTgsIC0gMC45OTk5Nzg1NDIsIDIuMDQ5MjA0N2UtOCwgMSwgNC41MTYyMDY4ZS04LCAwLjk5OTk3ODU0MiwgLSAyLjAxOTU1NjhlLTgsIC0gMC4wMDY1NTUwMzA1OSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA4NzYxLjc3MTQ4LCAxODMuNDMxNzQ3LCA2MTY4LjMzMzAxLCAwLjk3ODA3MzU5NywgLSAwLjAwMDAxMzk1MDczMiwgLSAwLjIwODI1OTAxNiwgLSAwLjAwMDAwMTA4MDczOTMsIDEsIC0gMC4wMDAwNzIwNjMwMywgMC4yMDgyNTkwMTYsIDAuMDAwMDcwNzA4MDQsIDAuOTc4MDczNTk3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIwMDApIG9yICh2MTk3IDw9IDIwMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJMaXZpbmcgWm9tYmllIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTGl2aW5nIFpvbWJpZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJIYXVudGVkUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTGl2aW5nIFpvbWJpZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gOTQ4MC44MDc2MiwgMTQyLjEzMDY2MSwgNTU2Ni4zNzMwNSwgLSAwLjAwNjU1NTAzMDU5LCA0LjUyOTU0MjNlLTgsIC0gMC45OTk5Nzg1NDIsIDIuMDQ5MjA0N2UtOCwgMSwgNC41MTYyMDY4ZS04LCAwLjk5OTk3ODU0MiwgLSAyLjAxOTU1NjhlLTgsIC0gMC4wMDY1NTUwMzA1OSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMDEwMy43NTI5LCAyMzguNTY1OTc5LCA2MTc5Ljc1OTc3LCAwLjk5OTQ3NDIyNywgMi43NzU0NzE0ZS04LCAwLjAzMjQyNDAzNjQsIC0gMi41ODAwNjMzZS04LCAxLCAtIDYuMDY4NDg1ZS04LCAtIDAuMDMyNDI0MDM2NCwgNS45ODE2MzllLTgsIDAuOTk5NDc0MjI3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIwMjUpIG9yICh2MTk3IDw9IDIwNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJEZW1vbmljIFNvdWwiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEZW1vbmljIFNvdWwiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSGF1bnRlZFF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkRlbW9uaWMgU291bCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gOTUxNi45OTMxNjQwNjI1LCAxNzguMDA2NTE1NTAyOTMsIDYwNzguNDY1MzMyMDMxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA5NzEyLjAzMTI1LCAyMDQuNjk1ODkyMzMzOTgsIDYxOTMuMzIyMjY1NjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIwNTApIG9yICh2MTk3IDw9IDIwNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBvc2Vzc2VkIE11bW15IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQb3Nlc3NlZCBNdW1teSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gOTUxNi45OTMxNjQwNjI1LCAxNzguMDA2NTE1NTAyOTMsIDYwNzguNDY1MzMyMDMxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA5NTQ1Ljc3NjM2NzE4NzUsIDY5LjYxOTg5NTkzNTA1OSwgNjMzOS41NjE1MjM0Mzc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIwNzUpIG9yICh2MTk3IDw9IDIwOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJQZWFudXQgU2NvdXQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQZWFudXQgU2NvdXQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTnV0c0lzbGFuZFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUGVhbnV0IFNjb3V0IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyMTA1LjUzMTk4LCAzNy4yNDk1OTk1LCAtIDEwMTk1LjUwODgsIC0gMC43NjYwNjE2NjQsIDAsIC0gMC42NDI3Njc2MDgsIDAsIDEsIDAsIDAuNjQyNzY3NjA4LCAwLCAtIDAuNzY2MDYxNjY0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDIxNTAuNTg3ODkwNjI1LCAxMjIuNDk3NjczMDM0NjcsIC0gMTAzNTguOTk0MTQwNjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIxMDApIG9yICh2MTk3IDw9IDIxMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJQZWFudXQgUHJlc2lkZW50IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUGVhbnV0IFByZXNpZGVudCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJOdXRzSXNsYW5kUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQZWFudXQgUHJlc2lkZW50IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyMTA1LjUzMTk4LCAzNy4yNDk1OTk1LCAtIDEwMTk1LjUwODgsIC0gMC43NjYwNjE2NjQsIDAsIC0gMC42NDI3Njc2MDgsIDAsIDEsIDAsIDAuNjQyNzY3NjA4LCAwLCAtIDAuNzY2MDYxNjY0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDIxNTAuNTg3ODkwNjI1LCAxMjIuNDk3NjczMDM0NjcsIC0gMTAzNTguOTk0MTQwNjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIxMjUpIG9yICh2MTk3IDw9IDIxNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJJY2UgQ3JlYW0gQ2hlZiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkljZSBDcmVhbSBDaGVmIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkljZUNyZWFtSXNsYW5kUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJJY2UgQ3JlYW0gQ2hlZiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gODE5LjM3NjcwOSwgNjQuOTI1OTc5NiwgLSAxMDk2Ny4yODMyLCAtIDAuNzY2MDYxNjY0LCAwLCAwLjY0Mjc2NzYwOCwgMCwgMSwgMCwgLSAwLjY0Mjc2NzYwOCwgMCwgLSAwLjc2NjA2MTY2NCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3ODkuOTQxNTI4LCAyMDkuMzgyODg5LCAtIDExMDA5Ljk4MDUsIC0gMC4wNzAzMTAxNTMxLCAiLTAiLCAtIDAuOTk3NTI1MTU2LCAiLTAiLCAxLjAwMDAwMDEyLCAiLTAiLCAwLjk5NzUyNTI3NSwgMCwgLSAwLjA3MDMxMDE0NTYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjE1MCkgb3IgKHYxOTcgPD0gMjE5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkljZSBDcmVhbSBDb21tYW5kZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJJY2UgQ3JlYW0gQ29tbWFuZGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkljZUNyZWFtSXNsYW5kUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJJY2UgQ3JlYW0gQ29tbWFuZGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA4MTkuMzc2NzA5LCA2NC45MjU5Nzk2LCAtIDEwOTY3LjI4MzIsIC0gMC43NjYwNjE2NjQsIDAsIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAtIDAuNjQyNzY3NjA4LCAwLCAtIDAuNzY2MDYxNjY0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDc4OS45NDE1MjgsIDIwOS4zODI4ODksIC0gMTEwMDkuOTgwNSwgLSAwLjA3MDMxMDE1MzEsICItMCIsIC0gMC45OTc1MjUxNTYsICItMCIsIDEuMDAwMDAwMTIsICItMCIsIDAuOTk3NTI1Mjc1LCAwLCAtIDAuMDcwMzEwMTQ1Nik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMjAwKSBvciAodjE5NyA8PSAyMjI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ29va2llIENyYWZ0ZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDb29raWUgQ3JhZnRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ29va2llIENyYWZ0ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDIwMjIuMjk4NTgsIDM2LjkyNzU4OTQsIC0gMTIwMzAuOTc2NiwgLSAwLjk2MTI3MzkwOSwgMCwgLSAwLjI3NTU5NDU5MiwgMCwgMSwgMCwgMC4yNzU1OTQ1OTIsIDAsIC0gMC45NjEyNzM5MDkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMjMyMS43MTIxNiwgMzYuNjk5NDgyLCAtIDEyMjE2Ljc4NzEsIC0gMC43ODAwNzQ5NTQsIDAsIDAuNjI1Njg2MTA5LCAwLCAxLCAwLCAtIDAuNjI1Njg2MTA5LCAwLCAtIDAuNzgwMDc0OTU0KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIyMjUpIG9yICh2MTk3IDw9IDIyNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJDYWtlIEd1YXJkIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ2FrZSBHdWFyZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ2FrZSBHdWFyZCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMjAyMi4yOTg1OCwgMzYuOTI3NTg5NCwgLSAxMjAzMC45NzY2LCAtIDAuOTYxMjczOTA5LCAwLCAtIDAuMjc1NTk0NTkyLCAwLCAxLCAwLCAwLjI3NTU5NDU5MiwgMCwgLSAwLjk2MTI3MzkwOSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNDE4LjExMDExLCAzNi42NzE4OTQxLCAtIDEyMjU1LjczMjQsIDAuMDY3Nzg0NDg4MiwgMCwgMC45OTc3MDAwMzYsIDAsIDEsIDAsIC0gMC45OTc3MDAwMzYsIDAsIDAuMDY3Nzg0NDg4Mik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMjUwKSBvciAodjE5NyA8PSAyMjc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQmFraW5nIFN0YWZmIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQmFraW5nIFN0YWZmIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNha2VRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJCYWtpbmcgU3RhZmYiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE5MjguMzE3NjMsIDM3LjcyOTY2MzgsIC0gMTI4NDAuNjI2LCAwLjk1MTA2ODQwMSwgIi0wIiwgLSAwLjMwODk4MDQ2NSwgMCwgMSwgIi0wIiwgMC4zMDg5ODA0NjUsIDAsIDAuOTUxMDY4NDAxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE5ODAuNDM4NDgsIDM2LjY3MTY3NjYsIC0gMTI5ODMuODQxOCwgLSAwLjI1NDQ0Mzc2NSwgMCwgLSAwLjk2NzA4NzU2NywgMCwgMSwgMCwgMC45NjcwODc1NjcsIDAsIC0gMC4yNTQ0NDM3NjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjI3NSkgb3IgKHYxOTcgPD0gMjI5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkhlYWQgQmFrZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJIZWFkIEJha2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNha2VRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJIZWFkIEJha2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxOTI4LjMxNzYzLCAzNy43Mjk2NjM4LCAtIDEyODQwLjYyNiwgMC45NTEwNjg0MDEsICItMCIsIC0gMC4zMDg5ODA0NjUsIDAsIDEsICItMCIsIDAuMzA4OTgwNDY1LCAwLCAwLjk1MTA2ODQwMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyMjUxLjU3OTEsIDUyLjI3MTQ2MTUsIC0gMTMwMzMuMzk2NSwgLSAwLjk5MTk3MTAxNiwgMCwgLSAwLjEyNjQ2NjA5NSwgMCwgMSwgMCwgMC4xMjY0NjYwOTUsIDAsIC0gMC45OTE5NzEwMTYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjMwMCkgb3IgKHYxOTcgPD0gMjMyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNvY29hIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDb2NvYSBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNob2NRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDb2NvYSBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMjMxLjc1LCAyMy45MDAzMDI5LCAtIDEyMjAwLjI5MiwgLSAxLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAtIDEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDE2Ny45Nzg1MTYsIDI2LjIyNTQ2NTgsIC0gMTIyMzguODc0LCAtIDAuOTM5NzAwOTYxLCAwLCAwLjM0MTk5ODM2OSwgMCwgMSwgMCwgLSAwLjM0MTk5ODM2OSwgMCwgLSAwLjkzOTcwMDk2MSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMzI1KSBvciAodjE5NyA8PSAyMzQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNob2NRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygyMzEuNzUsIDIzLjkwMDMwMjksIC0gMTIyMDAuMjkyLCAtIDEsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIC0gMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNzAxLjMxMjA3MywgMjUuNTgyNDk4NiwgLSAxMjcwOC4yMTQ4LCAtIDAuMzQyMDQyNjg1LCAwLCAtIDAuOTM5Njg0MzkxLCAwLCAxLCAwLCAwLjkzOTY4NDM5MSwgMCwgLSAwLjM0MjA0MjY4NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMzUwKSBvciAodjE5NyA8PSAyMzc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU3dlZXQgVGhpZWYiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTd2VldCBUaGllZiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDaG9jUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU3dlZXQgVGhpZWYiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxNTEuMTk4MjQyLCAyMy44OTA3MTQ2LCAtIDEyNzc0LjYxNzIsIDAuNDIyNTkyOTk4LCAwLCAwLjkwNjMxOTYxOCwgMCwgMSwgMCwgLSAwLjkwNjMxOTYxOCwgMCwgMC40MjI1OTI5OTgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTQwLjI1ODMwMSwgMjUuNTgyNDk4NiwgLSAxMjY1Mi4zMTE1LCAwLjE3MzYyNDMzNywgIi0wIiwgLSAwLjk4NDgxMTkwMiwgMCwgMSwgIi0wIiwgMC45ODQ4MTE5MDIsIDAsIDAuMTczNjI0MzM3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIzNzUpIG9yICh2MTk3IDw9IDI0MDApIG9yIChTZWxlY3RNb25zdGVyID09ICJDYW5keSBSZWJlbCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNhbmR5IFJlYmVsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNob2NRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDYW5keSBSZWJlbCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDE1MS4xOTgyNDIsIDIzLjg5MDcxNDYsIC0gMTI3NzQuNjE3MiwgMC40MjI1OTI5OTgsIDAsIDAuOTA2MzE5NjE4LCAwLCAxLCAwLCAtIDAuOTA2MzE5NjE4LCAwLCAwLjQyMjU5Mjk5OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNDcuOTIzMTQ1MywgMjUuNTgyNDk4NiwgLSAxMzAyOS4yNDAyLCAtIDAuODE5MTU2MDUxLCAwLCAtIDAuNTczNTcxMjY1LCAwLCAxLCAwLCAwLjU3MzU3MTI2NSwgMCwgLSAwLjgxOTE1NjA1MSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNDAwKSBvciAodjE5NyA8PSAyNDI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ2FuZHkgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ2FuZHkgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNhbmR5UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ2FuZHkgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMTQ5LjMyOCwgMTMuNTc1OTAzOSwgLSAxNDQ0NS42MTQzLCAtIDAuMTU2NDQ2MDk5LCAwLCAtIDAuOTg3Njg2NTc0LCAwLCAxLCAwLCAwLjk4NzY4NjU3NCwgMCwgLSAwLjE1NjQ0NjA5OSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNDM3LjU2MzQ4LCAxNy4xNDgxMjg1LCAtIDE0Mzg1LjY5MzQsIDAuMTczNjI0MzM3LCAiLTAiLCAtIDAuOTg0ODExOTAyLCAwLCAxLCAiLTAiLCAwLjk4NDgxMTkwMiwgMCwgMC4xNzM2MjQzMzcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjQyNSkgb3IgKHYxOTcgPD0gMjQ0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNub3cgRGVtb24iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTbm93IERlbW9uIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNhbmR5UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vdyBEZW1vbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTE0OS4zMjgsIDEzLjU3NTkwMzksIC0gMTQ0NDUuNjE0MywgLSAwLjE1NjQ0NjA5OSwgMCwgLSAwLjk4NzY4NjU3NCwgMCwgMSwgMCwgMC45ODc2ODY1NzQsIDAsIC0gMC4xNTY0NDYwOTkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gOTE2LjIyMjY1NiwgMTcuMTQ4MTI4NSwgLSAxNDYzOC44MTI1LCAwLjg2NjAwNzI2OCwgMCwgMC41MDAwMzE0MTIsIDAsIDEsIDAsIC0gMC41MDAwMzE0MTIsIDAsIDAuODY2MDA3MjY4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI0NTApIG9yICh2MTk3IDw9IDI0NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJJc2xlIE91dGxhdyIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIklzbGUgT3V0bGF3IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJJc2xlIE91dGxhdyI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY1NDkuODkwNjI1LCA1NS42ODYzNTU1OTA4MjAzMSwgLSAxNzkuOTEzNjA0NzM2MzI4MTIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTYxNjIuODE5MzM1OTM3NSwgMTEuNjg2MzM3NDcxMDA4MywgLSA5Ni40NTQ4MTg3MjU1ODU5NCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNDc1KSBvciAodjE5NyA8PSAyNDk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSXNsYW5kIEJveSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIklzbGFuZCBCb3kiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIklzbGFuZCBCb3kiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NTQ5Ljg5MDYyNSwgNTUuNjg2MzU1NTkwODIwMzEsIC0gMTc5LjkxMzYwNDczNjMyODEyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2MzU3LjMxMjUsIDIwLjYzMjgyMjAzNjc0MzE2NCwgMTAwNS42NDg5MjU3ODEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNTAwKSBvciAodjE5NyA8PSAyNTI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU3VuLWtpc3NlZCBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU3VuLWtpc3NlZCBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTdW4ta2lzc2VkIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NTQxLjAyMTQ4NDM3NSwgNTQuNzcwODEyOTg4MjgxMjUsIDEwNTEuNDYxMTgxNjQwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2MzU3LjMxMjUsIDIwLjYzMjgyMjAzNjc0MzE2NCwgMTAwNS42NDg5MjU3ODEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNTI1KSBvciAodjE5NyA8PSAyNTQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSXNsZSBDaGFtcGlvbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIklzbGUgQ2hhbXBpb24iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIklzbGUgQ2hhbXBpb24iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NTQxLjAyMTQ4NDM3NSwgNTQuNzcwODEyOTg4MjgxMjUsIDEwNTEuNDYxMTgxNjQwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2ODQ4Ljk0MTQwNjI1LCAyMS42ODYzMzQ2MDk5ODUzNSwgMTA0MS40NDkwOTY2Nzk2ODc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI1NTApIG9yICh2MTk3IDw9IDI1NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTZXJwZW50IEh1bnRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNlcnBlbnQgSHVudGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDMiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTZXJwZW50IEh1bnRlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY2NjUuMTkxNDA2MjUsIDEwNC41OTY0MDUwMjkyOTY4OCwgMTU3OS42OTQzMzU5Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2NjIxLjQxNDA2MjUsIDEyMS40MDYzMTEwMzUxNTYyNSwgMTI5MC42ODgxMTAzNTE1NjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI1NzUpIG9yICh2MTk3IDw9IDI1OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTa3VsbCBTbGF5ZXIiKSBvciAodjE5NyA9PSAyNjAwKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTa3VsbCBTbGF5ZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNrdWxsIFNsYXllciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY2NjUuMTkxNDA2MjUsIDEwNC41OTY0MDUwMjkyOTY4OCwgMTU3OS42OTQzMzU5Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2ODExLjU3MDMxMjUsIDg0LjYyNTI0NDE0MDYyNSwgMTU0Mi4yMzUxMDc0MjE4NzUpOwogICAgICAgIGVuZAogICAgZW5kCmVuZAppZiBTZWExIHRoZW4KICAgIHRhYmxlTW9uID0gewogICAgICAgICJCYW5kaXQiLAogICAgICAgICJNb25rZXkiLAogICAgICAgICJHb3JpbGxhIiwKICAgICAgICAiUGlyYXRlIiwKICAgICAgICAiQnJ1dGUiLAogICAgICAgICJEZXNlcnQgQmFuZGl0IiwKICAgICAgICAiRGVzZXJ0IE9mZmljZXIiLAogICAgICAgICJTbm93IEJhbmRpdCIsCiAgICAgICAgIlNub3dtYW4iLAogICAgICAgICJDaGllZiBQZXR0eSBPZmZpY2VyIiwKICAgICAgICAiU2t5IEJhbmRpdCIsCiAgICAgICAgIkRhcmsgTWFzdGVyIiwKICAgICAgICAiUHJpc29uZXIiLAogICAgICAgICJEYW5nZXJvdXMgUHJpc29uZXIiLAogICAgICAgICJUb2dhIFdhcnJpb3IiLAogICAgICAgICJHbGFkaWF0b3IiLAogICAgICAgICJNaWxpdGFyeSBTb2xkaWVyIiwKICAgICAgICAiTWlsaXRhcnkgU3B5IiwKICAgICAgICAiRmlzaG1hbiBXYXJyaW9yIiwKICAgICAgICAiRmlzaG1hbiBDb21tYW5kbyIsCiAgICAgICAgIkdvZCdzIEd1YXJkIiwKICAgICAgICAiU2hhbmRhIiwKICAgICAgICAiUm95YWwgU3F1YWQiLAogICAgICAgICJSb3lhbCBTb2xkaWVyIiwKICAgICAgICAiR2FsbGV5IFBpcmF0ZSIsCiAgICAgICAgIkdhbGxleSBDYXB0YWluIgogICAgfTsKZWxzZWlmIFNlYTIgdGhlbgogICAgdGFibGVNb24gPSB7CiAgICAgICAgIlJhaWRlciIsCiAgICAgICAgIk1lcmNlbmFyeSIsCiAgICAgICAgIlN3YW4gUGlyYXRlIiwKICAgICAgICAiRmFjdG9yeSBTdGFmZiIsCiAgICAgICAgIk1hcmluZSBMaWV1dGVuYW50IiwKICAgICAgICAiTWFyaW5lIENhcHRhaW4iLAogICAgICAgICJab21iaWUiLAogICAgICAgICJWYW1waXJlIiwKICAgICAgICAiU25vdyBUcm9vcGVyIiwKICAgICAgICAiV2ludGVyIFdhcnJpb3IiLAogICAgICAgICJMYWIgU3Vib3JkaW5hdGUiLAogICAgICAgICJIb3JuZWQgV2FycmlvciIsCiAgICAgICAgIk1hZ21hIE5pbmphIiwKICAgICAgICAiTGF2YSBQaXJhdGUiLAogICAgICAgICJTaGlwIERlY2toYW5kIiwKICAgICAgICAiU2hpcCBFbmdpbmVlciIsCiAgICAgICAgIlNoaXAgU3Rld2FyZCIsCiAgICAgICAgIlNoaXAgT2ZmaWNlciIsCiAgICAgICAgIkFyY3RpYyBXYXJyaW9yIiwKICAgICAgICAiU25vdyBMdXJrZXIiLAogICAgICAgICJTZWEgU29sZGllciIsCiAgICAgICAgIldhdGVyIEZpZ2h0ZXIiCiAgICB9OwplbHNlaWYgU2VhMyB0aGVuCiAgICB0YWJsZU1vbiA9IHsKICAgICAgICAiUGlyYXRlIE1pbGxpb25haXJlIiwKICAgICAgICAiRHJhZ29uIENyZXcgV2FycmlvciIsCiAgICAgICAgIkRyYWdvbiBDcmV3IEFyY2hlciIsCiAgICAgICAgIkh5ZHJhIEVuZm9yY2VyIiwKICAgICAgICAiVmVub21vdXMgQXNzYWlsYW50IiwKICAgICAgICAiTWFyaW5lIENvbW1vZG9yZSIsCiAgICAgICAgIk1hcmluZSBSZWFyIEFkbWlyYWwiLAogICAgICAgICJGaXNobWFuIFJhaWRlciIsCiAgICAgICAgIkZpc2htYW4gQ2FwdGFpbiIsCiAgICAgICAgIkZvcmVzdCBQaXJhdGUiLAogICAgICAgICJNeXRob2xvZ2ljYWwgUGlyYXRlIiwKICAgICAgICAiSnVuZ2xlIFBpcmF0ZSIsCiAgICAgICAgIk11c2tldGVlciBQaXJhdGUiLAogICAgICAgICJSZWJvcm4gU2tlbGV0b24iLAogICAgICAgICJMaXZpbmcgWm9tYmllIiwKICAgICAgICAiRGVtb25pYyBTb3VsIiwKICAgICAgICAiUG9zZXNzZWQgTXVtbXkiLAogICAgICAgICJQZWFudXQgU2NvdXQiLAogICAgICAgICJQZWFudXQgUHJlc2lkZW50IiwKICAgICAgICAiSWNlIENyZWFtIENoZWYiLAogICAgICAgICJJY2UgQ3JlYW0gQ29tbWFuZGVyIiwKICAgICAgICAiQ29va2llIENyYWZ0ZXIiLAogICAgICAgICJDYWtlIEd1YXJkIiwKICAgICAgICAiQmFraW5nIFN0YWZmIiwKICAgICAgICAiSGVhZCBCYWtlciIsCiAgICAgICAgIkNvY29hIFdhcnJpb3IiLAogICAgICAgICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiLAogICAgICAgICJTd2VldCBUaGllZiIsCiAgICAgICAgIkNhbmR5IFJlYmVsIiwKICAgICAgICAiQ2FuZHkgUGlyYXRlIiwKICAgICAgICAiU25vdyBEZW1vbiIsCiAgICAgICAgIklzbGUgT3V0bGF3IiwKICAgICAgICAiSXNsYW5kIEJveSIsCiAgICAgICAgIlN1bi1raXNzZWQgV2FycmlvciIsCiAgICAgICAgIklzbGUgQ2hhbXBpb24iLAogICAgICAgICJTZXJwZW50IEh1bnRlciIsCiAgICAgICAgIlNrdWxsIFNsYXllciIKICAgIH07CmVuZAppZiBTZWExIHRoZW4KICAgIEFyZWFMaXN0ID0gewogICAgICAgICJKdW5nbGUiLAogICAgICAgICJCdWdneSIsCiAgICAgICAgIkRlc2VydCIsCiAgICAgICAgIlNub3ciLAogICAgICAgICJNYXJpbmUiLAogICAgICAgICJTa3kiLAogICAgICAgICJQcmlzb24iLAogICAgICAgICJDb2xvc3NldW0iLAogICAgICAgICJNYWdtYSIsCiAgICAgICAgIkZpc2htYW4iLAogICAgICAgICJTa3kgSXNsYW5kIiwKICAgICAgICAiRm91bnRhaW4iCiAgICB9OwplbHNlaWYgU2VhMiB0aGVuCiAgICBBcmVhTGlzdCA9IHsKICAgICAgICAiQXJlYSAxIiwKICAgICAgICAiQXJlYSAyIiwKICAgICAgICAiWm9tYmllIiwKICAgICAgICAiTWFyaW5lIiwKICAgICAgICAiU25vdyBNb3VudGFpbiIsCiAgICAgICAgIkljZSBmaXJlIiwKICAgICAgICAiU2hpcCIsCiAgICAgICAgIkZyb3N0IiwKICAgICAgICAiRm9yZ290dGVuIgogICAgfTsKZWxzZWlmIFNlYTMgdGhlbgogICAgQXJlYUxpc3QgPSB7CiAgICAgICAgIlBpcmF0ZSBQb3J0IiwKICAgICAgICAiQW1hem9uIiwKICAgICAgICAiTWFyaW5lIFRyZWUiLAogICAgICAgICJEZWVwIEZvcmVzdCIsCiAgICAgICAgIkhhdW50ZWQgQ2FzdGxlIiwKICAgICAgICAiTnV0IElzbGFuZCIsCiAgICAgICAgIkljZSBDcmVhbSBJc2xhbmQiLAogICAgICAgICJDYWtlIElzbGFuZCIsCiAgICAgICAgIkNob2NvIElzbGFuZCIsCiAgICAgICAgIkNhbmR5IElzbGFuZCIsCiAgICAgICAgIlRpa2kgT3V0cG9zdCIKICAgIH07CmVuZApmdW5jdGlvbiBDaGVja0Jvc3NRdWVzdCgpCiAgICBpZiBTZWExIHRoZW4KICAgICAgICBpZiAoU2VsZWN0Qm9zcyA9PSAiVGhlIEdvcmlsbGEgS2luZyIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJUaGUgR29yaWxsYSBLaW5nIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiVGhlIEdvcnJpbGEgS2luZyI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSnVuZ2xlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDIsMDAwXG43LDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMTYwMS42NTUzOTU1MDc4LCAzNi44NTIxMzQ3MDQ1OSwgMTUzLjM4ODA5MjA0MTAyKTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxMDg4Ljc1OTc3LCA4LjEzNDYzNzgzLCAtIDQ4OC41NTk5MDYsIC0gMC43MDcxMzQyNDcsIDAsIDAuNzA3MDc5MjkxLCAwLCAxLCAwLCAtIDAuNzA3MDc5MjkxLCAwLCAtIDAuNzA3MTM0MjQ3KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkJvYmJ5IikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkJvYmJ5IjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQm9iYnkiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkJ1Z2d5UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQ4LDAwMFxuMzUsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAxMTQwLjE3NjE0NzQ2MDksIDQuNzUyMDQ5NDQ2MTA2LCAzODI3LjQwNTc2MTcxODgpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDEwODcuMzc2MDk4NjMyOCwgNDYuOTQ5NDA5NDg0ODYzLCA0MDQwLjE0NjI0MDIzNDQpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiVGhlIFNhdyIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJUaGUgU2F3IjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiVGhlIFNhdyI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNzg0Ljg5NzE1NTc2MTcyLCA3Mi40MjczODM0MjI4NTIsIDE2MDMuNTgyMjc1MzkwNik7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJZZXRpIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIllldGkiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJZZXRpIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJTbm93UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDEwLDAwMFxuMTgwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDEzODYuODA3MzczMDQ2OSwgODcuMjcyNzg5MDAxNDY1LCAtIDEyOTguMzU3NjY2MDE1Nik7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDEyMTguNzk1NjU0Mjk2OSwgMTM4LjAxMTg0MDgyMDMxLCAtIDE0ODguMDI2MjQ1MTE3Mik7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJNb2IgTGVhZGVyIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIk1vYiBMZWFkZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJNb2IgTGVhZGVyIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAyODQ0LjczMDcxMjg5MDYsIDcuNDE4MDUwMjg5MTU0MSwgNTM1Ni42NzIzNjMyODEzKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlZpY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJWaWNlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJWaWNlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIk1hcmluZVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMjsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTAsMDAwXG4xODAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA1MDM2LjI0NjU4MjAzMTMsIDI4LjY3NzgzNTQ2NDQ3OCwgNDMyNC41NjY0MDYyNSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNTAwNi41NDU0MTAxNTYzLCA4OC4wMzIwODE2MDQwMDQsIDQzNTMuMTYyMTA5Mzc1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlNhYmVyIEV4cGVydCIpIHRoZW4KICAgICAgICAgICAgTmFtZUJvc3MgPSAiU2FiZXIgRXhwZXJ0IjsKICAgICAgICAgICAgQm9zc01vbiA9ICJTYWJlciBFeHBlcnQiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDE0NTguODk1MDIsIDI5Ljg4NzAzMzUsIC0gNTAuNjMzNTY0KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIldhcmRlbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJXYXJkZW4iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJXYXJkZW4iOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkltcGVsUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDE7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDYsMDAwXG44NTAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg1Mjc4LjA0OTMyLCAyLjE1MTY3NDc1LCA5NDQuMTAxOTI5LCAwLjIyMDU0Njk2MSwgLSAwLjAwMDAwNDQ5OTQ2NCwgMC45NzUzNzY0MjcsIC0gMC4wMDAwMTk1NDEyNTgsIDEsIDAuMDAwMDA5MDMxNjIxLCAtIDAuOTc1Mzc2NDI3LCAtIDAuMDAwMDIxMDUxOTc2LCAwLjIyMDU0Njk2MSk7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1MTkxLjg2MTMzLCAyLjg0MDIwNjg2LCA2ODYuNDM4NzIxLCAtIDAuNzMxMzg0NjM1LCAwLCAwLjY4MTk2NTE3MiwgMCwgMSwgMCwgLSAwLjY4MTk2NTE3MiwgMCwgLSAwLjczMTM4NDYzNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJDaGllZiBXYXJkZW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQ2hpZWYgV2FyZGVuIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQ2hpZWYgV2FyZGVuIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJJbXBlbFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAyOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxMCwwMDBcbjEsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTIwNi45MjU3OCwgMC45OTc3NTMzODIsIDgxNC45NzY3NDYsIDAuMzQyMDQxMzQzLCAtIDAuMDAwNjI5MTU2NzcsIDAuOTM5Njg0NzQ5LCAwLjAwMTkxNjQ1Mzk0LCAwLjk5OTk5ODE1MiwgLSAwLjAwMDAyODA0MjIzNCwgLSAwLjkzOTY4Mjk2MSwgMC4wMDE4MTA0NTQwNiwgMC4zNDIwNDE5MzkpOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTE5MS44NjEzMywgMi44NDAyMDY4NiwgNjg2LjQzODcyMSwgLSAwLjczMTM4NDYzNSwgMCwgMC42ODE5NjUxNzIsIDAsIDEsIDAsIC0gMC42ODE5NjUxNzIsIDAsIC0gMC43MzEzODQ2MzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiU3dhbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJTd2FuIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiU3dhbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSW1wZWxRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTUsMDAwXG4xLDYwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDUzMjUuMDk2MTksIDcuMDM5MDY1ODQsIDcxOS41NzA2NzksIC0gMC4zMDkwNjA4MTIsIDAsIDAuOTUxMDQyMjM1LCAwLCAxLCAwLCAtIDAuOTUxMDQyMjM1LCAwLCAtIDAuMzA5MDYwODEyKTsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDUxOTEuODYxMzMsIDIuODQwMjA2ODYsIDY4Ni40Mzg3MjEsIC0gMC43MzEzODQ2MzUsIDAsIDAuNjgxOTY1MTcyLCAwLCAxLCAwLCAtIDAuNjgxOTY1MTcyLCAwLCAtIDAuNzMxMzg0NjM1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIk1hZ21hIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiTWFnbWEgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIk1hZ21hIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIk1hZ21hUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuMiw4MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA1MzE0LjYyMjA3MDMxMjUsIDEyLjI2MjQyMDY1NDI5NywgODUxNy4yNzkyOTY4NzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDU3NjUuODk2OTcyNjU2MywgODIuOTIwNjQ2NjY3NDgsIDg3MTguMzA0Njg3NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJGaXNobWFuIExvcmQiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiRmlzaG1hbiBMb3JkIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiRmlzaG1hbiBMb3JkIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJGaXNobWFuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuNCwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNjExMjIuNjUyMzQzNzUsIDE4LjQ5NzQ0MjI0NTQ4MywgMTU2OS4zOTk3ODAyNzM0KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNjEyNjAuMTUyMzQzNzUsIDMwLjk1MDg4MTk1ODAwOCwgMTE5My40MzI5ODMzOTg0KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIld5c3BlciIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJXeXNwZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJXeXNwZXIiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIlNreUV4cDFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTUsMDAwXG40LDgwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDc4NjEuOTQ3MjY1NjI1LCA1NTQ1LjUxNzU3ODEyNSwgLSAzNzkuODU5NzQxMjEwOTQpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDc4NjYuMTMzMzAwNzgxMywgNTU3Ni40MzExNTIzNDM4LCAtIDU0Ni43NDgxNjg5NDUzMSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJUaHVuZGVyIEdvZCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJUaHVuZGVyIEdvZCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlRodW5kZXIgR29kIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJTa3lFeHAyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDIwLDAwMFxuNSw4MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA3OTAzLjM4MjgxMjUsIDU2MzUuOTg5NzQ2MDkzOCwgLSAxNDEwLjkyMzgyODEyNSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNzk5NC45ODQzNzUsIDU3NjEuMDI1MzkwNjI1LCAtIDIwODguNjQ3OTQ5MjE4OCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJDeWJvcmciKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQ3lib3JnIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQ3lib3JnIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJGb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyMCwwMDBcbjcsNTAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDUyNTguMjc4ODA4NTkzOCwgMzguNTI2OTMxNzYyNjk1LCA0MDUwLjA0NDkyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDYwOTQuMDI0OTAyMzQzOCwgNzMuNzcwMDUwMDQ4ODI4LCAzODI1LjczNDg2MzI4MTMpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiSWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiSWNlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJJY2UgQWRtaXJhbCI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDEyNjYuMDg5NDgsIDI2LjE3NTc5NDYsIC0gMTM5OS41NzY3OCwgLSAwLjU3MzU5OTIxOSwgMCwgLSAwLjgxOTEzNjU2LCAwLCAxLCAwLCAwLjgxOTEzNjU2LCAwLCAtIDAuNTczNTk5MjE5KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkdyZXliZWFyZCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJHcmV5YmVhcmQiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJHcmV5YmVhcmQiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDUwODEuMzQ1MjE0ODQzOCwgODUuMjIxNjQxNTQwNTI3LCA0MjU3LjM1ODg4NjcxODgpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBpZiBTZWEyIHRoZW4KICAgICAgICBpZiAoU2VsZWN0Qm9zcyA9PSAiRGlhbW9uZCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJEaWFtb25kIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiRGlhbW9uZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiQXJlYTFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjUsMDAwXG45LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDQyNy41NjY2ODA5MDgyLCA3My4zMTM3ODE3MzgyODEsIDE4MzUuNDIwODk4NDM3NSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTU3Ni43MTY2NzQ4MDQ3LCAxOTguNTkyNjUxMzY3MTksIDEzLjcyNDI4NjA3OTQwNyk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJKZXJlbXkiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiSmVyZW15IjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiSmVyZW15IjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJBcmVhMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyNSwwMDBcbjExLDUwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg2MzYuNzk5NDM4NDc2NTYsIDczLjQxMzc4Nzg0MTc5NywgOTE4LjAwNDE1MDM5MDYzKTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoMjAwNi45MjYxNDc0NjA5LCA0NDguOTU2NjY1MDM5MDYsIDg1My45ODI4NDkxMjEwOSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJGYWppdGEiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiRmFqaXRhIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiRmFqaXRhIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJNYXJpbmVRdWVzdDMiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDI1LDAwMFxuMTUsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMjQ0MS45ODYzMjgxMjUsIDczLjM1OTM0NDQ4MjQyMiwgLSAzMjE3LjUzMjQ3MDcwMzEpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDIxNzIuNzM5OTkwMjM0NCwgMTAzLjMyMjE2NjQ0Mjg3LCAtIDQwMTUuMDI1MzkwNjI1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkRvbiBTd2FuIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkRvbiBTd2FuIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiRG9uIFN3YW4iOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygyMjg2LjIwMDQzOTQ1MzEsIDE1LjE3NzgzOTI3OTE3NSwgODYzLjgzODg2NzE4NzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiU21va2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJTbW9rZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiU21va2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSWNlU2lkZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyMCwwMDBcbjI1LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDU0MjkuMDQ3MzYzMjgxMywgMTUuOTc3NTY1NzY1MzgxLCAtIDUyOTcuOTYxNDI1NzgxMyk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNTI3NS4xOTg3MzA0Njg4LCAyMC43NTcyNTc0NjE1NDgsIC0gNTI2MC42NjY5OTIxODc1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkF3YWtlbmVkIEljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkF3YWtlbmVkIEljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQXdha2VuZWQgSWNlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkZyb3N0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDIwLDAwMFxuMzYsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDU2NjguOTc4MDI3MzQzOCwgMjguNTE5OTg5MDEzNjcyLCAtIDY0ODMuMzUyMDUwNzgxMyk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDY0MDMuNTQzOTQ1MzEyNSwgMzQwLjI5NzY2ODQ1NzAzLCAtIDY4OTQuNTU5NTcwMzEyNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJUaWRlIEtlZXBlciIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJUaWRlIEtlZXBlciI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlRpZGUgS2VlcGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJGb3Jnb3R0ZW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTIsNTAwXG4zOCwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAzMDUzLjk4MTQ0NTMxMjUsIDIzNy4xODk1NDQ2Nzc3MywgLSAxMDE0NS4wMzkwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAzNzk1LjY0MjMzMzk4NDQsIDEwNS44ODg3NzEwNTcxMywgLSAxMTQyMS4zMDc2MTcxODgpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiRGFya2JlYXJkIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkRhcmtiZWFyZCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkRhcmtiZWFyZCI7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMzY3Ny4wODIwMzEyNSwgNjIuNzUxOTM3ODY2MjExLCAtIDMxNDQuODMzMjUxOTUzMSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJDdXJzZWQgQ2FwdGFpbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJDdXJzZWQgQ2FwdGFpbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkN1cnNlZCBDYXB0YWluIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoOTE2LjkyODU4OSwgMTgxLjA5Mjc3MywgMzM0MjIpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiT3JkZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiT3JkZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJPcmRlciI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNjIxNy4yMDIxNDg0Mzc1LCAyOC4wNDc2NDU1Njg4NDgsIC0gNTA1My4xMzU3NDIxODc1KTsKICAgICAgICBlbmQKICAgIGVuZAogICAgaWYgU2VhMyB0aGVuCiAgICAgICAgaWYgKFNlbGVjdEJvc3MgPT0gIlN0b25lIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlN0b25lIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiU3RvbmUiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIlBpcmF0ZVBvcnRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjUsMDAwXG40MCwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAyODkuNzY3MDU5MzI2MTcsIDQzLjgxOTAxMTY4ODIzMiwgNTU3OS45Mzg0NzY1NjI1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxMDI3LjY1MTI0NTExNzIsIDkyLjQwNDE3NDgwNDY4OCwgNjU3OC44NTMwMjczNDM4KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkh5ZHJhIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJIeWRyYSBMZWFkZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJIeWRyYSBMZWFkZXIiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIlZlbm9tQ3Jld1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQzMCwwMDBcbjUyLDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1NDQ1Ljk1NDEwMTU2MjUsIDYwMS42Mjk0NTU1NjY0MSwgNzUxLjQzNzkyNzI0NjA5KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTU0My44NjMyODEyNSwgNjY4Ljk3Mzk5OTAyMzQ0LCAxOTkuMDM0MTc5Njg3NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJLaWxvIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiS2lsbyBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiS2lsbyBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJNYXJpbmVUcmVlSXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQzNSwwMDBcbjU2LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygyMTc5LjMwMTAyNTM5MDYsIDI4LjczMTIzOTMxODg0OCwgLSA2NzM5Ljk3NDEyMTA5MzgpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygyNzY0LjIyMzM4ODY3MTksIDQzMi40NjE1NDc4NTE1NiwgLSA3MTQ0LjQ1ODAwNzgxMjUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJDYXB0YWluIEVsZXBoYW50IjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQ2FwdGFpbiBFbGVwaGFudCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRGVlcEZvcmVzdElzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kNDAsMDAwXG42NywwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAxMzIzMi42ODI2MTcxODgsIDMzMi40MDM5NjExODE2NCwgLSA3NjI2LjAxMTcxODc1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxMzM3Ni43NTc4MTI1LCA0MzMuMjg2ODk1NzUxOTUsIC0gODA3MS4zOTI1NzgxMjUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJCZWF1dGlmdWwgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQmVhdXRpZnVsIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRGVlcEZvcmVzdElzbGFuZDIiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDUwLDAwMFxuNzAsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMTI2ODIuMDk2Njc5Njg4LCAzOTAuODg2NTM1NjQ0NTMsIC0gOTkwMi4xMjQwMjM0Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTI4My42MDkzNzUsIDIyLjU2MjIzNDg3ODU0LCAtIDExMC43ODI4NTIxNzI4NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkNha2UgUXVlZW4iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJDYWtlIFF1ZWVuIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJJY2VDcmVhbUlzbGFuZFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQzMCwwMDBcbjExMiw1MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA4MTkuMzc2NzA5LCA2NC45MjU5Nzk2LCAtIDEwOTY3LjI4MzIsIC0gMC43NjYwNjE2NjQsIDAsIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAtIDAuNjQyNzY3NjA4LCAwLCAtIDAuNzY2MDYxNjY0KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA2NzguNjQ4ODA0LCAzODEuMzUzOTQzLCAtIDExMTE0LjIwMTIsIC0gMC45MDg2NDE4MTUsIDAuMDAxNDkyOTQzMzgsIDAuNDE3NTczNzgsIDAuMDA4MzcxMTQ5MTksIDAuOTk5ODU3ODQzLCAwLjAxNDY0MDg5MjksIC0gMC40MTc0OTI1NjgsIDAuMDE2Nzk4ODk4NiwgLSAwLjkwODUyNDk5KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkxvbmdtYSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJMb25nbWEiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJMb25nbWEiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDEwMjM4Ljg3NTk3NjU2MywgMzg5Ljc5MTI5MDI4MzIsIC0gOTU0OS43OTM5NDUzMTI1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlNvdWwgUmVhcGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiU291bCBSZWFwZXIiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDk1MjQuNzg5MDYyNSwgMzE1LjgwNDI5MDc3MTQ4LCA2NjU1LjcxOTIzODI4MTMpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAicmlwX2luZHJhIFRydWUgRm9ybSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJyaXBfaW5kcmEgVHJ1ZSBGb3JtIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAicmlwX2luZHJhIFRydWUgRm9ybSI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNTQxNS4zOTIwODk4NDM4LCA1MDUuNzQxMzMzMDA3ODEsIC0gMjgxNC4wMTY2MDE1NjI1KTsKICAgICAgICBlbmQKICAgIGVuZAplbmQKZnVuY3Rpb24gTWF0ZXJpYWxNb24oKQogICAgaWYgKFNlbGVjdE1hdGVyaWFsID09ICJSYWRpb2FjdGl2ZSBNYXRlcmlhbCIpIHRoZW4KICAgICAgICBNTW9uID0gIkZhY3RvcnkgU3RhZmYiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDI5NSwgNzMsIC0gNTYpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiTXlzdGljIERyb3BsZXQiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJXYXRlciBGaWdodGVyIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDMzODUsIDIzOSwgLSAxMDU0Mik7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJNYWdtYSBPcmUiKSB0aGVuCiAgICAgICAgaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiTWlsaXRhcnkgU3B5IjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA1ODE1LCA4NCwgODgyMCk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEyIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJNYWdtYSBOaW5qYSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNTQyOCwgNzgsIC0gNTk1OSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiQW5nZWwgV2luZ3MiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJHb2QncyBHdWFyZCI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA0Njk4LCA4NDUsIC0gMTkxMik7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDc4NTkuMDk4MTQsIDU1NDQuMTkwNDMsIC0gMzgxLjQ3NjE5NikpLk1hZ25pdHVkZSA+PSA1MDAwKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNzg1OS4wOTgxNCwgNTU0NC4xOTA0MywgLSAzODEuNDc2MTk2KSk7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJMZWF0aGVyIikgdGhlbgogICAgICAgIGlmIFNlYTEgdGhlbgogICAgICAgICAgICBNTW9uID0gIkJydXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMTQ1LCAxNSwgNDM1MCk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEyIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJNYXJpbmUgQ2FwdGFpbiI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMjAxMC41MDU5ODE0NDUzMTI1LCA3My4wMDExNTk2Njc5Njg3NSwgLSAzMzI2LjYyMDg0OTYwOTM3NSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEzIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJKdW5nbGUgUGlyYXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMTk3NS43ODUxNTYyNSwgMzMxLjc3MzQwNjk4MjQyMTksIC0gMTA2MjAuMDMwMjczNDM3NSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiU2NyYXAgTWV0YWwiKSB0aGVuCiAgICAgICAgaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiQnJ1dGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDExNDUsIDE1LCA0MzUwKTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTIgdGhlbgogICAgICAgICAgICBNTW9uID0gIlN3YW4gUGlyYXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoODc4LCAxMjIsIDEyMzUpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMyB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiSnVuZ2xlIFBpcmF0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTIxMDcsIDMzMiwgLSAxMDU0OSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiRmlzaCBUYWlsIikgdGhlbgogICAgICAgIGlmIFNlYTMgdGhlbgogICAgICAgICAgICBNTW9uID0gIkZpc2htYW4gUmFpZGVyIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMDk5MywgMzMyLCAtIDg5NDApOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiRmlzaG1hbiBXYXJyaW9yIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNjExMjMsIDE5LCAxNTY5KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgNS4zNDIzNDIzNzY3MDg5ODQsIDE4MTkuNzg0MTc5Njg3NSkpLk1hZ25pdHVkZSA+PSAxNzAwMCkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgNS4zNDIzNDIzNzY3MDg5ODQsIDE4MTkuNzg0MTc5Njg3NSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkRlbW9uaWMgV2lzcCIpIHRoZW4KICAgICAgICBNTW9uID0gIkRlbW9uaWMgU291bCI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA5NTA3LCAxNzIsIDYxNTgpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiVmFtcGlyZSBGYW5nIikgdGhlbgogICAgICAgIE1Nb24gPSAiVmFtcGlyZSI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA2MDMzLCA3LCAtIDEzMTcpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiQ29uanVyZWQgQ29jb2EiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDYyMC42MzQ0NjA0NDkyMTg4LCA3OC45MzY0NDcxNDM1NTQ2OSwgLSAxMjU4MS4zNjkxNDA2MjUpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiRHJhZ29uIFNjYWxlIikgdGhlbgogICAgICAgIE1Nb24gPSAiRHJhZ29uIENyZXcgQXJjaGVyIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg2ODI3LjkxNDU1MDc4MTI1LCA2MDkuNDEyNzE5NzI2NTYyNSwgMjUyLjM1MzgwNTU0MTk5MjIpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiR3VucG93ZGVyIikgdGhlbgogICAgICAgIE1Nb24gPSAiUGlzdG9sIEJpbGxpb25haXJlIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDQ2OSwgNzQsIDU5MDQpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiSHlkcmEgRW5mb3JjZXIiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJIeWRyYSBFbmZvcmNlciI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNDU4MS41MTc1NzgxMjUsIDEwMDEuNTU5MDgyMDMxMjUsIDcwNC45Mzc4NjYyMTA5Mzc1KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIlZlbm9tb3VzIEFzc2FpbGFudCIpIHRoZW4KICAgICAgICBNTW9uID0gIlZlbm9tb3VzIEFzc2FpbGFudCI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNDg3OS45MjA0MTAxNTYyNSwgMTA4OS40NjE0MjU3ODEyNSwgMTEwNC4wMDgzMDA3ODEyNSk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJNaW5pIFR1c2siKSB0aGVuCiAgICAgICAgTU1vbiA9ICJNeXRob2xvZ2ljYWwgUGlyYXRlIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVJc2xhbmRFU1AoKQogICAgZm9yIHY0MjUsIHY0MjYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBJc2xhbmRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0MjYuTmFtZSB+PSAiU2VhIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDI2OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEzMCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQyNik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTMwLk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTMwLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzAuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzAuQWRvcm5lZSA9IHY0MjY7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTMwLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMzYgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMTMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuRm9udCA9ICJHb3RoYW1Cb2xkIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQyNlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQyNi5OYW1lIC4uICIgICBcbiIgLi4gcm91bmQoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQyNi5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDI2OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQyNjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gaXNuaWwodjE5OCkKICAgIHJldHVybiB2MTk4ID09IG5pbCA7CmVuZApsb2NhbCBmdW5jdGlvbiB2MjAodjE5OSkKICAgIHJldHVybiBtYXRoLmZsb29yKHRvbnVtYmVyKHYxOTkpICsgMC41KTsKZW5kCk51bWJlciA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDApOwpmdW5jdGlvbiBVcGRhdGVQbGF5ZXJDaGFtcygpCiAgICBmb3IgdjQyNywgdjQyOCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgbm90IGlzbmlsKHY0MjguQ2hhcmFjdGVyKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBFU1BQbGF5ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChub3QgaXNuaWwodjQyOC5DaGFyYWN0ZXIuSGVhZCkgYW5kIG5vdCB2NDI4LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTQ2ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDI4LkNoYXJhY3Rlci5IZWFkKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNDYuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE0Ni5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTQ2LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTQ2LkFkb3JuZWUgPSB2NDI4LkNoYXJhY3Rlci5IZWFkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE0Ni5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTUzID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTE0Nik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLkZvbnRTaXplID0gIlNpemUxMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dCA9IHY0MjguTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQyOC5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0MjguVGVhbSA9PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuVGVhbSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMCwgMCwgMjU0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDI4LkNoYXJhY3Rlci5IZWFkWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0MjguTmFtZSAuLiAiIHwgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQyOC5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZVxuSGVhbHRoIDogIiAuLiB2MjAoKHY0MjguQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCAqIDEwMCkgLyB2NDI4LkNoYXJhY3Rlci5IdW1hbm9pZC5NYXhIZWFsdGgpIC4uICIlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQyOC5DaGFyYWN0ZXIuSGVhZDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQyOC5DaGFyYWN0ZXIuSGVhZDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlQ2hlc3RDaGFtcygpCiAgICBmb3IgdjQyOSwgdjQzMCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjQzMC5OYW1lLCAiQ2hlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBDaGVzdEVTUCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjQzMC5OYW1lLCAiQ2hlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDMwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDc1ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDc1Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDc1LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDc1LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5BZG9ybmVlID0gdjQzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDc1LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDgxID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTQ3NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0MzAuTmFtZSA9PSAiQ2hlc3QxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMDksIDEwOSwgMTA5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0ID0gIkNoZXN0IDEiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDMwLk5hbWUgPT0gIkNoZXN0MiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTczLCAxNTgsIDIxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0ID0gIkNoZXN0IDIiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDMwLk5hbWUgPT0gIkNoZXN0MyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0ID0gIkNoZXN0IDMiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjQzMFsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDMwLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDMwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDMwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVEZXZpbENoYW1zKCkKICAgIGZvciB2NDMxLCB2NDMyIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBEZXZpbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0MzIuTmFtZSwgIkZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDMyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTY0ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDMyLkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY0Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNjQuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE2NC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE2NC5BZG9ybmVlID0gdjQzMi5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY0LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExNzEgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMTY0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5UZXh0ID0gdjQzMi5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMyLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQzMi5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzMi5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzIuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0MzIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0MzIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlRmxvd2VyQ2hhbXMoKQogICAgZm9yIHY0MzMsIHY0MzQgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmICgodjQzNC5OYW1lID09ICJGbG93ZXIyIikgb3IgKHY0MzQuTmFtZSA9PSAiRmxvd2VyMSIpKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBGbG93ZXJFU1AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDM0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExODMgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0MzQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4My5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTgzLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODMuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODMuQWRvcm5lZSA9IHY0MzQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTgzLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExODkgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMTgzKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDM0Lk5hbWUgPT0gIkZsb3dlcjEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5UZXh0ID0gIkJsdWUgRmxvd2VyIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzNC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzNC5OYW1lID09ICJGbG93ZXIyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dCA9ICJSZWQgRmxvd2VyIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzNC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQzNFsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDM0Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzNC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0MzQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0MzQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZVJlYWxGcnVpdENoYW1zKCkKICAgIGZvciB2NDM1LCB2NDM2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0MzY6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY0MzYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTA3ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDM2LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjkwNy5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjkwNy5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkwNy5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHY5MDcuQWRvcm5lZSA9IHY0MzYuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHY5MDcuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MTQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHY5MDcpOwogICAgICAgICAgICAgICAgICAgIHY5MTQuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2OTE0LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MTQuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2OTE0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHY5MTQuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MTQuVGV4dCA9IHY0MzYuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzNi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDM2LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDM2Lk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDM2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDM2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDM2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjQzNywgdjQzOCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5QaW5lYXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQzODpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjQzOC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MjYgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0MzguSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2OTI2Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2OTI2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTI2LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5BZG9ybmVlID0gdjQzOC5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkzMyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjkyNik7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHY5MzMuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2OTMzLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2OTMzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHY5MzMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHY5MzMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTc0LCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTMzLlRleHQgPSB2NDM4Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzguSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQzOC5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzOC5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzOC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQzOC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQzOC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY0MzksIHY0NDAgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQmFuYW5hU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0NDA6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY0NDAuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTQ1ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDQwLkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjk0NS5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjk0NS5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk0NS5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHY5NDUuQWRvcm5lZSA9IHY0NDAuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHY5NDUuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5NTIgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHY5NDUpOwogICAgICAgICAgICAgICAgICAgIHY5NTIuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2OTUyLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NTIuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2OTUyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHY5NTIuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2OTUyLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1NSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5UZXh0ID0gdjQ0MC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQwLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0NDAuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NDAuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDAuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NDAuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NDAuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUlzbGFuZEVTUCgpCiAgICBmb3IgdjQ0MSwgdjQ0MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIElzbGFuZEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ0Mi5OYW1lIH49ICJTZWEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NDI6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjAwID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDQyKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwMC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwMC5BZG9ybmVlID0gdjQ0MjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTIwNiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyMDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5Gb250ID0gIkdvdGhhbUJvbGQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjA2LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjA2LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjA2LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoNywgMjM2LCAyNDApOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ0MlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ0Mi5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDIuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ0MjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NDI6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIGlzbmlsKHYyMDApCiAgICByZXR1cm4gdjIwMCA9PSBuaWwgOwplbmQKbG9jYWwgZnVuY3Rpb24gdjIwKHYyMDEpCiAgICByZXR1cm4gbWF0aC5mbG9vcih0b251bWJlcih2MjAxKSArIDAuNSk7CmVuZApOdW1iZXIgPSBtYXRoLnJhbmRvbSgxLCAxMDAwMDAwKTsKZnVuY3Rpb24gVXBkYXRlUGxheWVyQ2hhbXMoKQogICAgZm9yIHY0NDMsIHY0NDQgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIG5vdCBpc25pbCh2NDQ0LkNoYXJhY3RlcikgdGhlbgogICAgICAgICAgICAgICAgaWYgRVNQUGxheWVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAobm90IGlzbmlsKHY0NDQuQ2hhcmFjdGVyLkhlYWQpIGFuZCBub3QgdjQ0NC5DaGFyYWN0ZXIuSGVhZDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTIxNiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0NC5DaGFyYWN0ZXIuSGVhZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjE2Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMTYuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIxNi5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIxNi5BZG9ybmVlID0gdjQ0NC5DaGFyYWN0ZXIuSGVhZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMTYuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTIyMyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyMTYpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHQgPSB2NDQ0Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDQuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDQ0LlRlYW0gPT0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlRlYW0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDAsIDI1NSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ0NC5DaGFyYWN0ZXIuSGVhZFsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDQ0Lk5hbWUgLi4gIiB8ICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDQuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2VcbkhlYWx0aCA6ICIgLi4gdjIwKCh2NDQ0LkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggKiAxMDApIC8gdjQ0NC5DaGFyYWN0ZXIuSHVtYW5vaWQuTWF4SGVhbHRoKSAuLiAiJSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0NDQuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0NDQuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUNoZXN0Q2hhbXMoKQogICAgZm9yIHY0NDUsIHY0NDYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0NDYuTmFtZSwgIkNoZXN0IikgdGhlbgogICAgICAgICAgICAgICAgaWYgQ2hlc3RFU1AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0NDYuTmFtZSwgIkNoZXN0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ0NjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQ5NyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0Nik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ5Ny5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ5Ny5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ5Ny5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuQWRvcm5lZSA9IHY0NDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ5Ny5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTUwMyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjE0OTcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDQ2Lk5hbWUgPT0gIkNoZXN0MSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTA5LCAxMDksIDEwOSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dCA9ICJDaGVzdCAxIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0Ni5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ0Ni5OYW1lID09ICJDaGVzdDIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE3MywgMTU4LCAyMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dCA9ICJDaGVzdCAyIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0Ni5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ0Ni5OYW1lID09ICJDaGVzdDMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDg1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dCA9ICJDaGVzdCAzIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0Ni5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY0NDZbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ0Ni5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQ0NjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ0NjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlRGV2aWxDaGFtcygpCiAgICBmb3IgdjQ0NywgdjQ0OCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgRGV2aWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDQ4Lk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ0OC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTIzNCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0OC5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIzNC5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjM0LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMzQuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMzQuQWRvcm5lZSA9IHY0NDguSGFuZGxlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIzNC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjQxID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTIzNCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuVGV4dCA9IHY0NDguTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0OC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NDguSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NDguTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ4LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDQ4LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDQ4LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUZsb3dlckNoYW1zKCkKICAgIGZvciB2NDQ5LCB2NDUwIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiAoKHY0NTAuTmFtZSA9PSAiRmxvd2VyMiIpIG9yICh2NDUwLk5hbWUgPT0gIkZsb3dlcjEiKSkgdGhlbgogICAgICAgICAgICAgICAgaWYgRmxvd2VyRVNQIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ1MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjUzID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTMuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1My5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjUzLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjUzLkFkb3JuZWUgPSB2NDUwOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1My5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjU5ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTI1Myk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ1MC5OYW1lID09ICJGbG93ZXIxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuVGV4dCA9ICJCbHVlIEZsb3dlciIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NTAuTmFtZSA9PSAiRmxvd2VyMiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHQgPSAiUmVkIEZsb3dlciIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NTBbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ1MC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDUwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDUwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVSZWFsRnJ1aXRDaGFtcygpCiAgICBmb3IgdjQ1MSwgdjQ1MiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5BcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDUyOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDUyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk2NCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ1Mi5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5NjQuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5NjQuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NjQuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTY0LkFkb3JuZWUgPSB2NDUyLkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTY0LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTcxID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTY0KTsKICAgICAgICAgICAgICAgICAgICB2OTcxLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5NzEuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5NzEuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTcxLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTcxLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTcxLlRleHQgPSB2NDUyLk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTIuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQ1Mi5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ1Mi5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1Mi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ1Mi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQ1Mi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY0NTMsIHY0NTQgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuUGluZWFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0NTQ6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY0NTQuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTgzID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDU0LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjk4My5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjk4My5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk4My5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHY5ODMuQWRvcm5lZSA9IHY0NTQuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHY5ODMuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5OTAgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHY5ODMpOwogICAgICAgICAgICAgICAgICAgIHY5OTAuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2OTkwLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5OTAuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2OTkwLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHY5OTAuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2OTkwLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDE3NCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5UZXh0ID0gdjQ1NC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDU0LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0NTQuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NTQuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTQuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NTQuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NTQuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NDU1LCB2NDU2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkJhbmFuYVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDU2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDU2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMDIgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NTYuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2MTAwMi5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjEwMDIuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDAyLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDIuQWRvcm5lZSA9IHY0NTYuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHYxMDAyLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTAwOSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEwMDIpOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjU1LCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5UZXh0ID0gdjQ1Ni5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDU2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0NTYuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NTYuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NTYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NTYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgTW9iRVNQIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODIyLCB2ODIzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4MjM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2ODIzOkZpbmRGaXJzdENoaWxkKCJNb2JFYXAiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM3MiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM3MyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5QYXJlbnQgPSB2ODIzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuWkluZGV4QmVoYXZpb3IgPSBFbnVtLlpJbmRleEJlaGF2aW9yLlNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5BY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuTmFtZSA9ICJNb2JFYXAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuTGlnaHRJbmZsdWVuY2UgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMi41LCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLlBhcmVudCA9IHYxMzcyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcsIDIzNiwgMjQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLlRleHQuU2l6ZSA9IDM1OwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMjEgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODIzLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHY4MjMuTW9iRWFwLlRleHRMYWJlbC5UZXh0ID0gdjgyMy5OYW1lIC4uICItIiAuLiB2MTAyMSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZm9yIHY4MjQsIHY4MjUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgyNTpGaW5kRmlyc3RDaGlsZCgiTW9iRWFwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODI1Lk1vYkVhcDpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIFNlYUVTUCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjgyNiwgdjgyNyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLlNlYUJlYXN0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4Mjc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2ODI3OkZpbmRGaXJzdENoaWxkKCJTZWFlc3BzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzOTEgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzOTIgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuUGFyZW50ID0gdjgyNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuQWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLk5hbWUgPSAiU2VhZXNwcyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5MaWdodEluZmx1ZW5jZSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAyLjUsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuUGFyZW50ID0gdjEzOTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoNywgMjM2LCAyNDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuVGV4dC5TaXplID0gMzU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTAyMyA9IG1hdGguZmxvb3IoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4MjcuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjgyNy5TZWFlc3BzLlRleHRMYWJlbC5UZXh0ID0gdjgyNy5OYW1lIC4uICItIiAuLiB2MTAyMyAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZm9yIHY4MjgsIHY4MjkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5TZWFCZWFzdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODI5OkZpbmRGaXJzdENoaWxkKCJTZWFlc3BzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODI5LlNlYWVzcHM6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBOcGNFU1AgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4MzAsIHY4MzEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgzMTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY4MzE6RmluZEZpcnN0Q2hpbGQoIk5wY0VzcGVzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE0MTAgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE0MTEgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuUGFyZW50ID0gdjgzMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuQWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLk5hbWUgPSAiTnBjRXNwZXMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuTGlnaHRJbmZsdWVuY2UgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMi41LCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLlBhcmVudCA9IHYxNDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcsIDIzNiwgMjQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLlRleHQuU2l6ZSA9IDM1OwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMjUgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODMxLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHY4MzEuTnBjRXNwZXMuVGV4dExhYmVsLlRleHQgPSB2ODMxLk5hbWUgLi4gIi0iIC4uIHYxMDI1IC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBmb3IgdjgzMiwgdjgzMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODMzOkZpbmRGaXJzdENoaWxkKCJOcGNFc3BlcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjgzMy5OcGNFc3BlczpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpmdW5jdGlvbiBpc25pbCh2MjAyKQogICAgcmV0dXJuIHYyMDIgPT0gbmlsIDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYyMCh2MjAzKQogICAgcmV0dXJuIG1hdGguZmxvb3IodG9udW1iZXIodjIwMykgKyAwLjUpOwplbmQKTnVtYmVyID0gbWF0aC5yYW5kb20oMSwgMTAwMDAwMCk7CmZ1bmN0aW9uIFVwZGF0ZUlzbGFuZE1pcmFnZUVTUCgpCiAgICBmb3IgdjQ1NywgdjQ1OCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIE1pcmFnZUlzbGFuZEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ1OC5OYW1lID09ICJNaXJhZ2UgSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDU4OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI3MCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ1OCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzAuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzAuQWRvcm5lZSA9IHY0NTg7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyNzYgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjcwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3Ni5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3Ni5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3Ni5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDU4WydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDU4Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1OC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NTg6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDU4OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVBdXJhRVNQKCkKICAgIGZvciB2NDU5LCB2NDYwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgQXVyYUVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ2MC5OYW1lID09ICJNYXN0ZXIgb2YgRW5oYW5jZW1lbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NjA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjg2ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI4Ni5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI4Ni5BZG9ybmVlID0gdjQ2MDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI5MiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyODYpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5Gb250ID0gIkNvZGUiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjkyLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjkyLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjkyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODAsIDI0NSwgMjQ1KTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NjBbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY0NjAuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDYwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIE0iIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ2MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NjA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUxTREVTUCgpCiAgICBmb3IgdjQ2MSwgdjQ2MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIExBREVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ2Mi5OYW1lID09ICJMZWdlbmRhcnkgU3dvcmQgRGVhbGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDYyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMwMiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ2Mik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDIuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDIuQWRvcm5lZSA9IHY0NjI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMDggPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMzAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwOC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwOC5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwOC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDYyWydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDYyLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ2Mi5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NjI6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDYyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVHZWFFU1AoKQogICAgZm9yIHY0NjMsIHY0NjQgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuTXlzdGljSXNsYW5kOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBHZWFyRVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDY0Lk5hbWUgPT0gIk1lc2hQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDY0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMxOCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ2NCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4Lk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMTguU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMTguQWRvcm5lZSA9IHY0NjQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMjQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMzE4KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMyNC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMyNC5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMyNC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDY0WydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDY0Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ2NC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NjQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDY0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBUd2VlbjIodjIwNCkKICAgIGxvY2FsIHYyMDUgPSAodjIwNC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlOwogICAgbG9jYWwgdjIwNiA9IDM1MDsKICAgIGlmICh2MjA1ID49IDM1MCkgdGhlbgogICAgICAgIHYyMDYgPSAzNTA7CiAgICBlbmQKICAgIGxvY2FsIHYyMDcgPSBUd2VlbkluZm8ubmV3KHYyMDUgLyB2MjA2LCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhcik7CiAgICBsb2NhbCB2MjA4ID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LCB2MjA3LCB7CiAgICAgICAgQ0ZyYW1lID0gdjIwNAogICAgfSk7CiAgICB2MjA4OlBsYXkoKTsKICAgIGlmIF9HLkNhbmNlbFR3ZWVuMiB0aGVuCiAgICAgICAgdjIwODpDYW5jZWwoKTsKICAgIGVuZAogICAgX0cuQ2xpcDIgPSB0cnVlOwogICAgd2FpdCh2MjA1IC8gdjIwNik7CiAgICBfRy5DbGlwMiA9IGZhbHNlOwplbmQKZnVuY3Rpb24gQlRQWih2MjA5KQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMDk7CiAgICB0YXNrLndhaXQoKTsKICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjA5OwplbmQKVHdlZW5TcGVlZCA9IDM1MDsKZnVuY3Rpb24gVHdlZW4odjIxMSkKICAgIGxvY2FsIHYyMTIgPSAodjIxMS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlOwogICAgbG9jYWwgdjIxMyA9IFR3ZWVuU3BlZWQ7CiAgICBpZiAodjIxMiA+PSAzNTApIHRoZW4KICAgICAgICB2MjEzID0gVHdlZW5TcGVlZDsKICAgIGVuZAogICAgbG9jYWwgdjIxNCA9IFR3ZWVuSW5mby5uZXcodjIxMiAvIHYyMTMsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKTsKICAgIGxvY2FsIHYyMTUgPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpOkNyZWF0ZShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQsIHYyMTQsIHsKICAgICAgICBDRnJhbWUgPSB2MjExCiAgICB9KTsKICAgIHYyMTU6UGxheSgpOwogICAgaWYgX0cuU3RvcFR3ZWVuIHRoZW4KICAgICAgICB2MjE1OkNhbmNlbCgpOwogICAgZW5kCmVuZApmdW5jdGlvbiBDYW5jZWxUd2Vlbih2MjE2KQogICAgaWYgbm90IHYyMTYgdGhlbgogICAgICAgIF9HLlN0b3BUd2VlbiA9IHRydWU7CiAgICAgICAgd2FpdCgpOwogICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgICAgIF9HLlN0b3BUd2VlbiA9IGZhbHNlOwogICAgZW5kCmVuZApmdW5jdGlvbiBFcXVpcFRvb2wodjIxNykKICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh2MjE3KSB0aGVuCiAgICAgICAgbG9jYWwgdjU3MCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh2MjE3KTsKICAgICAgICB3YWl0KCk7CiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjU3MCk7CiAgICBlbmQKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIGxvY2FsIHYyMTggPSBnZXRyYXdtZXRhdGFibGUoZ2FtZSk7CiAgICBsb2NhbCB2MjE5ID0gdjIxOC5fX25hbWVjYWxsOwogICAgc2V0cmVhZG9ubHkodjIxOCwgZmFsc2UpOwogICAgdjIxOC5fX25hbWVjYWxsID0gbmV3Y2Nsb3N1cmUoZnVuY3Rpb24oLi4uKQogICAgICAgIGxvY2FsIHY0NjUgPSBnZXRuYW1lY2FsbG1ldGhvZCgpOwogICAgICAgIGxvY2FsIHY0NjYgPSB7CiAgICAgICAgICAgIC4uLgogICAgICAgIH07CiAgICAgICAgaWYgKHRvc3RyaW5nKHY0NjUpID09ICJGaXJlU2VydmVyIikgdGhlbgogICAgICAgICAgICBpZiAodG9zdHJpbmcodjQ2NlsxXSkgPT0gIlJlbW90ZUV2ZW50IikgdGhlbgogICAgICAgICAgICAgICAgaWYgKCh0b3N0cmluZyh2NDY2WzJdKSB+PSAidHJ1ZSIpIGFuZCAodG9zdHJpbmcodjQ2NlsyXSkgfj0gImZhbHNlIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBfRy5Vc2VTa2lsbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlKHY0NjZbMl0pID09ICJ2ZWN0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NDY2WzJdID0gUG9zaXRpb25Ta2lsbE1hc3RlcnlEZXZpbEZydWl0OwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NDY2WzJdID0gQ0ZyYW1lLm5ldyhQb3NpdGlvblNraWxsTWFzdGVyeURldmlsRnJ1aXQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYyMTkodW5wYWNrKHY0NjYpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICByZXR1cm4gdjIxOSguLi4pOwogICAgZW5kKTsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIChfRy5BdXRvRXZvUmFjZSBvciBfRy5DYXN0bGVSYWlkIG9yIF9HLkNvbGxlY3RBenVyZSBvciBfRy5Ud2VlblRvS2l0c3VuZSBvciBfRy5HaG9zdFNoaXAgb3IgX0cuU2hpcCBvciBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgX0cuVGVsZXBvcnRQbHkgb3IgX0cuQXV0b19TZWEzIG9yIF9HLkF1dG9fU2VhMiBvciBfRy5Ud2VlbmZydWl0IG9yIF9HLkF1dG9GaXNoQ3JldyBvciBfRy5BdXRvX1NhYmVyIG9yIF9HLkF1dG9TaGFyayBvciBfRy5BdXRvX1dhcmRlbiBvciBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yIEF1dG9GYXJtUmFjZSBvciBfRy5BdXRvUXVlc3RSYWNlIG9yIEF1dG9fTGF3IG9yIEF1dG9UdXNoaXRhIG9yIF9HLkF1dG9Ib2x5VG9yY2ggb3IgX0cuQXV0b1RlcnJvcnNoYXJrIG9yIF9HLmZhcm1waXJhbnlhIG9yIF9HLkF1dG9fTXVza2V0ZWVySGF0IG9yIF9HLkF1dG9fT2JzZXJ2YXRpb25WMiBvciBfRy5BdXRvTmVhciBvciBfRy5BdXRvX1BvbGVWMSBvciBfRy5BdXRvX0J1ZGR5IG9yIF9HLkVjdG9wbGFzbSBvciBBdXRvRXZvUmFjZSBvciBBdXRvQmFydGlsbyBvciBfRy5BdXRvX0NhbnZhbmRlciBvciBfRy5BdXRvTGV2ZWwgb3IgX0cuQXV0b19EdWFsS2F0YW5hIG9yIEF1dG9fUXVlc3RfWWFtYV8zIG9yIEF1dG9fUXVlc3RfWWFtYV8yIG9yIEF1dG9fUXVlc3RfWWFtYV8xIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8xIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8yIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8zIG9yIF9HLkNsaXAyIG9yIF9HLkF1dG9fUmVnb2t1IG9yIF9HLkF1dG9Cb25lIG9yIF9HLkF1dG9Cb25lTm9RdWVzdCBvciBfRy5BdXRvQm9zcyBvciBBdXRvRmFybU1hc0RldmlsRnJ1aXQgb3IgQXV0b0hhbGxvd1N5Y3RoZSBvciBBdXRvVHVzaGl0YSBvciBfRy5DYWtlUHJpbmNlIG9yIF9HLkF1dG9fU2t1bGxHdWl0YXIgb3IgX0cuQXV0b0Zhcm1Td2FuIG9yIF9HLkRvdWdoS2luZyBvciBfRy5BdXRvRWxpdGVvciBvciBBdXRvTmV4dElzbGFuZCBvciBNdXNrZXRlZXIgb3IgX0cuQXV0b01hdGVyaWFsIG9yIEF1dG9GYXJtUmFjZVF1ZXN0IG9yIF9HLkZhY3Rvcnkgb3IgX0cuQXV0b19TYXcgb3IgX0cuQXV0b0Zyb3plbkRpbWVuc2lvbiBvciBfRy5BdXRvS2lsbFRyaWFsIG9yIF9HLkF1dG9VcGdyYWRlIG9yIF9HLlR3ZWVuVG9Gcm96ZW5EaW1lbnNpb24pIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiQm9keUNsaXAiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg4NyA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5Iik7CiAgICAgICAgICAgICAgICAgICAgdjg4Ny5OYW1lID0gIkJvZHlDbGlwIjsKICAgICAgICAgICAgICAgICAgICB2ODg3LlBhcmVudCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OwogICAgICAgICAgICAgICAgICAgIHY4ODcuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldygxMDAwMDAsIDEwMDAwMCwgMTAwMDAwKTsKICAgICAgICAgICAgICAgICAgICB2ODg3LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkJvZHlDbGlwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5TdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiAoX0cuQXV0b0V2b1JhY2Ugb3IgX0cuQXV0b19SYWluYm93SGFraSBvciBfRy5BdXRvX1NrdWxsR3VpdGFyIG9yIF9HLkNhc3RsZVJhaWQgb3IgX0cuQ29sbGVjdEF6dXJlIG9yIF9HLlR3ZWVuVG9LaXRzdW5lIG9yIF9HLkF1dG9fU2VhMyBvciBfRy5BdXRvX1NlYTIgb3IgX0cuR2hvc3RTaGlwIG9yIF9HLlNoaXAgb3IgX0cuQXV0b19Ib2x5X1RvcmNoIG9yIF9HLlRlbGVwb3J0UGx5IG9yIF9HLlR3ZWVuZnJ1aXQgb3IgX0cuQXV0b19TYWJlciBvciBfRy5BdXRvX1BvbGVWMSBvciBfRy5BdXRvX011c2tldGVlckhhdCBvciBfRy5BdXRvRmlzaENyZXcgb3IgX0cuQXV0b1NoYXJrIG9yIEF1dG9GYXJtUmFjZSBvciBfRy5BdXRvUXVlc3RSYWNlIG9yIF9HLkF1dG9fV2FyZGVuIG9yIEF1dG9fTGF3IG9yIF9HLkF1dG9fRHVhbEthdGFuYSBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMSBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMiBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMyBvciBBdXRvVHVzaGl0YSBvciBfRy5BdXRvSG9seVRvcmNoIG9yIF9HLkF1dG9fQnVkZHkgb3IgX0cuQXV0b1RlcnJvcnNoYXJrIG9yIF9HLmZhcm1waXJhbnlhIG9yIEF1dG9fUXVlc3RfWWFtYV8zIG9yIF9HLkF1dG9fT2JzZXJ2YXRpb25WMiBvciBBdXRvX1F1ZXN0X1lhbWFfMiBvciBBdXRvX1F1ZXN0X1lhbWFfMSBvciBfRy5BdXRvTmVhciBvciBfRy5FY3RvcGxhc20gb3IgQXV0b0V2b1JhY2Ugb3IgX0cuQXV0b0tpbGxUcmlhbCBvciBBdXRvQmFydGlsbyBvciBfRy5BdXRvX1JlZ29rdSBvciBfRy5BdXRvTGV2ZWwgb3IgX0cuQ2xpcDIgb3IgX0cuQXV0b0JvbmUgb3IgX0cuQXV0b19DYW52YW5kZXIgb3IgX0cuQXV0b0JvbmVOb1F1ZXN0IG9yIF9HLkF1dG9Cb3NzIG9yIF9HLkF1dG9fU2F3IG9yIEF1dG9GYXJtTWFzRGV2aWxGcnVpdCBvciBBdXRvSGFsbG93U3ljdGhlIG9yIEF1dG9UdXNoaXRhIG9yIF9HLkNha2VQcmluY2Ugb3IgX0cuRG91Z2hLaW5nIG9yIF9HLkF1dG9GYXJtU3dhbiBvciBfRy5BdXRvRWxpdGVvciBvciBBdXRvTmV4dElzbGFuZCBvciBNdXNrZXRlZXIgb3IgX0cuQXV0b01hdGVyaWFsIG9yIF9HLkZhY3Rvcnkgb3IgX0cuQXV0b0Zyb3plbkRpbWVuc2lvbiBvciBBdXRvRmFybVJhY2VRdWVzdCBvciBfRy5BdXRvVXBncmFkZSBvciBfRy5Ud2VlblRvRnJvemVuRGltZW5zaW9uKSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjgzNCwgdjgzNSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODM1OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY4MzUuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwplbmQpOwp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlN0dW4iKSB0aGVuCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5TdHVuLkNoYW5nZWQ6Y29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlN0dW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5TdHVuLlZhbHVlID0gMDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKZnVuY3Rpb24gQ2hlY2tNYXRlcmlhbCh2MjIxKQogICAgZm9yIHY0NjcsIHY0NjggaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ2V0SW52ZW50b3J5IikpIGRvCiAgICAgICAgaWYgKHR5cGUodjQ2OCkgPT0gInRhYmxlIikgdGhlbgogICAgICAgICAgICBpZiAodjQ2OC5UeXBlID09ICJNYXRlcmlhbCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDY4Lk5hbWUgPT0gdjIyMSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHJldHVybiB2NDY4LkNvdW50OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gMDsKZW5kCmZ1bmN0aW9uIEdldFdlYXBvbkludmVudG9yeSh2MjIyKQogICAgZm9yIHY0NjksIHY0NzAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ2V0SW52ZW50b3J5IikpIGRvCiAgICAgICAgaWYgKHR5cGUodjQ3MCkgPT0gInRhYmxlIikgdGhlbgogICAgICAgICAgICBpZiAodjQ3MC5UeXBlID09ICJTd29yZCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDcwLk5hbWUgPT0gdjIyMikgdGhlbgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gZmFsc2U7CmVuZApsb2NhbCB2MjEgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI7CmZ1bmN0aW9uIEZpbmRFbmVtaWVzSW5SYW5nZSh2MjIzLCB2MjI0KQogICAgbG9jYWwgdjIyNSA9ICh2MjEuQ2hhcmFjdGVyIG9yIHYyMS5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkpOkdldFBpdm90KCkuUG9zaXRpb247CiAgICBsb2NhbCB2MjI2ID0gbmlsOwogICAgZm9yIHY0NzEsIHY0NzIgaW4gaXBhaXJzKHYyMjQpIGRvCiAgICAgICAgaWYgKG5vdCB2NDcyOkdldEF0dHJpYnV0ZSgiSXNCb2F0IikgYW5kIHY0NzI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpIGFuZCAodjQ3Mi5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICBsb2NhbCB2NjcxID0gdjQ3MjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpOwogICAgICAgICAgICBpZiAodjY3MSBhbmQgKCh2MjI1IC0gdjY3MS5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDYwKSkgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NzIgfj0gdjIxLkNoYXJhY3RlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh2MjIzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHY0NzIsCiAgICAgICAgICAgICAgICAgICAgICAgIHY2NzEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2MjI2ID0gdjY3MTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY0NzMsIHY0NzQgaW4gaXBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgKHY0NzQuQ2hhcmFjdGVyIGFuZCAodjQ3NCB+PSB2MjEpKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY2NzIgPSB2NDc0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpOwogICAgICAgICAgICBpZiAodjY3MiBhbmQgKCh2MjI1IC0gdjY3Mi5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDYwKSkgdGhlbgogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYyMjMsIHsKICAgICAgICAgICAgICAgICAgICB2NDc0LkNoYXJhY3RlciwKICAgICAgICAgICAgICAgICAgICB2NjcyCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHYyMjYgPSB2NjcyOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIHYyMjY7CmVuZApmdW5jdGlvbiBHZXRFcXVpcHBlZFRvb2woKQogICAgbG9jYWwgdjIyNyA9IHYyMS5DaGFyYWN0ZXI7CiAgICBpZiBub3QgdjIyNyB0aGVuCiAgICAgICAgcmV0dXJuIG5pbDsKICAgIGVuZAogICAgZm9yIHY0NzUsIHY0NzYgaW4gaXBhaXJzKHYyMjc6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDc2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgcmV0dXJuIHY0NzY7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBuaWw7CmVuZApmdW5jdGlvbiBBdHRhY2tOb0Nvb2xEb3duKCkKICAgIGxvY2FsIHYyMjggPSB7fTsKICAgIGxvY2FsIHYyMjkgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKTsKICAgIGxvY2FsIHYyMzAgPSBGaW5kRW5lbWllc0luUmFuZ2UodjIyOCwgdjIyOSk7CiAgICBpZiBub3QgdjIzMCB0aGVuCiAgICAgICAgcmV0dXJuOwogICAgZW5kCiAgICBsb2NhbCB2MjMxID0gR2V0RXF1aXBwZWRUb29sKCk7CiAgICBpZiBub3QgdjIzMSB0aGVuCiAgICAgICAgcmV0dXJuOwogICAgZW5kCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjQ3NyA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTsKICAgICAgICBsb2NhbCB2NDc4ID0gdjQ3NzpXYWl0Rm9yQ2hpbGQoIk1vZHVsZXMiKTpXYWl0Rm9yQ2hpbGQoIk5ldCIpOldhaXRGb3JDaGlsZCgiUkUvUmVnaXN0ZXJBdHRhY2siKTsKICAgICAgICBsb2NhbCB2NDc5ID0gdjQ3NzpXYWl0Rm9yQ2hpbGQoIk1vZHVsZXMiKTpXYWl0Rm9yQ2hpbGQoIk5ldCIpOldhaXRGb3JDaGlsZCgiUkUvUmVnaXN0ZXJIaXQiKTsKICAgICAgICBpZiAoIyB2MjI4ID4gMCkgdGhlbgogICAgICAgICAgICB2NDc4OkZpcmVTZXJ2ZXIoMWUtOSk7CiAgICAgICAgICAgIHY0Nzk6RmlyZVNlcnZlcih2MjMwLCB2MjI4KTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHRhc2sud2FpdCgxZS05KTsKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZApUeXBlID0gMTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgKFR5cGUgPT0gMSkgdGhlbgogICAgICAgICAgICBQb3MgPSBDRnJhbWUubmV3KDAsIDQwLCAwKTsKICAgICAgICBlbHNlaWYgKFR5cGUgPT0gMikgdGhlbgogICAgICAgICAgICBQb3MgPSBDRnJhbWUubmV3KC0gNDAsIDQwLCAwKTsKICAgICAgICBlbHNlaWYgKFR5cGUgPT0gMykgdGhlbgogICAgICAgICAgICBQb3MgPSBDRnJhbWUubmV3KDQwLCA0MCwgMCk7CiAgICAgICAgZWxzZWlmIChUeXBlID09IDQpIHRoZW4KICAgICAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldygwLCA0MCwgNDApOwogICAgICAgIGVsc2VpZiAoVHlwZSA9PSA1KSB0aGVuCiAgICAgICAgICAgIFBvcyA9IENGcmFtZS5uZXcoMCwgNDAsIC0gNDApOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIFR5cGUgPSAxOwogICAgICAgIHdhaXQoMC4yKTsKICAgICAgICBUeXBlID0gMjsKICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgVHlwZSA9IDM7CiAgICAgICAgd2FpdCgwLjIpOwogICAgICAgIFR5cGUgPSA0OwogICAgICAgIHdhaXQoMC4yKTsKICAgICAgICBUeXBlID0gNTsKICAgICAgICB3YWl0KDAuMik7CiAgICBlbmQKZW5kKTsKZnVuY3Rpb24gQXV0b0hha2koKQogICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGFzQnVzbyIpIHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXNvIik7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIHRvKHYyMzIpCiAgICByZXBlYXQKICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTUpOwogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjMyOwogICAgICAgIHRhc2sud2FpdCgpOwogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjMyOwogICAgdW50aWwgKHYyMzIuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAyMDAwCmVuZApmdW5jdGlvbiB0byh2MjMzKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGlmICgoKHYyMzMuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+PSAyMDAwKSBhbmQgbm90IEF1dG9fUmFpZCBhbmQgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgaWYgKE5hbWVNb24gPT0gIkZpc2htYW5RdWVzdCIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgMTEuNjc5Njg3NSwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVsc2VpZiAoTW9uID09ICJHb2QncyBHdWFyZCIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA0NjA3LjgyMjc1LCA4NzIuNTQyNDgsIC0gMTY2Ny41NTY4OCkpOwogICAgICAgICAgICBlbHNlaWYgKE5hbWVNb24gPT0gIlNreUV4cDFRdWVzdCIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA3ODk0LjYxNzY3NTc4MTMsIDU1NDcuMTQxNjAxNTYyNSwgLSAzODAuMjkxMTk4NzMwNDcpKTsKICAgICAgICAgICAgZWxzZWlmIChOYW1lTW9uID09ICJTaGlwUXVlc3QxIikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbHNlaWYgKE5hbWVNb24gPT0gIlNoaXBRdWVzdDIiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgIGVsc2VpZiAoTmFtZU1vbiA9PSAiRnJvc3RRdWVzdCIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA2NTA4LjU1ODEwNTQ2ODgsIDg5LjAzNDk5NjAzMjcxNSwgLSAxMzIuODM5NTM4NTc0MjIpKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIzMzsKICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMDUpOwogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZDpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMzM7CiAgICAgICAgICAgICAgICB1bnRpbCAoKHYyMzMuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDI1MDApIGFuZCAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwKQogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZApsb2NhbCB2MjIgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpOwpsb2NhbCB2MjMgPSBJbnN0YW5jZS5uZXcoIkltYWdlQnV0dG9uIik7CmxvY2FsIHYyNCA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKTsKbG9jYWwgdjI1ID0gSW5zdGFuY2UubmV3KCJQYXJ0aWNsZUVtaXR0ZXIiKTsKbG9jYWwgdjI2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTsKCnYyMi5QYXJlbnQgPSBnYW1lLkNvcmVHdWk7CnYyMi5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZzsKCnYyMy5QYXJlbnQgPSB2MjI7CnYyMy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSk7CnYyMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC41CnYyMy5Cb3JkZXJTaXplUGl4ZWwgPSAwOwp2MjMuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4xMjA4MzMzMzcgLSAwLjEsIDAsIDAuMDk1Mjg5MDgxMyArIDAuMDEsIDApOwp2MjMuU2l6ZSA9IFVEaW0yLm5ldygwLCA1MCwgMCwgNTApOwp2MjMuRHJhZ2dhYmxlID0gdHJ1ZTsKdjIzLkltYWdlID0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9NzM0Mzc1Njk1NjY5ODYiOwoKdjI0LlBhcmVudCA9IHYyMzsKdjI0LkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDEsIDApOwoKdjI1LlBhcmVudCA9IHYyMzsKdjI1LkxpZ2h0RW1pc3Npb24gPSAxOwp2MjUuU2l6ZSA9IE51bWJlclNlcXVlbmNlLm5ldyh7CiAgICBOdW1iZXJTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCAwLjEpLAogICAgTnVtYmVyU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgMCkKfSk7CnYyNS5MaWZldGltZSA9IE51bWJlclJhbmdlLm5ldygwLjUsIDEpOwp2MjUuUmF0ZSA9IDA7CnYyNS5TcGVlZCA9IE51bWJlclJhbmdlLm5ldyg1LCAxMCk7CnYyNS5Db2xvciA9IENvbG9yU2VxdWVuY2UubmV3KENvbG9yMy5mcm9tUkdCKDI1NSwgODUsIDI1NSksIENvbG9yMy5mcm9tUkdCKDg1LCAyNTUsIDI1NSkpOwoKbG9jYWwgdjQ3ID0gdjI2OkNyZWF0ZSh2MjMsIFR3ZWVuSW5mby5uZXcoMC41LCBFbnVtLkVhc2luZ1N0eWxlLlF1YWQsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHsKICAgIFJvdGF0aW9uID0gMAp9KTsKCi0tIPCfn6IgVG9nZ2xlIHN0YXRlCmxvY2FsIHRvZ2dsZWQgPSB0cnVlCgp2MjMuTW91c2VCdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIHYyNS5SYXRlID0gMTAwOwogICAgdGFzay5kZWxheSgxLCBmdW5jdGlvbigpCiAgICAgICAgdjI1LlJhdGUgPSAwOwogICAgZW5kKTsKCiAgICB2NDc6UGxheSgpOwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIEVudW0uS2V5Q29kZS5FbmQsIGZhbHNlLCBnYW1lKTsKCiAgICB2NDcuQ29tcGxldGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIHYyMy5Sb3RhdGlvbiA9IDA7CiAgICBlbmQpOwoKICAgIGlmIG5vdCB0b2dnbGVkIHRoZW4KICAgICAgICAtLSBC4bqtdCB0cuG6oW5nIHRow6FpOiB0byArIHRy4bqvbmcgxJHhurdjCiAgICAgICAgdG9nZ2xlZCA9IHRydWUKICAgICAgICB2MjMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAKICAgICAgICB2MjMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwyNTUsMjU1KQogICAgICAgIGxvY2FsIHYyMzUgPSB2MjY6Q3JlYXRlKHYyMywgVHdlZW5JbmZvLm5ldygwLjIsIEVudW0uRWFzaW5nU3R5bGUuQm91bmNlLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICAgICAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNjAsIDAsIDYwKQogICAgICAgIH0pOwogICAgICAgIHYyMzU6UGxheSgpCiAgICBlbHNlCiAgICAgICAgLS0gVOG6r3QgdHLhuqFuZyB0aMOhaTogbmjhu48gKyB0cm9uZyBuaOG6uQogICAgICAgIHRvZ2dsZWQgPSBmYWxzZQogICAgICAgIHYyMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgdjIzLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsMjU1LDI1NSkKICAgICAgICBsb2NhbCB2NDgzID0gdjI2OkNyZWF0ZSh2MjMsIFR3ZWVuSW5mby5uZXcoMC4yLCBFbnVtLkVhc2luZ1N0eWxlLkJvdW5jZSwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwgewogICAgICAgICAgICBTaXplID0gVURpbTIubmV3KDAsIDUwLCAwLCA1MCkKICAgICAgICB9KTsKICAgICAgICB2NDgzOlBsYXkoKQogICAgZW5kCmVuZCkKCi0tIHhvw6EgZWZmZWN0IG3hurdjIMSR4buLbmgKaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXI6RmluZEZpcnN0Q2hpbGQoIkRlYXRoIikgdGhlbgogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXIuRGVhdGg6RGVzdHJveSgpOwplbmQKaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXI6RmluZEZpcnN0Q2hpbGQoIlJlc3Bhd24iKSB0aGVuCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lci5SZXNwYXduOkRlc3Ryb3koKTsKZW5kCnYxNi5Ib21lOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUaWsgVG9rIiwKICAgIERlc2NyaXB0aW9uID0gIkNsaWNrKENvcHkpIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHNldGNsaXBib2FyZCgiaHR0cHM6Ly93d3cudGlrdG9rLmNvbS9Abmd1X3JvYmxveD9fdD1aUy04eXdqRGdOUTFhaCZfcj0xIik7CiAgICBlbmQKfSk7CnYxNi5Ib21lOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJaYWxvIEdyb3VwIiwKICAgIERlc2NyaXB0aW9uID0gIkNsaWNrKENvcHkpIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHNldGNsaXBib2FyZCgiaHR0cHM6Ly96YWxvLm1lL2cvdHZkcG9wNjM5Iik7CiAgICBlbmQKfSk7CnYxNi5Ib21lOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJSZW1lbWJlcjoiLAogICAgRGVzY3JpcHRpb24gPSAiVGhpcyByZWFsIEJhbmFuYSBDYXQgSHViLCBidXQgYSBuZXcgdmVyc2lvbiBtYWRlIGJ5IE5ndSBSb2Jsb3guIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHNldGNsaXBib2FyZCgiaHR0cHM6Ly93d3cudGlrdG9rLmNvbS9AaG5jX3JvYmxveD9fdD1aUy04eXdqRGdOUTFhaCZfcj0xIik7CiAgICBlbmQKfSk7Cl9HLkZhc3RBdHRhY2tTdHJpeF9Nb2RlID0gIlN1cGVyIEZhc3QgQXR0YWNrIjsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuRmFzdEF0dGFja1N0cml4X01vZGUgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoX0cuRmFzdEF0dGFja1N0cml4X01vZGUgPT0gIlN1cGVyIEZhc3QgQXR0YWNrIikgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLkZhc3RfRGVsYXkgPSAxZS05OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjQ4ID0gdjE2Lk1haW46QWRkRHJvcGRvd24oIkRyb3Bkb3duU2VsZWN0V2VhcG9uIiwgewogICAgVGl0bGUgPSAiU2VsZWN0IHdlYXBvbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gewogICAgICAgICJNZWxlZSIsCiAgICAgICAgIlN3b3JkIiwKICAgICAgICAiQmxveCBGcnVpdHMiCiAgICB9LAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2NDg6U2V0VmFsdWUoIk1lbGVlIik7CnY0ODpPbkNoYW5nZWQoZnVuY3Rpb24odjIzNikKICAgIENob29zZVdlYXBvbiA9IHYyMzY7CmVuZCk7CnRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiAoQ2hvb3NlV2VhcG9uID09ICJNZWxlZSIpIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODM2LCB2ODM3IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2ODM3LlRvb2xUaXAgPT0gIk1lbGVlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9zdHJpbmcodjgzNy5OYW1lKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0V2VhcG9uID0gdjgzNy5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgKENob29zZVdlYXBvbiA9PSAiU3dvcmQiKSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjEwMjgsIHYxMDI5IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2MTAyOS5Ub29sVGlwID09ICJTd29yZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYxMDI5Lk5hbWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RXZWFwb24gPSB2MTAyOS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgKENob29zZVdlYXBvbiA9PSAiQmxveCBGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2MTQzMCwgdjE0MzEgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDMxLlRvb2xUaXAgPT0gIkJsb3ggRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b3N0cmluZyh2MTQzMS5OYW1lKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0V2VhcG9uID0gdjE0MzEuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2NDkgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUxldmVsIiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIExldmVsIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY0OTpPbkNoYW5nZWQoZnVuY3Rpb24odjIzNykKICAgIF9HLkF1dG9MZXZlbCA9IHYyMzc7CiAgICBpZiAodjIzNyA9PSBmYWxzZSkgdGhlbgogICAgICAgIHdhaXQoKTsKICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlTGV2ZWw6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9MZXZlbCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIENoZWNrTGV2ZWwoKTsKICAgICAgICAgICAgICAgIGlmIChub3Qgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgTmFtZU1vbikgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0Iik7CiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lUSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWVRLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0YXJ0UXVlc3QiLCBOYW1lUXVlc3QsIFF1ZXN0THYpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lTW9uKSBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTQzMiwgdjE0MzMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQzMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0MzM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDMzLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0MzMuTmFtZSA9PSBNcykgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDMzLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9MZXZlbCBvciBub3QgdjE0MzMuUGFyZW50IG9yICh2MTQzMy5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2MTQzMy5OYW1lKSBvciAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBmb3IgdjE0MzQsIHYxNDM1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkVuZW15U3Bhd25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHYxNDM1Lk5hbWUsIE5hbWVNb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjE0MzUuUG9zaXRpb24pLk1hZ25pdHVkZSA+PSAxMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDM1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1MCA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlTW9iQXVyYSIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBOZWFyZXN0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1MDpPbkNoYW5nZWQoZnVuY3Rpb24odjIzOCkKICAgIF9HLkF1dG9OZWFyID0gdjIzODsKICAgIGlmICh2MjM4ID09IGZhbHNlKSB0aGVuCiAgICAgICAgd2FpdCgpOwogICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVNb2JBdXJhOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b05lYXIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3IgdjgzOCwgdjgzOSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY4Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHY4MzkuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjgzOS5OYW1lIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgzOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4MzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjgzOS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvTmVhciBvciBub3QgdjgzOS5QYXJlbnQgb3IgKHY4MzkuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCBnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHY4MzkuTmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjUxID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVDYXN0bGVSYWlkIiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIFBpcmF0ZXMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjUxOk9uQ2hhbmdlZChmdW5jdGlvbih2MjM5KQogICAgX0cuQ2FzdGxlUmFpZCA9IHYyMzk7CmVuZCk7CnYxNy5Ub2dnbGVDYXN0bGVSYWlkOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQ2FzdGxlUmFpZCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY3NjQgPSBDRnJhbWUubmV3KC0gNTQ5Ni4xNzQzMiwgMzEzLjc2ODkyMSwgLSAyODQxLjUzMDI3LCAwLjkyNDg5NDUxMiwgNy4zNzA1OGUtOSwgMC4zODAyMjM3NTEsIDMuNTg4MTAyZS04LCAxLCAtIDEuMDY2NjU0NDZlLTcsIC0gMC4zODAyMjM3NTEsIDEuMTIyOTcxMWUtNywgMC45MjQ4OTQ1MTIpOwogICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gNTUzOS4zMTE1MjM0Mzc1LCAzMTMuODAwNTM3MTA5Mzc1LCAtIDI5NzIuMzcyMzE0NDUzMTI1KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTAzMCwgdjEwMzEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfRy5DYXN0bGVSYWlkIGFuZCB2MTAzMTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2MTAzMTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgKHYxMDMxLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMDMxLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDIwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDMxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTAzMS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxMDMxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjEwMzEuUGFyZW50IG9yIG5vdCBfRy5DYXN0bGVSYWlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjc2NCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTIgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUhha2lGb3J0cmVzcyIsIHsKICAgIFRpdGxlID0gIkFjdGl2YXRlIENvbG9yIEhha2kgKEZvcnRyZXNzKSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NTI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNDApCiAgICBfRy5FbmFibGVIYWtpRm9ydHJlc3MgPSB2MjQwOwplbmQpOwp2MTcuVG9nZ2xlSGFraUZvcnRyZXNzOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgZnVuY3Rpb24gdjUzKHYyNDEsIHYyNDIpCiAgICBsb2NhbCB2MjQzID0gewogICAgICAgIFsxXSA9IHsKICAgICAgICAgICAgU3RvcmFnZU5hbWUgPSB2MjQxLAogICAgICAgICAgICBUeXBlID0gIkF1cmFTa2luIiwKICAgICAgICAgICAgQ29udGV4dCA9ICJFcXVpcCIKICAgICAgICB9CiAgICB9OwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9GcnVpdEN1c3RvbWl6ZXJSRiIpOkludm9rZVNlcnZlcih1bnBhY2sodjI0MykpOwogICAgVHdlZW4yKHYyNDIpOwplbmQKbG9jYWwgZnVuY3Rpb24gdjU0KHYyNDQsIHYyNDUpCiAgICBsb2NhbCB2MjQ2ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjsKICAgIGlmIChub3QgdjI0NiBvciBub3QgdjI0NjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpKSB0aGVuCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgZW5kCiAgICBsb2NhbCB2MjQ3ID0gdjI0Ni5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uOwogICAgcmV0dXJuICh2MjQ3IC0gdjI0NCkuTWFnbml0dWRlIDwgdjI0NSA7CmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgaWYgX0cuRW5hYmxlSGFraUZvcnRyZXNzIHRoZW4KICAgICAgICAgICAgdjUzKCJTbm93IFdoaXRlIiwgVmVjdG9yMy5uZXcoLSA0OTcxLjcxODI2MTcxODc1LCAzMzUuOTU4MjIxNDM1NTQ2OSwgLSAzNzIwLjA1OTU3MDMxMjUpKTsKICAgICAgICAgICAgd2hpbGUgbm90IHY1NChWZWN0b3IzLm5ldygtIDQ5NzEuNzE4MjYxNzE4NzUsIDMzNS45NTgyMjE0MzU1NDY5LCAtIDM3MjAuMDU5NTcwMzEyNSksIDEpIGRvCiAgICAgICAgICAgICAgICB3YWl0KDAuMSk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgIHY1MygiUHVyZSBSZWQiLCBWZWN0b3IzLm5ldygtIDU0MTQuOTIwNDEwMTU2MjUsIDMxNC4yNTgyMDkyMjg1MTU2LCAtIDIyMTIuMjAxNjYwMTU2MjUpKTsKICAgICAgICAgICAgd2hpbGUgbm90IHY1NChWZWN0b3IzLm5ldygtIDU0MTQuOTIwNDEwMTU2MjUsIDMxNC4yNTgyMDkyMjg1MTU2LCAtIDIyMTIuMjAxNjYwMTU2MjUpLCAxKSBkbwogICAgICAgICAgICAgICAgd2FpdCgwLjEpOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICB2NTMoIldpbnRlciBTa3kiLCBWZWN0b3IzLm5ldygtIDU0MjAuMjYzMTgzNTkzNzUsIDEwODkuMzU4Mjc2MzY3MTg3NSwgLSAyNjY2LjgxOTMzNTkzNzUpKTsKICAgICAgICAgICAgd2hpbGUgbm90IHY1NChWZWN0b3IzLm5ldygtIDU0MjAuMjYzMTgzNTkzNzUsIDEwODkuMzU4Mjc2MzY3MTg3NSwgLSAyNjY2LjgxOTMzNTkzNzUpLCAxKSBkbwogICAgICAgICAgICAgICAgd2FpdCgwLjEpOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICBfRy5FbmFibGVIYWtpRm9ydHJlc3MgPSBmYWxzZTsKICAgICAgICBlbmQKICAgICAgICB3YWl0KDAuNSk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjU1ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0Q2hlc3QiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gQ2hlc3QiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjU1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjQ4KQogICAgX0cuQXV0b0NvbGxlY3RDaGVzdCA9IHYyNDg7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9Db2xsZWN0Q2hlc3QgdGhlbgogICAgICAgICAgICBsb2NhbCB2NjczID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik7CiAgICAgICAgICAgIGxvY2FsIHY2NzQgPSB2NjczLkxvY2FsUGxheWVyOwogICAgICAgICAgICBsb2NhbCB2Njc1ID0gdjY3NC5DaGFyYWN0ZXIgb3IgdjY3NC5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkgOwogICAgICAgICAgICBsb2NhbCB2Njc2ID0gdjY3NTpHZXRQaXZvdCgpLlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Njc3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb2xsZWN0aW9uU2VydmljZSIpOwogICAgICAgICAgICBsb2NhbCB2Njc4ID0gdjY3NzpHZXRUYWdnZWQoIl9DaGVzdFRhZ2dlZCIpOwogICAgICAgICAgICBsb2NhbCB2Njc5LCB2NjgwID0gbWF0aC5odWdlOwogICAgICAgICAgICBmb3Igdjc2NSA9IDEsICMgdjY3OCBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjc2NiA9IHY2Nzhbdjc2NV07CiAgICAgICAgICAgICAgICBsb2NhbCB2NzY3ID0gKHY3NjY6R2V0UGl2b3QoKS5Qb3NpdGlvbiAtIHY2NzYpLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgIGlmIChub3Qgdjc2NjpHZXRBdHRyaWJ1dGUoIklzRGlzYWJsZWQiKSBhbmQgKHY3NjcgPCB2Njc5KSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY2NzksIHY2ODAgPSB2NzY3LCB2NzY2OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiB2NjgwIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NDAgPSB2NjgwOkdldFBpdm90KCkuUG9zaXRpb247CiAgICAgICAgICAgICAgICBsb2NhbCB2ODQxID0gQ0ZyYW1lLm5ldyh2ODQwKTsKICAgICAgICAgICAgICAgIFR3ZWVuMih2ODQxKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2Lk1haW46QWRkU2VjdGlvbigiTWFzdGVyeSIpOwpsb2NhbCB2NTcgPSB2MTYuTWFpbjpBZGREcm9wZG93bigiRHJvcGRvd25NYXN0ZXJ5IiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIE1hc3RlcnkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IHsKICAgICAgICAiTmVhciBNb2JzIgogICAgfSwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjU3OlNldFZhbHVlKFR5cGVNYXN0ZXJ5KTsKdjU3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjQ5KQogICAgVHlwZU1hc3RlcnkgPSB2MjQ5OwplbmQpOwpsb2NhbCB2NTggPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZU1hc3RlcnlGcnVpdCIsIHsKICAgIFRpdGxlID0gIkF1dG8gTWFzdGVyeSBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NTg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTApCiAgICBBdXRvRmFybU1hc0RldmlsRnJ1aXQgPSB2MjUwOwplbmQpOwp2MTcuVG9nZ2xlTWFzdGVyeUZydWl0OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjU5ID0gdjE2Lk1haW46QWRkU2xpZGVyKCJTbGlkZXJIZWFsdCIsIHsKICAgIFRpdGxlID0gIk1vYiBIUCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IDIwLAogICAgTWluID0gMCwKICAgIE1heCA9IDEwMCwKICAgIFJvdW5kaW5nID0gMSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjI1MSkKICAgICAgICBLaWxsUGVyY2VudCA9IHYyNTE7CiAgICBlbmQKfSk7CnY1OTpPbkNoYW5nZWQoZnVuY3Rpb24odjI1MikKICAgIEtpbGxQZXJjZW50ID0gdjI1MjsKZW5kKTsKdjU5OlNldFZhbHVlKDIwKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBfRy5Vc2VTa2lsbCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIF9HLlVzZVNraWxsIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwMzIsIHYxMDMzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMDMzLk5hbWUgPT0gTW9uRmFybSkgYW5kIHYxMDMzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTAzMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwMzMuSHVtYW5vaWQuSGVhbHRoIDw9ICgodjEwMzMuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQpIC8gMTAwKSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkRldmlsRnJ1aXQuVmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDMzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3NpdGlvblNraWxsTWFzdGVyeURldmlsRnJ1aXQgPSB2MTAzMy5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlKS5Nb3VzZVBvcy5WYWx1ZSA9IFBvc2l0aW9uU2tpbGxNYXN0ZXJ5RGV2aWxGcnVpdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE2MDYgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuRGV2aWxGcnVpdC5WYWx1ZSkuTGV2ZWwuVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbFogYW5kICh2MTYwNiA+PSAxKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJaIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiWiIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbFggYW5kICh2MTYwNiA+PSAyKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJYIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiWCIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbEMgYW5kICh2MTYwNiA+PSAzKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJDIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiQyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbFYgYW5kICh2MTYwNiA+PSA0KSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJWIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiViIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbEYgYW5kICh2MTYwNiA+PSA1KSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJGIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiRiIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgQXV0b0Zhcm1NYXNEZXZpbEZydWl0IG9yIG5vdCBfRy5Vc2VTa2lsbCBvciAodjEwMzMuSHVtYW5vaWQuSGVhbHRoID09IDApCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KDAuMSkgZG8KICAgICAgICBpZiAoQXV0b0Zhcm1NYXNEZXZpbEZydWl0IGFuZCAoVHlwZU1hc3RlcnkgPT0gIk5lYXIgTW9icyIpKSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGZvciB2ODQyLCB2ODQzIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjg0My5OYW1lIGFuZCB2ODQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2ODQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ODQzLkh1bWFub2lkLkhlYWx0aCA8PSAoKHY4NDMuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQpIC8gMTAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRy5Vc2VTa2lsbCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRy5Vc2VTa2lsbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NDMuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODQzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjg0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHY4NDMuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEF1dG9GYXJtTWFzRGV2aWxGcnVpdCBvciAobm90IE1hc3RlcnlUeXBlID09ICJOZWFyIE1vYnMiKSBvciBub3Qgdjg0My5QYXJlbnQgb3IgKHY4NDMuSHVtYW5vaWQuSGVhbHRoID09IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX0cuVXNlU2tpbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY0ODQgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJYxrDGoW5nIik7CiAgICBsb2NhbCB2NDg1ID0gdjE2Lk1haW46QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICJCb25lIFN0YXR1cyIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjc2OCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJvbmVzIiwgIkNoZWNrIik7CiAgICAgICAgICAgICAgICB2NDg1OlNldERlc2MoIllvdSBoYXZlOiAiIC4uIHRvc3RyaW5nKHY3NjgpIC4uICIgQm9uZXMiKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CiAgICBsb2NhbCB2NDg2ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVCb25lIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gRmFybSBCb25lIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NDg2Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTcxKQogICAgICAgIF9HLkF1dG9Cb25lID0gdjU3MTsKICAgICAgICBpZiAodjU3MSA9PSBmYWxzZSkgdGhlbgogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlQm9uZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBsb2NhbCB2NDg3ID0gQ0ZyYW1lLm5ldygtIDk1MTUuNzUsIDE3NC44NTIxNzI4NTE1NjI1LCA2MDc5LjQwNjI1KTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b0JvbmUgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY4OTQgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0OwogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzdHJpbmcuZmluZCh2ODk0LCAiRGVtb25pYyBTb3VsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBYmFuZG9uUXVlc3QiKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NDg3KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2NDg3LlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdGFydFF1ZXN0IiwgIkhhdW50ZWRRdWVzdDIiLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiUmVib3JuIFNrZWxldG9uIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJMaXZpbmcgWm9tYmllIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEZW1vbmljIFNvdWwiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY2MSwgdjE2NjIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjYyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxNjYyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjE2NjIuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTY2Mi5OYW1lID09ICJSZWJvcm4gU2tlbGV0b24iKSBvciAodjE2NjIuTmFtZSA9PSAiTGl2aW5nIFpvbWJpZSIpIG9yICh2MTY2Mi5OYW1lID09ICJEZW1vbmljIFNvdWwiKSBvciAodjE2NjIuTmFtZSA9PSAiUG9zZXNzZWQgTXVtbXkiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkRlbW9uaWMgU291bCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjYyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjYyLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjYyLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjYyLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE2NjIuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTY2Mi5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvQm9uZSBvciAodjE2NjIuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTY2Mi5QYXJlbnQgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjQ4OCA9IENGcmFtZS5uZXcoLSA5NTE1Ljc1LCAxNzQuODUyMTcyODUxNTYyNSwgNjA3OS40MDYyNSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9Cb25lTm9RdWVzdCB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjQ4OCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCh2NDg4LlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiUmVib3JuIFNrZWxldG9uIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJMaXZpbmcgWm9tYmllIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEZW1vbmljIFNvdWwiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDM2LCB2MTQzNyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQzNzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2MTQzNzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgKHYxNDM3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTQzNy5OYW1lID09ICJSZWJvcm4gU2tlbGV0b24iKSBvciAodjE0MzcuTmFtZSA9PSAiTGl2aW5nIFpvbWJpZSIpIG9yICh2MTQzNy5OYW1lID09ICJEZW1vbmljIFNvdWwiKSBvciAodjE0MzcuTmFtZSA9PSAiUG9zZXNzZWQgTXVtbXkiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQzNy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzNy5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM3Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM3Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzNy5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzcuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE0MzcuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE0MzcuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9Cb25lTm9RdWVzdCBvciAodjE0MzcuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTQzNy5QYXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0ODkgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZVJhbmRvbUJvbmUiLCB7CiAgICAgICAgVGl0bGUgPSAiUmFuZG9tIEJvbmVzIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NDg5Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTc0KQogICAgICAgIF9HLkF1dG9SYW5kb21Cb25lID0gdjU3NDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlUmFuZG9tQm9uZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9SYW5kb21Cb25lIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NDQgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkJvbmVzIiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQnV5IiwKICAgICAgICAgICAgICAgICAgICBbM10gPSAxLAogICAgICAgICAgICAgICAgICAgIFs0XSA9IDEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODQ0KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjQ5MCA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIkNha2UgUHJpbmNlIik7CiAgICBsb2NhbCB2NDkxID0gdjE2Lk1haW46QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICJTdGF0dXMiLAogICAgICAgIENvbnRlbnQgPSAiIgogICAgfSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIChzdHJpbmcubGVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIikpID09IDg4KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ5MTpTZXREZXNjKCJMZWZ0OiAiIC4uIHN0cmluZy5zdWIoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSwgMzksIDQxKSAuLiAiIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHN0cmluZy5sZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSkgPT0gODcpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDkxOlNldERlc2MoIkPDsm46ICIgLi4gc3RyaW5nLnN1YihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpLCAzOSwgNDApIC4uICIiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoc3RyaW5nLmxlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpKSA9PSA4NikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0OTE6U2V0RGVzYygiQ8OybjogIiAuLiBzdHJpbmcuc3ViKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIiksIDM5LCAzOSkgLi4gIiAiKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDkxOlNldERlc2MoIlTGsCBM4buHbmggQsOhbmggOiDinIXvuI8iKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0OTIgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUNha2UiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBDYWtlIFByaW5jZSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgbG9jYWwgdjQ5MyA9IHRydWU7CiAgICB2NDkyOk9uQ2hhbmdlZChmdW5jdGlvbih2NTc1KQogICAgICAgIF9HLkNha2VQcmluY2UgPSB2NTc1OwogICAgICAgIGlmIHY1NzUgdGhlbgogICAgICAgICAgICBpZiB2NDkzIHRoZW4KICAgICAgICAgICAgICAgIHY0OTMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4OTUgPSBDRnJhbWUubmV3KC0gMjAwMy45MzI4NjEzMjgxMjUsIDM4MC40ODI0NTIzOTI1NzgxLCAtIDEyNTYxLjAxODU1NDY4NzUpOwogICAgICAgICAgICAgICAgVHdlZW4odjg5NSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgdjQ5MyA9IHRydWU7CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVDYWtlOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQ2FrZVByaW5jZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDM4LCB2MTQzOSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQzOS5OYW1lID09ICJDYWtlIFByaW5jZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQzOS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzkuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQ2FrZVByaW5jZSBvciBub3QgdjE0MzkuUGFyZW50IG9yICh2MTQzOS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSBbTHYuIDIzMDBdIFtSYWlkIEJvc3NdIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIFtMdi4gMjMwMF0gW1JhaWQgQm9zc10iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNha2VMb2FmLkJpZ01pcnJvci5PdGhlci5UcmFuc3BhcmVuY3kgPT0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDb29raWUgQ3JhZnRlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBHdWFyZCIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQmFraW5nIFN0YWZmIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJIZWFkIEJha2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc1NCwgdjE3NTUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTc1NS5OYW1lID09ICJDb29raWUgQ3JhZnRlciIpIG9yICh2MTc1NS5OYW1lID09ICJDYWtlIEd1YXJkIikgb3IgKHYxNzU1Lk5hbWUgPT0gIkJha2luZyBTdGFmZiIpIG9yICh2MTc1NS5OYW1lID09ICJIZWFkIEJha2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzU1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTc1NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE3NTUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc1NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc1NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzU1LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzU1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTc1NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE3NTUuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTc1NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkNha2VQcmluY2Ugb3Igbm90IHYxNzU1LlBhcmVudCBvciAodjE3NTUuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5DYWtlTG9hZi5CaWdNaXJyb3IuT3RoZXIuVHJhbnNwYXJlbmN5ID09IDApIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBQcmluY2UgW0x2LiAyMzAwXSBbUmFpZCBCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBQcmluY2UgW0x2LiAyMzAwXSBbUmFpZCBCb3NzXSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0OTQgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZURvdWdoS2luZyIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIERvdWdoIEtpbmciLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY0OTQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1NzYpCiAgICAgICAgX0cuRG91Z2hLaW5nID0gdjU3NjsKICAgICAgICBpZiAodjU3NiA9PSBmYWxzZSkgdGhlbgogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRG91Z2hLaW5nOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuRG91Z2hLaW5nIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRvdWdoIEtpbmciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ0MCwgdjE0NDEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDEuTmFtZSA9PSAiRG91Z2ggS2luZyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDQxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ0MS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NDEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuRG91Z2hLaW5nIG9yIG5vdCB2MTQ0MS5QYXJlbnQgb3IgKHYxNDQxLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjQ5NSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlU3Bhd25DYWtlIiwgewogICAgICAgIFRpdGxlID0gIlNwYXdtIENha2UgUHJpbmNlIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSB0cnVlCiAgICB9KTsKICAgIHY0OTU6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1NzcpCiAgICAgICAgX0cuU3Bhd25DYWtlUHJpbmNlID0gdjU3NzsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlU3Bhd25DYWtlOlNldFZhbHVlKHRydWUpOwplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuU3Bhd25DYWtlUHJpbmNlIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjY4MSA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJDYWtlUHJpbmNlU3Bhd25lciIsCiAgICAgICAgICAgICAgICBbMl0gPSB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2ODEpKTsKICAgICAgICAgICAgbG9jYWwgdjY4MSA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJDYWtlUHJpbmNlU3Bhd25lciIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjY4MSkpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTIgdGhlbgogICAgbG9jYWwgdjQ5NiA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIkVjdG9wbGFzbSBGYXJtIik7CiAgICBsb2NhbCB2NDk3ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVWYXRDaGF0S2lEaSIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIEZhcm0gRWN0b3BsYXNtIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NDk3Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTc4KQogICAgICAgIF9HLkVjdG9wbGFzbSA9IHY1Nzg7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVZhdENoYXRLaURpOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgX0cuRWN0b3BsYXNtIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTaGlwIERlY2toYW5kIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTaGlwIEVuZ2luZWVyIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTaGlwIFN0ZXdhcmQiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNoaXAgT2ZmaWNlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ0MiwgdjE0NDMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNDQzLk5hbWUgPT0gIlNoaXAgU3Rld2FyZCIpIG9yICh2MTQ0My5OYW1lID09ICJTaGlwIEVuZ2luZWVyIikgb3IgKHYxNDQzLk5hbWUgPT0gIlNoaXAgRGVja2hhbmQiKSBvciAoKHYxNDQzLk5hbWUgPT0gIlNoaXAgT2ZmaWNlciIpIGFuZCB2MTQ0MzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDMuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQzLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQzLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0My5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE0NDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE0NDMuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkVjdG9wbGFzbSA9PSBmYWxzZSkgb3Igbm90IHYxNDQzLlBhcmVudCBvciAodjE0NDMuSHVtYW5vaWQuSGVhbHRoID09IDApIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodjE0NDMuTmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzM0ID0gKFZlY3RvcjMubmV3KDkwNC40MDcyMjY1NjI1LCAxODEuMDU3Njc4MjIyNjYsIDMzMzQxLjM4NjcxODc1KSAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEzMzQgPiAyMDAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoOTA0LjQwNzIyNjU2MjUsIDE4MS4wNTc2NzgyMjI2NiwgMzMzNDEuMzg2NzE4NzUpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmxvY2FsIHY2MCA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIkJvc3MiKTsKaWYgU2VhMSB0aGVuCiAgICB0YWJsZUJvc3MgPSB7CiAgICAgICAgIlRoZSBHb3JpbGxhIEtpbmciLAogICAgICAgICJCb2JieSIsCiAgICAgICAgIllldGkiLAogICAgICAgICJNb2IgTGVhZGVyIiwKICAgICAgICAiVmljZSBBZG1pcmFsIiwKICAgICAgICAiV2FyZGVuIiwKICAgICAgICAiQ2hpZWYgV2FyZGVuIiwKICAgICAgICAiU3dhbiIsCiAgICAgICAgIk1hZ21hIEFkbWlyYWwiLAogICAgICAgICJGaXNobWFuIExvcmQiLAogICAgICAgICJXeXNwZXIiLAogICAgICAgICJUaHVuZGVyIEdvZCIsCiAgICAgICAgIkN5Ym9yZyIsCiAgICAgICAgIlNhYmVyIEV4cGVydCIKICAgIH07CmVsc2VpZiBTZWEyIHRoZW4KICAgIHRhYmxlQm9zcyA9IHsKICAgICAgICAiRGlhbW9uZCIsCiAgICAgICAgIkplcmVteSIsCiAgICAgICAgIkZhaml0YSIsCiAgICAgICAgIkRvbiBTd2FuIiwKICAgICAgICAiU21va2UgQWRtaXJhbCIsCiAgICAgICAgIkN1cnNlZCBDYXB0YWluIiwKICAgICAgICAiRGFya2JlYXJkIiwKICAgICAgICAiT3JkZXIiLAogICAgICAgICJBd2FrZW5lZCBJY2UgQWRtaXJhbCIsCiAgICAgICAgIlRpZGUgS2VlcGVyIgogICAgfTsKZWxzZWlmIFNlYTMgdGhlbgogICAgdGFibGVCb3NzID0gewogICAgICAgICJTdG9uZSIsCiAgICAgICAgIkh5ZHJhIExlYWRlciIsCiAgICAgICAgIktpbG8gQWRtaXJhbCIsCiAgICAgICAgIkNhcHRhaW4gRWxlcGhhbnQiLAogICAgICAgICJCZWF1dGlmdWwgUGlyYXRlIiwKICAgICAgICAicmlwX2luZHJhIFRydWUgRm9ybSIsCiAgICAgICAgIkxvbmdtYSIsCiAgICAgICAgIlNvdWwgUmVhcGVyIiwKICAgICAgICAiQ2FrZSBRdWVlbiIKICAgIH07CmVuZApsb2NhbCB2NjEgPSB2MTYuTWFpbjpBZGREcm9wZG93bigiRHJvcGRvd25Cb3NzIiwgewogICAgVGl0bGUgPSAiU2VsZWN0IEJvc3MiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IHRhYmxlQm9zcywKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjYxOlNldFZhbHVlKF9HLlNlbGVjdEJvc3MpOwp2NjE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTMpCiAgICBfRy5TZWxlY3RCb3NzID0gdjI1MzsKZW5kKTsKbG9jYWwgdjYyID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVBdXRvRmFybUJvc3MiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gQm9zcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NjI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTQpCiAgICBfRy5BdXRvQm9zcyA9IHYyNTQ7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvRmFybUJvc3M6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQm9zcyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZChfRy5TZWxlY3RCb3NzKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDM0LCB2MTAzNSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDM1Lk5hbWUgPT0gX0cuU2VsZWN0Qm9zcykgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDM1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTAzNTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwMzUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDM1Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDM1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTAzNS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9Cb3NzIG9yIG5vdCB2MTAzNS5QYXJlbnQgb3IgKHYxMDM1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZChfRy5TZWxlY3RCb3NzKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKF9HLlNlbGVjdEJvc3MpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldyg1LCAxMCwgNykpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjYzID0gdjE2Lk1haW46QWRkU2VjdGlvbigiTWF0ZXJpYWwiKTsKaWYgU2VhMSB0aGVuCiAgICBNYXRlcmlhbExpc3QgPSB7CiAgICAgICAgIlNjcmFwIE1ldGFsIiwKICAgICAgICAiTGVhdGhlciIsCiAgICAgICAgIkFuZ2VsIFdpbmdzIiwKICAgICAgICAiTWFnbWEgT3JlIiwKICAgICAgICAiRmlzaCBUYWlsIgogICAgfTsKZWxzZWlmIFNlYTIgdGhlbgogICAgTWF0ZXJpYWxMaXN0ID0gewogICAgICAgICJTY3JhcCBNZXRhbCIsCiAgICAgICAgIkxlYXRoZXIiLAogICAgICAgICJSYWRpb2FjdGl2ZSBNYXRlcmlhbCIsCiAgICAgICAgIk15c3RpYyBEcm9wbGV0IiwKICAgICAgICAiTWFnbWEgT3JlIiwKICAgICAgICAiVmFtcGlyZSBGYW5nIgogICAgfTsKZWxzZWlmIFNlYTMgdGhlbgogICAgTWF0ZXJpYWxMaXN0ID0gewogICAgICAgICJTY3JhcCBNZXRhbCIsCiAgICAgICAgIkxlYXRoZXIiLAogICAgICAgICJEZW1vbmljIFdpc3AiLAogICAgICAgICJDb25qdXJlZCBDb2NvYSIsCiAgICAgICAgIkRyYWdvbiBTY2FsZSIsCiAgICAgICAgIkd1bnBvd2RlciIsCiAgICAgICAgIkZpc2ggVGFpbCIsCiAgICAgICAgIk1pbmkgVHVzayIsCiAgICAgICAgIkh5ZHJhIEVuZm9yY2VyIiwKICAgICAgICAiVmVub21vdXMgQXNzYWlsYW50IgogICAgfTsKZW5kCmxvY2FsIHY2NCA9IHYxNi5NYWluOkFkZERyb3Bkb3duKCJEcm9wZG93bk1hdGVyaWFsIiwgewogICAgVGl0bGUgPSAiU2VsZWN0IE1hdGVyaWFsIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSBNYXRlcmlhbExpc3QsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnY2NDpTZXRWYWx1ZShTZWxlY3RNYXRlcmlhbCk7CnY2NDpPbkNoYW5nZWQoZnVuY3Rpb24odjI1NSkKICAgIFNlbGVjdE1hdGVyaWFsID0gdjI1NTsKZW5kKTsKbG9jYWwgdjY1ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVNYXRlcmlhbCIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBNYXRlcmlhbCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NjU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTYpCiAgICBfRy5BdXRvTWF0ZXJpYWwgPSB2MjU2OwogICAgaWYgKHYyNTYgPT0gZmFsc2UpIHRoZW4KICAgICAgICB3YWl0KCk7CiAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICB3YWl0KCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZU1hdGVyaWFsOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvTWF0ZXJpYWwgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBNYXRlcmlhbE1vbihTZWxlY3RNYXRlcmlhbCk7CiAgICAgICAgICAgICAgICBUd2VlbihNUG9zKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZChNTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDM2LCB2MTAzNyBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTAzNzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwMzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDM3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwMzcuTmFtZSA9PSBNTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwMzcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzcuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxMDM3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjEwMzcuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b01hdGVyaWFsIG9yIG5vdCB2MTAzNy5QYXJlbnQgb3IgKHYxMDM3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDM4LCB2MTAzOSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5FbmVteVNwYXduczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2MTAzOS5OYW1lLCBNb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjEwMzkuUG9zaXRpb24pLk1hZ25pdHVkZSA+PSAxMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDM5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjQ5OCA9IHYxNi5TZWE6QWRkU2VjdGlvbigiS2l0c3VuZSBJc2xhbmQgU3RhdHVzIik7CiAgICBsb2NhbCB2NDk5ID0gdjE2LlNlYTpBZGRQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIiIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIGZ1bmN0aW9uIFVwZGF0ZUtpdHN1bmUoKQogICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJLaXRzdW5lSXNsYW5kIikgdGhlbgogICAgICAgICAgICB2NDk5OlNldERlc2MoIktpdHN1bmUgSXNsYW5kIDog4pyF77iPIik7CiAgICAgICAgZWxzZQogICAgICAgICAgICB2NDk5OlNldERlc2MoIktpdHN1bmUgSXNsYW5kIDog4p2M77iPIik7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICAgICAgVXBkYXRlS2l0c3VuZSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKICAgIGxvY2FsIHY1MDAgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlRXNwS2l0c3VuZSIsIHsKICAgICAgICBUaXRsZSA9ICJFc3AgS2l0c3VuZSBpc2xhbmQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MDA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1NzkpCiAgICAgICAgS2l0c3VuZUlzbGFuZEVzcCA9IHY1Nzk7CiAgICAgICAgd2hpbGUgS2l0c3VuZUlzbGFuZEVzcCBkbwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIFVwZGF0ZUlzbGFuZEtpc3VuZUVTUCgpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVFc3BLaXRzdW5lOlNldFZhbHVlKGZhbHNlKTsKICAgIGZ1bmN0aW9uIFVwZGF0ZUlzbGFuZEtpc3VuZUVTUCgpCiAgICAgICAgZm9yIHY2ODIsIHY4MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgS2l0c3VuZUlzbGFuZEVzcCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKHY2ODMuTmFtZSA9PSAiS2l0c3VuZSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NjgzOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE1MTggPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY2ODMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MTguTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTE4LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTE4LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5BZG9ybmVlID0gdjY4MzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTE4LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNTI0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTUxOCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5Gb250ID0gIkNvZGUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY2ODNbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY2ODMuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NjgzLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIE0iIDsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjY4MzpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NjgzOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGxvY2FsIHY1MDEgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlVFBLaXRzdW5lIiwgewogICAgICAgIFRpdGxlID0gIkZseSB0byBLaXRzdW5lIElzbGFuZCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUwMTpPbkNoYW5nZWQoZnVuY3Rpb24odjU4MCkKICAgICAgICBfRy5Ud2VlblRvS2l0c3VuZSA9IHY1ODA7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVRQS2l0c3VuZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjU4MTsKICAgICAgICB3aGlsZSBub3QgdjU4MSBkbwogICAgICAgICAgICB2NTgxID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIktpdHN1bmVJc2xhbmQiKTsKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgIGVuZAogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5Ud2VlblRvS2l0c3VuZSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODQ1ID0gdjU4MTpGaW5kRmlyc3RDaGlsZCgiU2hyaW5lQWN0aXZlIik7CiAgICAgICAgICAgICAgICBpZiB2ODQ1IHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEzMzUsIHYxMzM2IGluIHBhaXJzKHY4NDU6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMzM2OklzQSgiQmFzZVBhcnQiKSBhbmQgdjEzMzYuTmFtZTpmaW5kKCJOZW9uU2hyaW5lUGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTMzNi5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTAyID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3RBenVyZSIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIENvbGxlY3QgQXp1cmUgRW1iZXIiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MDI6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1ODIpCiAgICAgICAgX0cuQ29sbGVjdEF6dXJlID0gdjU4MjsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlQ29sbGVjdEF6dXJlOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQ29sbGVjdEF6dXJlIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJBdHRhY2hlZEF6dXJlRW1iZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6V2FpdEZvckNoaWxkKCJFbWJlclRlbXBsYXRlIik6RmluZEZpcnN0Q2hpbGQoIlBhcnQiKS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKdjE2LlNlYTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQXV0byBUcmFkZSBBenVyZSBFbWJlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOldhaXRGb3JDaGlsZCgiTW9kdWxlcyIpOldhaXRGb3JDaGlsZCgiTmV0Iik6V2FpdEZvckNoaWxkKCJSRi9LaXRzdW5lU3RhdHVlUHJheSIpOkludm9rZVNlcnZlcigpOwogICAgZW5kCn0pOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY1MDMgPSB2MTYuU2VhOkFkZFNlY3Rpb24oIlNlYSIpOwogICAgbG9jYWwgdjUwNCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOwogICAgbG9jYWwgdjUwNSA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpOwogICAgbG9jYWwgdjUwNiA9IGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOwogICAgbG9jYWwgdjUwNyA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik7CiAgICBsb2NhbCB2NTA4ID0gMzUwOwogICAgbG9jYWwgdjUwOSA9IHYxNi5TZWE6QWRkU2xpZGVyKCJTbGlkZXJTcGVlZEJvYXQiLCB7CiAgICAgICAgVGl0bGUgPSAiQm9hdCBTcGVlZCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gdjUwOCwKICAgICAgICBNaW4gPSAwLAogICAgICAgIE1heCA9IDM1MCwKICAgICAgICBSb3VuZGluZyA9IDEsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2NTgzKQogICAgICAgICAgICB2NTA4ID0gdjU4MzsKICAgICAgICBlbmQKICAgIH0pOwogICAgdjUwOTpTZXRWYWx1ZSh2NTA4KTsKICAgIGxvY2FsIHY1MTAgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0ZpbmRQcmVoaXN0b3JpYyIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIEZpbmQgUHJlaGlzdG9yaWMgSXNsYW5kIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2MTcuQXV0b0ZpbmRQcmVoaXN0b3JpYzpTZXRWYWx1ZShmYWxzZSk7CiAgICB2NTEwOk9uQ2hhbmdlZChmdW5jdGlvbih2NTg0KQogICAgICAgIF9HLkF1dG9GaW5kUHJlaGlzdG9yaWMgPSB2NTg0OwogICAgZW5kKTsKICAgIGxvY2FsIHY1MTEgPSB7fTsKICAgIGxvY2FsIHY1MTIgPSBmYWxzZTsKICAgIGxvY2FsIHY1MTMgPSBmYWxzZTsKICAgIHY1MDUuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgX0cuQXV0b0ZpbmRQcmVoaXN0b3JpYyB0aGVuCiAgICAgICAgICAgIHY1MTMgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1ODUgPSB2NTA0LkxvY2FsUGxheWVyOwogICAgICAgIGxvY2FsIHY1ODYgPSB2NTg1LkNoYXJhY3RlcjsKICAgICAgICBpZiAobm90IHY1ODYgb3Igbm90IHY1ODY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikpIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIGZ1bmN0aW9uIHY1ODcoKQogICAgICAgICAgICBpZiB2NTEyIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1MTIgPSB0cnVlOwogICAgICAgICAgICBmb3Igdjc2OSwgdjc3MCBpbiBwYWlycyh2NTExKSBkbwogICAgICAgICAgICAgICAgaWYgKHY3NzAgYW5kIHY3NzAuUGFyZW50IGFuZCAodjc3MC5OYW1lID09ICJWZWhpY2xlU2VhdCIpIGFuZCBub3Qgdjc3MC5PY2N1cGFudCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMih2NzcwLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1MTIgPSBmYWxzZTsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTg4ID0gdjU4Ni5IdW1hbm9pZDsKICAgICAgICBsb2NhbCB2NTg5ID0gZmFsc2U7CiAgICAgICAgbG9jYWwgdjU5MCA9IG5pbDsKICAgICAgICBmb3IgdjY4NCwgdjY4NSBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY2ODYgPSB2Njg1OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjY4NiBhbmQgKHY2ODYuT2NjdXBhbnQgPT0gdjU4OCkpIHRoZW4KICAgICAgICAgICAgICAgIHY1ODkgPSB0cnVlOwogICAgICAgICAgICAgICAgdjU5MCA9IHY2ODY7CiAgICAgICAgICAgICAgICB2NTExW3Y2ODUuTmFtZV0gPSB2Njg2OwogICAgICAgICAgICBlbHNlaWYgKHY2ODYgYW5kICh2Njg2Lk9jY3VwYW50ID09IG5pbCkpIHRoZW4KICAgICAgICAgICAgICAgIHY1ODcoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgaWYgbm90IHY1ODkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgdjU5MC5NYXhTcGVlZCA9IHY1MDg7CiAgICAgICAgdjU5MC5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KHY1OTAuUG9zaXRpb24uWCwgdjU5MC5Qb3NpdGlvbi5ZLCB2NTkwLlBvc2l0aW9uLlopKSAqIHY1OTAuQ0ZyYW1lLlJvdGF0aW9uIDsKICAgICAgICB2NTA2OlNlbmRLZXlFdmVudCh0cnVlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICBmb3IgdjY4NywgdjY4OCBpbiBwYWlycyh2NTA3LkJvYXRzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY2ODg6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHY2ODguQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBmb3IgdjY4OSwgdjY5MCBpbiBwYWlycyh2NTg2OkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY2OTA6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHY2OTAuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTkzID0gewogICAgICAgICAgICAiU2hpcHdyZWNrSXNsYW5kIiwKICAgICAgICAgICAgIlNhbmRJc2xhbmQiLAogICAgICAgICAgICAiVHJlZUlzbGFuZCIsCiAgICAgICAgICAgICJUaW55SXNsYW5kIiwKICAgICAgICAgICAgIk15c3RpY0lzbGFuZCIsCiAgICAgICAgICAgICJLaXRzdW5lSXNsYW5kIiwKICAgICAgICAgICAgIkZyb3plbkRpbWVuc2lvbiIKICAgICAgICB9OwogICAgICAgIGZvciB2NjkxLCB2NjkyIGluIGlwYWlycyh2NTkzKSBkbwogICAgICAgICAgICBsb2NhbCB2NjkzID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQodjY5Mik7CiAgICAgICAgICAgIGlmICh2NjkzIGFuZCB2NjkzOklzQSgiTW9kZWwiKSkgdGhlbgogICAgICAgICAgICAgICAgdjY5MzpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1OTQgPSB2NTA3Lk1hcDpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNJc2xhbmQiKTsKICAgICAgICBpZiB2NTk0IHRoZW4KICAgICAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQoZmFsc2UsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICBfRy5BdXRvRmluZFByZWhpc3RvcmljID0gZmFsc2U7CiAgICAgICAgICAgIGlmIG5vdCB2NTEzIHRoZW4KICAgICAgICAgICAgICAgIHYxNDpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIkJhbmFuYSBDYXQgSHViIiwKICAgICAgICAgICAgICAgICAgICBDb250ZW50ID0gIsSQ4bqjbyBEdW5nIE5oYW0gVMOsbSBUaOG6pXkiLAogICAgICAgICAgICAgICAgICAgIER1cmF0aW9uID0gMTAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdjUxMyA9IHRydWU7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUxNCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJBdXRvRmluZE1pcmFnZSIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIEZpbmQgTWlyYWdlIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2MTcuQXV0b0ZpbmRNaXJhZ2U6U2V0VmFsdWUoZmFsc2UpOwogICAgdjUxNDpPbkNoYW5nZWQoZnVuY3Rpb24odjU5NSkKICAgICAgICBfRy5BdXRvRmluZE1pcmFnZSA9IHY1OTU7CiAgICBlbmQpOwogICAgbG9jYWwgdjUxMSA9IHt9OwogICAgbG9jYWwgdjUxMiA9IGZhbHNlOwogICAgbG9jYWwgdjUxMyA9IGZhbHNlOwogICAgdjUwNS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBfRy5BdXRvRmluZE1pcmFnZSB0aGVuCiAgICAgICAgICAgIHY1MTMgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1OTYgPSB2NTA0LkxvY2FsUGxheWVyOwogICAgICAgIGxvY2FsIHY1OTcgPSB2NTk2LkNoYXJhY3RlcjsKICAgICAgICBpZiAobm90IHY1OTcgb3Igbm90IHY1OTc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikpIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIGZ1bmN0aW9uIHY1OTgoKQogICAgICAgICAgICBpZiB2NTEyIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1MTIgPSB0cnVlOwogICAgICAgICAgICBmb3Igdjc3MSwgdjc3MiBpbiBwYWlycyh2NTExKSBkbwogICAgICAgICAgICAgICAgaWYgKHY3NzIgYW5kIHY3NzIuUGFyZW50IGFuZCAodjc3Mi5OYW1lID09ICJWZWhpY2xlU2VhdCIpIGFuZCBub3Qgdjc3Mi5PY2N1cGFudCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMih2NzcyLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1MTIgPSBmYWxzZTsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTk5ID0gdjU5Ny5IdW1hbm9pZDsKICAgICAgICBsb2NhbCB2NjAwID0gZmFsc2U7CiAgICAgICAgbG9jYWwgdjYwMSA9IG5pbDsKICAgICAgICBmb3IgdjY5NCwgdjY5NSBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY2OTYgPSB2Njk1OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjY5NiBhbmQgKHY2OTYuT2NjdXBhbnQgPT0gdjU5OSkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MDAgPSB0cnVlOwogICAgICAgICAgICAgICAgdjYwMSA9IHY2OTY7CiAgICAgICAgICAgICAgICB2NTExW3Y2OTUuTmFtZV0gPSB2Njk2OwogICAgICAgICAgICBlbHNlaWYgKHY2OTYgYW5kICh2Njk2Lk9jY3VwYW50ID09IG5pbCkpIHRoZW4KICAgICAgICAgICAgICAgIHY1OTgoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgaWYgbm90IHY2MDAgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgdjYwMS5NYXhTcGVlZCA9IHY1MDg7CiAgICAgICAgdjYwMS5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KHY2MDEuUG9zaXRpb24uWCwgdjYwMS5Qb3NpdGlvbi5ZLCB2NjAxLlBvc2l0aW9uLlopKSAqIHY2MDEuQ0ZyYW1lLlJvdGF0aW9uIDsKICAgICAgICB2NTA2OlNlbmRLZXlFdmVudCh0cnVlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICBmb3IgdjY5NywgdjY5OCBpbiBwYWlycyh2NTA3LkJvYXRzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY2OTg6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHY2OTguQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBmb3IgdjY5OSwgdjcwMCBpbiBwYWlycyh2NTk3OkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY3MDA6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHY3MDAuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjA0ID0gewogICAgICAgICAgICAiU2hpcHdyZWNrSXNsYW5kIiwKICAgICAgICAgICAgIlNhbmRJc2xhbmQiLAogICAgICAgICAgICAiVHJlZUlzbGFuZCIsCiAgICAgICAgICAgICJUaW55SXNsYW5kIiwKICAgICAgICAgICAgIlByZWhpc3RvcmljSXNsYW5kIiwKICAgICAgICAgICAgIktpdHN1bmVJc2xhbmQiLAogICAgICAgICAgICAiRnJvemVuRGltZW5zaW9uIgogICAgICAgIH07CiAgICAgICAgZm9yIHY3MDEsIHY3MDIgaW4gaXBhaXJzKHY2MDQpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MDMgPSB2NTA3Lk1hcDpGaW5kRmlyc3RDaGlsZCh2NzAyKTsKICAgICAgICAgICAgaWYgKHY3MDMgYW5kIHY3MDM6SXNBKCJNb2RlbCIpKSB0aGVuCiAgICAgICAgICAgICAgICB2NzAzOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYwNSA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKCJNeXN0aWNJc2xhbmQiKTsKICAgICAgICBpZiB2NjA1IHRoZW4KICAgICAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQoZmFsc2UsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICBfRy5BdXRvRmluZE1pcmFnZSA9IGZhbHNlOwogICAgICAgICAgICBpZiBub3QgdjUxMyB0aGVuCiAgICAgICAgICAgICAgICB2MTQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJCYW5hbmEgQ2F0IEh1YiIsCiAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICLEkOG6o28gQsOtIOG6qG4gVMOsbSBUaOG6pXkiLAogICAgICAgICAgICAgICAgICAgIER1cmF0aW9uID0gMTAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdjUxMyA9IHRydWU7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUxNSA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJBdXRvRmluZEZyb3plbiIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIEZpbmQgTGV2aWF0aGFuIElzbGFuZCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjE3LkF1dG9GaW5kRnJvemVuOlNldFZhbHVlKGZhbHNlKTsKICAgIHY1MTU6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MDYpCiAgICAgICAgX0cuQXV0b0ZpbmRGcm96ZW4gPSB2NjA2OwogICAgZW5kKTsKICAgIGxvY2FsIHY1MTEgPSB7fTsKICAgIGxvY2FsIHY1MTIgPSBmYWxzZTsKICAgIGxvY2FsIHY1MTMgPSBmYWxzZTsKICAgIHY1MDUuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgX0cuQXV0b0ZpbmRGcm96ZW4gdGhlbgogICAgICAgICAgICB2NTEzID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjA3ID0gdjUwNC5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2NjA4ID0gdjYwNy5DaGFyYWN0ZXI7CiAgICAgICAgaWYgKG5vdCB2NjA4IG9yIG5vdCB2NjA4OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCBmdW5jdGlvbiB2NjA5KCkKICAgICAgICAgICAgaWYgdjUxMiB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gdHJ1ZTsKICAgICAgICAgICAgZm9yIHY3NzMsIHY3NzQgaW4gcGFpcnModjUxMSkgZG8KICAgICAgICAgICAgICAgIGlmICh2Nzc0IGFuZCB2Nzc0LlBhcmVudCBhbmQgKHY3NzQuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3NzQuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjc3NC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gZmFsc2U7CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYxMCA9IHY2MDguSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjYxMSA9IGZhbHNlOwogICAgICAgIGxvY2FsIHY2MTIgPSBuaWw7CiAgICAgICAgZm9yIHY3MDQsIHY3MDUgaW4gcGFpcnModjUwNy5Cb2F0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBsb2NhbCB2NzA2ID0gdjcwNTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKTsKICAgICAgICAgICAgaWYgKHY3MDYgYW5kICh2NzA2Lk9jY3VwYW50ID09IHY2MTApKSB0aGVuCiAgICAgICAgICAgICAgICB2NjExID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHY2MTIgPSB2NzA2OwogICAgICAgICAgICAgICAgdjUxMVt2NzA1Lk5hbWVdID0gdjcwNjsKICAgICAgICAgICAgZWxzZWlmICh2NzA2IGFuZCAodjcwNi5PY2N1cGFudCA9PSBuaWwpKSB0aGVuCiAgICAgICAgICAgICAgICB2NjA5KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIG5vdCB2NjExIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIHY2MTIuTWF4U3BlZWQgPSB2NTA4OwogICAgICAgIHY2MTIuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldyh2NjEyLlBvc2l0aW9uLlgsIHY2MTIuUG9zaXRpb24uWSwgdjYxMi5Qb3NpdGlvbi5aKSkgKiB2NjEyLkNGcmFtZS5Sb3RhdGlvbiA7CiAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQodHJ1ZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgZm9yIHY3MDcsIHY3MDggaW4gcGFpcnModjUwNy5Cb2F0czpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NzA4OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2NzA4LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZm9yIHY3MDksIHY3MTAgaW4gcGFpcnModjYwODpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NzEwOklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2NzEwLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYxNSA9IHsKICAgICAgICAgICAgIlNoaXB3cmVja0lzbGFuZCIsCiAgICAgICAgICAgICJTYW5kSXNsYW5kIiwKICAgICAgICAgICAgIlRyZWVJc2xhbmQiLAogICAgICAgICAgICAiVGlueUlzbGFuZCIsCiAgICAgICAgICAgICJNeXN0aWNJc2xhbmQiLAogICAgICAgICAgICAiS2l0c3VuZUlzbGFuZCIsCiAgICAgICAgICAgICJQcmVoaXN0b3JpY0lzbGFuZCIKICAgICAgICB9OwogICAgICAgIGZvciB2NzExLCB2NzEyIGluIGlwYWlycyh2NjE1KSBkbwogICAgICAgICAgICBsb2NhbCB2NzEzID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQodjcxMik7CiAgICAgICAgICAgIGlmICh2NzEzIGFuZCB2NzEzOklzQSgiTW9kZWwiKSkgdGhlbgogICAgICAgICAgICAgICAgdjcxMzpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MTYgPSB2NTA3Lk1hcDpGaW5kRmlyc3RDaGlsZCgiRnJvemVuRGltZW5zaW9uIik7CiAgICAgICAgaWYgdjYxNiB0aGVuCiAgICAgICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KGZhbHNlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgX0cuQXV0b0ZpbmRGcm96ZW4gPSBmYWxzZTsKICAgICAgICAgICAgaWYgbm90IHY1MTMgdGhlbgogICAgICAgICAgICAgICAgdjE0Ok5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiQmFuYW5hIENhdCBIdWIiLAogICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSAixJDhuqNvIExldmlhdGhhbiBUw6xtIFRo4bqleSIsCiAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAxMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2NTEzID0gdHJ1ZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTE2ID0gdjE2LlNlYTpBZGRUb2dnbGUoIkF1dG9Db21lVGlraSIsIHsKICAgICAgICBUaXRsZSA9ICJHbyBCYWNrIFRvIFRpa2kgT3V0cG9zdCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUxNjpPbkNoYW5nZWQoZnVuY3Rpb24odjYxNykKICAgICAgICBfRy5BdXRvQ29tZVRpa2kgPSB2NjE3OwogICAgZW5kKTsKICAgIHY1MDUuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgX0cuQXV0b0NvbWVUaWtpIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MTggPSB2NTA0LkxvY2FsUGxheWVyOwogICAgICAgIGxvY2FsIHY2MTkgPSB2NjE4LkNoYXJhY3RlcjsKICAgICAgICBpZiAobm90IHY2MTkgb3Igbm90IHY2MTk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikpIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MjAgPSB2NjE5Lkh1bWFub2lkOwogICAgICAgIGxvY2FsIHY2MjEgPSBuaWw7CiAgICAgICAgZm9yIHY3MTQsIHY3MTUgaW4gcGFpcnModjUwNy5Cb2F0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBsb2NhbCB2NzE2ID0gdjcxNTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKTsKICAgICAgICAgICAgaWYgKHY3MTYgYW5kICh2NzE2Lk9jY3VwYW50ID09IHY2MjApKSB0aGVuCiAgICAgICAgICAgICAgICB2NjIxID0gdjcxNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBpZiB2NjIxIHRoZW4KICAgICAgICAgICAgdjYyMS5NYXhTcGVlZCA9IHY1MDg7CiAgICAgICAgICAgIGxvY2FsIHY3NzYgPSBDRnJhbWUubmV3KC0gMTYyMTcuNzU2ODM1OTM3NSwgOS4xMjY3NjE0MzY0NjI0MDIsIDQ0Ni4wNjUzNjg2NTIzNDM3NSk7CiAgICAgICAgICAgIGxvY2FsIHY3NzcgPSB2NjIxLlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Nzc4ID0gdjc3Ni5Qb3NpdGlvbjsKICAgICAgICAgICAgbG9jYWwgdjc3OSA9ICh2Nzc4IC0gdjc3NykudW5pdDsKICAgICAgICAgICAgbG9jYWwgdjc4MCA9IHY3NzkgKiB2NjIxLk1heFNwZWVkICogdjUwNS5SZW5kZXJTdGVwcGVkOldhaXQoKSA7CiAgICAgICAgICAgIHY2MjEuQ0ZyYW1lID0gdjYyMS5DRnJhbWUgKyB2NzgwIDsKICAgICAgICAgICAgbG9jYWwgdjc4MiA9IENGcmFtZS5uZXcodjc3Nywgdjc3OCk7CiAgICAgICAgICAgIHY2MjEuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyh2NjIxLlBvc2l0aW9uLCB2Nzc4KTsKICAgICAgICAgICAgaWYgKCh2NjIxLlBvc2l0aW9uIC0gdjc3OCkubWFnbml0dWRlIDwgMTIwKSB0aGVuCiAgICAgICAgICAgICAgICBfRy5BdXRvQ29tZVRpa2kgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KGZhbHNlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUxNyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJBdXRvQ29tZUh5ZHJhIiwgewogICAgICAgIFRpdGxlID0gIkdvIEJhY2sgVG8gSHlkcmEgSXNsYW5kIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTE3Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjIyKQogICAgICAgIF9HLkF1dG9Db21lSHlkcmEgPSB2NjIyOwogICAgZW5kKTsKICAgIHY1MDUuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgX0cuQXV0b0NvbWVIeWRyYSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjIzID0gdjUwNC5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2NjI0ID0gdjYyMy5DaGFyYWN0ZXI7CiAgICAgICAgaWYgKG5vdCB2NjI0IG9yIG5vdCB2NjI0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjI1ID0gdjYyNC5IdW1hbm9pZDsKICAgICAgICBsb2NhbCB2NjI2ID0gbmlsOwogICAgICAgIGZvciB2NzE3LCB2NzE4IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgbG9jYWwgdjcxOSA9IHY3MTg6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgIGlmICh2NzE5IGFuZCAodjcxOS5PY2N1cGFudCA9PSB2NjI1KSkgdGhlbgogICAgICAgICAgICAgICAgdjYyNiA9IHY3MTk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgaWYgdjYyNiB0aGVuCiAgICAgICAgICAgIHY2MjYuTWF4U3BlZWQgPSB2NTA4OwogICAgICAgICAgICBsb2NhbCB2Nzg0ID0gQ0ZyYW1lLm5ldyg1MTkzLjkzNzUsIC0gMC4wNDY5MDI4OTQ5NzM3NTQ4OCwgMTYzMS41NzgzNjkxNDA2MjUpOwogICAgICAgICAgICBsb2NhbCB2Nzg1ID0gdjYyNi5Qb3NpdGlvbjsKICAgICAgICAgICAgbG9jYWwgdjc4NiA9IHY3ODQuUG9zaXRpb247CiAgICAgICAgICAgIGxvY2FsIHY3ODcgPSAodjc4NiAtIHY3ODUpLnVuaXQ7CiAgICAgICAgICAgIGxvY2FsIHY3ODggPSB2Nzg3ICogdjYyNi5NYXhTcGVlZCAqIHY1MDUuUmVuZGVyU3RlcHBlZDpXYWl0KCkgOwogICAgICAgICAgICB2NjI2LkNGcmFtZSA9IHY2MjYuQ0ZyYW1lICsgdjc4OCA7CiAgICAgICAgICAgIGxvY2FsIHY3OTAgPSBDRnJhbWUubmV3KHY3ODUsIHY3ODYpOwogICAgICAgICAgICB2NjI2LkNGcmFtZSA9IENGcmFtZS5uZXcodjYyNi5Qb3NpdGlvbiwgdjc4Nik7CiAgICAgICAgICAgIGlmICgodjYyNi5Qb3NpdGlvbiAtIHY3ODYpLm1hZ25pdHVkZSA8IDEyMCkgdGhlbgogICAgICAgICAgICAgICAgX0cuQXV0b0NvbWVIeWRyYSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQoZmFsc2UsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTYuU2VhOkFkZEJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiVHJhdmVsIHRvIEh1bnRpbmcgWm9uZSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxNjkxNy4xNTQyOTY4NzUsIDcuNzU3NTk2MDE1OTMwMTc2LCA1MTEuODIwMzEyNSkpOwogICAgICAgIGVuZAogICAgfSk7CiAgICBsb2NhbCB2NTExID0ge307CiAgICBsb2NhbCB2NTE4ID0gewogICAgICAgICJCZWFzdCBIdW50ZXIiLAogICAgICAgICJTbGVpZ2giLAogICAgICAgICJNaXJhY2xlIiwKICAgICAgICAiVGhlIFNlbnRpbmVsIiwKICAgICAgICAiR3VhcmRpYW4iLAogICAgICAgICJMYW50ZXJuIiwKICAgICAgICAiRGluZ2h5IiwKICAgICAgICAiUGlyYXRlU2xvb3AiLAogICAgICAgICJQaXJhdGVCcmlnYWRlIiwKICAgICAgICAiUGlyYXRlR3JhbmRCcmlnYWRlIiwKICAgICAgICAiTWFyaW5lR3JhbmRCcmlnYWRlIiwKICAgICAgICAiTWFyaW5lQnJpZ2FkZSIsCiAgICAgICAgIk1hcmluZVNsb29wIgogICAgfTsKICAgIGxvY2FsIHY1MTkgPSB2MTYuU2VhOkFkZERyb3Bkb3duKCJEcm9wZG93bkJvYXQiLCB7CiAgICAgICAgVGl0bGUgPSAiU2VsZWN0IEJvYXQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgVmFsdWVzID0gdjUxOCwKICAgICAgICBNdWx0aSA9IGZhbHNlLAogICAgICAgIERlZmF1bHQgPSAxCiAgICB9KTsKICAgIHY1MTk6U2V0VmFsdWUoc2VsZWN0ZWRCb2F0KTsKICAgIHY1MTk6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MjcpCiAgICAgICAgc2VsZWN0ZWRCb2F0ID0gdjYyNzsKICAgIGVuZCk7CiAgICBsb2NhbCBmdW5jdGlvbiB2NTIwKHY2MjgpCiAgICAgICAgbG9jYWwgdjYyOSA9IHsKICAgICAgICAgICAgWzFdID0gIkJ1eUJvYXQiLAogICAgICAgICAgICBbMl0gPSB2NjI4CiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NjI5KSk7CiAgICAgICAgdGFzay5kZWxheSgyLCBmdW5jdGlvbigpCiAgICAgICAgICAgIGZvciB2NzkxLCB2NzkyIGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmICh2NzkyOklzQSgiTW9kZWwiKSBhbmQgKHY3OTIuTmFtZSA9PSB2NjI4KSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY4OTYgPSB2NzkyOkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICAgICAgICAgIGlmICh2ODk2IGFuZCBub3Qgdjg5Ni5PY2N1cGFudCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2NTExW3Y2MjhdID0gdjg5NjsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCiAgICBsb2NhbCBmdW5jdGlvbiB2NTIxKCkKICAgICAgICBmb3IgdjcyMCwgdjcyMSBpbiBwYWlycyh2NTExKSBkbwogICAgICAgICAgICBpZiAodjcyMSBhbmQgdjcyMS5QYXJlbnQgYW5kICh2NzIxLk5hbWUgPT0gIlZlaGljbGVTZWF0IikgYW5kIG5vdCB2NzIxLk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbjIodjcyMS5DRnJhbWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBmb3IgdjcyMiwgdjcyMyBpbiBwYWlycyh2NTExKSBkbwogICAgICAgICAgICBpZiAodjcyMyBhbmQgdjcyMy5QYXJlbnQgYW5kICh2NzIzLk5hbWUgPT0gIlZlaGljbGVTZWF0IikgYW5kIG5vdCB2NzIzLk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICB2NTExW3Y3MjJdID0gdjcyMzsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE2LlNlYTpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIkJ1eSBCb2FkIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICB2NTIwKHNlbGVjdGVkQm9hdCk7CiAgICAgICAgZW5kCiAgICB9KTsKICAgIHYxNi5TZWE6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJGbHkgVG8gTXkgQm9hdCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgdjUyMSgpOwogICAgICAgIGVuZAogICAgfSk7CiAgICBsb2NhbCB2NTIyID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRlcnJvcnNoYXJrIiwgewogICAgICAgIFRpdGxlID0gIkF0dGFjayBUZXJyb3JzaGFyayIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUyMjpPbkNoYW5nZWQoZnVuY3Rpb24odjYzMCkKICAgICAgICBfRy5BdXRvVGVycm9yc2hhcmsgPSB2NjMwOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVUZXJyb3JzaGFyazpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9UZXJyb3JzaGFyayB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJUZXJyb3JzaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQ0LCB2MTQ0NSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0NS5OYW1lID09ICJUZXJyb3JzaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDQ1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ0NS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ1Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0NS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQ1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9UZXJyb3JzaGFyayBvciBub3QgdjE0NDUuUGFyZW50IG9yICh2MTQ0NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUZXJyb3JzaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUZXJyb3JzaGFyayIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MjMgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlUGlyYW5oYSIsIHsKICAgICAgICBUaXRsZSA9ICJBdHRhY2sgUGlyYW5oYSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUyMzpPbkNoYW5nZWQoZnVuY3Rpb24odjYzMSkKICAgICAgICBfRy5mYXJtcGlyYW55YSA9IHY2MzE7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVBpcmFuaGE6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5mYXJtcGlyYW55YSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJQaXJhbmhhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NDYsIHYxNDQ3IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQ3Lk5hbWUgPT0gIlBpcmFuaGEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQ3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ0NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NDcuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDcuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0Ny5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ0Ny5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5mYXJtcGlyYW55YSBvciBub3QgdjE0NDcuUGFyZW50IG9yICh2MTQ0Ny5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJQaXJhbmhhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlBpcmFuaGEiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTI0ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVNoYXJrIiwgewogICAgICAgIFRpdGxlID0gIkF0dGFjayBTaGFyayIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUyNDpPbkNoYW5nZWQoZnVuY3Rpb24odjYzMikKICAgICAgICBfRy5BdXRvU2hhcmsgPSB2NjMyOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVTaGFyazpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9TaGFyayB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQ4LCB2MTQ0OSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0OS5OYW1lID09ICJTaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDQ5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ0OS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0OS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0OS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQ5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvU2hhcmsgb3Igbm90IHYxNDQ5LlBhcmVudCBvciAodjE0NDkuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzLlBpcmF0ZUdyYW5kQnJpZ2FkZS5WZWhpY2xlU2VhdC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDEsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUZXJyb3JzaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MjUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlRmlzaENyZXciLCB7CiAgICAgICAgVGl0bGUgPSAiQXR0YWNrIEZpc2ggQ3JldyIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUyNTpPbkNoYW5nZWQoZnVuY3Rpb24odjYzMykKICAgICAgICBfRy5BdXRvRmlzaENyZXcgPSB2NjMzOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVGaXNoQ3JldzpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9GaXNoQ3JldyB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJGaXNoIENyZXcgTWVtYmVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NTAsIHYxNDUxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDUxLk5hbWUgPT0gIkZpc2ggQ3JldyBNZW1iZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDUxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ1MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NTEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NTEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ1MS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NTEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ1MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0Zpc2hDcmV3IG9yIG5vdCB2MTQ1MS5QYXJlbnQgb3IgKHYxNDUxLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0cy5QaXJhdGVHcmFuZEJyaWdhZGUuVmVoaWNsZVNlYXQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAxLCAwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRmlzaCBDcmV3IE1lbWJlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRmlzaCBDcmV3IE1lbWJlciIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUyNiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVTaGlwIiwgewogICAgICAgIFRpdGxlID0gIkF0dGFjayBTaGlwIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTI2Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjM0KQogICAgICAgIF9HLlNoaXAgPSB2NjM0OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVTaGlwOlNldFZhbHVlKGZhbHNlKTsKICAgIGZ1bmN0aW9uIENoZWNrUGlyYXRlQm9hdCgpCiAgICAgICAgbG9jYWwgdjYzNSA9IHsKICAgICAgICAgICAgIlBpcmF0ZUdyYW5kQnJpZ2FkZSIsCiAgICAgICAgICAgICJQaXJhdGVCcmlnYWRlIgogICAgICAgIH07CiAgICAgICAgZm9yIHY3MjQsIHY3MjUgaW4gbmV4dCwgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkgZG8KICAgICAgICAgICAgaWYgKHRhYmxlLmZpbmQodjYzNSwgdjcyNS5OYW1lKSBhbmQgdjcyNTpGaW5kRmlyc3RDaGlsZCgiSGVhbHRoIikgYW5kICh2NzI1LkhlYWx0aC5WYWx1ZSA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm4gdjcyNTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuU2hpcCB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgQ2hlY2tQaXJhdGVCb2F0KCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMzIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDMyLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzM4ID0gQ2hlY2tQaXJhdGVCb2F0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhd24oVHdlZW4odjEzMzguRW5naW5lLkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgLSAyMCwgMCkpLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFpbUJvdFNraWxsUG9zaXRpb24gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAtIDUsIDApIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNraWxsYWltYm90ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9Ta2lsbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgdjEzMzggb3Igbm90IHYxMzM4LlBhcmVudCBvciAodjEzMzguSGVhbHRoLlZhbHVlIDw9IDApIG9yIG5vdCBDaGVja1BpcmF0ZUJvYXQoKQogICAgICAgICAgICAgICAgICAgICAgICBTa2lsbGFpbWJvdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9Ta2lsbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUyNyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVHaG9zdFNoaXAiLCB7CiAgICAgICAgVGl0bGUgPSAiQXR0YWNrIEdob3N0IFNoaXAiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1Mjc6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzYpCiAgICAgICAgX0cuR2hvc3RTaGlwID0gdjYzNjsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlR2hvc3RTaGlwOlNldFZhbHVlKGZhbHNlKTsKICAgIGZ1bmN0aW9uIENoZWNrUGlyYXRlQm9hdCgpCiAgICAgICAgbG9jYWwgdjYzNyA9IHsKICAgICAgICAgICAgIkZpc2hCb2F0IgogICAgICAgIH07CiAgICAgICAgZm9yIHY3MjYsIHY3MjcgaW4gbmV4dCwgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkgZG8KICAgICAgICAgICAgaWYgKHRhYmxlLmZpbmQodjYzNywgdjcyNy5OYW1lKSBhbmQgdjcyNzpGaW5kRmlyc3RDaGlsZCgiSGVhbHRoIikgYW5kICh2NzI3LkhlYWx0aC5WYWx1ZSA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm4gdjcyNzsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgX0cuYmppckZpc2hCb2F0IHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBDaGVja1BpcmF0ZUJvYXQoKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAzMiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMzIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMzkgPSBDaGVja1BpcmF0ZUJvYXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGF3bihUd2Vlbih2MTMzOS5FbmdpbmUuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAtIDIwLCAwKSwgMSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b1NraWxsID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNraWxsYWltYm90ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFpbUJvdFNraWxsUG9zaXRpb24gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAtIDUsIDApIDsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgdjEzMzkuUGFyZW50IG9yICh2MTMzOS5IZWFsdGguVmFsdWUgPD0gMCkgb3Igbm90IENoZWNrUGlyYXRlQm9hdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9Ta2lsbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBTa2lsbGFpbWJvdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5iamlyRmlzaEJvYXQgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIENoZWNrUGlyYXRlQm9hdCgpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkNhcHR1cmVDb250cm9sbGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpCdXR0b24xRG93bihWZWN0b3IyLm5ldygxMjgwLCA2NzIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDUyLCB2MTQ1MyBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNDUzOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NTMuVG9vbFRpcCA9PSAiTWVsZWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNDUzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkMiLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDU0LCB2MTQ1NSBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNDU1OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NTUuVG9vbFRpcCA9PSAiQmxveCBGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE0NTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJWIiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIlYiLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NTYsIHYxNDU3IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE0NTc6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1Ny5Ub29sVGlwID09ICJTd29yZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE0NTcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDU4LCB2MTQ1OSBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNDU5OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NTkuVG9vbFRpcCA9PSAiR3VuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTQ1OSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MjggPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJFbGl0ZSIpOwogICAgbG9jYWwgdjUyOSA9IHYxNi5NYWluOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiRWxpdGUgU3RhdHVzIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NTI5OlNldERlc2MoIkVsaXRlIEJvc3M6IOKche+4jyB8IEtpbGxlZDogICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiLCAiUHJvZ3Jlc3MiKSk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjUyOTpTZXREZXNjKCJFbGl0ZSBCb3NzOiDinYzvuI8gfCBLaWxsZWQ6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiLCAiUHJvZ3Jlc3MiKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTMwID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVFbGl0ZSIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIEVsaXRlIEh1bnRlciIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzMDpPbkNoYW5nZWQoZnVuY3Rpb24odjYzOCkKICAgICAgICBfRy5BdXRvRWxpdGUgPSB2NjM4OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVFbGl0ZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b0VsaXRlIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbGl0ZUh1bnRlciIpOwogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJEaWFibG8iKSBvciBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiRGVhbmRyZSIpIG9yIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJVcmJhbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NjMsIHYxNjY0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NjQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNjY0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTY2NC5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTY2NC5OYW1lID09ICJEaWFibG8iKSBvciAodjE2NjQuTmFtZSA9PSAiRGVhbmRyZSIpIG9yICh2MTY2NC5OYW1lID09ICJVcmJhbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMih2MTY2NC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjY0Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjY0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2NC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b0VsaXRlID09IGZhbHNlKSBvciAodjE2NjQuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTY2NC5QYXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRpYWJsbyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVXJiYW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVXJiYW4iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVsaXRlSHVudGVyIik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZAppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY1MzEgPSB2MTYuU2VhOkFkZFNlY3Rpb24oIk1pcmFnZSBJc2xhbmQiKTsKICAgIGxvY2FsIHY1MzIgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiU3RhdHVzIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgdjc5MyA9IGdhbWU6R2V0U2VydmljZSgiTGlnaHRpbmciKS5Ta3kuTW9vblRleHR1cmVJZDsKICAgICAgICAgICAgICAgIGlmICh2NzkzID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNDk0MzEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiMTAwJSI7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHY3OTMgPT0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTcwOTE0OTA1MiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICI3NSUiOwogICAgICAgICAgICAgICAgZWxzZWlmICh2NzkzID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNDM3MzMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiNTAlIjsKICAgICAgICAgICAgICAgIGVsc2VpZiAodjc5MyA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTUwNDAxIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjI1JSI7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHY3OTMgPT0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTcwOTE0OTY4MCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICIxNSUiOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjAlIjsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWUuV29ya3NwYWNlLk1hcDpGaW5kRmlyc3RDaGlsZCgiTXlzdGljSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIE1pcmFnZVN0YXR1cyA9ICLinIXvuI8iOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIE1pcmFnZVN0YXR1cyA9ICLinYzvuI8iOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgICAgICB2NTMyOlNldERlc2MoIk1pcmFnZTogIiAuLiBNaXJhZ2VTdGF0dXMgLi4gIiB8IEZ1bGwgTW9vbjogIiAuLiBGdWxsTW9vblN0YXR1cyk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwogICAgdjE2LlNlYTpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIkZseSBUbyBUaGUgSGlnaCBNb3VudGFpbiIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgVHdlZW5Ub0hpZ2hlc3RQb2ludCgpOwogICAgICAgIGVuZAogICAgfSk7CiAgICBmdW5jdGlvbiBUd2VlblRvSGlnaGVzdFBvaW50KCkKICAgICAgICBsb2NhbCB2NjM5ID0gZ2V0SGlnaGVzdFBvaW50KCk7CiAgICAgICAgaWYgdjYzOSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMih2NjM5LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMjExLjg4LCAwKSk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZ1bmN0aW9uIGdldEhpZ2hlc3RQb2ludCgpCiAgICAgICAgaWYgbm90IGdhbWUuV29ya3NwYWNlLk1hcDpGaW5kRmlyc3RDaGlsZCgiTXlzdGljSXNsYW5kIikgdGhlbgogICAgICAgICAgICByZXR1cm4gbmlsOwogICAgICAgIGVuZAogICAgICAgIGZvciB2NzI4LCB2NzI5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NzI5OklzQSgiTWVzaFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjcyOS5NZXNoSWQgPT0gInJieGFzc2V0aWQ6Ly84MzE5MDI3Njk1MTkxNCIpIHRoZW4gLS10aGF5IGlkIOG6o25oIHbDoG8KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjcyOTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKbG9jYWwgdjY2ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRwQWR2YW5jZWQiLCB7CiAgICBUaXRsZSA9ICJGbHkgVG8gQWR2YW5jZWQgRnJ1aXQgRGVhbGVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2NjpPbkNoYW5nZWQoZnVuY3Rpb24odjI1NykKICAgIF9HLkF1dG9UcEFkdmFuY2VkID0gdjI1NzsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b1RwQWR2YW5jZWQgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzMwID0gZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5OUENzOkZpbmRGaXJzdENoaWxkKCJBZHZhbmNlZCBGcnVpdCBEZWFsZXIiKTsKICAgICAgICAgICAgaWYgKHY3MzAgYW5kIHY3MzA6SXNBKCJNb2RlbCIpKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODU2ID0gdjczMC5QcmltYXJ5UGFydCBhbmQgdjczMC5QcmltYXJ5UGFydC5Qb3NpdGlvbiA7CiAgICAgICAgICAgICAgICBpZiB2ODU2IHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyh2ODU2KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjY3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVR3ZWVuR2VhciIsIHsKICAgIFRpdGxlID0gIkZseSBUbyBHZWFyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2NzpPbkNoYW5nZWQoZnVuY3Rpb24odjI1OCkKICAgIF9HLlR3ZWVuVG9HZWFyID0gdjI1ODsKZW5kKTsKdjE3LlRvZ2dsZVR3ZWVuR2VhcjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuVHdlZW5Ub0dlYXIgdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIk15c3RpY0lzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNDAsIHYxMDQxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTA0MTpJc0EoIk1lc2hQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQxLk1hdGVyaWFsID09IEVudW0uTWF0ZXJpYWwuTmVvbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMih2MTA0MS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjY4ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZWxvY2ttb29uIiwgewogICAgVGl0bGUgPSAiTG9vayBNb29uIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2ODpPbkNoYW5nZWQoZnVuY3Rpb24odjI1OSkKICAgIF9HLkF1dG9Mb2NrTW9vbiA9IHYyNTk7CmVuZCk7CnYxNy5Ub2dnbGVsb2NrbW9vbjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b0xvY2tNb29uIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY3OTQgPSBnYW1lLkxpZ2h0aW5nOkdldE1vb25EaXJlY3Rpb24oKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY3OTUgPSBnYW1lLldvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZS5wICsgKHY3OTQgKiAxMDApIDsKICAgICAgICAgICAgICAgIGdhbWUuV29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lID0gQ0ZyYW1lLmxvb2tBdChnYW1lLldvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZS5wLCB2Nzk1KTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9Mb2NrTW9vbiB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRTpGaXJlU2VydmVyKCJBY3RpdmF0ZUFiaWxpdHkiKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2NjkgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1NhYmVyIiwgewogICAgVGl0bGUgPSAiQXV0byBTYWJlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Njk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjApCiAgICBfRy5BdXRvX1NhYmVyID0gdjI2MDsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9TYWJlcjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgKF9HLkF1dG9fU2FiZXIgYW5kIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAyMDApKSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuRmluYWwuUGFydC5UcmFuc3BhcmVuY3kgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuRG9vci5UcmFuc3BhcmVuY3kgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKENGcmFtZS5uZXcoLSAxNjEyLjU1ODg0LCAzNi45Nzc0MTMyLCAxNDguNzE5NTQzLCAwLjM3MDkxMjc5LCAzLjA3MTcxNWUtOSwgLSAwLjkyODY2NzcyNCwgMy45NzA5OTVlLTgsIDEsIDEuOTE2NzkzNWUtOCwgMC45Mjg2Njc3MjQsIC0gNC4zOTg2OThlLTgsIDAuMzcwOTEyNzkpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGUxLkJ1dHRvbi5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5RdWVzdFBsYXRlcy5QbGF0ZTIuQnV0dG9uLkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlMy5CdXR0b24uQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGU0LkJ1dHRvbi5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5RdWVzdFBsYXRlcy5QbGF0ZTUuQnV0dG9uLkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxNjEyLjU1ODg0LCAzNi45Nzc0MTMyLCAxNDguNzE5NTQzLCAwLjM3MDkxMjc5LCAzLjA3MTcxNWUtOSwgLSAwLjkyODY2NzcyNCwgMy45NzA5OTVlLTgsIDEsIDEuOTE2NzkzNWUtOCwgMC45Mjg2Njc3MjQsIC0gNC4zOTg2OThlLTgsIDAuMzcwOTEyNzkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5EZXNlcnQuQnVybi5QYXJ0LlRyYW5zcGFyZW5jeSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVG9yY2giKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJUb3JjaCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIlRvcmNoIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDExMTQuNjE0NzUsIDUuMDQ2Nzk3MjgsIDQzNTAuMjI4MDMsIC0gMC42NDg0NjY1ODcsIC0gMS4yODc5OTA5ZS05LCAwLjc2MTI0MzEwNSwgLSA1LjcwNjUyOWUtMTAsIDEsIDEuMjA1ODQ1NGUtOSwgLSAwLjc2MTI0MzEwNSwgMy40NzU0NDg4ZS0xMCwgLSAwLjY0ODQ2NjU4NykpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTYxMC4wMDc1NywgMTEuNTA0OTg1OCwgMTY0LjAwMTU4NywgMC45ODQ4MDc1NTEsIC0gMC4xNjc3MjIyODUsIC0gMC4wNDQ5ODE4MTQ5LCAwLjE3MzY0OTQzLCAwLjk1MTI0NDIzNSwgMC4yNTQ5MTIxOTgsIDAuMDAwMDM0MjM3MjgsIC0gMC4yNTg4NTA1MTUsIDAuOTY1OTE3NDA4KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJTaWNrTWFuIikgfj0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIkdldEN1cCIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiQ3VwIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJGaWxsQ3VwIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkN1cCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiU2lja01hbiIpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJSaWNoU29uIikgPT0gbmlsKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJSaWNoU29uIikgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJNb2IgTGVhZGVyIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJNb2IgTGVhZGVyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAyOTY3LjU5NTIxLCAtIDQuOTEwODk4MjEsIDUzMjguNzA3MDMsIDAuMzQyMjA4NTY0LCAtIDAuMDIyNzg0OTA1NSwgMC45MzkzNDc4MDQsIDAuMDI1MTYwMzgxNiwgMC45OTk1Njk3MTQsIDAuMDE1MDc5NjE2NiwgLSAwLjkzOTI4NzEyNiwgMC4wMTg0NzM5NzM1LCAwLjM0MjYzNDU1OSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzk5LCB2MTgwMCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4MDAuTmFtZSA9PSAiTW9iIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJNb2IgTGVhZGVyIFtMdi4gMTIwXSBbQm9zc10iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4MDA6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxODAwOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTgwMC5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwMC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDAuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDAuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxODAwLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTgwMC5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IF9HLkF1dG9fU2FiZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJNb2IgTGVhZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJNb2IgTGVhZGVyIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJSaWNoU29uIikgPT0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlJpY2hTb24iKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIlJlbGljIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDE0MDQuOTE1MDQsIDI5Ljk3NzMyNzMsIDMuODA1OTgxMTYsIDAuODc2NTE0NDk0LCA1LjY2OTA2ODhlLTksIDAuNDgxMzc1NDU2LCAyLjUzODUyZS04LCAxLCAtIDUuNzk5OTU2ZS04LCAtIDAuNDgxMzc1NDU2LCA2LjMwNTcyNjRlLTgsIDAuODc2NTE0NDk0KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2FiZXIgRXhwZXJ0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJTYWJlciBFeHBlcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTQ2MCwgdjE0NjEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ2MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0NjE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDYxLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjEuTmFtZSA9PSAiU2FiZXIgRXhwZXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ2MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYxLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTQ2MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDYxLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjE0NjEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCBfRy5BdXRvX1NhYmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ2MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlBsYWNlUmVsaWMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY3MCA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvUG9sZVYxIiwgewogICAgVGl0bGUgPSAiQXV0byBQb2xlIFYxIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3MDpPbkNoYW5nZWQoZnVuY3Rpb24odjI2MSkKICAgIF9HLkF1dG9fUG9sZVYxID0gdjI2MTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9Qb2xlVjE6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NzEgPSBDRnJhbWUubmV3KC0gNzc0OC4wMTg1NTQ2ODc1LCA1NjA2LjgwNjE1MjM0Mzc1LCAtIDIzMDUuODk4NjgxNjQwNjI1KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19Qb2xlVjEgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlRodW5kZXIgR29kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA0MiwgdjEwNDMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0My5OYW1lID09ICJUaHVuZGVyIEdvZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0MzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNDM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDQzLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0My5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUG9sZVYxIG9yIG5vdCB2MTA0My5QYXJlbnQgb3IgKHYxMDQzLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjcxLlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAxNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjcxKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDc3NDguMDE4NTU0Njg3NSwgNTYwNi44MDYxNTIzNDM3NSwgLSAyMzA1Ljg5ODY4MTY0MDYyNSkpOwogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUaHVuZGVyIEdvZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRodW5kZXIgR29kIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NzIgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1NhdyIsIHsKICAgIFRpdGxlID0gIkF1dG8gU2hhcmsgU2F3IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI2MikKICAgIF9HLkF1dG9fU2F3ID0gdjI2MjsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9TYXc6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NzEgPSBDRnJhbWUubmV3KC0gNjkwLjMzMDgxMDU0Njg4LCAxNS4wOTQyNTE2MzI2OSwgMTU4Mi4yMzgwMzcxMDk0KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TYXcgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlRoZSBTYXciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDQ0LCB2MTA0NSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ1Lk5hbWUgPT0gIlRoZSBTYXciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDQ1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTA0NS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDQ1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1NhdyBvciBub3QgdjEwNDUuUGFyZW50IG9yICh2MTA0NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY3MS5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY3MSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA2OTAuMzMwODEwNTQ2ODgsIDE1LjA5NDI1MTYzMjY5LCAxNTgyLjIzODAzNzEwOTQpKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGhlIFNhdyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRoZSBTYXciKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY3MyA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvV2FyZGVuIiwgewogICAgVGl0bGUgPSAiQXV0byBXYXJkZW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjczOk9uQ2hhbmdlZChmdW5jdGlvbih2MjYzKQogICAgX0cuQXV0b19XYXJkZW4gPSB2MjYzOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1dhcmRlbjpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY3NCA9IENGcmFtZS5uZXcoNTE4Ni4xNDY5NzI2NTYyNSwgMjQuODY2ODQyMjY5ODk3NDYsIDgzMi4xODg1Mzc1OTc2NTYyKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19XYXJkZW4gdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNoaWVmIFdhcmRlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNDYsIHYxMDQ3IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDcuTmFtZSA9PSAiQ2hpZWYgV2FyZGVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTA0NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwNDcuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDcuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ3Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ3Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA0Ny5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19XYXJkZW4gb3Igbm90IHYxMDQ3LlBhcmVudCBvciAodjEwNDcuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2NzQuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDE1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NzQpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDUxODYuMTQ2OTcyNjU2MjUsIDI0Ljg2Njg0MjI2OTg5NzQ2LCA4MzIuMTg4NTM3NTk3NjU2MikpOwogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDaGllZiBXYXJkZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDaGllZiBXYXJkZW4iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjUzMyA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVIYWxsb3ciLCB7CiAgICAgICAgVGl0bGUgPSAiSGFsbG93IFNjeXRoZSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzMzpPbkNoYW5nZWQoZnVuY3Rpb24odjY0MCkKICAgICAgICBBdXRvSGFsbG93U3ljdGhlID0gdjY0MDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlSGFsbG93OlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgQXV0b0hhbGxvd1N5Y3RoZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDYyLCB2MTQ2MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHYxNDYzLk5hbWUsICJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDYzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjMuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjE0NjMuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIChBdXRvSGFsbG93U3ljdGhlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkhhbGxvdyBFc3NlbmNlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIYWxsb3cgRXNzZW5jZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDg5MzIuMzIyMjY1NjI1LCAxNDYuODMxNTQyOTY4NzUsIDYwNjIuNTUwNzgxMjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKENGcmFtZS5uZXcoLSA4OTMyLjMyMjI2NTYyNSwgMTQ2LjgzMTU0Mjk2ODc1LCA2MDYyLjU1MDc4MTI1KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDgKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIkhhbGxvdyBFc3NlbmNlIik7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIEF1dG9IYWxsb3dTeWN0aGUgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg1NyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiQm9uZXMiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJCdXkiLAogICAgICAgICAgICAgICAgICAgIFszXSA9IDEsCiAgICAgICAgICAgICAgICAgICAgWzRdID0gMQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4NTcpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUzNCA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVZYW1hIiwgewogICAgICAgIFRpdGxlID0gIllhbWEiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDEpCiAgICAgICAgX0cuQXV0b1lhbWEgPSB2NjQxOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVZYW1hOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b1lhbWEgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVsaXRlSHVudGVyIiwgIlByb2dyZXNzIikgPj0gMzApIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5XYXRlcmZhbGwuU2VhbGVkS2F0YW5hLkhhbmRsZS5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiWWFtYSIpIG9yIG5vdCBfRy5BdXRvWWFtYQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MzUgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlVHVzaGl0YSIsIHsKICAgICAgICBUaXRsZSA9ICJUdXNoaXRhIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTM1Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjQyKQogICAgICAgIEF1dG9UdXNoaXRhID0gdjY0MjsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlVHVzaGl0YTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIEF1dG9UdXNoaXRhIHRoZW4KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTG9uZ21hIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTM0MCwgdjEzNDEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEzNDEuTmFtZSA9PSAoIkxvbmdtYSIgb3IgKHYxMzQxLk5hbWUgPT0gIkxvbmdtYSIpKSkgYW5kICh2MTM0MS5IdW1hbm9pZC5IZWFsdGggPiAwKSBhbmQgdjEzNDE6SXNBKCJNb2RlbCIpIGFuZCB2MTM0MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEzNDE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChTZWxlY3RXZWFwb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjEzNDEuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDEuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0MS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQxLkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTM0MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgQXV0b1R1c2hpdGEgb3Igbm90IHYxMzQxLlBhcmVudCBvciAodjEzNDEuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMDIzOC44NzU5NzY1NjMsIDM4OS43OTEyOTAyODMyLCAtIDk1NDkuNzkzOTQ1MzEyNSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MzYgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlSG9seSIsIHsKICAgICAgICBUaXRsZSA9ICJMaWdodCBUaGUgSG9seSBUb3JjaCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzNjpPbkNoYW5nZWQoZnVuY3Rpb24odjY0MykKICAgICAgICBfRy5BdXRvX0hvbHlfVG9yY2ggPSB2NjQzOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVIb2x5OlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b19Ib2x5X1RvcmNoIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMDc1MiwgNDE3LCAtIDkzNjYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEwNzUyLCA0MTcsIC0gOTM2NikpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMTY3MiwgMzM0LCAtIDk0NzQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDExNjcyLCAzMzQsIC0gOTQ3NCkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjEzMiwgNTIxLCAtIDEwNjU1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Ib2x5X1RvcmNoIG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMjEzMiwgNTIxLCAtIDEwNjU1KSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEzMzM2LCA0ODYsIC0gNjk4NSkpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fSG9seV9Ub3JjaCBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTMzMzYsIDQ4NiwgLSA2OTg1KSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEzNDg5LCAzMzIsIC0gNzkyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fSG9seV9Ub3JjaCBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTM0ODksIDMzMiwgLSA3OTI1KSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKbG9jYWwgdjc1ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9DYW52YW5kZXIiLCB7CiAgICBUaXRsZSA9ICJBdXRvIENhbnZhbmRlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NzU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjQpCiAgICBfRy5BdXRvX0NhbnZhbmRlciA9IHYyNjQ7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvQ2FudmFuZGVyOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjcxID0gQ0ZyYW1lLm5ldyg1MzExLjA3NDIxODc1LCA0MjYuMDI0MzgzNTQ0OTIxOSwgMTY1LjEyNzYyNDUxMTcxODc1KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19DYW52YW5kZXIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDQ4LCB2MTA0OSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ5Lk5hbWUgPT0gIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDQ5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTA0OS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0OS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDkuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDkuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDQ5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0NhbnZhbmRlciBvciBub3QgdjEwNDkuUGFyZW50IG9yICh2MTA0OS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY3MS5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY3MSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTMxMS4wNzQyMTg3NSwgNDI2LjAyNDM4MzU0NDkyMTksIDE2NS4xMjc2MjQ1MTE3MTg3NSkpOwogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQmVhdXRpZnVsIFBpcmF0ZSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjc2ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9NdXNrZXRlZXJIYXQiLCB7CiAgICBUaXRsZSA9ICJBdXRvIE11c2tldGVlciBIYXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjc2Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjY1KQogICAgX0cuQXV0b19NdXNrZXRlZXJIYXQgPSB2MjY1OwplbmQpOwp2MTcuVG9nZ2xlQXV0b011c2tldGVlckhhdDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KDAuMSkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b19NdXNrZXRlZXJIYXQgdGhlbgogICAgICAgICAgICAgICAgaWYgKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE4MDApIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiKS5LaWxsZWRCYW5kaXRzID09IGZhbHNlKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiRm9yZXN0IFBpcmF0ZSIpIGFuZCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiNTAiKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJGb3Jlc3QgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNTU5LCB2MTU2MCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE1NjAuTmFtZSA9PSAiRm9yZXN0IFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU2MC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTU2MC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjAuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvc01vbiA9IHYxNTYwLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTU2MC5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvX011c2tldGVlckhhdCA9PSBmYWxzZSkgb3Igbm90IHYxNTYwLlBhcmVudCBvciAodjE1NjAuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTMyMDYuNDUyMTQ4NDM4LCA0MjUuODkxOTk4MjkxMDIsIC0gNzk2NC41NTM3MTA5Mzc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyNDQzLjg2NzE4NzUsIDMzMi40MDM5NjExODE2NCwgLSA3Njc1LjQ4OTI1NzgxMjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChWZWN0b3IzLm5ldygtIDEyNDQzLjg2NzE4NzUsIDMzMi40MDM5NjExODE2NCwgLSA3Njc1LjQ4OTI1NzgxMjUpIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsICJDaXRpemVuUXVlc3QiLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE4MDApIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiKS5LaWxsZWRCb3NzID09IGZhbHNlKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlIGFuZCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiQ2FwdGFpbiBFbGVwaGFudCIpIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NjUsIHYxNjY2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY2Ni5OYW1lID09ICJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVFbGVwaGFudCA9IHYxNjY2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjY2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjY2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjY2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZUVsZXBoYW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvX011c2tldGVlckhhdCA9PSBmYWxzZSkgb3IgKHYxNjY2Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NjYuUGFyZW50IG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzM3NC44ODk2NDg0MzgsIDQyMS4yNzc1MjY4NTU0NywgLSA4MjI1LjIwODk4NDM3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3NS40ODkyNTc4MTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDEyNDQzLjg2NzE4NzUsIDMzMi40MDM5NjExODE2NCwgLSA3Njc1LjQ4OTI1NzgxMjUpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIsICJDaXRpemVuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxODAwKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIiwgIkNpdGl6ZW4iKSA9PSAyKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjUxMi4xMzg2NzE4NzUsIDM0MC4zOTI3OTE3NDgwNSwgLSA5ODcyLjgyMDMxMjUpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHY3NyA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvT2JzZXJ2YXRpb25WMiIsIHsKICAgIFRpdGxlID0gIkF1dG8gT2JzZXJ2YXRpb24gVjIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjc3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjY2KQogICAgX0cuQXV0b19PYnNlcnZhdGlvblYyID0gdjI2NjsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9PYnNlcnZhdGlvblYyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX09ic2VydmF0aW9uVjIgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIiwgIkNpdGl6ZW4iKSA9PSAzKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuQXV0b19NdXNrZXRlZXJIYXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJhbmFuYSIpIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQXBwbGUiKSBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBpbmVhcHBsZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyNDQ0Ljc4NTE1NjI1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3My4xODA2NjQwNjI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX09ic2VydmF0aW9uVjIgb3IgKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTI0NDQuNzg1MTU2MjUsIDMzMi40MDM5NjExODE2NCwgLSA3NjczLjE4MDY2NDA2MjUpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiLCAiQ2l0aXplbiIpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZydWl0IEJvd2wiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZydWl0IEJvd2wiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMDkyMC4xMjUsIDYyNC4yMDI3NTg3ODkwNiwgLSAxMDI2Ni45OTUxMTcxODgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fT2JzZXJ2YXRpb25WMiBvciAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMDkyMC4xMjUsIDYyNC4yMDI3NTg3ODkwNiwgLSAxMDI2Ni45OTUxMTcxODgpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiS2VuVGFsazIiLCAiU3RhcnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiS2VuVGFsazIiLCAiQnV5Iik7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE1NjEsIHYxNTYyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE1NjIuTmFtZSA9PSAiQXBwbGUiKSBvciAodjE1NjIuTmFtZSA9PSAiQmFuYW5hIikgb3IgKHYxNTYyLk5hbWUgPT0gIlBpbmVhcHBsZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjIuSGFuZGxlLkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMSwgMTApIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3QoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQsIHYxNTYyLkhhbmRsZSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIF9HLkF1dG9fTXVza2V0ZWVySGF0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY3OCA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvUmFpbmJvd0hha2kiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFJhaW5ib3cgSGFraSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Nzg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjcpCiAgICBfRy5BdXRvX1JhaW5ib3dIYWtpID0gdjI2NzsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9SYWluYm93SGFraTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KDAuMSkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b19SYWluYm93SGFraSB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDExODkyLjA3MDMxMjUsIDkzMC41NzY3MjExOTE0MSwgLSA4NzYwLjE1OTE3OTY4NzUpKTsKICAgICAgICAgICAgICAgICAgICBpZiAoKFZlY3RvcjMubmV3KC0gMTE4OTIuMDcwMzEyNSwgOTMwLjU3NjcyMTE5MTQxLCAtIDg3NjAuMTU5MTc5Njg3NSkgLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiSG9ybmVkTWFuIiwgIkJldCIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlIGFuZCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiU3RvbmUiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU3RvbmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTU2MywgdjE1NjQgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE1NjQuTmFtZSA9PSAiU3RvbmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lUmFpbmJvdyA9IHYxNTY0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTU2NC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTY0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU2NC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVJhaW5ib3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTY0Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgKHYxNTY0Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE1NjQuUGFyZW50IG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTA4Ni4xMTYyMSwgMzguODQyNTkwMywgNjc2OC43MTQzNikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlIGFuZCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiSHlkcmEgTGVhZGVyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkh5ZHJhIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjY5LCB2MTY3MCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY3MC5OYW1lID09ICJIeWRyYSBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lUmFpbmJvdyA9IHYxNjcwLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY3MC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjcwLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY3MC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVJhaW5ib3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjcwLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgKHYxNjcwLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NzAuUGFyZW50IG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDU3MTMuOTg4NzcsIDYwMS45MjI5NzQsIDIwMi43NTEyNTEpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiS2lsbyBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiS2lsbyBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NjIsIHYxNzYzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzYzLk5hbWUgPT0gIktpbG8gQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVSYWluYm93ID0gdjE3NjMuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNzYzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NjMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzYzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVJhaW5ib3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19SYWluYm93SGFraSBvciAodjE3NjMuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTc2My5QYXJlbnQgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMjg3Ny42MTc0MywgNDIzLjU1ODY4NSwgLSA3MjA3LjMxMDA2KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NzQsIHYxNzc1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzc1Lk5hbWUgPT0gIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lUmFpbmJvdyA9IHYxNzc1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTc3NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzc1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc3NS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVSYWluYm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgKHYxNzc1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE3NzUuUGFyZW50IG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTM0ODUuMDI4MywgMzMxLjcwOTI1OSwgLSA4MDEyLjQ4NzMpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTgwMiwgdjE4MDMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4MDMuTmFtZSA9PSAiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVSYWluYm93ID0gdjE4MDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxODAzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVJhaW5ib3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19SYWluYm93SGFraSBvciAodjE4MDMuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTgwMy5QYXJlbnQgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTMxMi4zNTk4NjMyODEzLCAyMC4xNDEyMDEwMTkyODcsIC0gMTAuMTU4NTM4ODE4MzU5KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDExODkyLjA3MDMxMjUsIDkzMC41NzY3MjExOTE0MSwgLSA4NzYwLjE1OTE3OTY4NzUpKTsKICAgICAgICAgICAgICAgICAgICBpZiAoKFZlY3RvcjMubmV3KC0gMTE4OTIuMDcwMzEyNSwgOTMwLjU3NjcyMTE5MTQxLCAtIDg3NjAuMTU5MTc5Njg3NSkgLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiSG9ybmVkTWFuIiwgIkJldCIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjc5ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9Ta3VsbEd1aXRhciIsIHsKICAgIFRpdGxlID0gIkF1dG8gU2t1bGwgR3VpdGFyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3OTpPbkNoYW5nZWQoZnVuY3Rpb24odjI2OCkKICAgIF9HLkF1dG9fU2t1bGxHdWl0YXIgPSB2MjY4OwplbmQpOwp2MTcuVG9nZ2xlQXV0b1NrdWxsR3VpdGFyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX1NrdWxsR3VpdGFyIHRoZW4KICAgICAgICAgICAgICAgIGlmIChHZXRXZWFwb25JbnZlbnRvcnkoIlNrdWxsIEd1aXRhciIpID09IGZhbHNlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gOTY4MS40NTg5ODQzNzUsIDYuMTM5ODgwNjU3MTk2MDQ1LCA2MzQxLjM3MjA3MDMxMjUpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpGaW5kRmlyc3RDaGlsZCgiU2tlbGV0b24gTWFjaGluZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInNvdWxHdWl0YXJCdXkiLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5DYW5kbGUxLlRyYW5zcGFyZW5jeSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDEuTGVmdC5QYXJ0LlRyYW5zcGFyZW5jeSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUXVlc3QyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gODc2Mi42OTE0MDYyNSwgMTc2Ljg0NzgzOTM1NTQ2ODc1LCA2MTcxLjMwNzYxNzE4NzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoKENGcmFtZS5uZXcoLSA4NzYyLjY5MTQwNjI1LCAxNzYuODQ3ODM5MzU1NDY4NzUsIDYxNzEuMzA3NjE3MTg3NSkuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMpIG9yIG5vdCBfRy5BdXRvX1NrdWxsR3VpdGFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkNy5MZWZ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDYuTGVmdC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQ1LkxlZnQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkNC5SaWdodC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQzLkxlZnQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkMi5SaWdodC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQxLlJpZ2h0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uVGFibGV0LlNlZ21lbnQxOkZpbmRGaXJzdENoaWxkKCJDbGlja0RldGVjdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTpGaW5kRmlyc3RDaGlsZCgiQ2xpY2tEZXRlY3RvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUXVlc3Q0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gOTU1My41OTg2MzI4MTI1LCA2NS42MjMzODI1NjgzNTkzOCwgNjA0MS41ODgzNzg5MDYyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoKENGcmFtZS5uZXcoLSA5NTUzLjU5ODYzMjgxMjUsIDY1LjYyMzM4MjU2ODM1OTM4LCA2MDQxLjU4ODM3ODkwNjI1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgb3Igbm90IF9HLkF1dG9fU2t1bGxHdWl0YXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQzLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0My5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0NC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0Ni5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDYuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0Ni5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ4LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0OC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxMC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDEwLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDEwLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDEwLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUXVlc3QzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6RmluZEZpcnN0Q2hpbGQoIkdob3N0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTc5OCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJHdWl0YXJQdXp6bGVQcm9ncmVzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMl0gPSAiR2hvc3QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYxNzk4KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIFpvbWJpZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxODA0LCB2MTgwNSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4MDU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjE4MDU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTgwNS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgwNS5OYW1lID09ICJMaXZpbmcgWm9tYmllIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDUuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMjAsIDApIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEwMTYwLjc4NzEwOTM3NSwgMTM4LjY2MTY5NzM4NzY5NTMsIDU5NTUuMDMwNzYxNzE4NzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkNhcHR1cmVDb250cm9sbGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpCdXR0b24xRG93bihWZWN0b3IyLm5ldygxMjgwLCA2NzIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMDE2MC43ODcxMDkzNzUsIDEzOC42NjE2OTczODc2OTUzLCA1OTU1LjAzMDc2MTcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdyYXZlc3RvbmVFdmVudCIsIDIpLCAiRXJyb3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gODY1My4yMDYwNTQ2ODc1LCAxNDAuOTg0ODc4NTQwMDM5MDYsIDYxNjAuMDMzMjAzMTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJncmF2ZXN0b25lRXZlbnQiLCAyKSwgIk5vdGhpbmciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbigiV2FpdCBGdWxsIE1vb24iKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ3JhdmVzdG9uZUV2ZW50IiwgMiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk2ODEuNDU4OTg0Mzc1LCA2LjEzOTg4MDY1NzE5NjA0NSwgNjM0MS4zNzIwNzAzMTI1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2ODAgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0J1ZGR5IiwgewogICAgVGl0bGUgPSAiQXV0byBCdWRkeSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjkpCiAgICBfRy5BdXRvX0J1ZGR5ID0gdjI2OTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9CdWRkeTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY4MSA9IENGcmFtZS5uZXcoLSA3MzEuMjAzNDMwMTc1NzgxMiwgMzgxLjU2NTg4NzQ1MTE3MTksIC0gMTExOTguNDk1MTE3MTg3NSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fQnVkZHkgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDUwLCB2MTA1MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDUxLk5hbWUgPT0gIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNTE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDUxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTA1MS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA1MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNTEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNTEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDUxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0J1ZGR5IG9yIG5vdCB2MTA1MS5QYXJlbnQgb3IgKHYxMDUxLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgxLlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAxNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjgxKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDczMS4yMDM0MzAxNzU3ODEyLCAzODEuNTY1ODg3NDUxMTcxOSwgLSAxMTE5OC40OTUxMTcxODc1KSk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2ODIgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0R1YWxLYXRhbmEiLCB7CiAgICBUaXRsZSA9ICJBdXRvIENESyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzApCiAgICBfRy5BdXRvX0R1YWxLYXRhbmEgPSB2MjcwOwplbmQpOwp2MTcuVG9nZ2xlQXV0b0R1YWxLYXRhbmE6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9fRHVhbEthdGFuYSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVHVzaGl0YSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVHVzaGl0YSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJUdXNoaXRhIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJUdXNoaXRhIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJUdXNoaXRhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJUdXNoaXRhIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiWWFtYSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiWWFtYSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiWWFtYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiWWFtYSIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJMb2FkSXRlbSIsICJUdXNoaXRhIik7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9fRHVhbEthdGFuYSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJFdmlsIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJFdmlsIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSAzKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJHb29kIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJHb29kIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gNCkgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDUpIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSA2KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIEJvc3MgW0x2LiAyMDI1XSBbQm9zc10iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gQm9zcyBbTHYuIDIwMjVdIFtCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBCb3NzIFtMdi4gMjAyNV0gW0Jvc3NdIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gW0x2LiAyMjAwXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE4NDIsIHYxODQzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE4NDMuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIEJvc3MiKSBvciAodjE4NDMuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODQzLkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTg0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIHBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTg0My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODQzLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODQzLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTg0My5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4NDMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE4NDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE4NDMuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICgoQ0ZyYW1lLm5ldygtIDEyMzYxLjcwNjA1NDY4NzUsIDYwMy4zNTQ3OTczNjMyODEyLCAtIDY1NTAuNTM0MTc5Njg3NSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJFdmlsIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjM2MS43MDYwNTQ2ODc1LCA2MDMuMzU0Nzk3MzYzMjgxMiwgLSA2NTUwLjUzNDE3OTY4NzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyMjUzLjU0MTk5MjE4NzUsIDU5OC44OTk5NjMzNzg5MDYyLCAtIDY1NDYuODM4ODY3MTg3NSkpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyMzYxLjcwNjA1NDY4NzUsIDYwMy4zNTQ3OTczNjMyODEyLCAtIDY1NTAuNTM0MTc5Njg3NSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b19RdWVzdF9ZYW1hXzEgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk15dGhvbG9naWNhbCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDUyLCB2MTA1MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDUzLk5hbWUgPT0gIk15dGhvbG9naWNhbCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNTMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIC0gMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfWWFtYV8xID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJFdmlsIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzQ1MS40NjQ4NDM3NSwgNTQzLjcxMjg5MDYyNSwgLSA2OTYxLjAwMjkyOTY4NzUpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgQXV0b19RdWVzdF9ZYW1hXzIgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4NTgsIHY4NTkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjg1OTpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjg1OS5IYXplRVNQLlNpemUgPSBVRGltMi5uZXcoNTAsIDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICB2ODU5LkhhemVFU1AuTWF4RGlzdGFuY2UgPSAiaW5mIjsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZm9yIHY4NjAsIHY4NjEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjg2MTpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjg2MS5IYXplRVNQLlNpemUgPSBVRGltMi5uZXcoNTAsIDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICB2ODYxLkhhemVFU1AuTWF4RGlzdGFuY2UgPSAiaW5mIjsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgZm9yIHY3MzEsIHY3MzIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiAoQXV0b19RdWVzdF9ZYW1hXzIgYW5kIHY3MzI6RmluZEZpcnN0Q2hpbGQoIkhhemVFU1AiKSBhbmQgKCh2NzMyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBGYXJtUG9zc0VzcC5Qb3NpdGlvbikubWFnbml0dWRlIDw9IDMwMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NzMyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gRmFybVBvc3NFc3A7CiAgICAgICAgICAgICAgICAgICAgdjczMi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2NzMyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NzMyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkJvZHlWZWxvY2l0eSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwNTggPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIsIHY3MzIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMDU4Lk1heEZvcmNlID0gVmVjdG9yMy5uZXcoMSwgMSwgMSkgKiBtYXRoLmh1Z2UgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTA1OC5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b19RdWVzdF9ZYW1hXzIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3Igdjg2NSwgdjg2NiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODY2OkZpbmRGaXJzdENoaWxkKCJIYXplRVNQIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFN3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODY2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODY2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODY2Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjg2Ni5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHY4NjYuSHVtYW5vaWQuSGVhbHRoIDw9IDApIGFuZCB2ODY2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvX0R1YWxLYXRhbmEgPT0gZmFsc2UpIG9yIChBdXRvX1F1ZXN0X1lhbWFfMiA9PSBmYWxzZSkgb3Igbm90IHY4NjYuUGFyZW50IG9yICh2ODY2Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3Qgdjg2NjpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjEzNDIsIHYxMzQzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjEzNDM6RmluZEZpcnN0Q2hpbGQoIkhhemVFU1AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTM0My5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lTW9uICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1lhbWFfMyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSGFsbG93IEVzc2VuY2UiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uU3VtbW9uZXIuRGV0ZWN0aW9uLkNGcmFtZSk7CiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIkhlbGxEaW1lbnNpb24iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBbTHYuIDIyMDBdIFtCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSGVsbCdzIE1lc3NlbmdlciBbTHYuIDIyMDBdIFtCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NDEsIHYxNjQyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NDIuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIikgb3IgKHYxNjQyLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiIpIG9yICh2MTY0Mi5OYW1lID09ICJIZWxsJ3MgTWVzc2VuZ2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjQyLkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NDIuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTY0Mi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE2NDIuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTY0Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgYW5kIHYxNjQyLkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTY0Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNjQyLlBhcmVudCBvciAoQXV0b19RdWVzdF9ZYW1hXzMgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWxsRGltZW5zaW9uLlRvcmNoMS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW0oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVsbERpbWVuc2lvbi5Ub3JjaDIuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlbGxEaW1lbnNpb24uVG9yY2gzLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWxsRGltZW5zaW9uLkV4aXQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfWWFtYV8zID09IGZhbHNlKSBvciAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSAzKQogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikgb3IgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIgW0x2LiAyMTAwXSBbUmFpZCBCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjcxLCB2MTY3MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY3Mi5OYW1lID09ICJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NzIuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjcyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfWWFtYV8zID09IGZhbHNlKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiSGVsbERpbWVuc2lvbiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gOTU3MC4wMzMyMDMxMjUsIDMxNS45MzQ2OTIzODI4MTI1LCA2NzI2Ljg5MzA2NjQwNjI1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQm9uZXMiLCAiQnV5IiwgMSwgMSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1R1c2hpdGFfMSB0aGVuCiAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NTQ2Ljk5MDIzNDM3NSwgMjEuMTM5ODkyNTc4MTI1LCA0Njg2LjExNDI1NzgxMjUpKTsKICAgICAgICAgICAgd2FpdCg1KTsKICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDYxMjAuMDU3NjE3MTg3NSwgMTYuNDU1NzgwMDI5Mjk2ODc1LCAtIDIyNTAuNjk3MjY1NjI1KSk7CiAgICAgICAgICAgIHdhaXQoNSk7CiAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NTMzLjIzOTI1NzgxMjUsIDcuMjU0NDQ1NTUyODI1OTI4LCAtIDgzNzIuNjk5MjE4NzUpKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1R1c2hpdGFfMiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDU1MzkuMzExNTIzNDM3NSwgMzEzLjgwMDUzNzEwOTM3NSwgLSAyOTcyLjM3MjMxNDQ1MzEyNSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNjEsIHYxMDYyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXV0b19RdWVzdF9UdXNoaXRhXzIgYW5kIHYxMDYyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxMDYyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjEwNjIuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEwNjIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMjAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDYyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDYyLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTA2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxMDYyLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTA2Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgYW5kIHYxMDYyLkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTA2Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxMDYyLlBhcmVudCBvciAoQXV0b19RdWVzdF9UdXNoaXRhXzIgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDU1NDUuMTI0MDIzNDM3NSwgMzEzLjgwMDUzNzEwOTM3NSwgLSAyOTc2LjYxNjQ1NTA3ODEyNSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b19RdWVzdF9UdXNoaXRhXzMgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikgb3IgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiBbTHYuIDIxNzVdIFtCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjQsIHYxNDY1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDY1Lk5hbWUgPT0gIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDY1Lkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDY1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDY1Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNDY1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBhbmQgdjE0NjUuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfVHVzaGl0YV8zID09IGZhbHNlKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiSGVhdmVubHlEaW1lbnNpb24iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDcwOS4zMTMyOTM0NTcwMzEyLCAzODEuNjAwNTg1OTM3NSwgLSAxMTAxMS4zOTY0ODQzNzUpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiSGVhdmVubHlEaW1lbnNpb24iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBbTHYuIDIyMDBdIFtCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSGVhdmVuJ3MgR3VhcmRpYW4gW0x2LiAyMjAwXSBbQm9zc10iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjUwLCB2MTY1MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNjUxLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiIpIG9yICh2MTY1MS5OYW1lID09ICJDdXJzZWQgU2tlbGV0b24iKSBvciAodjE2NTEuTmFtZSA9PSAiSGVhdmVuJ3MgR3VhcmRpYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NTEuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NTEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY1MS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNjUxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTY1MS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNjUxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBhbmQgdjE2NTEuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxNjUxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NTEuUGFyZW50IG9yIChBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCg1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlYXZlbmx5RGltZW5zaW9uLlRvcmNoMS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVhdmVubHlEaW1lbnNpb24uVG9yY2gyLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWF2ZW5seURpbWVuc2lvbi5Ub3JjaDMuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlYXZlbmx5RGltZW5zaW9uLkV4aXQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fRHVhbEthdGFuYSBvciBub3QgQXV0b19RdWVzdF9UdXNoaXRhXzMgb3IgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gNikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTIgdGhlbgogICAgbG9jYWwgdjUzNyA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVGYWN0b3J5IiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gRmFjdG9yeSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzNzpPbkNoYW5nZWQoZnVuY3Rpb24odjY0NCkKICAgICAgICBfRy5GYWN0b3J5ID0gdjY0NDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRmFjdG9yeTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkZhY3RvcnkgdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ29yZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEzNDQsIHYxMzQ1IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTM0NS5OYW1lID09ICJDb3JlIikgYW5kICh2MTM0NS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5GYWN0b3J5IG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTM0NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ1Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjEzNDUuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxMzQ1Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgdjEzNDUuUGFyZW50IG9yICh2MTM0NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKF9HLkZhY3RvcnkgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkNvcmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5GYWN0b3J5IG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKbG9jYWwgdjgzID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9GYXJtU3dhbiIsIHsKICAgIFRpdGxlID0gIkF1dG8gU3dhbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzEpCiAgICBfRy5BdXRvX0Zhcm1Td2FuID0gdjI3MTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9GYXJtU3dhbjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b0Zhcm1Td2FuIHRoZW4KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRG9uIFN3YW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDYzLCB2MTA2NCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTA2NC5OYW1lID09ICJEb24gU3dhbiIpIGFuZCAodjEwNjQuSHVtYW5vaWQuSGVhbHRoID4gMCkgYW5kIHYxMDY0OklzQSgiTW9kZWwiKSBhbmQgdjEwNjQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDY0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDY0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2NC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvRmFybVN3YW4gPT0gZmFsc2UpIG9yICh2MTA2NC5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyMjg0LjkxMjEwOTM3NSwgMTUuNTM3NjY2MzIwODAxLCA5MDUuNDgyOTEwMTU2MjUpKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCAoKENGcmFtZS5uZXcoMjI4NC45MTIxMDkzNzUsIDE1LjUzNzY2NjMyMDgwMSwgOTA1LjQ4MjkxMDE1NjI1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNCkgb3IgKF9HLkF1dG9GYXJtU3dhbiA9PSBmYWxzZSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHY4NCA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvUmVuZ29rdSIsIHsKICAgIFRpdGxlID0gIlJlbmdva3UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjg0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjcyKQogICAgX0cuQXV0b19SZWdva3UgPSB2MjcyOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1Jlbmdva3U6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fUmVnb2t1IHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSGlkZGVuIEtleSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGlkZGVuIEtleSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJIaWRkZW4gS2V5Iik7CiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg2NTcxLjEyMDExNzE4NzUsIDI5OS4yMzAyODU2NDQ1MywgLSA2OTY3Ljg0MTc5Njg3NSkpOwogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNub3cgTHVya2VyIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJBcmN0aWMgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDY2LCB2MTQ2NyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgodjE0NjcuTmFtZSA9PSAiU25vdyBMdXJrZXIiKSBvciAodjE0NjcuTmFtZSA9PSAiQXJjdGljIFdhcnJpb3IiKSkgYW5kICh2MTQ2Ny5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjcuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDY3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQ2Ny5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDY3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkhpZGRlbiBLZXkiKSBvciAoX0cuQXV0b19SZWdva3UgPT0gZmFsc2UpIG9yIG5vdCB2MTQ2Ny5QYXJlbnQgb3IgKHYxNDY3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDU0MzkuNzE2Nzk2ODc1LCA4NC40MjA5NDQyMTM4NjcsIC0gNjcxNS4xNjM1NzQyMTg4KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwppZiAoU2VhMiBvciBTZWEzKSB0aGVuCiAgICBsb2NhbCB2NTM4ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUhha2lDb2xvciIsIHsKICAgICAgICBUaXRsZSA9ICJCdXkgSGFraSBDb2xvciIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzODpPbkNoYW5nZWQoZnVuY3Rpb24odjY0NSkKICAgICAgICBfRy5BdXRvX0J1eV9FbmNoYW5jZW1lbnQgPSB2NjQ1OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVIYWtpQ29sb3I6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvX0J1eV9FbmNoYW5jZW1lbnQgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg2NyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiQ29sb3JzRGVhbGVyIiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiMiIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODY3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmlmIFNlYTIgdGhlbgogICAgbG9jYWwgdjUzOSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlU3dvcmRMZW5nZW5kIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gQnV5IExlbmdlbmRhcnkgU3dvcmQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1Mzk6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDYpCiAgICAgICAgX0cuQnV5TGVuZ2VuZFN3b3JkID0gdjY0NjsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlU3dvcmRMZW5nZW5kOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKF9HLkJ1eUxlbmdlbmRTd29yZCBvciBUcmlwbGVfQSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY4OTcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMZWdlbmRhcnlTd29yZERlYWxlciIsCiAgICAgICAgICAgICAgICAgICAgICAgIFsyXSA9ICIyIgogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjg5NykpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmlmIFNlYTIgdGhlbgogICAgbG9jYWwgdjU0MCA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlRXZvUmFjZSIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIFVwZ3JhZGUgUmFjZSBWMiIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjU0MDpPbkNoYW5nZWQoZnVuY3Rpb24odjY0NykKICAgICAgICBfRy5BdXRvRXZvUmFjZSA9IHY2NDc7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUV2b1JhY2U6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgd2FpdCgwLjEpIGRvCiAgICAgICAgICAgICAgICBpZiBfRy5BdXRvRXZvUmFjZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZTpGaW5kRmlyc3RDaGlsZCgiRXZvbHZlZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsICIxIikgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDI3NzkuODM1MjEsIDcyLjk2NjE0MDcsIC0gMzU3NC4wMjAwMiwgLSAwLjczMDQ4NDkwMywgNi4zOTAxNDFlLTgsIC0gMC42ODI5Mjg4NiwgMy41OTk2MzIyZS04LCAxLCA1LjUwNjY3MDNlLTgsIDAuNjgyOTI4ODYsIDEuNTY0MjQ2N2UtOCwgLSAwLjczMDQ4NDkwMykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChWZWN0b3IzLm5ldygtIDI3NzkuODM1MjEsIDcyLjk2NjE0MDcsIC0gMzU3NC4wMjAwMikgLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDQpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuMyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsICIxIikgPT0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAxIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAxIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5GbG93ZXIxLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAyIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5GbG93ZXIyLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAzIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAzIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJab21iaWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE4MzQsIHYxODM1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgzNS5OYW1lID09ICJab21iaWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE4MzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MzUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgzNS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTgzNS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTgzNS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDMiKSBvciBub3QgdjE4MzUuUGFyZW50IG9yICh2MTgzNS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKF9HLkF1dG9Fdm9SYWNlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA1Njg1LjkyMzMzOTg0MzgsIDQ4LjQ4MDEyNTQyNzI0NiwgLSA4NTMuMjM3MjQzNjUyMzQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsICIxIikgPT0gMikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CmVuZApsb2NhbCB2ODUgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9UIiwgewogICAgVGl0bGUgPSAiQXV0byBUdXJuIE9uIFJhY2UgVjMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjg1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjczKQogICAgX0cuQXV0b1QgPSB2MjczOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1Q6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9UIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIkFjdGl2YXRlQWJpbGl0eSIpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY4NiA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1kiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFR1cm4gT24gUmFjZSBWNCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzQpCiAgICBfRy5BdXRvWSA9IHYyNzQ7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvWTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b1kgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJZIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiWSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2ODcgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9LZW4iLCB7CiAgICBUaXRsZSA9ICJBdXRvIEtlbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzUpCiAgICBfRy5BdXRvS2VuID0gdjI3NTsKICAgIGlmIHYyNzUgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIktlbiIsIHRydWUpOwogICAgZWxzZQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIktlbiIsIGZhbHNlKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlQXV0b0tlbjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b0tlbiB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRTpGaXJlU2VydmVyKCJLZW4iLCB0cnVlKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2ODggPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVNhdmVTcGF3biIsIHsKICAgIFRpdGxlID0gIkF1dG8gU2F2ZSBTcGF3bSBQb2ludCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzYpCiAgICBfRy5TYXZlU3Bhd24gPSB2Mjc2OwogICAgaWYgdjI3NiB0aGVuCiAgICAgICAgbG9jYWwgdjY0OCA9IHsKICAgICAgICAgICAgWzFdID0gIlNldFNwYXduUG9pbnQiCiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NjQ4KSk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZVNhdmVTcGF3bjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuU2F2ZVNwYXduIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY3OTcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIlNldFNwYXduUG9pbnQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjc5NykpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY4OSA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5VdGlsLkNhbWVyYVNoYWtlcik7CnY4OTpTdG9wKCk7CmxvY2FsIHY5MCA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlQnJpbmdNb2IiLCB7CiAgICBUaXRsZSA9ICJCcmluZyBNb2IiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2OTA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzcpCiAgICBfRy5CcmluZ01vYiA9IHYyNzc7CmVuZCk7CnYxNy5Ub2dnbGVCcmluZ01vYjpTZXRWYWx1ZSh0cnVlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBmb3IgdjczMywgdjczNCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIChfRy5CcmluZ01vYiBhbmQgYnJpbmdtb2IpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoKHY3MzQuTmFtZSA9PSBNb25GYXJtKSBhbmQgdjczNDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgKHY3MzQuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY3MzQuTmFtZSA9PSAiRmFjdG9yeSBTdGFmZiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjczNC5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gRmFybVBvcy5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMDAwMDAwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gRmFybVBvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2NzM0Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2NzM0Lk5hbWUgPT0gTW9uRmFybSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2NzM0Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBGYXJtUG9zLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwMDAwMDAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBGYXJtUG9zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2NzM0Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjkxID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVSZW1vdmVOb3RpZnkiLCB7CiAgICBUaXRsZSA9ICJSZW1vdmUgTm90aWZ5IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY5MTpPbkNoYW5nZWQoZnVuY3Rpb24odjI3OCkKICAgIFJlbW92ZU5vdGlmeSA9IHYyNzg7CmVuZCk7CnYxNy5Ub2dnbGVSZW1vdmVOb3RpZnk6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBSZW1vdmVOb3RpZnkgdGhlbgogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk5vdGlmaWNhdGlvbnMuRW5hYmxlZCA9IGZhbHNlOwogICAgICAgIGVsc2UKICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5Ob3RpZmljYXRpb25zLkVuYWJsZWQgPSB0cnVlOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY5MiA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlV2hpdGUiLCB7CiAgICBUaXRsZSA9ICJXaGl0ZSBTY3JlZW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjkyOk9uQ2hhbmdlZChmdW5jdGlvbih2Mjc5KQogICAgX0cuV2hpdGVTY3JlZW4gPSB2Mjc5OwogICAgaWYgKF9HLldoaXRlU2NyZWVuID09IHRydWUpIHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKTpTZXQzZFJlbmRlcmluZ0VuYWJsZWQoZmFsc2UpOwogICAgZWxzZWlmIChfRy5XaGl0ZVNjcmVlbiA9PSBmYWxzZSkgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpOlNldDNkUmVuZGVyaW5nRW5hYmxlZCh0cnVlKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlV2hpdGU6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2OTMgPSB2MTYuU2V0dGluZzpBZGRTZWN0aW9uKCJTa2lsbCIpOwpsb2NhbCB2OTQgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVoiLCB7CiAgICBUaXRsZSA9ICJaIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjk0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjgwKQogICAgU2tpbGxaID0gdjI4MDsKZW5kKTsKdjE3LlRvZ2dsZVo6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5NSA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlWCIsIHsKICAgIFRpdGxlID0gIlgiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2OTU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyODEpCiAgICBTa2lsbFggPSB2MjgxOwplbmQpOwp2MTcuVG9nZ2xlWDpTZXRWYWx1ZSh0cnVlKTsKbG9jYWwgdjk2ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVDIiwgewogICAgVGl0bGUgPSAiQyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnY5NjpPbkNoYW5nZWQoZnVuY3Rpb24odjI4MikKICAgIFNraWxsQyA9IHYyODI7CmVuZCk7CnYxNy5Ub2dnbGVDOlNldFZhbHVlKHRydWUpOwpsb2NhbCB2OTcgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVYiLCB7CiAgICBUaXRsZSA9ICJWIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjk3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjgzKQogICAgU2tpbGxWID0gdjI4MzsKZW5kKTsKdjE3LlRvZ2dsZVY6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5OCA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlRiIsIHsKICAgIFRpdGxlID0gIkYiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjk4Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mjg0KQogICAgU2tpbGxGID0gdjI4NDsKZW5kKTsKdjE3LlRvZ2dsZUY6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5OSA9IHYxNi5TdGF0dXM6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIkluZm9ybWF0aW9uIiwKICAgIENvbnRlbnQgPSAi4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG4iIC4uICJOYW1lIDogIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGlzcGxheU5hbWUgLi4gIiAoQCIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgLi4gIilcbiIgLi4gIkxldmVsIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlIC4uICJcbiIgLi4gIkJlbGkgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuQmVsaS5WYWx1ZSAuLiAiXG4iIC4uICJGcmFnbWVudHMgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuRnJhZ21lbnRzLlZhbHVlIC4uICJcbiIgLi4gIldhbnRlZCBCZWxpIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5sZWFkZXJzdGF0c1siQm91bnR5L0hvbm9yIl0uVmFsdWUgLi4gIlxuIiAuLiAiSFA6ICIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggLi4gIi8iIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuTWF4SGVhbHRoIC4uICJcbiIgLi4gIkVuZXJneSA6ICIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5FbmVyZ3kuVmFsdWUgLi4gIi8iIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuRW5lcmd5Lk1heFZhbHVlIC4uICJcbiIgLi4gIlJhY2UgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSAuLiAiXG4iIC4uICJGcnVpdCA6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlIC4uICJcbiIgLi4gIuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSIKfSk7CmxvY2FsIHYxMDAgPSB2MTYuU3RhdHVzOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJUaW1lIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKbG9jYWwgZnVuY3Rpb24gdjEwMSgpCiAgICBsb2NhbCB2Mjg1ID0gb3MuZGF0ZSgiKnQiKTsKICAgIGxvY2FsIHYyODYgPSB2Mjg1LmhvdXIgJSAyNCA7CiAgICBsb2NhbCB2Mjg3ID0gKCh2Mjg2IDwgMTIpIGFuZCAiQU0iKSBvciAiUE0iIDsKICAgIGxvY2FsIHYyODggPSBzdHJpbmcuZm9ybWF0KCIlMDJpOiUwMmk6JTAyaSAlcyIsICgodjI4NiAtIDEpICUgMTIpICsgMSwgdjI4NS5taW4sIHYyODUuc2VjLCB2Mjg3KTsKICAgIGxvY2FsIHYyODkgPSBzdHJpbmcuZm9ybWF0KCIlMDJkLyUwMmQvJTA0ZCIsIHYyODUuZGF5LCB2Mjg1Lm1vbnRoLCB2Mjg1LnllYXIpOwogICAgbG9jYWwgdjI5MCA9IGdhbWU6R2V0U2VydmljZSgiTG9jYWxpemF0aW9uU2VydmljZSIpOwogICAgbG9jYWwgdjI5MSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOwogICAgbG9jYWwgdjI5MiA9IHYyOTEuTG9jYWxQbGF5ZXI7CiAgICBsb2NhbCB2MjkzID0gdjI5Mi5OYW1lOwogICAgbG9jYWwgdjI5NCA9ICJVbmtub3duIjsKICAgIGxvY2FsIHYyOTUsIHYyOTYgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgcmV0dXJuIHYyOTA6R2V0Q291bnRyeVJlZ2lvbkZvclBsYXllckFzeW5jKHYyOTIpOwogICAgZW5kKTsKICAgIGlmIHYyOTUgdGhlbgogICAgICAgIHYyOTQgPSB2Mjk2OwogICAgZW5kCiAgICB2MTAwOlNldERlc2ModjI4OSAuLiAiLSIgLi4gdjI4OCAuLiAiIFsgIiAuLiB2Mjk0IC4uICIgXSIpOwplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIHYxMDEoKTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOldhaXQoKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTAyID0gdjE2LlN0YXR1czpBZGRQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiU2VydmVyIHRpbWUiLAogICAgQ29udGVudCA9ICIiCn0pOwpsb2NhbCBmdW5jdGlvbiB2MTAzKCkKICAgIGxvY2FsIHYyOTcgPSBtYXRoLmZsb29yKHdvcmtzcGFjZS5EaXN0cmlidXRlZEdhbWVUaW1lICsgMC41KTsKICAgIGxvY2FsIHYyOTggPSBtYXRoLmZsb29yKHYyOTcgLyAoNjAgXiAyKSkgJSAyNCA7CiAgICBsb2NhbCB2Mjk5ID0gbWF0aC5mbG9vcih2Mjk3IC8gNjApICUgNjAgOwogICAgbG9jYWwgdjMwMCA9IHYyOTcgJSA2MCA7CiAgICB2MTAyOlNldERlc2Moc3RyaW5nLmZvcm1hdCgiJTAyZCBUaeG6v25nLSUwMmQgUGjDunQtJTAyZCBHacOieSIsIHYyOTgsIHYyOTksIHYzMDApKTsKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgcGNhbGwodjEwMyk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjEwNCA9IHYxNi5TdGF0dXM6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIkZyb3plbiBEaW1lbnNpb24iLAogICAgQ29udGVudCA9ICIiCn0pOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJGcm96ZW5EaW1lbnNpb24iKSB0aGVuCiAgICAgICAgICAgICAgICB2MTA0OlNldERlc2MoIuKchSIpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB2MTA0OlNldERlc2MoIuKdjCIpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxMDUgPSB2MTYuU3RhdHVzOkFkZElucHV0KCJJbnB1dCIsIHsKICAgIFRpdGxlID0gIlNlcnZlciBJRCIsCiAgICBEZWZhdWx0ID0gIiIsCiAgICBQbGFjZWhvbGRlciA9ICIiLAogICAgTnVtZXJpYyA9IGZhbHNlLAogICAgRmluaXNoZWQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjMwMSkKICAgICAgICBfRy5Kb2IgPSB2MzAxOwogICAgZW5kCn0pOwp2MTYuU3RhdHVzOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJKb2luIFNlcnZlciBJRCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydFRvUGxhY2VJbnN0YW5jZShnYW1lLnBsYWNlSWQsIF9HLkpvYiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyKTsKICAgIGVuZAp9KTsKdjE2LlN0YXR1czpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ29weSBTZXJ2ZXIgSUQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHNldGNsaXBib2FyZCh0b3N0cmluZyhnYW1lLkpvYklkKSk7CiAgICBlbmQKfSk7CmxvY2FsIHYxMDYgPSB2MTYuU3RhdHVzOkFkZFRvZ2dsZSgiTXlUb2dnbGUiLCB7CiAgICBUaXRsZSA9ICJTcGFtIEpvaW4gU2VydmVyIElEIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEwNjpPbkNoYW5nZWQoZnVuY3Rpb24odjMwMikKICAgIF9HLkpvaW4gPSB2MzAyOwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5Kb2luIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydFRvUGxhY2VJbnN0YW5jZShnYW1lLnBsYWNlSWQsIF9HLkpvYiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTA3ID0gdjE2LlN0YXRzOkFkZFRvZ2dsZSgiVG9nZ2xlTWVsZWUiLCB7CiAgICBUaXRsZSA9ICJNZWxlZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzAzKQogICAgX0cuQXV0b19TdGF0c19NZWxlZSA9IHYzMDM7CmVuZCk7CnYxNy5Ub2dnbGVNZWxlZTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMDggPSB2MTYuU3RhdHM6QWRkVG9nZ2xlKCJUb2dnbGVEZSIsIHsKICAgIFRpdGxlID0gIkRlZmVuc2UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEwODpPbkNoYW5nZWQoZnVuY3Rpb24odjMwNCkKICAgIF9HLkF1dG9fU3RhdHNfRGVmZW5zZSA9IHYzMDQ7CmVuZCk7CnYxNy5Ub2dnbGVEZTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMDkgPSB2MTYuU3RhdHM6QWRkVG9nZ2xlKCJUb2dnbGVTd29yZCIsIHsKICAgIFRpdGxlID0gIlN3b3JkIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMDUpCiAgICBfRy5BdXRvX1N0YXRzX1N3b3JkID0gdjMwNTsKZW5kKTsKdjE3LlRvZ2dsZVN3b3JkOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjExMCA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZUd1biIsIHsKICAgIFRpdGxlID0gIkd1biIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTEwOk9uQ2hhbmdlZChmdW5jdGlvbih2MzA2KQogICAgX0cuQXV0b19TdGF0c19HdW4gPSB2MzA2OwplbmQpOwp2MTcuVG9nZ2xlR3VuOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjExMSA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZUZydWl0IiwgewogICAgVGl0bGUgPSAiRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExMTpPbkNoYW5nZWQoZnVuY3Rpb24odjMwNykKICAgIF9HLkF1dG9fU3RhdHNfRGV2aWxfRnJ1aXQgPSB2MzA3OwplbmQpOwp2MTcuVG9nZ2xlRnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1N0YXRzX0RldmlsX0ZydWl0IHRoZW4KICAgICAgICAgICAgbG9jYWwgdjczNyA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICBbMl0gPSAiRGVtb24gRnJ1aXQiLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzM3KSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19HdW4gdGhlbgogICAgICAgICAgICBsb2NhbCB2NzM4ID0gewogICAgICAgICAgICAgICAgWzFdID0gIkFkZFBvaW50IiwKICAgICAgICAgICAgICAgIFsyXSA9ICJHdW4iLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzM4KSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19Td29yZCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3MzkgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIlN3b3JkIiwKICAgICAgICAgICAgICAgIFszXSA9IDMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjczOSkpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU3RhdHNfRGVmZW5zZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NDAgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIkRlZmVuc2UiLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzQwKSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19NZWxlZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NDEgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIk1lbGVlIiwKICAgICAgICAgICAgICAgIFszXSA9IDMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjc0MSkpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMTIgPSB7fTsKZm9yIHYzMDgsIHYzMDkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgIHRhYmxlLmluc2VydCh2MTEyLCB2MzA5Lk5hbWUpOwplbmQKbG9jYWwgdjExMyA9IHYxNi5QbGF5ZXI6QWRkRHJvcGRvd24oIlNlbGVjdGVkUGx5IiwgewogICAgVGl0bGUgPSAiU2VsZWN0IFBsYXllciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gdjExMiwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjExMzpTZXRWYWx1ZShfRy5TZWxlY3RQbHkpOwp2MTEzOk9uQ2hhbmdlZChmdW5jdGlvbih2MzEwKQogICAgX0cuU2VsZWN0UGx5ID0gdjMxMDsKZW5kKTsKdjE2LlBsYXllcjpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiTG9hZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgdGFibGUuY2xlYXIodjExMik7CiAgICAgICAgZm9yIHY1NDEsIHY1NDIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYxMTIsIHY1NDIuTmFtZSk7CiAgICAgICAgZW5kCiAgICBlbmQKfSk7CmxvY2FsIHYxMTQgPSB2MTYuUGxheWVyOkFkZFRvZ2dsZSgiVG9nZ2xlVGVsZXBvcnQiLCB7CiAgICBUaXRsZSA9ICJUUCBUbyBQbGF5ZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExNDpPbkNoYW5nZWQoZnVuY3Rpb24odjMxMSkKICAgIF9HLlRlbGVwb3J0UGx5ID0gdjMxMTsKICAgIGlmICh2MzExID09IGZhbHNlKSB0aGVuCiAgICAgICAgd2FpdCgpOwogICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgVHdlZW4yKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVUZWxlcG9ydDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLlRlbGVwb3J0UGx5IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzOkZpbmRGaXJzdENoaWxkKF9HLlNlbGVjdFBseSkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lLlBsYXllcnNbX0cuU2VsZWN0UGx5XS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2LlBsYXllcjpBZGRTZWN0aW9uKCJPdGhlciIpOwpsb2NhbCB2MTE1ID0gdjE2LlBsYXllcjpBZGRUb2dnbGUoIlRvZ2dsZU5vQ2xpcCIsIHsKICAgIFRpdGxlID0gIk5vY2xpcCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnYxMTU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTIpCiAgICBfRy5MT2YgPSB2MzEyOwplbmQpOwp2MTcuVG9nZ2xlTm9DbGlwOlNldFZhbHVlKHRydWUpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuTE9mIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODY4LCB2ODY5IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODY5OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY4NjkuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTE2ID0gdjE2LlBsYXllcjpBZGRUb2dnbGUoIlRvZ2dsZVdhbGtvbldhdGVyIiwgewogICAgVGl0bGUgPSAiV2FsayBPbiBXYXRlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnYxMTY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTMpCiAgICBfRy5XYWxrb25XYXRlciA9IHYzMTM7CmVuZCk7CnYxNy5Ub2dnbGVXYWxrb25XYXRlcjpTZXRWYWx1ZSh0cnVlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLldhbGtvbldhdGVyIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJXYXRlckJhc2UtUGxhbmUiXS5TaXplID0gVmVjdG9yMy5uZXcoMTAwMCwgMTEyLCAxMDAwKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIldhdGVyQmFzZS1QbGFuZSJdLlNpemUgPSBWZWN0b3IzLm5ldygxMDAwLCA4MCwgMTAwMCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjExNyA9IHYxNi5QbGF5ZXI6QWRkVG9nZ2xlKCJUb2dnbGVFbmFibGVQdnAiLCB7CiAgICBUaXRsZSA9ICJFbmFibGUgUFZQIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTQpCiAgICBfRy5FbmFibGVkUHZQID0gdjMxNDsKZW5kKTsKdjE3LlRvZ2dsZUVuYWJsZVB2cDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuRW5hYmxlZFB2UCB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUHZwRGlzYWJsZWQuVmlzaWJsZSA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRW5hYmxlUHZwIik7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTE4ID0gdjE2LlRlbGVwb3J0OkFkZFNlY3Rpb24oIlNlYSIpOwpsb2NhbCB2MTE5ID0gdjE2LlRlbGVwb3J0OkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1NlYTIiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFNlYSAyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTUpCiAgICBfRy5BdXRvX1NlYTIgPSB2MzE1OwplbmQpOwp2MTcuVG9nZ2xlQXV0b1NlYTI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1NlYTIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2ODAwID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZTsKICAgICAgICAgICAgICAgIGlmICgodjgwMCA+PSA3MDApIGFuZCBXb3JsZDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkljZS5Eb29yLkNhbkNvbGxpZGUgPT0gZmFsc2UpIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSWNlLkRvb3IuVHJhbnNwYXJlbmN5ID09IDEpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzQ2ID0gQ0ZyYW1lLm5ldyg0ODQ5LjI5ODgzLCA1LjY1MTM4MTQ5LCA3MTkuNjExODc3KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTM0Nik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICgodjEzNDYuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMpIG9yIChfRy5BdXRvX1NlYTIgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS4xKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRHJlc3Nyb3NhUXVlc3RQcm9ncmVzcyIsICJEZXRlY3RpdmUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIktleSIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMTM0Ny43MTI0LCAzNy4zNzUxNjAyLCAtIDEzMjUuNjQ4OCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoKFZlY3RvcjMubmV3KDEzNDcuNzEyNCwgMzcuMzc1MTYwMiwgLSAxMzI1LjY0ODgpIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzKSBvciAoX0cuQXV0b19TZWEyID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSWNlLkRvb3IuQ2FuQ29sbGlkZSA9PSBmYWxzZSkgYW5kIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2UuRG9vci5UcmFuc3BhcmVuY3kgPT0gMSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY4MCwgdjE2ODEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjgxLk5hbWUgPT0gIkljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90IHYxNjgxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2ODE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNjgxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTY4MS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVNlY29uZCA9IHYxNjgxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY4MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2ODEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2ODEuSGVhZC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjgxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY4MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVNlY29uZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2ODEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fU2VhMiBvciBub3QgdjE2ODEuUGFyZW50IG9yICh2MTY4MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxEcmVzc3Jvc2EiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiSWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkljZSBBZG1pcmFsIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDUsIDEwLCA3KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjEyMCA9IHYxNi5UZWxlcG9ydDpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9TZWEzIiwgewogICAgVGl0bGUgPSAiQXV0byBTZWEgMyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTIwOk9uQ2hhbmdlZChmdW5jdGlvbih2MzE2KQogICAgX0cuQXV0b19TZWEzID0gdjMxNjsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9TZWEzOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b1NlYTMgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMTUwMCkgYW5kIFdvcmxkMikgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLkF1dG9MZXZlbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlc1snQ29tbUZfJ106SW52b2tlU2VydmVyKCJaUXVlc3RQcm9ncmVzcyIsICJHZW5lcmFsIikgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTkyNi4zMjIxNDM1NTQ3LCAxMi44MTk4NTE4NzUzMDUsIDE3MzguMzA5MjA0MTAxNikpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKENGcmFtZS5uZXcoLSAxOTI2LjMyMjE0MzU1NDcsIDEyLjgxOTg1MTg3NTMwNSwgMTczOC4zMDkyMDQxMDE2KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlpRdWVzdFByb2dyZXNzIiwgIkJlZ2luIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuOCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgicmlwX2luZHJhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNTc4LCB2MTU3OSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE1NzkuTmFtZSA9PSAicmlwX2luZHJhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVUaGlyZCA9IHYxNTc5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNTc5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTc5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lVGhpcmQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU3OS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTc5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NzkuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbFpvdSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b1NlYTMgPT0gZmFsc2UpIG9yICh2MTU3OS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNTc5LlBhcmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAobm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgicmlwX2luZHJhIikgYW5kICgoQ0ZyYW1lLm5ldygtIDI2ODgwLjkzMzU5Mzc1LCAyMi44NDg1NTQ2MTEyMDYsIDQ3My4xODk1MTQxNjAxNikuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMjY4ODAuOTMzNTkzNzUsIDIyLjg0ODU1NDYxMTIwNiwgNDczLjE4OTUxNDE2MDE2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKdjE2LlRlbGVwb3J0OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTZWEgMSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsTWFpbiIpOwogICAgZW5kCn0pOwp2MTYuVGVsZXBvcnQ6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNlYSAyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxEcmVzc3Jvc2EiKTsKICAgIGVuZAp9KTsKdjE2LlRlbGVwb3J0OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTZWEgMyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsWm91Iik7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5UZWxlcG9ydDpBZGRTZWN0aW9uKCJJc2xhbmQiKTsKaWYgU2VhMSB0aGVuCiAgICBJc2xhbmRMaXN0ID0gewogICAgICAgICJXaW5kTWlsbCIsCiAgICAgICAgIk1hcmluZSIsCiAgICAgICAgIk1pZGRsZSBUb3duIiwKICAgICAgICAiSnVuZ2xlIiwKICAgICAgICAiUGlyYXRlIFZpbGxhZ2UiLAogICAgICAgICJEZXNlcnQiLAogICAgICAgICJTbm93IElzbGFuZCIsCiAgICAgICAgIk1hcmluZUZvcmQiLAogICAgICAgICJDb2xvc3NldW0iLAogICAgICAgICJTa3kgSXNsYW5kIDEiLAogICAgICAgICJTa3kgSXNsYW5kIDIiLAogICAgICAgICJTa3kgSXNsYW5kIDMiLAogICAgICAgICJQcmlzb24iLAogICAgICAgICJNYWdtYSBWaWxsYWdlIiwKICAgICAgICAiVW5kZXIgV2F0ZXIgSXNsYW5kIiwKICAgICAgICAiRm91bnRhaW4gQ2l0eSIsCiAgICAgICAgIlNoYW5rIFJvb20iLAogICAgICAgICJNb2IgSXNsYW5kIgogICAgfTsKZWxzZWlmIFNlYTIgdGhlbgogICAgSXNsYW5kTGlzdCA9IHsKICAgICAgICAiVGhlIENhZmUiLAogICAgICAgICJGcmlzdCBTcG90IiwKICAgICAgICAiRGFyayBBcmVhIiwKICAgICAgICAiRmxhbWluZ28gTWFuc2lvbiIsCiAgICAgICAgIkZsYW1pbmdvIFJvb20iLAogICAgICAgICJHcmVlbiBab25lIiwKICAgICAgICAiRmFjdG9yeSIsCiAgICAgICAgIkNvbG9zc3VpbSIsCiAgICAgICAgIlpvbWJpZSBJc2xhbmQiLAogICAgICAgICJUd28gU25vdyBNb3VudGFpbiIsCiAgICAgICAgIlB1bmsgSGF6YXJkIiwKICAgICAgICAiQ3Vyc2VkIFNoaXAiLAogICAgICAgICJJY2UgQ2FzdGxlIiwKICAgICAgICAiRm9yZ290dGVuIElzbGFuZCIsCiAgICAgICAgIlVzc29wIElzbGFuZCIsCiAgICAgICAgIk1pbmkgU2t5IElzbGFuZCIKICAgIH07CmVsc2VpZiBTZWEzIHRoZW4KICAgIElzbGFuZExpc3QgPSB7CiAgICAgICAgIk1hbnNpb24iLAogICAgICAgICJQb3J0IFRvd24iLAogICAgICAgICJHcmVhdCBUcmVlIiwKICAgICAgICAiQ2FzdGxlIE9uIFRoZSBTZWEiLAogICAgICAgICJNaW5pU2t5IiwKICAgICAgICAiSHlkcmEgSXNsYW5kIiwKICAgICAgICAiRmxvYXRpbmcgVHVydGxlIiwKICAgICAgICAiSGF1bnRlZCBDYXN0bGUiLAogICAgICAgICJJY2UgQ3JlYW0gSXNsYW5kIiwKICAgICAgICAiUGVhbnV0IElzbGFuZCIsCiAgICAgICAgIkNha2UgSXNsYW5kIiwKICAgICAgICAiQ29jb2EgSXNsYW5kIiwKICAgICAgICAiQ2FuZHkgSXNsYW5kIiwKICAgICAgICAiVGlraSBPdXRwb3N0IgogICAgfTsKZW5kCmxvY2FsIHYxMjEgPSB2MTYuVGVsZXBvcnQ6QWRkRHJvcGRvd24oIkRyb3Bkb3duSXNsYW5kIiwgewogICAgVGl0bGUgPSAiU2VsZWN0IElzbGFuZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gSXNsYW5kTGlzdCwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjEyMTpTZXRWYWx1ZShfRy5TZWxlY3RJc2xhbmQpOwp2MTIxOk9uQ2hhbmdlZChmdW5jdGlvbih2MzE3KQogICAgX0cuU2VsZWN0SXNsYW5kID0gdjMxNzsKZW5kKTsKdjE2LlRlbGVwb3J0OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUZWxlcG9ydCBUbyBJc2xhbmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIldpbmRNaWxsIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg5NzkuNzk4OTUwMTk1MzEsIDE2LjUxNjYxMzAwNjU5MiwgMTQyOS4wNDY2MzA4NTk0KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1hcmluZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyNTY2LjQyOTY4NzUsIDYuODU1NjY4MDY3OTMyMSwgMjA0NS4yNTYxMDM1MTU2KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1pZGRsZSBUb3duIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDY5MC4zMzA4MTA1NDY4OCwgMTUuMDk0MjUxNjMyNjksIDE1ODIuMjM4MDM3MTA5NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJKdW5nbGUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTYxMi43OTU3NzYzNjcyLCAzNi44NTIwODEyOTg4MjgsIDE0OS4xMjg0MzMyMjc1NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJQaXJhdGUgVmlsbGFnZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxMTgxLjMwOTMyNjE3MTksIDQuNzUxNDkwNTkyOTU2NSwgMzgwMy41NDU2NTQyOTY5KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkRlc2VydCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoOTQ0LjE1Nzg5Nzk0OTIyLCAyMC45MTk3MjkyMzI3ODgsIDQzNzMuMzAwMjkyOTY4OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJTbm93IElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMTM0Ny44MDY3NjI2OTUzLCAxMDQuNjY4MDYwMzAyNzMsIC0gMTMxOS43MzcwNjA1NDY5KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1hcmluZUZvcmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNDkxNC44MjEyODkwNjI1LCA1MC45NjM2MjY4NjE1NzIsIDQyODEuMDI3ODMyMDMxMykpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDb2xvc3NldW0iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTQyNy42MjAzNjEzMjgxLCA3LjI4ODEwNzg3MjAwOTMsIC0gMjc5Mi43NzIyMTY3OTY5KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNreSBJc2xhbmQgMSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA0ODY5LjEwMjUzOTA2MjUsIDczMy40NjA1MTAyNTM5MSwgLSAyNjY3LjAxODA2NjQwNjMpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiU2t5IElzbGFuZCAyIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDQ2MDcuODIyNzUsIDg3Mi41NDI0OCwgLSAxNjY3LjU1Njg4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNreSBJc2xhbmQgMyIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA3ODk0LjYxNzY3NTc4MTMsIDU1NDcuMTQxNjAxNTYyNSwgLSAzODAuMjkxMTk4NzMwNDcpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUHJpc29uIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg0ODc1LjMzMDA3ODEyNSwgNS42NTE5ODE4MzA1OTY5LCA3MzQuODUwMjE5NzI2NTYpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWFnbWEgVmlsbGFnZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA1MjQ3LjcxNjMwODU5MzgsIDEyLjg4MzkzNDAyMDk5NiwgODUwNC45Njg3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJVbmRlciBXYXRlciBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDExLjY3OTY4NzUsIDE4MTkuNzg0MTc5Njg3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGb3VudGFpbiBDaXR5IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg1MTI3LjEyODQxNzk2ODgsIDU5LjUwMTM2NTY2MTYyMSwgNDEwNS40NDU4MDA3ODEzKSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNoYW5rIFJvb20iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTQ0Mi4xNjU1MywgMjkuODc4ODI2MSwgLSAyOC4zNTQ3NDc4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1vYiBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjg1MC4yMDA2OCwgNy4zOTIyNDc2OCwgNTM1NC45OTI2OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJUaGUgQ2FmZSIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSAyODEuOTM3MDcyNzUzOTA2MjUsIDMwNi4xMzA2MTUyMzQzNzUsIDYwOS4yODAwMjkyOTY4NzUpKTsKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDM4MC40NzkyNzg1NjQ0NSwgNzcuMjIwMzkwMzE5ODI0LCAyNTUuODI1NTAwNDg4MjgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRnJpc3QgU3BvdCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxMS4zMTE0NTU3MjY2MjQsIDI5LjI3NjczMzM5ODQzOCwgMjc3MS41MjI0NjA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkRhcmsgQXJlYSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMzc4MC4wMzAyNzM0Mzc1LCAyMi42NTIxNjQ0NTkyMjksIC0gMzQ5OC41ODU5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZsYW1pbmdvIE1hbnNpb24iKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gMjgxLjkzNzA3Mjc1MzkwNjI1LCAzMDYuMTMwNjE1MjM0Mzc1LCA2MDkuMjgwMDI5Mjk2ODc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZsYW1pbmdvIFJvb20iKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDIyODQuOTEyMTA5Mzc1LCAxNS4xNTIwMzQ3NTk1MjE0ODQsIDkwNS40ODI5MTAxNTYyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJHcmVlbiBab25lIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI0NDguNTMwMDI5Mjk2OSwgNzMuMDE2MTA1NjUxODU1LCAtIDMyMTAuNjMwNjE1MjM0NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGYWN0b3J5IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg0MjQuMTI2OTgzNjQyNTgsIDIxMS4xNjE3MTI2NDY0OCwgLSA0MjcuNTQwNDk2ODI2MTcpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ29sb3NzdWltIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE1MDMuNjIyNDM2NTIzNCwgMjE5Ljc5NTYyMzc3OTMsIDEzNjkuMzEwMTgwNjY0MSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJab21iaWUgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDU2MjIuMDMzMjAzMTI1LCA0OTIuMTk2MDQ0OTIxODgsIC0gNzgxLjc4NTUyMjQ2MDk0KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlR3byBTbm93IE1vdW50YWluIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg3NTMuMTQyODgzMzAwNzgsIDQwOC4yMzU1OTU3MDMxMywgLSA1Mjc0LjYxNDc0NjA5MzgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUHVuayBIYXphcmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNjEyNy42NTQyOTY4NzUsIDE1Ljk1MTc2MjE5OTQwMiwgLSA1MDQwLjI4NjEzMjgxMjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ3Vyc2VkIFNoaXAiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy40MDE5Nzc1MzkwNiwgMTI1LjA1NzEyODkwNjI1LCAzMjg4NS44NzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiSWNlIENhc3RsZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNjE0OC40MTE2MjEwOTM4LCAyOTQuMzg2ODcxMzM3ODksIC0gNjc0MS4xMTY2OTkyMTg4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZvcmdvdHRlbiBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMzAzMi43NjQxNjAxNTYzLCAzMTcuODk2NzI4NTE1NjMsIC0gMTAwNzUuMzczMDQ2ODc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlVzc29wIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNDgxNi44NjE4MTY0MDYzLCA4LjQ1OTk4ODU5NDA1NTIsIDI4NjMuODE5NTgwMDc4MSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNaW5pIFNreSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjg4Ljc0MDYwMDU4NTk0LCA0OTMyNi4zMTY0MDYyNSwgLSAzNTI0OC41OTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJHcmVhdCBUcmVlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyNjgxLjI3MzY4MTY0MDYsIDE2ODIuODA5MjA0MTAxNiwgLSA3MTkwLjk4NTM1MTU2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ2FzdGxlIE9uIFRoZSBTZWEiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNTA3NS41MDkyNzczNDM3NSwgMzE0LjUxNTUwMjkyOTY4NzUsIC0gMzE1MC4wMjI0NjA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1pbmlTa3kiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjYwLjY1NTU3ODYxMzI4LCA0OTMyNS44MDQ2ODc1LCAtIDM1MjUzLjU3MDMxMjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUG9ydCBUb3duIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI5MC43Mzc2NzA4OTg0Mzc1LCA2LjcyOTk1MjgxMjE5NDgyNCwgNTM0My41NTM3MTA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkh5ZHJhIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNTY2MS41MzIyMjY1NjI1LCAxMDEzLjA5MDc1OTI3NzM0MzgsIC0gMzM0Ljk2NDk5NjMzNzg5MDYpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRmxvYXRpbmcgVHVydGxlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDEzMjc0LjUyODMyMDMxMywgNTMxLjgyMDczOTc0NjA5LCAtIDc1NzkuMjIyNjU2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWFuc2lvbiIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSAxMjQ2OC41MzgwODU5Mzc1LCAzNzUuMDA5NDI5OTMxNjQwNiwgLSA3NTU0LjYyNTQ4ODI4MTI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNhc3RsZSBPbiBUaGUgU2VhIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDUwNzUuNTA5Mjc3MzQzNzUsIDMxNC41MTU1MDI5Mjk2ODc1LCAtIDMxNTAuMDIyNDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJIYXVudGVkIENhc3RsZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA5NTE1LjM3MjA3MDMxMjUsIDE2NC4wMDYyNDA4NDQ3MywgNTc4Ni4wNjEwMzUxNTYyKSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkljZSBDcmVhbSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gOTAyLjU2ODE3NjI2OTUzLCA3OS45MzIwNDQ5ODI5MSwgLSAxMDk4OC44NDc2NTYyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJQZWFudXQgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDIwNjIuNzQ3NTU4NTkzOCwgNTAuNDczODkyMjExOTE0LCAtIDEwMjMyLjU2ODM1OTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDYWtlIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxODg0Ljc3NDc4MDI3MzQzNzUsIDE5LjMyNzUyNjA5MjUyOTI5NywgLSAxMTY2Ni44OTc0NjA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNvY29hIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoODcuOTQyNzY0MjgyMjI2NTYsIDczLjU1NDUxMjAyMzkyNTc4LCAtIDEyMzE5LjQ2NDg0Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNhbmR5IElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxMDE0LjQyNDE5NDMzNTkzNzUsIDE0OS4xMTA2ODcyNTU4NTkzOCwgLSAxNDU1NS45NjI4OTA2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiVGlraSBPdXRwb3N0IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE2NTQyLjQ0NzI2NTYyNSwgNTUuNjg2MzI4ODg3OTM5NDUsIDEwNDQuNDE2NTAzOTA2MjUpKTsKICAgICAgICBlbmQKICAgIGVuZAp9KTsKdjE2LlRlbGVwb3J0OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTdG9wIFRlbGVwb3J0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBDYW5jZWxUd2VlbigpOwogICAgZW5kCn0pOwp2MTYuVmlzdWFsOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJGYWtlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2MzE4ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjMxOSA9IHJlcXVpcmUoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk5vdGlmaWNhdGlvbik7CiAgICAgICAgbG9jYWwgdjMyMCA9IHYzMTg6V2FpdEZvckNoaWxkKCJEYXRhIik7CiAgICAgICAgbG9jYWwgdjMyMSA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpXYWl0Rm9yQ2hpbGQoIkVYUEZ1bmN0aW9uIikpOwogICAgICAgIGxvY2FsIHYzMjIgPSByZXF1aXJlKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5FZmZlY3QuQ29udGFpbmVyLkxldmVsVXApOwogICAgICAgIGxvY2FsIHYzMjMgPSByZXF1aXJlKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5VdGlsLlNvdW5kKTsKICAgICAgICBsb2NhbCB2MzI0ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlV0aWwuU291bmQuU3RvcmFnZS5PdGhlcjpGaW5kRmlyc3RDaGlsZCgiTGV2ZWxVcF9Qcm94eSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5VdGlsLlNvdW5kLlN0b3JhZ2UuT3RoZXI6RmluZEZpcnN0Q2hpbGQoIkxldmVsVXAiKSA7CiAgICAgICAgZnVuY3Rpb24gdjEyOSh2NTQzKQogICAgICAgICAgICBsb2NhbCB2NTQ0ID0gdjU0MzsKICAgICAgICAgICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjY0OSwgdjY1MCA9IHN0cmluZy5nc3ViKHY1NDQsICJeKC0/JWQrKSglZCVkJWQpIiwgIiUxLCUyIik7CiAgICAgICAgICAgICAgICB2NTQ0ID0gdjY0OTsKICAgICAgICAgICAgICAgIGlmICh2NjUwID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuIHY1NDQ7CiAgICAgICAgZW5kCiAgICAgICAgdjMxOS5uZXcoIjxDb2xvcj1ZZWxsb3c+UVVFU1QgQ09NUExFVEVEITxDb2xvcj0vPiIpOkRpc3BsYXkoKTsKICAgICAgICB2MzE5Lm5ldygiRWFybmVkPENvbG9yPVllbGxvdz45LDk5OSw5OTksOTk5LDk5OSBFeHAuPENvbG9yPS8+KCtOb25lKSIpOkRpc3BsYXkoKTsKICAgICAgICB2MzE5Lm5ldygiRWFybmVkPENvbG9yPUdyZWVuPiQ5LDk5OSw5OTksOTk5LDk5OTxDb2xvcj0vPiIpOkRpc3BsYXkoKTsKICAgICAgICB2MzE4LkRhdGEuRXhwLlZhbHVlID0gOTk5OTk5OTk5OTk5OwogICAgICAgIHYzMTguRGF0YS5CZWxpLlZhbHVlID0gdjMxOC5EYXRhLkJlbGkuVmFsdWUgKyA5OTk5OTk5OTk5OTkgOwogICAgICAgIGRlbGF5ID0gMDsKICAgICAgICBjb3VudCA9IDA7CiAgICAgICAgd2hpbGUgKHYzMTguRGF0YS5FeHAuVmFsdWUgLSB2MzIxKHYzMjAuTGV2ZWwuVmFsdWUpKSA+IDAgZG8KICAgICAgICAgICAgdjMxOC5EYXRhLkV4cC5WYWx1ZSA9IHYzMTguRGF0YS5FeHAuVmFsdWUgLSB2MzIxKHYzMjAuTGV2ZWwuVmFsdWUpIDsKICAgICAgICAgICAgdjMxOC5EYXRhLkxldmVsLlZhbHVlID0gdjMxOC5EYXRhLkxldmVsLlZhbHVlICsgMSA7CiAgICAgICAgICAgIHYzMTguRGF0YS5Qb2ludHMuVmFsdWUgPSB2MzE4LkRhdGEuUG9pbnRzLlZhbHVlICsgMyA7CiAgICAgICAgICAgIHYzMjIoewogICAgICAgICAgICAgICAgdjMxOAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdjMyMy5QbGF5KHYzMjMsIHYzMjQuVmFsdWUpOwogICAgICAgICAgICB2MzE5Lm5ldygiPENvbG9yPUdyZWVuPkxFVkVMIFVQITxDb2xvcj0vPigiIC4uIHYzMTguRGF0YS5MZXZlbC5WYWx1ZSAuLiAiKSIpOkRpc3BsYXkoKTsKICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDEgOwogICAgICAgICAgICBpZiAoY291bnQgPj0gNSkgdGhlbgogICAgICAgICAgICAgICAgZGVsYXkgPSB0aWNrKCk7CiAgICAgICAgICAgICAgICBjb3VudCA9IDA7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCn0pOwp2MTYuVmlzdWFsOkFkZElucHV0KCJJbnB1dF9MZXZlbCIsIHsKICAgIFRpdGxlID0gIkxldmVsIiwKICAgIERlZmF1bHQgPSAiIiwKICAgIFBsYWNlaG9sZGVyID0gIi4uLiIsCiAgICBOdW1lcmljID0gZmFsc2UsCiAgICBGaW5pc2hlZCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MzI3KQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWydMb2NhbFBsYXllciddLkRhdGEuTGV2ZWwuVmFsdWUgPSB0b251bWJlcih2MzI3KTsKICAgIGVuZAp9KTsKdjE2LlZpc3VhbDpBZGRJbnB1dCgiSW5wdXRfRVhQIiwgewogICAgVGl0bGUgPSAiRVhQIiwKICAgIERlZmF1bHQgPSAiIiwKICAgIFBsYWNlaG9sZGVyID0gIi4uLiIsCiAgICBOdW1lcmljID0gZmFsc2UsCiAgICBGaW5pc2hlZCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MzI5KQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWydMb2NhbFBsYXllciddLkRhdGEuRXhwLlZhbHVlID0gdG9udW1iZXIodjMyOSk7CiAgICBlbmQKfSk7CnYxNi5WaXN1YWw6QWRkSW5wdXQoIklucHV0X0JlbGkiLCB7CiAgICBUaXRsZSA9ICJCZWxpIiwKICAgIERlZmF1bHQgPSAiIiwKICAgIFBsYWNlaG9sZGVyID0gIi4uLiIsCiAgICBOdW1lcmljID0gZmFsc2UsCiAgICBGaW5pc2hlZCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MzMxKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWydMb2NhbFBsYXllciddLkRhdGEuQmVsaS5WYWx1ZSA9IHRvbnVtYmVyKHYzMzEpOwogICAgZW5kCn0pOwp2MTYuVmlzdWFsOkFkZElucHV0KCJJbnB1dF9GcmFnbWVudHMiLCB7CiAgICBUaXRsZSA9ICJGcmFnbWVudHMiLAogICAgRGVmYXVsdCA9ICIiLAogICAgUGxhY2Vob2xkZXIgPSAiLi4uIiwKICAgIE51bWVyaWMgPSBmYWxzZSwKICAgIEZpbmlzaGVkID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYzMzMpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbJ0xvY2FsUGxheWVyJ10uRGF0YS5GcmFnbWVudHMuVmFsdWUgPSB0b251bWJlcih2MzMzKTsKICAgIGVuZAp9KTsKbG9jYWwgdjEyMiA9IGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIlJlbW90ZXMiKS5Db21tRl86SW52b2tlU2VydmVyKCJHZXRGcnVpdHMiKTsKVGFibGVfRGV2aWxGcnVpdFNuaXBlciA9IHt9OwpTaG9wRGV2aWxTZWxsID0ge307CmZvciB2MzM1LCB2MzM2IGluIG5leHQsIHYxMjIgZG8KICAgIHRhYmxlLmluc2VydChUYWJsZV9EZXZpbEZydWl0U25pcGVyLCB2MzM2Lk5hbWUpOwogICAgaWYgdjMzNi5PblNhbGUgdGhlbgogICAgICAgIHRhYmxlLmluc2VydChTaG9wRGV2aWxTZWxsLCB2MzM2Lk5hbWUpOwogICAgZW5kCmVuZApfRy5TZWxlY3RGcnVpdCA9ICJEcmFnb24tRHJhZ29uIjsKX0cuUGVybWFuZW50RnJ1aXQgPSAiRHJhZ29uLURyYWdvbiI7Cl9HLkF1dG9CdXlGcnVpdFNuaXBlciA9IGZhbHNlOwpfRy5BdXRvU3dpdGNoUGVybWFuZW50RnJ1aXQgPSBmYWxzZTsKbG9jYWwgdjEyMyA9IHYxNi5GcnVpdDpBZGREcm9wZG93bigiRHJvcGRvd25GcnVpdCIsIHsKICAgIFRpdGxlID0gIlNlbGVjdCBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gVGFibGVfRGV2aWxGcnVpdFNuaXBlciwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjEyMzpTZXRWYWx1ZShfRy5TZWxlY3RGcnVpdCk7CnYxMjM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMzcpCiAgICBfRy5TZWxlY3RGcnVpdCA9IHYzMzc7CmVuZCk7CmxvY2FsIHYxMTEgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVGcnVpdCIsIHsKICAgIFRpdGxlID0gIkJ1eSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTExOk9uQ2hhbmdlZChmdW5jdGlvbih2MzM4KQogICAgaWYgdjMzOCB0aGVuCiAgICAgICAgX0cuQXV0b0J1eUZydWl0U25pcGVyID0gdHJ1ZTsKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkdldEZydWl0cyIpOwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQdXJjaGFzZVJhd0ZydWl0IiwgX0cuU2VsZWN0RnJ1aXQsIGZhbHNlKTsKICAgICAgICBlbmQpOwogICAgICAgIF9HLkF1dG9CdXlGcnVpdFNuaXBlciA9IGZhbHNlOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMjQgPSB2MTYuRnJ1aXQ6QWRkRHJvcGRvd24oIkRyb3Bkb3duUGVybWFuZW50RnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJTZWxlY3QgUGVybWFuZW50IEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSBUYWJsZV9EZXZpbEZydWl0U25pcGVyLAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2MTI0OlNldFZhbHVlKF9HLlBlcm1hbmVudEZydWl0KTsKdjEyNDpPbkNoYW5nZWQoZnVuY3Rpb24odjMzOSkKICAgIF9HLlBlcm1hbmVudEZydWl0ID0gdjMzOTsKZW5kKTsKbG9jYWwgdjEyNSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZVBlcm1hbmVudEZydWl0IiwgewogICAgVGl0bGUgPSAiVXNlIFBlcm1hbmVudCBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTI1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQwKQogICAgaWYgdjM0MCB0aGVuCiAgICAgICAgX0cuQXV0b1N3aXRjaFBlcm1hbmVudEZydWl0ID0gdHJ1ZTsKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHY3NDIgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiU3dpdGNoRnJ1aXQiLAogICAgICAgICAgICAgICAgWzJdID0gX0cuUGVybWFuZW50RnJ1aXQKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjc0MikpOwogICAgICAgIGVuZCk7CiAgICAgICAgX0cuQXV0b1N3aXRjaFBlcm1hbmVudEZydWl0ID0gZmFsc2U7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZVBlcm1hbmVudEZydWl0OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEyNiA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZVN0b3JlIiwgewogICAgVGl0bGUgPSAiU3RvcmUgRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEyNjpPbkNoYW5nZWQoZnVuY3Rpb24odjM0MSkKICAgIF9HLkF1dG9TdG9yZUZydWl0ID0gdjM0MTsKZW5kKTsKdjE3LlRvZ2dsZVN0b3JlOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvU3RvcmVGcnVpdCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIF9HLkF1dG9TdG9yZUZydWl0IHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCb21iIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJvbWIgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkJvbWItQm9tYiIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCb21iIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNwaWtlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaWtlIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTcGlrZS1TcGlrZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGlrZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJDaG9wIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkNob3AgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkNob3AtQ2hvcCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCbGFkZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcHJpbmcgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3ByaW5nIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTcHJpbmctU3ByaW5nIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwcmluZyBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSb2NrZXQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiS2lsbyBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUm9ja2V0LVJvY2tldCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJLaWxvIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNtb2tlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNtb2tlIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTbW9rZS1TbW9rZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTbW9rZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGluIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaW4gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNwaW4tU3BpbiIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGluIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsYW1lIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsYW1lIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJGbGFtZS1GbGFtZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGbGFtZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGYWxjb24gRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmFsY29uIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJGYWxjb24iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiYWxjb24gRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSWNlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkljZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiSWNlLUljZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJJY2UgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU2FuZCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTYW5kIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTYW5kLVNhbmQiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2FuZCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEYXJrIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRhcmsgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkRhcmstRGFyayIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEYXJrIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkdob3N0IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJldml2ZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiR2hvc3QtR2hvc3QiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUmV2aXZlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRpYW1vbmQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRGlhbW9uZCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRGlhbW9uZC1EaWFtb25kIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRpYW1vbmQgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGlnaHQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTGlnaHQgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkxpZ2h0LUxpZ2h0IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxpZ2h0IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkxvdmUgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTG92ZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiTG92ZS1Mb3ZlIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxvdmUgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUnViYmVyIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJ1YmJlciBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUnViYmVyLVJ1YmJlciIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSdWJiZXIgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQmFycmllciBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCYXJyaWVyIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJCYXJyaWVyLUJhcnJpZXIiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmFycmllciBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJNYWdtYSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJNYWdtYSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiTWFnbWEtTWFnbWEiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWFnbWEgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUG9ydGFsIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBvcnRhbCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRG9vci1Eb29yIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBvcnRhbCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJRdWFrZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJRdWFrZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUXVha2UtUXVha2UiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUXVha2UgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQnVkZGhhIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJ1ZGRoYSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1ZGRoYSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCdWRkaGEgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3BpZGVyIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaWRlciBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU3BpZGVyLVNwaWRlciIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGlkZXIgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQmlyZDogUGhvZW5peCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQaG9lbml4IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJQaG9lbml4IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBob2VuaXggRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUnVtYmxlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJ1bWJsZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUnVtYmxlLVJ1bWJsZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSdW1ibGUgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUGFpbiBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQYWluIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJQYWluLVBhaW4iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUGFpbiBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJHcmF2aXR5IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkdyYXZpdHkgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkdyYXZpdHktR3Jhdml0eSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJHcmF2aXR5IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRvdWdoIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRvdWdoIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJEb3VnaC1Eb3VnaCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTaGFkb3cgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2hhZG93IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTaGFkb3ctU2hhZG93IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNoYWRvdyBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJWZW5vbSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJWZW5vbSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiVmVub20tVmVub20iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVmVub20gRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQ29udHJvbCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJDb250cm9sIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJDb250cm9sLUNvbnRyb2wiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ29udHJvbCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGlyaXQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3Bpcml0IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTb3VsLVNvdWwiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3Bpcml0IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkRyYWdvbi1EcmFnb24iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZW9wYXJkIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxlb3BhcmQgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJMZW9wYXJkLUxlb3BhcmQiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTGVvcGFyZCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgICAgICB3YWl0KCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjEyNyA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZVJhbmRvbUZydWl0IiwgewogICAgVGl0bGUgPSAiUmFuZG9tIEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDIpCiAgICBfRy5SYW5kb21fQXV0byA9IHYzNDI7CmVuZCk7CnYxNy5Ub2dnbGVSYW5kb21GcnVpdDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuUmFuZG9tX0F1dG8gdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ291c2luIiwgIkJ1eSIpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxMjggPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0VFAiLCB7CiAgICBUaXRsZSA9ICJHZXQgRnJ1aXQgKFRQKSIsCiAgICBEZXNjcmlwdGlvbiA9ICJSaXNrIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEyODpPbkNoYW5nZWQoZnVuY3Rpb24odjM0MykKICAgIF9HLkNvbGxlY3RGcnVpdFRQID0gdjM0MzsKZW5kKTsKdjE3LlRvZ2dsZUNvbGxlY3RUUDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkNvbGxlY3RGcnVpdFRQIHRoZW4KICAgICAgICAgICAgZm9yIHY4MDEsIHY4MDIgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY4MDIuTmFtZSwgIkZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2ODAyLkhhbmRsZS5DRnJhbWU7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjEyOSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3QiLCB7CiAgICBUaXRsZSA9ICJHZXQgRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEyOTpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NCkKICAgIF9HLlR3ZWVuZnJ1aXQgPSB2MzQ0OwplbmQpOwp2MTcuVG9nZ2xlQ29sbGVjdDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLlR3ZWVuZnJ1aXQgdGhlbgogICAgICAgICAgICBmb3IgdjgwMywgdjgwNCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjgwNC5OYW1lLCAiRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjgwNC5IYW5kbGUuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTYgPSB2MTYuRnJ1aXQ6QWRkU2VjdGlvbigiRXNwIik7CmxvY2FsIHYxMzAgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BQbGF5ZXIiLCB7CiAgICBUaXRsZSA9ICJQbGF5ZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzMDpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NSkKICAgIEVTUFBsYXllciA9IHYzNDU7CiAgICBVcGRhdGVQbGF5ZXJDaGFtcygpOwplbmQpOwp2MTcuVG9nZ2xlRXNwUGxheWVyOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEzMSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcEZydWl0IiwgewogICAgVGl0bGUgPSAiRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzMTpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NikKICAgIERldmlsRnJ1aXRFU1AgPSB2MzQ2OwogICAgd2hpbGUgRGV2aWxGcnVpdEVTUCBkbwogICAgICAgIHdhaXQoKTsKICAgICAgICBVcGRhdGVEZXZpbENoYW1zKCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUVzcEZydWl0OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEzMiA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcElzbGFuZCIsIHsKICAgIFRpdGxlID0gIklzbGFuZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTMyOk9uQ2hhbmdlZChmdW5jdGlvbih2MzQ3KQogICAgSXNsYW5kRVNQID0gdjM0NzsKICAgIHdoaWxlIElzbGFuZEVTUCBkbwogICAgICAgIHdhaXQoKTsKICAgICAgICBVcGRhdGVJc2xhbmRFU1AoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlRXNwSXNsYW5kOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEzMyA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcEZsb3dlciIsIHsKICAgIFRpdGxlID0gIkZsb3dlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTMzOk9uQ2hhbmdlZChmdW5jdGlvbih2MzQ4KQogICAgRmxvd2VyRVNQID0gdjM0ODsKICAgIFVwZGF0ZUZsb3dlckNoYW1zKCk7CmVuZCk7CnYxNy5Ub2dnbGVFc3BGbG93ZXI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBGbG93ZXJFU1AgdGhlbgogICAgICAgICAgICBVcGRhdGVGbG93ZXJDaGFtcygpOwogICAgICAgIGVuZAogICAgICAgIGlmIERldmlsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICBVcGRhdGVEZXZpbENoYW1zKCk7CiAgICAgICAgZW5kCiAgICAgICAgaWYgQ2hlc3RFU1AgdGhlbgogICAgICAgICAgICBVcGRhdGVDaGVzdENoYW1zKCk7CiAgICAgICAgZW5kCiAgICAgICAgaWYgRVNQUGxheWVyIHRoZW4KICAgICAgICAgICAgVXBkYXRlUGxheWVyQ2hhbXMoKTsKICAgICAgICBlbmQKICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICBVcGRhdGVSZWFsRnJ1aXRDaGFtcygpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMzQgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BSZWFsRnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJSZWFsIEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDkpCiAgICBSZWFsRnJ1aXRFc3AgPSB2MzQ5OwogICAgd2hpbGUgUmVhbEZydWl0RXNwIGRvCiAgICAgICAgd2FpdCgpOwogICAgICAgIFVwZGF0ZVJlYWxGcnVpdEVzcCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVFc3BSZWFsRnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpmdW5jdGlvbiBVcGRhdGVSZWFsRnJ1aXRFc3AoKQogICAgZm9yIHY1NDgsIHY1NDkgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjU0OTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVzcCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjU0OS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDY2ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NTQ5LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjEwNjYuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHYxMDY2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTA2Ni5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHYxMDY2LkFkb3JuZWUgPSB2NTQ5LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2MTA2Ni5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwNzMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMDY2KTsKICAgICAgICAgICAgICAgICAgICB2MTA3My5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHYxMDczLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHYxMDczLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2MTA3My5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2MTA3My5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHYxMDczLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDczLlRleHQgPSB2NTQ5Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NDkuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU0OS5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjU0OS5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU0OS5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjU0OS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjU0OS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY1NTAsIHY1NTEgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuUGluZWFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY1NTE6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFc3AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY1NTEuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTA4NSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjU1MS5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHYxMDg1Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2MTA4NS5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwODUuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2MTA4NS5BZG9ybmVlID0gdjU1MS5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjEwODUuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDkyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTA4NSk7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAxNzQsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHQgPSB2NTUxLk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NTEuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU1MS5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjU1MS5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1MS5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjU1MS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjU1MS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY1NTIsIHY1NTMgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQmFuYW5hU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY1NTM6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFc3AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY1NTMuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEwNCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjU1My5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHYxMTA0Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2MTEwNC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjExMDQuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2MTEwNC5BZG9ybmVlID0gdjU1My5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjExMDQuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTExID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTEwNCk7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2MTExMS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTUsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHQgPSB2NTUzLk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NTMuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU1My5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjU1My5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1My5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjU1My5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjU1My5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKbG9jYWwgdjEzNSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUlzbGFuZE1pcmFnZUVzcCIsIHsKICAgIFRpdGxlID0gIk1pcmFnZSBJc2xhbmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzNTpPbkNoYW5nZWQoZnVuY3Rpb24odjM1MCkKICAgIElzbGFuZE1pcmFnZUVzcCA9IHYzNTA7CiAgICB3aGlsZSBJc2xhbmRNaXJhZ2VFc3AgZG8KICAgICAgICB3YWl0KCk7CiAgICAgICAgVXBkYXRlSXNsYW5kTWlyYWdlRXNwKCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUlzbGFuZE1pcmFnZUVzcDpTZXRWYWx1ZShmYWxzZSk7CmZ1bmN0aW9uIGlzbmlsKHYzNTEpCiAgICByZXR1cm4gdjM1MSA9PSBuaWwgOwplbmQKbG9jYWwgZnVuY3Rpb24gdjIwKHYzNTIpCiAgICByZXR1cm4gbWF0aC5mbG9vcih0b251bWJlcih2MzUyKSArIDAuNSk7CmVuZApOdW1iZXIgPSBtYXRoLnJhbmRvbSgxLCAxMDAwMDAwKTsKZnVuY3Rpb24gVXBkYXRlSXNsYW5kTWlyYWdlRXNwKCkKICAgIGZvciB2NTU0LCB2NTU1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgTWlyYWdlSXNsYW5kRVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NTU1Lk5hbWUgPT0gIk1pcmFnZSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY1NTU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzQ3ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NTU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDcuTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDcuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM0Ny5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM0Ny5BZG9ybmVlID0gdjU1NTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDcuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM1MyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEzNDcpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5Gb250ID0gRW51bS5Gb250LkNvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLkZvbnRTaXplID0gRW51bS5Gb250U2l6ZS5TaXplMTQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuVGV4dFlBbGlnbm1lbnQgPSBFbnVtLlRleHRZQWxpZ25tZW50LlRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjU1NVsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjU1NS5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NTUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NTU1OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjU1NTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKbG9jYWwgdjEzNiA9IHsKICAgICJGbGFtZSIsCiAgICAiSWNlIiwKICAgICJRdWFrZSIsCiAgICAiTGlnaHQiLAogICAgIkRhcmsiLAogICAgIlNwaWRlciIsCiAgICAiUnVtYmxlIiwKICAgICJNYWdtYSIsCiAgICAiQnVkZGhhIiwKICAgICJTYW5kIiwKICAgICJQaG9lbml4IiwKICAgICJEb3VnaCIKfTsKbG9jYWwgdjEzNyA9IHYxNi5SYWlkOkFkZERyb3Bkb3duKCJEcm9wZG93blJhaWQiLCB7CiAgICBUaXRsZSA9ICJTZWxlY3QgQ2hpcCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gdjEzNiwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjEzNzpTZXRWYWx1ZShTZWxlY3RDaGlwKTsKdjEzNzpPbkNoYW5nZWQoZnVuY3Rpb24odjM1MykKICAgIFNlbGVjdENoaXAgPSB2MzUzOwplbmQpOwpsb2NhbCB2MTM4ID0gdjE2LlJhaWQ6QWRkVG9nZ2xlKCJUb2dnbGVCdXkiLCB7CiAgICBUaXRsZSA9ICJCdXkgQ2hpcCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTM4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzU0KQogICAgX0cuQXV0b19CdXlfQ2hpcHNfRHVuZ2VvbiA9IHYzNTQ7CmVuZCk7CnYxNy5Ub2dnbGVCdXk6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX0J1eV9DaGlwc19EdW5nZW9uIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgdjgwNSA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiUmFpZHNOcGMiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTZWxlY3QiLAogICAgICAgICAgICAgICAgICAgIFszXSA9IFNlbGVjdENoaXAKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA1KSk7CiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjEzOSA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlU3RhcnQiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFN0YXJ0IFJhaWQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzOTpPbkNoYW5nZWQoZnVuY3Rpb24odjM1NSkKICAgIF9HLkF1dG9fU3RhcnRSYWlkID0gdjM1NTsKZW5kKTsKdjE3LlRvZ2dsZVN0YXJ0OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX1N0YXJ0UmFpZCB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbJ0xvY2FsUGxheWVyJ10uUGxheWVyR3VpLk1haW4uVGltZXIuVmlzaWJsZSA9PSBmYWxzZSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMSIpIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwZWNpYWwgTWljcm9jaGlwIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGVjaWFsIE1pY3JvY2hpcCIpKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBTZWEyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNjQzOC43MzUzNSwgMjUwLjY0NTM1NSwgLSA0NTAxLjUwNjg0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTU0NyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiU2V0U3Bhd25Qb2ludCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MTU0NykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuQ2lyY2xlSXNsYW5kLlJhaWRTdW1tb24yLkJ1dHRvbi5NYWluLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgU2VhMyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDUwNzUuNTA5Mjc3MzQzNzUsIDMxNC41MTU1MDI5Mjk2ODc1LCAtIDMxNTAuMDIyNDYwOTM3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA1MDE3LjQwODY5LCAzMTQuODQ0MDU1LCAtIDI4MjMuMDEyNywgLSAwLjkyNTc0MzgxOCwgNC40ODIxNzVlLTgsIC0gMC4zNzgxNTEyMzgsIDQuNTU1MDMxNWUtOSwgMSwgMS4wNzM3NzU2ZS03LCAwLjM3ODE1MTIzOCwgOS43NjgxNjJlLTgsIC0gMC45MjU3NDM4MTgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNjU2ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJTZXRTcGF3blBvaW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYxNjU2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiQm9hdCBDYXN0bGUiXS5SYWlkU3VtbW9uMi5CdXR0b24uTWFpbi5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTQwID0gdjE2LlJhaWQ6QWRkVG9nZ2xlKCJUb2dnbGVOZXh0SXNsYW5kIiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIFJhaWQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0MDpPbkNoYW5nZWQoZnVuY3Rpb24odjM1NikKICAgIEF1dG9OZXh0SXNsYW5kID0gdjM1NjsKICAgIGlmIG5vdCB2MzU2IHRoZW4KICAgICAgICBfRy5BdXRvTmVhciA9IGZhbHNlOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVOZXh0SXNsYW5kOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgbG9jYWwgdjM1NyA9IHt9OwogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBBdXRvTmV4dElzbGFuZCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDYgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOwogICAgICAgICAgICAgICAgaWYgKHY4MDYgYW5kIHY4MDY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MDAgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkwMSA9IHY4MDYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBpZiAoKCh2OTAxIC0gVmVjdG9yMy5uZXcoLSA2NDM4LjczNTM1LCAyNTAuNjQ1MzU1LCAtIDQ1MDEuNTA2ODQpKS5NYWduaXR1ZGUgPCAxKSBvciAoKHY5MDEgLSBWZWN0b3IzLm5ldygtIDUwMTcuNDA4NjksIDMxNC44NDQwNTUsIC0gMjgyMy4wMTI3KSkuTWFnbml0dWRlIDwgMSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjM1NyA9IHt9OwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBfRy5BdXRvTmVhciA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAyIikgYW5kIG5vdCB2MzU3WyJJc2xhbmQgMiJdKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAyIikuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjM1N1siSXNsYW5kIDIiXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDMiKSBhbmQgbm90IHYzNTdbIklzbGFuZCAzIl0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDMiKS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MzU3WyJJc2xhbmQgMyJdID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNCIpIGFuZCBub3QgdjM1N1siSXNsYW5kIDQiXSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNCIpLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYzNTdbIklzbGFuZCA0Il0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCA1IikgYW5kIG5vdCB2MzU3WyJJc2xhbmQgNSJdKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCA1IikuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjM1N1siSXNsYW5kIDUiXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE0MSA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlQXdha2UiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEF3YWtlbmluZyBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQxOk9uQ2hhbmdlZChmdW5jdGlvbih2MzU4KQogICAgQXV0b0F3YWtlbkFiaWxpdGllcyA9IHYzNTg7CmVuZCk7CnYxNy5Ub2dnbGVBd2FrZTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b0F3YWtlbkFiaWxpdGllcyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkF3YWtlbmVyIiwgIkF3YWtlbiIpOwogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNDIgPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZUdldEZydWl0IiwgewogICAgVGl0bGUgPSAiR2l2ZSBVcCBOb3JtYWwgRnJ1aXTigJQ+UmFpZCBDaGlwIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTkpCiAgICBfRy5BdXRvZnJ1aXQgPSB2MzU5OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9mcnVpdCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJSb2NrZXQtUm9ja2V0IgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNwaW4tU3BpbiIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJDaG9wLUNob3AiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU3ByaW5nLVNwcmluZyIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJCb21iLUJvbWIiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU21va2UtU21va2UiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU3Bpa2UtU3Bpa2UiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiRmxhbWUtRmxhbWUiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiRmFsY29uLUZhbGNvbiIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJJY2UtSWNlIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNhbmQtU2FuZCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJEYXJrLURhcmsiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiR2hvc3QtR2hvc3QiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiRGlhbW9uZC1EaWFtb25kIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkxpZ2h0LUxpZ2h0IgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlJ1YmJlci1SdWJiZXIiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQmFycmllci1CYXJyaWVyIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwppZiBTZWEyIHRoZW4KICAgIHYxNi5SYWlkOkFkZEJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiRmx5IFRvIFRoZSBSYWlkIFJvb20iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNjQzOC43MzUzNSwgMjUwLjY0NTM1NSwgLSA0NTAxLjUwNjg0KSk7CiAgICAgICAgZW5kCiAgICB9KTsKZWxzZWlmIFNlYTMgdGhlbgogICAgdjE2LlJhaWQ6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJGbHkgVG8gVGhlIFJhaWQgUm9vbSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA1MDc1LjUwOTI3NzM0Mzc1LCAzMTQuNTE1NTAyOTI5Njg3NSwgLSAzMTUwLjAyMjQ2MDkzNzUpKTsKICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA1MDE3LjQwODY5LCAzMTQuODQ0MDU1LCAtIDI4MjMuMDEyNywgLSAwLjkyNTc0MzgxOCwgNC40ODIxNzVlLTgsIC0gMC4zNzgxNTEyMzgsIDQuNTU1MDMxNWUtOSwgMSwgMS4wNzM3NzU2ZS03LCAwLjM3ODE1MTIzOCwgOS43NjgxNjJlLTgsIC0gMC45MjU3NDM4MTgpKTsKICAgICAgICBlbmQKICAgIH0pOwplbmQKbG9jYWwgdjU2ID0gdjE2LlJhaWQ6QWRkU2VjdGlvbigiTGF3Iik7CmxvY2FsIHYxNDMgPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZUxhdyIsIHsKICAgIFRpdGxlID0gIkF1dG8gUmFpZCBMb3cgKEZ1bGx5KSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQzOk9uQ2hhbmdlZChmdW5jdGlvbih2MzYwKQogICAgQXV0b19MYXcgPSB2MzYwOwplbmQpOwp2MTcuVG9nZ2xlTGF3OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvX0xhdyB0aGVuCiAgICAgICAgICAgICAgICBpZiAobm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTWljcm9jaGlwIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWljcm9jaGlwIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJNaWNyb2NoaXAiLCAiMSIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiTWljcm9jaGlwIiwgIjIiKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgQXV0b19MYXcgdGhlbgogICAgICAgICAgICAgICAgaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWljcm9jaGlwIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuQ2lyY2xlSXNsYW5kLlJhaWRTdW1tb24uQnV0dG9uLk1haW4uQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDY4LCB2MTQ2OSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ2OS5OYW1lID09ICJPcmRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2OS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjkuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IHYxNDY5LlBhcmVudCBvciAodjE0NjkuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIChBdXRvX0xhdyA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDYyMTcuMjAyMTQ4NDM3NSwgMjguMDQ3NjQ1NTY4ODQ4LCAtIDUwNTMuMTM1NzQyMTg3NSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKdjE2LlJhY2U6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRlbXBsZSBPZiBUaW1lIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyODI4Ni4zNTU0Njg3NSwgMTQ4OTUuMzAxNzU3ODEyNSwgMTAyLjYyNDY5NDgyNDIxODc1KSk7CiAgICBlbmQKfSk7CnYxNi5SYWNlOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJBdXRvIFB1bGwgTGV2ZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDI4Mjg2LjM1NTQ2ODc1LCAxNDg5NS4zMDE3NTc4MTI1LCAxMDIuNjI0Njk0ODI0MjE4NzUpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODU3NS4xODE2NDA2MjUsIDE0OTM2LjYyNzkyOTY4NzUsIDcyLjMxNjM2ODEwMzAyNzM0KSk7CiAgICBlbmQKfSk7CnYxNi5SYWNlOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUUCBCdXkgR2VhciBOUEMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDI4Mjg2LjM1NTQ2ODc1LCAxNDg5NS4zMDE3NTc4MTI1LCAxMDIuNjI0Njk0ODI0MjE4NzUpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODk4MS41NTI3MzQzNzUsIDE0ODg4LjQyNjc1NzgxMjUsIC0gMTIwLjI0NTg0OTYwOTM3NSkpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuUmFjZTpBZGRTZWN0aW9uKCJSYWNlIik7CnYxNi5SYWNlOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJSYWNlIERvb3IiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDI4Mjg2LjM1NTQ2ODc1LCAxNDg5NS4zMDE3NTc4MTI1LCAxMDIuNjI0Njk0ODI0MjE4NzUpKTsKICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJIdW1hbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjkyMjEuODIyMjY1NjI1LCAxNDg5MC45NzU1ODU5Mzc1LCAtIDIwNS45OTExNDk5MDIzNDM3NSkpOwogICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJTa3lwaWVhIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODk2MC4xNTgyMDMxMjUsIDE0OTE5LjYyNDAyMzQzNzUsIDIzNS4wMzk0ODk3NDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJGaXNobWFuIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODIzMS4xNzU3ODEyNSwgMTQ4OTAuOTc1NTg1OTM3NSwgLSAyMTEuNjQxNzM4ODkxNjAxNTYpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiQ3lib3JnIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODUwMi42ODE2NDA2MjUsIDE0ODk1Ljk3NTU4NTkzNzUsIC0gNDIzLjcyNzkzNTc5MTAxNTYpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiR2hvdWwiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI4Njc0LjI0NDE0MDYyNSwgMTQ4OTAuNjc2NzU3ODEyNSwgNDQ1LjQzMTA2MDc5MTAxNTYpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiTWluayIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjkwMTIuMzQxNzk2ODc1LCAxNDg5MC45NzU1ODU5Mzc1LCAtIDM4MC4xNDkyNjE0NzQ2MDk0KSk7CiAgICAgICAgZW5kCiAgICBlbmQKfSk7CmxvY2FsIHYxNDQgPSB2MTYuUmFjZTpBZGRUb2dnbGUoIlRvZ2dsZUh1bWFuYW5kZ2hvdWwiLCB7CiAgICBUaXRsZSA9ICJPdmVyY29tZSBDaGFsbGVuZ2VzIFtIdW1hbi9HaG91bF0iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0NDpPbkNoYW5nZWQoZnVuY3Rpb24odjM2MSkKICAgIEtpbGxBdXJhID0gdjM2MTsKZW5kKTsKdjE3LlRvZ2dsZUh1bWFuYW5kZ2hvdWw6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTQ1ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVBdXRvdHJpYWwiLCB7CiAgICBUaXRsZSA9ICJPdmVyY29tZSBDaGFsbGVuZ2VzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjIpCiAgICBfRy5BdXRvUXVlc3RSYWNlID0gdjM2MjsKZW5kKTsKdjE3LlRvZ2dsZUF1dG90cmlhbDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b1F1ZXN0UmFjZSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJIdW1hbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjExMjMsIHYxMTI0IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMTI0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTEyNDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjExMjQuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTEyNC5IdW1hbm9pZC5IZWFsdGggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTEyNC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9RdWVzdFJhY2Ugb3Igbm90IHYxMTI0LlBhcmVudCBvciAodjExMjQuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJTa3lwaWVhIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTQ3MCwgdjE0NzEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuU2t5VHJpYWwuTW9kZWw6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDcxLk5hbWUgPT0gInNub3dpc2xhbmRfQ3lsaW5kZXIuMDgxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQWih2MTQ3MS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiRmlzaG1hbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE1ODIsIHYxNTgzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuU2VhQmVhc3RzLlNlYUJlYXN0MTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE1ODMuTmFtZSA9PSAiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNTgzLkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NDYsIHYxNzQ3IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNzQ3OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzQ3LlRvb2xUaXAgPT0gIk1lbGVlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE3NDcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc0OCwgdjE3NDkgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE3NDk6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NDkuVG9vbFRpcCA9PSAiQmxveCBGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNzQ5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NTAsIHYxNzUxIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNzUxOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzUxLlRvb2xUaXAgPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE3NTEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc1MiwgdjE3NTMgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE3NTM6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NTMuVG9vbFRpcCA9PSAiR3VuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE3NTMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiQ3lib3JnIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMjg2NTQsIDE0ODk4Ljc4MzIsIC0gMzAsIDEsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDEpKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJHaG91bCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NjQsIHYxNzY1IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzY1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTc2NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE3NjUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2NS5IdW1hbm9pZC5IZWFsdGggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9RdWVzdFJhY2Ugb3Igbm90IHYxNzY1LlBhcmVudCBvciAodjE3NjUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJNaW5rIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTc5MCwgdjE3OTEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3OTEuTmFtZSA9PSAiU3RhcnRQb2ludCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNzkxLkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMTAsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTQ2ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVLaWxsVHJpYWwiLCB7CiAgICBUaXRsZSA9ICJLaWxsIFRyaWFsIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjMpCiAgICBfRy5BdXRvS2lsbFRyaWFsID0gdjM2MzsKZW5kKTsKdjE3LlRvZ2dsZUtpbGxUcmlhbDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b0tpbGxUcmlhbCB0aGVuCiAgICAgICAgICAgICAgICBmb3Igdjg3MCwgdjg3MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2ODcxLk5hbWUgYW5kICh2ODcxLk5hbWUgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUpIGFuZCAoKHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIDUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0tpbGxUcmlhbCBvciBub3Qgdjg3MS5QYXJlbnQgb3IgKHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY1NiA9IHYxNi5SYWNlOkFkZFNlY3Rpb24oIiIpOwpsb2NhbCB2MTQ3ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVGYXJtUmFjZSIsIHsKICAgIFRpdGxlID0gIkZhcm0gUmFjZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwpsb2NhbCB2MTQ4ID0gZmFsc2U7CnYxNDc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjQpCiAgICB2MTQ4ID0gdjM2NDsKZW5kKTsKdjE3LlRvZ2dsZUZhcm1SYWNlOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgdjE0OCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJhY2VUcmFuc2Zvcm1lZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5SYWNlVHJhbnNmb3JtZWQuVmFsdWUgPT0gdHJ1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBfRy5BdXRvQm9uZU5vUXVlc3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk2OTguNDczNjMyODEyNSwgNDQ1LjA5NDQyMTM4NjcxODc1LCA2NTQ1Ljg1MjUzOTA2MjUpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmFjZVRyYW5zZm9ybWVkLlZhbHVlID09IGZhbHNlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9HLkF1dG9Cb25lTm9RdWVzdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiWSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJZIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBfRy5BdXRvQm9uZU5vUXVlc3QgPSBmYWxzZTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTQ5ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVVcGdyYWRlIiwgewogICAgVGl0bGUgPSAiQnV5IEdlYXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0OTpPbkNoYW5nZWQoZnVuY3Rpb24odjM2NSkKICAgIF9HLkF1dG9VcGdyYWRlID0gdjM2NTsKICAgIGlmIF9HLkF1dG9VcGdyYWRlIHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJVcGdyYWRlUmFjZSIsICJCdXkiKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlVXBncmFkZTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY1NiA9IHYxNi5TaG9wOkFkZFNlY3Rpb24oIkhha2kiKTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkdlcHBvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlIYWtpIiwgIkdlcHBvIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXNvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlIYWtpIiwgIkJ1c28iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNvcnUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUhha2kiLCAiU29ydSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiS2VuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJLZW5UYWxrIiwgIkJ1eSIpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuU2hvcDpBZGRTZWN0aW9uKCJLaeG6v20iKTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkN1dGxhc3MiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiQ3V0bGFzcyIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiS2F0YW5hIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkthdGFuYSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiSXJvbiBNYWNlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIklyb24gTWFjZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRHVlbCBLYXRhbmEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiRHVlbCBLYXRhbmEiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRyaXBsZSBLYXRhbmEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiVHJpcGxlIEthdGFuYSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUGlwZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJQaXBlIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJEdWFsLUhlYWRlZCBCbGFkZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJEdWFsLUhlYWRlZCBCbGFkZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQmlzZW50byIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJCaXNlbnRvIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTb3VsIENhbmUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiU291bCBDYW5lIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJQb2xlIFYyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVGh1bmRlckdvZFRhbGsiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2LlNob3A6QWRkU2VjdGlvbigiVsO1Iik7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCbGFjayBMZWciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUJsYWNrTGVnIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJFbGVjdHJvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlFbGVjdHJvIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJGaXNobWFuIEthcmF0ZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RmlzaG1hbkthcmF0ZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRHJhZ29uIENsYXciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiRHJhZ29uQ2xhdyIsICIxIik7CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJEcmFnb25DbGF3IiwgIjIiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlN1cGVyaHVtYW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eVN1cGVyaHVtYW4iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkRlYXRoIFN0ZXAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eURlYXRoU3RlcCIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU2hhcmttYW4gS2FyYXRlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTaGFya21hbkthcmF0ZSIsIHRydWUpOwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eVNoYXJrbWFuS2FyYXRlIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJFbGVjdHJpYyBDbGF3IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlFbGVjdHJpY0NsYXciKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkRyYWdvbiBUYWxvbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RHJhZ29uVGFsb24iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkdvZGh1bWFuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlHb2RodW1hbiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU2FuZ3VpbmUgQXJ0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTYW5ndWluZUFydCIpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuU2hvcDpBZGRTZWN0aW9uKCJPdGhlciIpOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUmVzZXQgU3RhdHMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiUmVmdW5kIiwgIjEiKTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIlJlZnVuZCIsICIyIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJSYW5kb20gUmFjZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJSZXJvbGwiLCAiMSIpOwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiUmVyb2xsIiwgIjIiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkNoYW5nZSBUbyBHaG91bCBSYWNlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2MzY2ID0gewogICAgICAgICAgICBbMV0gPSAiRWN0b3BsYXNtIiwKICAgICAgICAgICAgWzJdID0gIkNoYW5nZSIsCiAgICAgICAgICAgIFszXSA9IDQKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzNjYpKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkNoYW5nZSBUbyBDeWJvcmcgUmFjZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjM2NyA9IHsKICAgICAgICAgICAgWzFdID0gIkN5Ym9yZ1RyYWluZXIiLAogICAgICAgICAgICBbMl0gPSAiQnV5IgogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjM2NykpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ2hhbmdlIHRvIERyYWNvIiwKICAgIERlc2NyaXB0aW9uID0gIlNlYSAzIE9ubHkiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNTY2MS41MzIyMjY1NjI1LCAxMDEzLjA5MDc1OTI3NzM0MzgsIC0gMzM0Ljk2NDk5NjMzNzg5MDYpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg1ODE0LjQyNzI0NjA5Mzc1LCAxMjA4LjMyNjc4MjIyNjU2MjUsIDg4NC41Nzg1NTIyNDYwOTM4KSk7CiAgICAgICAgbG9jYWwgdjM2OCA9IFZlY3RvcjMubmV3KDU4MTQuNDI3MjQ2MDkzNzUsIDEyMDguMzI2NzgyMjI2NTYyNSwgODg0LjU3ODU1MjI0NjA5MzgpOwogICAgICAgIGxvY2FsIHYzNjkgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjM3MCA9IHYzNjkuQ2hhcmFjdGVyIG9yIHYzNjkuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpIDsKICAgICAgICByZXBlYXQKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgIHVudGlsICh2MzcwLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2MzY4KS5NYWduaXR1ZGUgPCAxCiAgICAgICAgbG9jYWwgdjM3MSA9IHsKICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgTlBDID0gIkRyYWdvbiBXaXphcmQiLAogICAgICAgICAgICAgICAgQ29tbWFuZCA9ICJEcmFnb25SYWNlIgogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0ludGVyYWN0RHJhZ29uUXVlc3QiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzNzEpKTsKICAgIGVuZAp9KTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlJlam9pbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydChnYW1lLlBsYWNlSWQsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyKTsKICAgIGVuZAp9KTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkhvcCBTZXJ2ZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIEhvcCgpOwogICAgZW5kCn0pOwpmdW5jdGlvbiBIb3AoKQogICAgbG9jYWwgdjM3MiA9IGdhbWUuUGxhY2VJZDsKICAgIGxvY2FsIHYzNzMgPSB7fTsKICAgIGxvY2FsIHYzNzQgPSAiIjsKICAgIGxvY2FsIHYzNzUgPSBvcy5kYXRlKCIhKnQiKS5ob3VyOwogICAgbG9jYWwgdjM3NiA9IGZhbHNlOwogICAgZnVuY3Rpb24gVFBSZXR1cm5lcigpCiAgICAgICAgbG9jYWwgdjU1NjsKICAgICAgICBpZiAodjM3NCA9PSAiIikgdGhlbgogICAgICAgICAgICB2NTU2ID0gZ2FtZS5IdHRwU2VydmljZTpKU09ORGVjb2RlKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9nYW1lcy5yb2Jsb3guY29tL3YxL2dhbWVzLyIgLi4gdjM3MiAuLiAiL3NlcnZlcnMvUHVibGljP3NvcnRPcmRlcj1Bc2MmbGltaXQ9MTAwIikpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgdjU1NiA9IGdhbWUuSHR0cFNlcnZpY2U6SlNPTkRlY29kZShnYW1lOkh0dHBHZXQoImh0dHBzOi8vZ2FtZXMucm9ibG94LmNvbS92MS9nYW1lcy8iIC4uIHYzNzIgLi4gIi9zZXJ2ZXJzL1B1YmxpYz9zb3J0T3JkZXI9QXNjJmxpbWl0PTEwMCZjdXJzb3I9IiAuLiB2Mzc0KSk7CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU1NyA9ICIiOwogICAgICAgIGlmICh2NTU2Lm5leHRQYWdlQ3Vyc29yIGFuZCAodjU1Ni5uZXh0UGFnZUN1cnNvciB+PSAibnVsbCIpIGFuZCAodjU1Ni5uZXh0UGFnZUN1cnNvciB+PSBuaWwpKSB0aGVuCiAgICAgICAgICAgIHYzNzQgPSB2NTU2Lm5leHRQYWdlQ3Vyc29yOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1NTggPSAwOwogICAgICAgIGZvciB2NjUxLCB2NjUyIGluIHBhaXJzKHY1NTYuZGF0YSkgZG8KICAgICAgICAgICAgbG9jYWwgdjY1MyA9IHRydWU7CiAgICAgICAgICAgIHY1NTcgPSB0b3N0cmluZyh2NjUyLmlkKTsKICAgICAgICAgICAgaWYgKHRvbnVtYmVyKHY2NTIubWF4UGxheWVycykgPiB0b251bWJlcih2NjUyLnBsYXlpbmcpKSB0aGVuCiAgICAgICAgICAgICAgICBmb3Igdjg3Miwgdjg3MyBpbiBwYWlycyh2MzczKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2NTU4IH49IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY1NTcgPT0gdG9zdHJpbmcodjg3MykpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY2NTMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh0b251bWJlcih2Mzc1KSB+PSB0b251bWJlcih2ODczKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQ3MiA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYzNzMgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh2MzczLCB2Mzc1KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB2NTU4ID0gdjU1OCArIDEgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBpZiAodjY1MyA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYzNzMsIHY1NTcpOwogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydFRvUGxhY2VJbnN0YW5jZSh2MzcyLCB2NTU3LCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIpOwogICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmdW5jdGlvbiB2MTE4KCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgVFBSZXR1cm5lcigpOwogICAgICAgICAgICAgICAgaWYgKHYzNzQgfj0gIiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUUFJldHVybmVyKCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAogICAgdjExOCgpOwplbmQKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiVGVhbSIpOwp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUGlyYXRlcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU2V0VGVhbSIsICJQaXJhdGVzIik7CiAgICBlbmQKfSk7CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJNYXJpbmVzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTZXRUZWFtIiwgIk1hcmluZXMiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiQ29kZSIpOwpsb2NhbCB2MTUwID0gewogICAgIktJVFRfUkVTRVQiLAogICAgIlN1YjJVbmNsZUtpemFydSIsCiAgICAiU1VCMkdBTUVSUk9CT1RfUkVTRVQxIiwKICAgICJTdWIyRmVyOTk5IiwKICAgICJFbnl1X2lzX1BybyIsCiAgICAiSkNXSyIsCiAgICAiU3RhcmNvZGVIRU8iLAogICAgIk1hZ2ljQnVzIiwKICAgICJLaXR0R2FtaW5nIiwKICAgICJTdWIyQ2FwdGFpbk1hdWkiLAogICAgIlN1YjJPZmZpY2FsTm9vYmllIiwKICAgICJUaGVHcmVhdEFjZSIsCiAgICAiU3ViMk5vb2JNYXN0ZXIxMjMiLAogICAgIlN1YjJEYWlncm9jayIsCiAgICAiQXhpb3JlIiwKICAgICJTdHJhd0hhdE1haW5lIiwKICAgICJUYW50YWlHYW1pbmciLAogICAgIkJsdXh4eSIsCiAgICAiU1VCMkdBTUVSUk9CT1RfRVhQMSIsCiAgICAiQ2hhbmRsZXIiLAogICAgIk5PTU9SRUhBQ0siLAogICAgIkJBTkVYUExPSVQiLAogICAgIldpbGREYXJlcyIsCiAgICAiQm9zc0J1aWxkIiwKICAgICJHZXRQcmFua2VkIiwKICAgICJFQVJOX0ZSVUlUUyIsCiAgICAiRklHSFQ0RlJVSVQiLAogICAgIk5PRVhQTE9JVEVSIiwKICAgICJOT09CMkFETUlOIiwKICAgICJDT0RFU0xJREUiLAogICAgIkFETUlOSEFDS0VEIiwKICAgICJBRE1JTkRBUkVTIiwKICAgICJmcnVpdGNvbmNlcHRzIiwKICAgICJrcmF6eWRhcmVzIiwKICAgICJUUklQTEVBQlVTRSIsCiAgICAiU0VBVFJPTExJTkciLAogICAgIjI0Tk9BRE1JTiIsCiAgICAiUkVXQVJERlVOIiwKICAgICJORVdUUk9MTCIsCiAgICAiZnVkZDEwX3YyIiwKICAgICJGdWRkMTAiLAogICAgIkJpZ25ld3MiLAogICAgIlNFQ1JFVF9BRE1JTiIKfTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlJlZGVlbSBBbGwgQ29kZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZm9yIHY1NTksIHY1NjAgaW4gaXBhaXJzKHYxNTApIGRvCiAgICAgICAgICAgIFJlZGVlbUNvZGUodjU2MCk7CiAgICAgICAgZW5kCiAgICBlbmQKfSk7CmZ1bmN0aW9uIFJlZGVlbUNvZGUodjM3NykKICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLlJlZGVlbTpJbnZva2VTZXJ2ZXIodjM3Nyk7CmVuZApsb2NhbCB2NTYgPSB2MTYuTWlzYzpBZGRTZWN0aW9uKCJUaXRsZXMiKTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRpdGxlcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjM3OCA9IHsKICAgICAgICAgICAgWzFdID0gImdldFRpdGxlcyIKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzNzgpKTsKICAgICAgICBnYW1lLlBsYXllcnMubG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uVGl0bGVzLlZpc2libGUgPSB0cnVlOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuTWlzYzpBZGRTZWN0aW9uKCJBd2FrZW5pbmciKTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkF3YWtlbmluZyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uQXdha2VuaW5nVG9nZ2xlci5WaXNpYmxlID0gdHJ1ZTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiTWlzYyIpOwpsb2NhbCB2MTUxID0gdjE2Lk1pc2M6QWRkVG9nZ2xlKCJUb2dnbGVSZWpvaW4iLCB7CiAgICBUaXRsZSA9ICJSZWpvaW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2MTUxOk9uQ2hhbmdlZChmdW5jdGlvbih2MzgxKQogICAgX0cuQXV0b1Jlam9pbiA9IHYzODE7CmVuZCk7CnYxNy5Ub2dnbGVSZWpvaW46U2V0VmFsdWUodHJ1ZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9SZWpvaW4gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkucmVqb2luID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIikuUm9ibG94UHJvbXB0R3VpLnByb21wdE92ZXJsYXkuQ2hpbGRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHY4MDgpCiAgICAgICAgICAgICAgICBpZiAoKHY4MDguTmFtZSA9PSAiRXJyb3JQcm9tcHQiKSBhbmQgdjgwODpGaW5kRmlyc3RDaGlsZCgiTWVzc2FnZUFyZWEiKSBhbmQgdjgwOC5NZXNzYWdlQXJlYTpGaW5kRmlyc3RDaGlsZCgiRXJyb3JGcmFtZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydChnYW1lLlBsYWNlSWQpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiRm9nIik7CmxvY2FsIGZ1bmN0aW9uIHYxNTIoKQogICAgbG9jYWwgdjM4MiA9IGdhbWU6R2V0U2VydmljZSgiTGlnaHRpbmciKTsKICAgIGlmIHYzODI6RmluZEZpcnN0Q2hpbGQoIkJhc2VBdG1vc3BoZXJlIikgdGhlbgogICAgICAgIHYzODIuQmFzZUF0bW9zcGhlcmU6RGVzdHJveSgpOwogICAgZW5kCiAgICBpZiB2MzgyOkZpbmRGaXJzdENoaWxkKCJTZWFUZXJyb3JDQyIpIHRoZW4KICAgICAgICB2MzgyLlNlYVRlcnJvckNDOkRlc3Ryb3koKTsKICAgIGVuZAogICAgaWYgdjM4MjpGaW5kRmlyc3RDaGlsZCgiTGlnaHRpbmdMYXllcnMiKSB0aGVuCiAgICAgICAgaWYgdjM4Mi5MaWdodGluZ0xheWVyczpGaW5kRmlyc3RDaGlsZCgiQXRtb3NwaGVyZSIpIHRoZW4KICAgICAgICAgICAgdjM4Mi5MaWdodGluZ0xheWVycy5BdG1vc3BoZXJlOkRlc3Ryb3koKTsKICAgICAgICBlbmQKICAgICAgICB3YWl0KCk7CiAgICAgICAgaWYgdjM4Mi5MaWdodGluZ0xheWVyczpGaW5kRmlyc3RDaGlsZCgiRGFya0ZvZyIpIHRoZW4KICAgICAgICAgICAgdjM4Mi5MaWdodGluZ0xheWVycy5EYXJrRm9nOkRlc3Ryb3koKTsKICAgICAgICBlbmQKICAgIGVuZAogICAgdjM4Mi5Gb2dFbmQgPSAxMDAwMDA7CmVuZAp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiVGjhu6ljIFThu4luaCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgdjE1MigpOwogICAgZW5kCn0pOwpsb2NhbCB2MTUzID0gdjE2Lk1pc2M6QWRkVG9nZ2xlKCJUb2dnbGVBbnRpQmFuZCIsIHsKICAgIFRpdGxlID0gIkFudGkgQmFuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjE1MzpPbkNoYW5nZWQoZnVuY3Rpb24odjM4NCkKICAgIF9HLkFudGlCYW5kID0gdjM4NDsKZW5kKTsKbG9jYWwgdjE1NCA9IHsKICAgIDE3ODg0ODgxLAogICAgMTIwMTczNjA0LAogICAgOTEyMzQ4Cn07CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkFudGlCYW5kIHRoZW4KICAgICAgICAgICAgZm9yIHY4MDksIHY4MTAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICAgICAgaWYgdGFibGUuZmluZCh2MTU0LCB2ODEwLlVzZXJJZCkgdGhlbgogICAgICAgICAgICAgICAgICAgIEhvcCgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1NiA9IHYxNi5TZWE6QWRkU2VjdGlvbigiTGV2aWF0aGFuIik7CnYxNi5TZWE6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJ1eSBMZXZpYXRoYW4gQ2hpcCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiSW5mb0xldmlhdGhhbiIsICIyIik7CiAgICBlbmQKfSk7CmxvY2FsIHYxNTUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlVFBGcm96ZW5EaW1lbnNpb24iLCB7CiAgICBUaXRsZSA9ICJGbHkgVG8gRnJvemVuIERpbWVuc2lvbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTU1Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzg1KQogICAgX0cuVHdlZW5Ub0Zyb3plbkRpbWVuc2lvbiA9IHYzODU7CmVuZCk7CnYxNTU6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBsb2NhbCB2Mzg2OwogICAgd2hpbGUgbm90IHYzODYgZG8KICAgICAgICB2Mzg2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIkZyb3plbkRpbWVuc2lvbiIpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuVHdlZW5Ub0Zyb3plbkRpbWVuc2lvbiB0aGVuCiAgICAgICAgICAgIGlmIHYzODYgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4odjM4Ni5DRnJhbWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY1NjEgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiTGV2aWF0aGFuIENoaXAgU3RhdHVzIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgICAgICBsb2NhbCB2ODExID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiSW5mb0xldmlhdGhhbiIsICIxIik7CiAgICAgICAgICAgICAgICBpZiAodjgxMSA9PSA1KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjU2MTpTZXREZXNjKCJMZXZpYXRoYW4gSXMgT3V0IFRoZXJlIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHY4MTEgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY1NjE6U2V0RGVzYygiSSBEb24ndCBLbm93Iik7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU2MTpTZXREZXNjKCJNdWE6ICIgLi4gdG9zdHJpbmcodjgxMSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwplbmQKbG9jYWwgdjE1NiA9IHYxNi5TZWE6QWRkU2VjdGlvbigiRHJhY28iKTsKbG9jYWwgdjE1NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVCbGF6ZUVtYmVyIiwgewogICAgVGl0bGUgPSAiQXV0byBCbGF6ZSBFbWJlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTU3Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzg3KQogICAgX0cuQXV0b0JsYXplRW1iZXIgPSB2Mzg3OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQmxhemVFbWJlciB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpXYWl0Rm9yQ2hpbGQoIk1vZHVsZXMiKTpXYWl0Rm9yQ2hpbGQoIk5ldCIpOldhaXRGb3JDaGlsZCgiUkUvRHJhZ29uRG9qb0VtYmVyIik6RmlyZVNlcnZlcigpOwogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNTggPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlUmVjZWl2ZVF1ZXN0IiwgewogICAgVGl0bGUgPSAiR2V0IEJsYXplIEVtYmVyIFF1ZXN0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNTg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODgpCiAgICBfRy5BdXRvUmVjZWl2ZVF1ZXN0ID0gdjM4ODsKICAgIGlmIF9HLkF1dG9SZWNlaXZlUXVlc3QgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDU2NjEuNTMyMjI2NTYyNSwgMTAxMy4wOTA3NTkyNzczNDM4LCAtIDMzNC45NjQ5OTYzMzc4OTA2KSk7CiAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNTgxNC40MjcyNDYwOTM3NSwgMTIwOC4zMjY3ODIyMjY1NjI1LCA4ODQuNTc4NTUyMjQ2MDkzOCkpOwogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg3NCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGV4dCA9ICJSZXF1ZXN0UXVlc3QiCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvRHJhZ29uSHVudGVyIik6SW52b2tlU2VydmVyKHVucGFjayh2ODc0KSk7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg3NSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGV4dCA9ICJDaGVjayIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg3NiA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvRHJhZ29uSHVudGVyIik6SW52b2tlU2VydmVyKHVucGFjayh2ODc1KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxNTkgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJCbGF6ZSBFbWJlciBRdWVzdCBTdGF0dXMiLAogICAgQ29udGVudCA9ICIiCn0pOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGxvY2FsIHY2NTQgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICAgICAgQ29udGV4dCA9ICJDaGVjayIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgbG9jYWwgdjY1NSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvRHJhZ29uSHVudGVyIik6SW52b2tlU2VydmVyKHVucGFjayh2NjU0KSk7CiAgICAgICAgICAgIGlmICh0eXBlb2YodjY1NSkgPT0gInRhYmxlIikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4NzcsIHY4NzggaW4gcGFpcnModjY1NSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjg3OCA9PSAiRGVmZWF0IDMgVmVub21vdXMgQXNzYWlsYW50cyBvbiBIeWRyYSBJc2xhbmQuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2MTU5OlNldERlc2MoIkRlZmVhdCAzIFZlbm9tb3VzIEFzc2FpbGFudHMgb24gSHlkcmEgSXNsYW5kLiIpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjg3OCA9PSAiRGVmZWF0IDMgSHlkcmEgRW5mb3JjZXJzIG9uIEh5ZHJhIElzbGFuZC4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYxNTk6U2V0RGVzYygiRGVmZWF0IDMgSHlkcmEgRW5mb3JjZXJzIG9uIEh5ZHJhIElzbGFuZC4iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY4NzggPT0gIkRlc3Ryb3kgMTAgdHJlZXMgb24gSHlkcmEgSXNsYW5kLiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjE1OTpTZXREZXNjKCJEZXN0cm95IDEwIHRyZWVzIG9uIEh5ZHJhIElzbGFuZC4iKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBwcmludCh2NjU1KTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTYwID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUh5ZHJhVHJlZSIsIHsKICAgIFRpdGxlID0gIkRlc3Ryb3kgdHJlZXMgYXQgSHlkcmEgSXNsYW5kIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNjA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODkpCiAgICBfRy5BdXRvSHlkcmFUcmVlID0gdjM4OTsKZW5kKTsKbG9jYWwgZnVuY3Rpb24gdjE2MSh2MzkwKQogICAgbG9jYWwgdjM5MSA9IGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOwogICAgdjM5MTpTZW5kS2V5RXZlbnQodHJ1ZSwgdjM5MCwgZmFsc2UsIGdhbWUpOwogICAgdjM5MTpTZW5kS2V5RXZlbnQoZmFsc2UsIHYzOTAsIGZhbHNlLCBnYW1lKTsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYxNjIodjM5MikKICAgIGxvY2FsIHYzOTMgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI7CiAgICBsb2NhbCB2Mzk0ID0gdjM5My5CYWNrcGFjazsKICAgIGZvciB2NTYyLCB2NTYzIGluIHBhaXJzKHYzOTQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiAodjU2MzpJc0EoIlRvb2wiKSBhbmQgKHY1NjMuVG9vbFRpcCA9PSB2MzkyKSkgdGhlbgogICAgICAgICAgICB2NTYzLlBhcmVudCA9IHYzOTMuQ2hhcmFjdGVyOwogICAgICAgICAgICBmb3IgdjgxMiwgdjgxMyBpbiBpcGFpcnMoewogICAgICAgICAgICAgICAgIloiLAogICAgICAgICAgICAgICAgIlgiLAogICAgICAgICAgICAgICAgIkMiLAogICAgICAgICAgICAgICAgIlYiLAogICAgICAgICAgICAgICAgIkYiCiAgICAgICAgICAgIH0pIGRvCiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgdjE2MSh2ODEzKTsKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTYzLlBhcmVudCA9IHYzOTQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGVuZAogICAgZW5kCmVuZApsb2NhbCB2MTYzID0gewogICAgQ0ZyYW1lLm5ldyg1Mjg4LjYxOTYyODkwNjI1LCAxMDA1LjQwMDAyNDQxNDA2MjUsIDM5Mi40MzAxMTQ3NDYwOTM3NSksCiAgICBDRnJhbWUubmV3KDUzNDMuMzk0NTMxMjUsIDEwMDQuMTk5ODkwMTM2NzE4OCwgMzYxLjA2ODc1NjEwMzUxNTYpLAogICAgQ0ZyYW1lLm5ldyg1MjM1Ljc4NTY0NDUzMTI1LCAxMDA0LjE5OTg5MDEzNjcxODgsIDQzMS40NTMwOTQ0ODI0MjE5KSwKICAgIENGcmFtZS5uZXcoNTMyMS4zMDYxNTIzNDM3NSwgMTAwNC4xOTk4OTAxMzY3MTg4LCA0NDAuODk1MTQxNjAxNTYyNSksCiAgICBDRnJhbWUubmV3KDUyNTguOTY0ODQzNzUsIDEwMDQuMTk5ODkwMTM2NzE4OCwgMzQ1LjUwNTI0OTAyMzQzNzUpCn07CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9IeWRyYVRyZWUgdGhlbgogICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICBmb3IgdjgxNCwgdjgxNSBpbiBpcGFpcnModjE2MykgZG8KICAgICAgICAgICAgICAgIGlmIG5vdCBfRy5BdXRvSHlkcmFUcmVlIHRoZW4KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4yKHY4MTUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgxNiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI7CiAgICAgICAgICAgICAgICBpZiAodjgxNiBhbmQgdjgxNjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkwMiA9ICh2ODE2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODE1LlBvc2l0aW9uKS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHY5MDIgPD0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2MTYyKCJNZWxlZSIpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTYyKCJTd29yZCIpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTYyKCJHdW4iKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwp2MTU2OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUZWxlcG9ydCBUbyBEcmFnb24gRG9qbyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNTY2MS41MzIyMjY1NjI1LCAxMDEzLjA5MDc1OTI3NzM0MzgsIC0gMzM0Ljk2NDk5NjMzNzg5MDYpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg1ODE0LjQyNzI0NjA5Mzc1LCAxMjA4LjMyNjc4MjIyNjU2MjUsIDg4NC41Nzg1NTIyNDYwOTM4KSk7CiAgICBlbmQKfSk7CnYxNTY6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkNyYWZ0IFZvbGNhbmljIE1hZ25ldCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjM5NSA9IHsKICAgICAgICAgICAgWzFdID0gIkNyYWZ0SXRlbSIsCiAgICAgICAgICAgIFsyXSA9ICJDcmFmdCIsCiAgICAgICAgICAgIFszXSA9ICJWb2xjYW5pYyBNYWduZXQiCiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2Mzk1KSk7CiAgICBlbmQKfSk7CmxvY2FsIHYxNjQgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdEZpcmVGbG93ZXJzIiwgewogICAgVGl0bGUgPSAiQ29sbGVjdCBGaXJlIEZsb3dlcnMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2NDpPbkNoYW5nZWQoZnVuY3Rpb24odjM5NikKICAgIF9HLkF1dG9Db2xsZWN0RmlyZUZsb3dlcnMgPSB2Mzk2OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQ29sbGVjdEZpcmVGbG93ZXJzIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc0NyA9IHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiRmlyZUZsb3dlcnMiKTsKICAgICAgICAgICAgaWYgdjc0NyB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjkwMywgdjkwNCBpbiBwYWlycyh2NzQ3OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY5MDQ6SXNBKCJNb2RlbCIpIGFuZCB2OTA0LlByaW1hcnlQYXJ0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzY3ID0gdjkwNC5QcmltYXJ5UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNjggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzY5ID0gKHYxMzY3IC0gdjEzNjgpLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMzY5IDw9IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KHYxMzY3KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNjUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlV2hpdGVCZWx0IiwgewogICAgVGl0bGUgPSAiQXRvIFdoaXRlIEJlbHQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2NTpPbkNoYW5nZWQoZnVuY3Rpb24odjM5NykKICAgIF9HLkF1dG9MZXZlbCA9IHYzOTc7CiAgICBpZiB2Mzk3IHRoZW4KICAgICAgICBsb2NhbCB2NjU2ID0gewogICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICBOUEMgPSAiRG9qbyBUcmFpbmVyIiwKICAgICAgICAgICAgICAgIENvbW1hbmQgPSAiUmVxdWVzdFF1ZXN0IgogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0ludGVyYWN0RHJhZ29uUXVlc3QiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2NTYpKTsKICAgICAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIF9HLkF1dG9MZXZlbCBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjgxNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE5QQyA9ICJEb2pvIFRyYWluZXIiLAogICAgICAgICAgICAgICAgICAgICAgICBDb21tYW5kID0gIkNsYWltUXVlc3QiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvSW50ZXJhY3REcmFnb25RdWVzdCIpOkludm9rZVNlcnZlcih1bnBhY2sodjgxNykpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxNjYgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJEcmFjbyBSYWNlIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKbG9jYWwgdjE2NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUcmlhbFRlbGVwb3J0IiwgewogICAgVGl0bGUgPSAiRmx5IFRvIFRyaWFsIERvb3IiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2NzpPbkNoYW5nZWQoZnVuY3Rpb24odjM5OCkKICAgIF9HLkF1dG9UcmlhbFRlbGVwb3J0ID0gdjM5ODsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b1RyaWFsVGVsZXBvcnQgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzQ4ID0gd29ya3NwYWNlLk1hcC5QcmVoaXN0b3JpY0lzbGFuZDpGaW5kRmlyc3RDaGlsZCgiVHJpYWxUZWxlcG9ydCIpOwogICAgICAgICAgICBpZiAodjc0OCBhbmQgdjc0ODpJc0EoIlBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcodjc0OC5Qb3NpdGlvbikpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTY4ID0gdjE2LlNlYTpBZGRTZWN0aW9uKCJQcmVoaXN0b3JpYyBJc2xhbmQiKTsKbG9jYWwgdjE2OSA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIlByZWhpc3RvcmljIElzbGFuZCBTdGF0dXMiLAogICAgQ29udGVudCA9ICIiCn0pOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIGdnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICB2MTY5OlNldERlc2MoIlByZWhpc3RvcmljIElzbGFuZDog4pyF77iPIik7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHYxNjk6U2V0RGVzYygiUHJlaGlzdG9yaWMgSXNsYW5kOiDinYzvuI8iKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTcwID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRQVm9sY2FubyIsIHsKICAgIFRpdGxlID0gIkZseSBUbyBQcmVoaXN0b3JpYyBJc2xhbmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE3MDpPbkNoYW5nZWQoZnVuY3Rpb24odjM5OSkKICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IHYzOTk7CmVuZCk7CnYxNy5Ub2dnbGVUUFZvbGNhbm86U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBsb2NhbCB2NDAwOwogICAgd2hpbGUgbm90IHY0MDAgZG8KICAgICAgICB2NDAwID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5Ud2VlblRvUHJlaGlzdG9yaWMgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzQ5ID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICAgICAgICAgIGlmIHY3NDkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg3OSA9IHY3NDk6RmluZEZpcnN0Q2hpbGQoIkNvcmUiKSBhbmQgdjc0OS5Db3JlOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY1JlbGljIikgOwogICAgICAgICAgICAgICAgbG9jYWwgdjg4MCA9IHY4NzkgYW5kIHY4Nzk6RmluZEZpcnN0Q2hpbGQoIlNrdWxsIikgOwogICAgICAgICAgICAgICAgaWYgdjg4MCB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcodjg4MC5Qb3NpdGlvbikpOwogICAgICAgICAgICAgICAgICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IGZhbHNlOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNzEgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlRGVmZW5kVm9sY2FubyIsIHsKICAgIFRpdGxlID0gIlNhZmUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE3MTpPbkNoYW5nZWQoZnVuY3Rpb24odjQwMSkKICAgIF9HLkF1dG9EZWZlbmRWb2xjYW5vID0gdjQwMTsKZW5kKTsKbG9jYWwgdjEwNyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVNZWxlZSIsIHsKICAgIFRpdGxlID0gIlVzZSBNZWxlZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA3Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDAyKQogICAgX0cuVXNlTWVsZWUgPSB2NDAyOwplbmQpOwpsb2NhbCB2MTA5ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVN3b3JkIiwgewogICAgVGl0bGUgPSAiVXNlIFN3b3JkIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDk6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MDMpCiAgICBfRy5Vc2VTd29yZCA9IHY0MDM7CmVuZCk7CmxvY2FsIHYxMTAgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlR3VuIiwgewogICAgVGl0bGUgPSAiVXNlIEd1biIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTEwOk9uQ2hhbmdlZChmdW5jdGlvbih2NDA0KQogICAgX0cuVXNlR3VuID0gdjQwNDsKZW5kKTsKbG9jYWwgZnVuY3Rpb24gdjE3Mih2NDA1KQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIHY0MDUsIGZhbHNlLCBnYW1lKTsKICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgdjQwNSwgZmFsc2UsIGdhbWUpOwplbmQKbG9jYWwgZnVuY3Rpb24gdjE3MygpCiAgICBsb2NhbCB2NDA2ID0gZ2FtZS5Xb3Jrc3BhY2UuTWFwLlByZWhpc3RvcmljSXNsYW5kLkNvcmU6RmluZEZpcnN0Q2hpbGQoIkludGVyaW9yTGF2YSIpOwogICAgaWYgKHY0MDYgYW5kIHY0MDY6SXNBKCJNb2RlbCIpKSB0aGVuCiAgICAgICAgdjQwNjpEZXN0cm95KCk7CiAgICBlbmQKICAgIGxvY2FsIHY0MDcgPSBnYW1lLldvcmtzcGFjZS5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICBpZiB2NDA3IHRoZW4KICAgICAgICBmb3Igdjc1MCwgdjc1MSBpbiBwYWlycyh2NDA3OkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmICh2NzUxOklzQSgiUGFydCIpIGFuZCB2NzUxLk5hbWU6bG93ZXIoKTpmaW5kKCJsYXZhIikpIHRoZW4KICAgICAgICAgICAgICAgIHY3NTE6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgbG9jYWwgdjQwOCA9IGdhbWUuV29ya3NwYWNlLk1hcDpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNJc2xhbmQiKTsKICAgIGlmIHY0MDggdGhlbgogICAgICAgIGZvciB2NzUyLCB2NzUzIGluIHBhaXJzKHY0MDg6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjc1MzpJc0EoIk1vZGVsIikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY5MDUsIHY5MDYgaW4gcGFpcnModjc1MzpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2OTA2OklzQSgiTWVzaFBhcnQiKSBhbmQgdjkwNi5OYW1lOmxvd2VyKCk6ZmluZCgibGF2YSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY5MDY6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApsb2NhbCBmdW5jdGlvbiB2MTc0KCkKICAgIGxvY2FsIHY0MDkgPSBnYW1lLldvcmtzcGFjZS5NYXAuUHJlaGlzdG9yaWNJc2xhbmQuQ29yZS5Wb2xjYW5vUm9ja3M7CiAgICBmb3IgdjU2NCwgdjU2NSBpbiBwYWlycyh2NDA5OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjU2NTpJc0EoIk1vZGVsIikgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzU0ID0gdjU2NTpGaW5kRmlyc3RDaGlsZCgidm9sY2Fub3JvY2siKTsKICAgICAgICAgICAgaWYgKHY3NTQgYW5kIHY3NTQ6SXNBKCJNZXNoUGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODgxID0gdjc1NC5Db2xvcjsKICAgICAgICAgICAgICAgIGlmICgodjg4MSA9PSBDb2xvcjMuZnJvbVJHQigxODUsIDUzLCA1NikpIG9yICh2ODgxID09IENvbG9yMy5mcm9tUkdCKDE4NSwgNTMsIDU3KSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjc1NDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIG5pbDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYxNjIodjQxMCkKICAgIGxvY2FsIHY0MTEgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI7CiAgICBsb2NhbCB2NDEyID0gdjQxMS5CYWNrcGFjazsKICAgIGZvciB2NTY2LCB2NTY3IGluIHBhaXJzKHY0MTI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiAodjU2NzpJc0EoIlRvb2wiKSBhbmQgKHY1NjcuVG9vbFRpcCA9PSB2NDEwKSkgdGhlbgogICAgICAgICAgICB2NTY3LlBhcmVudCA9IHY0MTEuQ2hhcmFjdGVyOwogICAgICAgICAgICBmb3IgdjgxOCwgdjgxOSBpbiBpcGFpcnMoewogICAgICAgICAgICAgICAgIloiLAogICAgICAgICAgICAgICAgIlgiLAogICAgICAgICAgICAgICAgIkMiLAogICAgICAgICAgICAgICAgIlYiLAogICAgICAgICAgICAgICAgIkYiCiAgICAgICAgICAgIH0pIGRvCiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgdjE3Mih2ODE5KTsKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTY3LlBhcmVudCA9IHY0MTI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGVuZAogICAgZW5kCmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvRGVmZW5kVm9sY2FubyB0aGVuCiAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgIHBjYWxsKHYxNzMpOwogICAgICAgICAgICBsb2NhbCB2NzU3ID0gdjE3NCgpOwogICAgICAgICAgICBpZiB2NzU3IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4ODIgPSBDRnJhbWUubmV3KHY3NTcuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLCAwLCAwKSk7CiAgICAgICAgICAgICAgICBUd2VlbjIodjg4Mik7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODgzID0gdjc1Ny5Db2xvcjsKICAgICAgICAgICAgICAgIGlmICgodjg4MyB+PSBDb2xvcjMuZnJvbVJHQigxODUsIDUzLCA1NikpIGFuZCAodjg4MyB+PSBDb2xvcjMuZnJvbVJHQigxODUsIDUzLCA1NykpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjc1NyA9IHYxNzQoKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyNSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyNiA9ICgodjExMjUgLSB2NzU3LlBvc2l0aW9uKSAtIFZlY3RvcjMubmV3KDAsIDAsIDApKS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHYxMTI2IDw9IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuVXNlTWVsZWUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiTWVsZWUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlVzZVN3b3JkIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjIoIlN3b3JkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5Vc2VHdW4gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiR3VuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IGZhbHNlOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IHRydWU7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNzUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlS2lsbEF1cmEiLCB7CiAgICBUaXRsZSA9ICJBdHRhY2sgR29sZW1zIEF1cmEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE3NTpPbkNoYW5nZWQoZnVuY3Rpb24odjQxMykKICAgIEtpbGxBdXJhID0gdjQxMzsKZW5kKTsKdjE3LlRvZ2dsZUtpbGxBdXJhOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgS2lsbEF1cmEgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3Igdjg4NCwgdjg4NSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4ODU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY4ODU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHY4ODUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODg1Lkh1bWFub2lkLkhlYWx0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODg1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgS2lsbEF1cmEgb3Igbm90IHY4ODUuUGFyZW50IG9yICh2ODg1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE3NiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0Qm9uZSIsIHsKICAgIFRpdGxlID0gIkNvbGxlY3QgQm9uZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTc2Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDE0KQogICAgX0cuQXV0b0NvbGxlY3RCb25lID0gdjQxNDsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0NvbGxlY3RCb25lIHRoZW4KICAgICAgICAgICAgZm9yIHY4MjAsIHY4MjEgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiAodjgyMTpJc0EoIkJhc2VQYXJ0IikgYW5kICh2ODIxLk5hbWUgPT0gIkRpbm9Cb25lIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyh2ODIxLlBvc2l0aW9uKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE3NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0RWdnIiwgewogICAgVGl0bGUgPSAiQ29sbGVjdCBEcmFnb24gRWdnIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNzc6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MTUpCiAgICBfRy5BdXRvQ29sbGVjdEVnZyA9IHY0MTU7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9Db2xsZWN0RWdnIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc1OCA9IHdvcmtzcGFjZS5NYXAuUHJlaGlzdG9yaWNJc2xhbmQuQ29yZS5TcGF3bmVkRHJhZ29uRWdnczpHZXRDaGlsZHJlbigpOwogICAgICAgICAgICBpZiAoIyB2NzU4ID4gMCkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg4NiA9IHY3NThbbWF0aC5yYW5kb20oMSwgIyB2NzU4KV07CiAgICAgICAgICAgICAgICBpZiAodjg4NjpJc0EoIk1vZGVsIikgYW5kIHY4ODYuUHJpbWFyeVBhcnQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjg4Ni5QcmltYXJ5UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTI3ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTI4ID0gdjg4Ni5QcmltYXJ5UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyOSA9ICh2MTEyNyAtIHYxMTI4KS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHYxMTI5IDw9IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKCgoKCi0tID09PT09PT09PT09PT09PT09IFNBRkUgTUVOVSBUT0dHTEUgKFJJR0hUU0hJRlQpID09PT09PT09PT09PT09PT09Ci0tIE5vbi1kZXN0cnVjdGl2ZSB0b2dnbGU6IG9ubHkgaGlkZXMvc2hvd3MgU2NyZWVuR3VpIGluc3RlYWQgb2YgRGVzdHJveSgpCmxvY2FsIFVJUyA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCgpsb2NhbCBmdW5jdGlvbiBmaW5kTWFpbkd1aSgpCiAgICAtLSBUcnkgQ29yZUd1aSBmaXJzdCAoY29tbW9uIGZvciBVSSBsaWJzKQogICAgZm9yIF8sdiBpbiBpcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2OklzQSgiU2NyZWVuR3VpIikgdGhlbgogICAgICAgICAgICByZXR1cm4gdgogICAgICAgIGVuZAogICAgZW5kCiAgICAtLSBGYWxsYmFjayB0byBQbGF5ZXJHdWkKICAgIGxvY2FsIHBnID0gUGxheWVycy5Mb2NhbFBsYXllcjpGaW5kRmlyc3RDaGlsZCgiUGxheWVyR3VpIikKICAgIGlmIHBnIHRoZW4KICAgICAgICBmb3IgXyx2IGluIGlwYWlycyhwZzpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiB2OklzQSgiU2NyZWVuR3VpIikgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHYKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBuaWwKZW5kCgpsb2NhbCBNYWluR3VpID0gZmluZE1haW5HdWkoKQpsb2NhbCBWaXNpYmxlID0gdHJ1ZQoKVUlTLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCwgZ3ApCiAgICBpZiBncCB0aGVuIHJldHVybiBlbmQKICAgIGlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlJpZ2h0U2hpZnQgdGhlbgogICAgICAgIFZpc2libGUgPSBub3QgVmlzaWJsZQogICAgICAgIGlmIE1haW5HdWkgdGhlbgogICAgICAgICAgICBNYWluR3VpLkVuYWJsZWQgPSBWaXNpYmxlCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQotLSA9PT09PT09PT09PT09PT09PSBFTkQgTUVOVSBUT0dHTEUgPT09PT09PT09PT09PT09PT0KCgoKLS0gPT09PT09PT09PT09PT09PT0gRlVMTCBUT0dHTEUgRklYID09PT09PT09PT09PT09PT09CmxvY2FsIFVJUyA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCmxvY2FsIENvcmVHdWkgPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKQpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgbHAgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCgpsb2NhbCBHVUlfTkFNRSA9ICJCTl9UT0dHTEVfR1VJIgppZiBDb3JlR3VpOkZpbmRGaXJzdENoaWxkKEdVSV9OQU1FKSB0aGVuCiAgICBDb3JlR3VpW0dVSV9OQU1FXTpEZXN0cm95KCkKZW5kCgpsb2NhbCBTY3JlZW5HdWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpClNjcmVlbkd1aS5OYW1lID0gR1VJX05BTUUKU2NyZWVuR3VpLlJlc2V0T25TcGF3biA9IGZhbHNlClNjcmVlbkd1aS5QYXJlbnQgPSBDb3JlR3VpCgpsb2NhbCBUb2dnbGVCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQpUb2dnbGVCdG4uU2l6ZSA9IFVEaW0yLmZyb21PZmZzZXQoNTAsNTApClRvZ2dsZUJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLDEwLDAuNSwtMjUpClRvZ2dsZUJ0bi5UZXh0ID0gIuKJoSIKVG9nZ2xlQnRuLlRleHRTY2FsZWQgPSB0cnVlClRvZ2dsZUJ0bi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC4yClRvZ2dsZUJ0bi5QYXJlbnQgPSBTY3JlZW5HdWkKCmxvY2FsIGZ1bmN0aW9uIGZpbmRNYWluKCkKICAgIGZvciBfLHYgaW4gcGFpcnMoU2NyZWVuR3VpOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgaWYgdjpJc0EoIkZyYW1lIikgYW5kIHYuTmFtZTpsb3dlcigpOmZpbmQoIm1haW4iKSB0aGVuCiAgICAgICAgICAgIHJldHVybiB2CiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpsb2NhbCBvcGVuZWQgPSB0cnVlCmxvY2FsIGZ1bmN0aW9uIHNldFZpc2libGUoc3RhdGUpCiAgICBsb2NhbCBtYWluID0gZmluZE1haW4oKQogICAgaWYgbWFpbiB0aGVuCiAgICAgICAgbWFpbi5WaXNpYmxlID0gc3RhdGUKICAgIGVuZAplbmQKClRvZ2dsZUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIG9wZW5lZCA9IG5vdCBvcGVuZWQKICAgIHNldFZpc2libGUob3BlbmVkKQplbmQpCgpVSVMuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBncCkKICAgIGlmIGdwIHRoZW4gcmV0dXJuIGVuZAogICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuUmlnaHRDb250cm9sIHRoZW4KICAgICAgICBvcGVuZWQgPSBub3Qgb3BlbmVkCiAgICAgICAgc2V0VmlzaWJsZShvcGVuZWQpCiAgICBlbmQKZW5kKQoKdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoMikgZG8KICAgICAgICBpZiBub3QgU2NyZWVuR3VpLlBhcmVudCB0aGVuCiAgICAgICAgICAgIFNjcmVlbkd1aS5QYXJlbnQgPSBDb3JlR3VpCiAgICAgICAgICAgIHNldFZpc2libGUob3BlbmVkKQogICAgICAgIGVuZAogICAgZW5kCmVuZCkKLS0gPT09PT09PT09PT09PT09PT0gRU5EIFRPR0dMRSBGSVggPT09PT09PT09PT09PT09PT0KCg=="
local s=game:GetService("HttpService"):Base64Decode(b64)
loadstring(s)()
