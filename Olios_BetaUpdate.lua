
local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
local function d(data)
 data=string.gsub(data,'[^'..b..'=]','')
 return (data:gsub('.',function(x)
  if x=='=' then return '' end
  local r,f='',(b:find(x)-1)
  for i=6,1,-1 do
   r=r..(f%2^i-f%2^(i-1)>0 and '1' or '0')
  end
  return r
 end):gsub('%d%d%d?%d?%d?%d?%d?%d?',function(x)
  if #x~=8 then return '' end
  local c=0
  for i=1,8 do
   c=c+(x:sub(i,i)=='1' and 2^(8-i) or 0)
  end
  return string.char(c)
 end))
end

loadstring(d("Ci0tIE1FUkdFRCBTQ1JJUFQ6IEJhbmFuYSBIdWIgS2V5IFN5c3RlbSArIE9saW9zIEh1YgoKLS0gPT09PT0gQkFOQU5BIEtFWSBTWVNURU0gPT09PT0KCi0tID09PT09PT09PT09PT09PT09IE9ORS1USU1FIEtFWSBTWVNURU0gKERFTFRBIFNBRkUpID09PT09PT09PT09PT09PT09CmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCi0tIENIQU5HRSAvIE1BTkFHRSBZT1VSIEtFWVMgSEVSRQpsb2NhbCBWYWxpZEtleXMgPSB7CiAgICBbIjE4MjcxNTI4MTc2MzYyMDE1Il0gPSB0cnVlLAogICAgWyIxMDAxMTM0MzYzMzkxNDIwMTUiXSA9IHRydWUKfQoKLS0gT25lLXRpbWUgcGVyIHVzZXIgbWFya2VyIChsb2NhbCBtYWNoaW5lKQpsb2NhbCBVc2VkRmlsZSA9ICJCbG94RnJ1aXRzX0tleV9Vc2VkLnR4dCIKCmlmIG5vdCBpc2ZpbGUgdGhlbgogICAgLS0gRXhlY3V0b3IgZG9lc24ndCBzdXBwb3J0IGZpbGVzeXN0ZW07IGFsbG93IGV4ZWN1dGlvbiB0byBhdm9pZCBmYWxzZSBibG9ja3MKZWxzZQogICAgaWYgaXNmaWxlKFVzZWRGaWxlKSB0aGVuCiAgICAgICAgLS0gVXNlciBhbHJlYWR5IHZhbGlkYXRlZCBiZWZvcmUKICAgIGVsc2UKICAgICAgICBsb2NhbCBpbnB1dEtleSA9ICIiCiAgICAgICAgaWYgZ2V0Y2xpcGJvYXJkIHRoZW4KICAgICAgICAgICAgaW5wdXRLZXkgPSB0b3N0cmluZyhnZXRjbGlwYm9hcmQoKSkKICAgICAgICBlbmQKCiAgICAgICAgaWYgVmFsaWRLZXlzW2lucHV0S2V5XSB0aGVuCiAgICAgICAgICAgIHdyaXRlZmlsZShVc2VkRmlsZSwgaW5wdXRLZXkpCiAgICAgICAgZWxzZQogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBMb2NhbFBsYXllcjpLaWNrKCJJbnZhbGlkIG9yIGFscmVhZHkgdXNlZCBrZXkuXG5HZXQgYSBuZXcga2V5IGZyb20gYWRtaW4uIikKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBlbmQKICAgIGVuZAplbmQKLS0gPT09PT09PT09PT09PT09PT0gRU5EIEtFWSBTWVNURU0gPT09PT09PT09PT09PT09PT0KCgpsb2NhbCB2MTQgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9naXRodWIuY29tL2Rhd2lkLXNjcmlwdHMvRmx1ZW50L3JlbGVhc2VzL2xhdGVzdC9kb3dubG9hZC9tYWluLmx1YSIpKSgpOwpsb2NhbCB2MTUgPSB2MTQ6Q3JlYXRlV2luZG93KHsKICAgIFRpdGxlID0gIkZhRmEgQmV0YSBIdWItQmxveCBGcnVpdCBbIFByZW1pdW0gXSIsLS0gTmd1CiAgICBTdWJUaXRsZSA9ICJCeSBuZ3UiLC0tIAogICAgVGFiV2lkdGggPSAxNjAsCiAgICBUaGVtZSA9ICJEYXJrIiwtLQogICAgQWNyeWxpYyA9IGZhbHNlLAogICAgU2l6ZSA9IFVEaW0yLmZyb21PZmZzZXQoNTAwLCAzMjApLAogICAgTWluaW1pemVLZXkgPSBFbnVtLktleUNvZGUuRW5kCn0pOwpsb2NhbCB2MTYgPSB7CiAgICBIb21lID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIEluZm9ybWF0aW9uIgogICAgfSksCiAgICBNYWluID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIEZhcm1pbmciCiAgICB9KSwKICAgIFNlYSA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBWb2xjYW5vIEFuZCBTZWEgRXZlbnQiCiAgICB9KSwKICAgIElUTSA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBGYXJtaW5nIE90aGVyIgogICAgfSksCiAgICBTZXR0aW5nID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiU2V0dGluZyBGYXJtIgogICAgfSksCiAgICBTdGF0dXMgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgU3RhdHVzIEFuZCBTZXJ2ZXIiCiAgICB9KSwKICAgIFN0YXRzID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFN0YXRzIgogICAgfSksCiAgICBQbGF5ZXIgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgTG9jYWwgUGxheWVyIgogICAgfSksCiAgICBUZWxlcG9ydCA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBUZWxlcG9ydCIKICAgIH0pLAogICAgVmlzdWFsID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFZpc3VhbCIKICAgIH0pLAogICAgRnJ1aXQgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgRXNwIEFuZCBGcnVpdCIKICAgIH0pLAogICAgUmFpZCA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBSYWlkIgogICAgfSksCiAgICBSYWNlID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFVwZ3JhZGUgUmFjZSIKICAgIH0pLAogICAgU2hvcCA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBTaG9wIgogICAgfSksCiAgICBNaXNjID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIE1pc2MiCiAgICB9KQp9Owpsb2NhbCB2MTcgPSB2MTQuT3B0aW9uczsKbG9jYWwgdjE4ID0gZ2FtZS5QbGFjZUlkOwppZiAodjE4ID09IDI3NTM5MTU1NDkpIHRoZW4KICAgIFNlYTEgPSB0cnVlOwplbHNlaWYgKHYxOCA9PSA0NDQyMjcyMTgzKSB0aGVuCiAgICBTZWEyID0gdHJ1ZTsKZWxzZWlmICh2MTggPT0gNzQ0OTQyMzYzNSkgdGhlbgogICAgU2VhMyA9IHRydWU7CmVsc2UKICAgIGdhbWU6U2h1dGRvd24oKTsKZW5kCmdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLklkbGVkOmNvbm5lY3QoZnVuY3Rpb24oKQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjJEb3duKFZlY3RvcjIubmV3KDAsIDApLCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUpOwogICAgd2FpdCgpOwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjJVcChWZWN0b3IyLm5ldygwLCAwKSwgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lKTsKZW5kKTsKU2VhMSA9IGZhbHNlOwpTZWEyID0gZmFsc2U7ClNlYTMgPSBmYWxzZTsKbG9jYWwgdjE5ID0gZ2FtZS5QbGFjZUlkOwppZiAodjE5ID09IDI3NTM5MTU1NDkpIHRoZW4KICAgIFNlYTEgPSB0cnVlOwplbHNlaWYgKHYxOSA9PSA0NDQyMjcyMTgzKSB0aGVuCiAgICBTZWEyID0gdHJ1ZTsKZWxzZWlmICh2MTkgPT0gNzQ0OTQyMzYzNSkgdGhlbgogICAgU2VhMyA9IHRydWU7CmVuZApmdW5jdGlvbiBDaGVja0xldmVsKCkKICAgIGxvY2FsIHYxOTcgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlOwogICAgaWYgU2VhMSB0aGVuCiAgICAgICAgaWYgKCh2MTk3ID09IDEpIG9yICh2MTk3IDw9IDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJCYW5kaXQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJCYW5kaXQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQmFuZGl0UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQmFuZGl0IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTA2MC45MzgzNTQ0OTIyLCAxNi40NTUwNjY2ODA5MDgsIDE1NDcuNzg0MTc5Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTAzOC41NTMzNDQ3MjY2LCA0MS4yOTYyNDkzODk2NDgsIDE1NzYuNTA5ODg3Njk1Myk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMCkgb3IgKHYxOTcgPD0gMTQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNb25rZXkiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNb25rZXkiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSnVuZ2xlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNb25rZXkiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2MDEuNjU1Mzk1NTA3OCwgMzYuODUyMTM0NzA0NTksIDE1My4zODgwOTIwNDEwMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNDQ4LjE0NDY1MzMyMDMsIDUwLjg1MTk5MzU2MDc5MSwgNjMuNjA3MTg1MzYzNzcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTUpIG9yICh2MTk3IDw9IDI5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiR29yaWxsYSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdvcmlsbGEiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSnVuZ2xlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJHb3JpbGxhIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjAxLjY1NTM5NTUwNzgsIDM2Ljg1MjEzNDcwNDU5LCAxNTMuMzg4MDkyMDQxMDIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTE0Mi42NDg4MDM3MTA5LCA0MC40NjIzNDg5Mzc5ODgsIC0gNTE1LjM5MjI3Mjk0OTIyKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDMwKSBvciAodjE5NyA8PSAzOSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJCdWdneVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTE0MC4xNzYxNDc0NjA5LCA0Ljc1MjA0OTQ0NjEwNiwgMzgyNy40MDU3NjE3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEyMDEuMDg4MTM0NzY1NiwgNDAuNjI4OTQwNTgyMjc1LCAzODU3LjU5NjY3OTY4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNDApIG9yICh2MTk3IDw9IDU5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQnJ1dGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJCcnV0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJCdWdneVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkJydXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMTQwLjE3NjE0NzQ2MDksIDQuNzUyMDQ5NDQ2MTA2LCAzODI3LjQwNTc2MTcxODgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTM4Ny41MzI0NzA3MDMxLCAyNC41OTIwMzUyOTM1NzksIDQxMDAuOTU3NTE5NTMxMyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA2MCkgb3IgKHYxOTcgPD0gNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJEZXNlcnQgQmFuZGl0IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRGVzZXJ0IEJhbmRpdCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZXNlcnRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkRlc2VydCBCYW5kaXQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg4OTYuNTE3MjExOTE0MDYsIDYuNDM4NDYxNzgwNTQ4MSwgNDM5MC4xNDk0MTQwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg5ODQuOTk4OTYyNDAyMzQsIDE2LjEwOTU1MjM4MzQyMywgNDQxNy45MTAxNTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA3NSkgb3IgKHYxOTcgPD0gODkpIG9yIChTZWxlY3RNb25zdGVyID09ICJEZXNlcnQgT2ZmaWNlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRlc2VydCBPZmZpY2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlc2VydFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRGVzZXJ0IE9mZmljZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg4OTYuNTE3MjExOTE0MDYsIDYuNDM4NDYxNzgwNTQ4MSwgNDM5MC4xNDk0MTQwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxNTQ3LjE1MTAwMDk3NjYsIDE0LjQ1MjAzODc2NDk1NCwgNDM4MS44MDAyOTI5Njg4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDkwKSBvciAodjE5NyA8PSA5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNub3cgQmFuZGl0IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vdyBCYW5kaXQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU25vd1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vdyBCYW5kaXQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMzg2LjgwNzM3MzA0NjksIDg3LjI3Mjc4OTAwMTQ2NSwgLSAxMjk4LjM1NzY2NjAxNTYpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEzNTYuMzAyODU2NDQ1MywgMTA1Ljc2ODY1Mzg2OTYzLCAtIDEzMjguMjQxODIxMjg5MSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMDApIG9yICh2MTk3IDw9IDExOSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNub3dtYW4iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTbm93bWFuIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNub3dtYW4iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMzg2LjgwNzM3MzA0NjksIDg3LjI3Mjc4OTAwMTQ2NSwgLSAxMjk4LjM1NzY2NjAxNTYpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEyMTguNzk1NjU0Mjk2OSwgMTM4LjAxMTg0MDgyMDMxLCAtIDE0ODguMDI2MjQ1MTE3Mik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMjApIG9yICh2MTk3IDw9IDE0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNoaWVmIFBldHR5IE9mZmljZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDaGllZiBQZXR0eSBPZmZpY2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkNoaWVmIFBldHR5IE9mZmljZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDUwMzUuNDk2MDkzNzUsIDI4LjY3NzgzNTQ2NDQ3OCwgNDMyNC4xODQwODIwMzEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDQ5MzEuMTU1MjczNDM3NSwgNjUuNzkzMTEzNzA4NDk2LCA0MTIxLjgzOTM1NTQ2ODgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTUwKSBvciAodjE5NyA8PSAxNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTa3kgQmFuZGl0IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2t5IEJhbmRpdCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNreSBCYW5kaXQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ4NDIuMTM3MjA3MDMxMywgNzE3LjY5NTQzNDU3MDMxLCAtIDI2MjMuMDQ4MzM5ODQzOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA0OTU1LjY0MTExMzI4MTMsIDM2NS40NjM2NTM1NjQ0NSwgLSAyOTA4LjE4NjUyMzQzNzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTc1KSBvciAodjE5NyA8PSAxODkpIG9yIChTZWxlY3RNb25zdGVyID09ICJEYXJrIE1hc3RlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRhcmsgTWFzdGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRGFyayBNYXN0ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ4NDIuMTM3MjA3MDMxMywgNzE3LjY5NTQzNDU3MDMxLCAtIDI2MjMuMDQ4MzM5ODQzOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1MTQ4LjE2NTAzOTA2MjUsIDQzOS4wNDU3MTUzMzIwMywgLSAyMzMyLjk2MTE4MTY0MDYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTkwKSBvciAodjE5NyA8PSAyMDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJQcmlzb25lciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlByaXNvbmVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlByaXNvbmVyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQcmlzb25lciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDUzMTAuNjA1NDcsIDAuMzUwMDE0OTI1LCA0NzQuOTQ2NTk0LCAwLjAxNzUwMTcxMTgsIDAsIDAuOTk5ODQ2OTM1LCAwLCAxLCAwLCAtIDAuOTk5ODQ2OTM1LCAwLCAwLjAxNzUwMTcxMTgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDQ5MzcuMzE4ODUsIDAuMzMyMDMxMzk5LCA2NDkuNTc0NTI0LCAwLjY5NDY0OTgxNiwgMCwgLSAwLjcxOTM0ODA3MywgMCwgMSwgMCwgMC43MTkzNDgwNzMsIDAsIDAuNjk0NjQ5ODE2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIxMCkgb3IgKHYxOTcgPD0gMjQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRGFuZ2Vyb3VzIFByaXNvbmVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRGFuZ2Vyb3VzIFByaXNvbmVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlByaXNvbmVyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEYW5nZXJvdXMgUHJpc29uZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1MzEwLjYwNTQ3LCAwLjM1MDAxNDkyNSwgNDc0Ljk0NjU5NCwgMC4wMTc1MDE3MTE4LCAwLCAwLjk5OTg0NjkzNSwgMCwgMSwgMCwgLSAwLjk5OTg0NjkzNSwgMCwgMC4wMTc1MDE3MTE4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1MDk5LjY2MjYsIDAuMzUxNTYyNjc5LCAxMDU1Ljc1ODMsIDAuODk4OTA2ODI3LCAwLCAtIDAuNDM4MTM5ODU2LCAwLCAxLCAwLCAwLjQzODEzOTg1NiwgMCwgMC44OTg5MDY4MjcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjUwKSBvciAodjE5NyA8PSAyNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJUb2dhIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJUb2dhIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ29sb3NzZXVtUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJUb2dhIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE1NzcuNzg5MDYyNSwgNy40MTUxNDIwNTkzMjYyLCAtIDI5ODQuNDgzODg2NzE4OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxODcyLjUxNjYwMTU2MjUsIDQ5LjA4MDIxNTQ1NDEwMiwgLSAyOTEzLjgxMDU0Njg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNzUpIG9yICh2MTk3IDw9IDI5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkdsYWRpYXRvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdsYWRpYXRvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDb2xvc3NldW1RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkdsYWRpYXRvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTU3Ny43ODkwNjI1LCA3LjQxNTE0MjA1OTMyNjIsIC0gMjk4NC40ODM4ODY3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE1MjEuMzc0MDIzNDM3NSwgODEuMjAzMTcwNzc2MzY3LCAtIDMwNjYuMzEzOTY0ODQzOCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAzMDApIG9yICh2MTk3IDw9IDMyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1pbGl0YXJ5IFNvbGRpZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNaWxpdGFyeSBTb2xkaWVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hZ21hUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNaWxpdGFyeSBTb2xkaWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1MzE2LjExNTcyMjY1NjMsIDEyLjI2MjgzMTY4NzkyNywgODUxNy4wMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1MzY5LjAwMDQ4ODI4MTMsIDYxLjI0MzUyNjQ1ODc0LCA4NTU2LjQ5MjE4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMzI1KSBvciAodjE5NyA8PSAzNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNaWxpdGFyeSBTcHkiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNaWxpdGFyeSBTcHkiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFnbWFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk1pbGl0YXJ5IFNweSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTMxNi4xMTU3MjI2NTYzLCAxMi4yNjI4MzE2ODc5MjcsIDg1MTcuMDAzOTA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTc4Ny4wMDI5MywgNzUuODI2MjYzNCwgODY1MS42OTkyMiwgMC44Mzg1OTA1NjIsIDAsIC0gMC41NDQ3NjIxOTQsIDAsIDEsIDAsIDAuNTQ0NzYyMTk0LCAwLCAwLjgzODU5MDU2Mik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAzNzUpIG9yICh2MTk3IDw9IDM5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZpc2htYW4gV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZpc2htYW4gV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXNobWFuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MTEyMi42NTIzNDM3NSwgMTguNDk3NDQyMjQ1NDgzLCAxNTY5LjM5OTc4MDI3MzQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDYwODQ0LjEwNTQ2ODc1LCA5OC40NjI4NzUzNjYyMTEsIDEyOTguMzk4NTU5NTcwMyk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAzMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgMTEuNjc5Njg3NSwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNDAwKSBvciAodjE5NyA8PSA0NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJGaXNobWFuIENvbW1hbmRvIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmlzaG1hbiBDb21tYW5kbyI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXNobWFuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIENvbW1hbmRvIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjExMjIuNjUyMzQzNzUsIDE4LjQ5NzQ0MjI0NTQ4MywgMTU2OS4zOTk3ODAyNzM0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2MTczOC4zOTg0Mzc1LCA2NC4yMDczMjExNjY5OTIsIDE0MzMuODM3NTI0NDE0MSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAzMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgMTEuNjc5Njg3NSwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTApIG9yICh2MTk3IDw9IDQ3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkdvZCdzIEd1YXJkIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiR29kJ3MgR3VhcmQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5RXhwMVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR29kJ3MgR3VhcmQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ3MjEuODYwMzUxNTYyNSwgODQ1LjMwMjk3ODUxNTYzLCAtIDE5NTMuODQ4OTk5MDIzNCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA0NjI4LjA0OTgwNDY4NzUsIDg2Ni45Mjg3NzE5NzI2NiwgLSAxOTMxLjIzNTIyOTQ5MjIpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMzAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNDYwNy44MjI3NSwgODcyLjU0MjQ4LCAtIDE2NjcuNTU2ODgpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA0NzUpIG9yICh2MTk3IDw9IDUyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNoYW5kYSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNoYW5kYSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAxUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGFuZGEiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDc4NjMuMTU5NjY3OTY4OCwgNTU0NS41MTkwNDI5Njg4LCAtIDM3OC40MjI2Njg0NTcwMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3Njg1LjE0NzQ2MDkzNzUsIDU2MDEuMDc1MTk1MzEyNSwgLSA0NDEuMzg4NzYzNDI3NzMpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMzAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNzg5NC42MTc2NzU3ODEzLCA1NTQ3LjE0MTYwMTU2MjUsIC0gMzgwLjI5MTE5ODczMDQ3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNTI1KSBvciAodjE5NyA8PSA1NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJSb3lhbCBTcXVhZCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlJveWFsIFNxdWFkIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreUV4cDJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlJveWFsIFNxdWFkIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA3OTAzLjM4MjgxMjUsIDU2MzUuOTg5NzQ2MDkzOCwgLSAxNDEwLjkyMzgyODEyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3NjU0LjI1MTQ2NDg0MzgsIDU2MzcuMTA3OTEwMTU2MywgLSAxNDA3Ljc1NTAwNDg4MjgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNTUwKSBvciAodjE5NyA8PSA2MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJSb3lhbCBTb2xkaWVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUm95YWwgU29sZGllciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJSb3lhbCBTb2xkaWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA3OTAzLjM4MjgxMjUsIDU2MzUuOTg5NzQ2MDkzOCwgLSAxNDEwLjkyMzgyODEyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3NzYwLjQxMDY0NDUzMTMsIDU2NzkuOTA3NzE0ODQzOCwgLSAxODg0LjgxMTI3OTI5NjkpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNjI1KSBvciAodjE5NyA8PSA2NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJHYWxsZXkgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiR2FsbGV5IFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR2FsbGV5IFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDUyNTguMjc4ODA4NTkzOCwgMzguNTI2OTMxNzYyNjk1LCA0MDUwLjA0NDkyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTU1Ny4xNjg0NTcwMzEzLCAxNTIuMzI3MTc4OTU1MDgsIDM5OTguNzc1ODc4OTA2Myk7CiAgICAgICAgZWxzZWlmICgodjE5NyA+PSA2NTApIG9yIChTZWxlY3RNb25zdGVyID09ICJHYWxsZXkgQ2FwdGFpbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdhbGxleSBDYXB0YWluIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZvdW50YWluUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJHYWxsZXkgQ2FwdGFpbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDUyNTguMjc4ODA4NTkzOCwgMzguNTI2OTMxNzYyNjk1LCA0MDUwLjA0NDkyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTY3Ny42NzcyNDYwOTM4LCA5Mi43ODYxMDk5MjQzMTYsIDQ5NjYuNjMyMzI0MjE4OCk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGlmIFNlYTIgdGhlbgogICAgICAgIGlmICgodjE5NyA9PSA3MDApIG9yICh2MTk3IDw9IDcyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlJhaWRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlJhaWRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUmFpZGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0MjcuNzI1Njc3NDkwMjMsIDcyLjk5NjM0NTUyMDAyLCAxODM1Ljk0MjYyNjk1MzEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDY4Ljg3NDU2NTEyNDUxMiwgOTMuNjM1NjQzMDA1MzcxLCAyNDI5LjY3NTI5Mjk2ODgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNzI1KSBvciAodjE5NyA8PSA3NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNZXJjZW5hcnkiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNZXJjZW5hcnkiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQXJlYTFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk1lcmNlbmFyeSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDI3LjcyNTY3NzQ5MDIzLCA3Mi45OTYzNDU1MjAwMiwgMTgzNS45NDI2MjY5NTMxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDg2NC44NTAwOTc2NTYyNSwgMTIyLjQ3MTA0NjQ0Nzc1LCAxNDUzLjE1MDUxMjY5NTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNzc1KSBvciAodjE5NyA8PSA3OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTd2FuIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlN3YW4gUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkFyZWEyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTd2FuIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYzNS42MTE1MTEyMzA0NywgNzMuMDk2MzUxNjIzNTM1LCA5MTcuODEyOTg4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEwNjUuMzY2OTQzMzU5NCwgMTM3LjY0MDEyMTQ1OTk2LCAxMzI0LjM3OTg4MjgxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gODAwKSBvciAodjE5NyA8PSA4NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJGYWN0b3J5IFN0YWZmIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmFjdG9yeSBTdGFmZiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRmFjdG9yeSBTdGFmZiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYzNS42MTE1MTEyMzA0NywgNzMuMDk2MzUxNjIzNTM1LCA5MTcuODEyOTg4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDUzMy4yMjA0NTg5ODQzOCwgMTI4LjQ2ODc2NTI1ODc5LCAzNTUuNjI2MTU5NjY3OTcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gODc1KSBvciAodjE5NyA8PSA4OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJNYXJpbmUgTGlldXRlbmFuIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFyaW5lIExpZXV0ZW5hbnQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIExpZXV0ZW5hbnQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDI0NDAuOTkzNDA4MjAzMSwgNzMuMDQxOTA4MjY0MTYsIC0gMzIxNy43MDgyNTE5NTMxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDI0ODkuMjYyMjA3MDMxMywgODQuNjEzNTk0MDU1MTc2LCAtIDMxNTEuODgzMDU2NjQwNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA5MDApIG9yICh2MTk3IDw9IDk0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1hcmluZSBDYXB0YWluIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFyaW5lIENhcHRhaW4iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIENhcHRhaW4iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDI0NDAuOTkzNDA4MjAzMSwgNzMuMDQxOTA4MjY0MTYsIC0gMzIxNy43MDgyNTE5NTMxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDIzMzUuMjAyNjM2NzE4OCwgNzkuNzg2NjU5MjQwNzIzLCAtIDMyNDUuODY3NDMxNjQwNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA5NTApIG9yICh2MTk3IDw9IDk3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlpvbWJpZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlpvbWJpZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJab21iaWVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlpvbWJpZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTQ5NC4zNDEzMDg1OTM4LCA0OC41MDU5MzE4NTQyNDgsIC0gNzk0LjU5MDk0MjM4MjgxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU1MzYuNDk3MDcwMzEyNSwgMTAxLjA4NTc3NzI4MjcxLCAtIDgzNS41OTA3NTkyNzczNCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA5NzUpIG9yICh2MTk3IDw9IDk5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlZhbXBpcmUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJWYW1waXJlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlpvbWJpZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiVmFtcGlyZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTQ5NC4zNDEzMDg1OTM4LCA0OC41MDU5MzE4NTQyNDgsIC0gNzk0LjU5MDk0MjM4MjgxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU4MDYuMTA5ODYzMjgxMywgMTYuNzIyNTI4NDU3NjQyLCAtIDExNjQuNDM4NDc2NTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMDAwKSBvciAodjE5NyA8PSAxMDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU25vdyBUcm9vcGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vdyBUcm9vcGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dNb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vdyBUcm9vcGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjA3LjA1OTYzMTM0NzY2LCA0MDEuNDQ3ODE0OTQxNDEsIC0gNTM3MC41NTQ2ODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1MzUuMjEwNTEwMjUzOTEsIDQzMi43NDIwOTU5NDcyNywgLSA1NDg0LjkxNjUwMzkwNjMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTA1MCkgb3IgKHYxOTcgPD0gMTA5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIldpbnRlciBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiV2ludGVyIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU25vd01vdW50YWluUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJXaW50ZXIgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYwNy4wNTk2MzEzNDc2NiwgNDAxLjQ0NzgxNDk0MTQxLCAtIDUzNzAuNTU0Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTIzNC40NDQ5NDYyODkxLCA0NTYuOTU0MTkzMTE1MjMsIC0gNTE3NC4xMzA4NTkzNzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTEwMCkgb3IgKHYxOTcgPD0gMTEyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkxhYiBTdWJvcmRpbmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkxhYiBTdWJvcmRpbmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJMYWIgU3Vib3JkaW5hdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDYwNjEuODQxNzk2ODc1LCAxNS45MjY2NzE5ODE4MTIsIC0gNDkwMi4wMzg1NzQyMTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU3MjAuNTU3NjE3MTg3NSwgNjMuMzA5NDcxMTMwMzcxLCAtIDQ3ODQuNjEwMzUxNTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMTI1KSBvciAodjE5NyA8PSAxMTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSG9ybmVkIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJIb3JuZWQgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJIb3JuZWQgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNjA2MS44NDE3OTY4NzUsIDE1LjkyNjY3MTk4MTgxMiwgLSA0OTAyLjAzODU3NDIxODgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNjI5Mi43NTE5NTMxMjUsIDkxLjE4MTk4Mzk0Nzc1NCwgLSA1NTAyLjY0OTkwMjM0MzgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTE3NSkgb3IgKHYxOTcgPD0gMTE5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1hZ21hIE5pbmphIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFnbWEgTmluamEiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRmlyZVNpZGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIk1hZ21hIE5pbmphIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1NDI5LjA0NzM2MzI4MTMsIDE1Ljk3NzU2NTc2NTM4MSwgLSA1Mjk3Ljk2MTQyNTc4MTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTQ2MS44Mzg4NjcxODc1LCAxMzAuMzYzNDc5NjE0MjYsIC0gNTgzNi40NzAyMTQ4NDM4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEyMDApIG9yICh2MTk3IDw9IDEyNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJMYXZhIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkxhdmEgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZpcmVTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJMYXZhIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTQyOS4wNDczNjMyODEzLCAxNS45Nzc1NjU3NjUzODEsIC0gNTI5Ny45NjE0MjU3ODEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDUyNTEuMTg4OTY0ODQzOCwgNTUuMTY0NTM1NTIyNDYxLCAtIDQ3NzQuNDA5NjY3OTY4OCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMjUwKSBvciAodjE5NyA8PSAxMjc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2hpcCBEZWNraGFuZCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNoaXAgRGVja2hhbmQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgRGVja2hhbmQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMDQwLjI5MjcyNDYwOTQsIDEyNS4wODI5MzE1MTg1NSwgMzI5MTEuMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTIxLjEyMzY1NzIyNjU2LCAxMjUuOTgzOTU1MzgzMywgMzMwODguMzI4MTI1KTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMjc1KSBvciAodjE5NyA8PSAxMjk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2hpcCBFbmdpbmVlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNoaXAgRW5naW5lZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgRW5naW5lZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMDQwLjI5MjcyNDYwOTQsIDEyNS4wODI5MzE1MTg1NSwgMzI5MTEuMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoODg2LjI4MTc5OTMxNjQxLCA0MC40Nzc5MDE0NTg3NCwgMzI4MDAuODMyMDMxMjUpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEzMDApIG9yICh2MTk3IDw9IDEzMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTaGlwIFN0ZXdhcmQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGlwIFN0ZXdhcmQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgU3Rld2FyZCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDk3MS40MjA2NTQyOTY4OCwgMTI1LjA4MjkzMTUxODU1LCAzMzI0NS41NDI5Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTQzLjg1NTA0MTUwMzkxLCAxMjkuNTgxODMyODg1NzQsIDMzNDQ0LjM2NzE4NzUpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEzMjUpIG9yICh2MTk3IDw9IDEzNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTaGlwIE9mZmljZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGlwIE9mZmljZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgT2ZmaWNlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDk3MS40MjA2NTQyOTY4OCwgMTI1LjA4MjkzMTUxODU1LCAzMzI0NS41NDI5Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTU1LjM4NDU4MjUxOTUzLCAxODEuMDgzMzU4NzY0NjUsIDMzMzMxLjg5MDYyNSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTM1MCkgb3IgKHYxOTcgPD0gMTM3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkFyY3RpYyBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQXJjdGljIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRnJvc3RRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkFyY3RpYyBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTY2OC4xMzcyMDcwMzEzLCAyOC4yMDI1MzE4MTQ1NzUsIC0gNjQ4NC42MDA1ODU5Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1OTM1LjQ1NDEwMTU2MjUsIDc3LjI2MDE2OTk4MjkxLCAtIDY0NzIuNzU2ODM1OTM3NSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNjUwOC41NTgxMDU0Njg4LCA4OS4wMzQ5OTYwMzI3MTUsIC0gMTMyLjgzOTUzODU3NDIyKSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTM3NSkgb3IgKHYxOTcgPD0gMTQyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNub3cgTHVya2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vdyBMdXJrZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRnJvc3RRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNub3cgTHVya2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTY2OC4xMzcyMDcwMzEzLCAyOC4yMDI1MzE4MTQ1NzUsIC0gNjQ4NC42MDA1ODU5Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1NjI4LjQ4MjQyMTg3NSwgNTcuNTc0OTk2OTQ4MjQyLCAtIDY2MTguMzQ4MTQ0NTMxMyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNDI1KSBvciAodjE5NyA8PSAxNDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2VhIFNvbGRpZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTZWEgU29sZGllciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3Jnb3R0ZW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNlYSBTb2xkaWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAzMDU0LjU4Mjc2MzY3MTksIDIzNi44NzIxMzEzNDc2NiwgLSAxMDE0Ny43OTAwMzkwNjMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMzE4NS4wMTUzODA4NTk0LCA1OC43ODkwODkyMDI4ODEsIC0gOTY2My42MDY0NDUzMTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID49IDE0NTApIG9yIChTZWxlY3RNb25zdGVyID09ICJXYXRlciBGaWdodGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiV2F0ZXIgRmlnaHRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3Jnb3R0ZW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIldhdGVyIEZpZ2h0ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDMwNTQuNTgyNzYzNjcxOSwgMjM2Ljg3MjEzMTM0NzY2LCAtIDEwMTQ3Ljc5MDAzOTA2Myk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAzMjYyLjkzMDE3NTc4MTMsIDI5OC42OTAzNjg2NTIzNCwgLSAxMDU1Mi41MjkyOTY4NzUpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBpZiBTZWEzIHRoZW4KICAgICAgICBpZiAoKHYxOTcgPT0gMTUwMCkgb3IgKHYxOTcgPD0gMTUyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBpcmF0ZSBNaWxsaW9uYWlyZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBpcmF0ZSBNaWxsaW9uYWlyZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJQaXJhdGVQb3J0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQaXJhdGUgTWlsbGlvbmFpcmUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ1MC4xMDQ2NDQ3NzUzOTA2LCAxMDcuNjgxNDU3NTE5NTMxMjUsIDU5NTAuNzI2MDc0MjE4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTkzLjk5MjI3OTA1MjczNDM4LCA1Ni4xMjUwMjY3MDI4ODA4NiwgNTc1NS43ODgwODU5Mzc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE1MjUpIG9yICh2MTk3IDw9IDE1NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJQaXN0b2wgQmlsbGlvbmFpcmUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQaXN0b2wgQmlsbGlvbmFpcmUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiUGlyYXRlUG9ydFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUGlzdG9sIEJpbGxpb25haXJlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0NTAuMTA0NjQ0Nzc1MzkwNiwgMTA3LjY4MTQ1NzUxOTUzMTI1LCA1OTUwLjcyNjA3NDIxODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE4OC4xNDQ2MjI4MDI3MzQzOCwgODQuNDk2MTMxODk2OTcyNjYsIDYzMzcuMDQxOTkyMTg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNTc1KSBvciAodjE5NyA8PSAxNTk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRHJhZ29uIENyZXcgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRyYWdvbiBDcmV3IFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRHJhZ29uQ3Jld1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRHJhZ29uIENyZXcgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDY3MzUuMTEwODM5ODQzNzUsIDEyNi45OTA0NjMyNTY4MzU5NCwgLSA3MTEuMDk3OTYxNDI1NzgxMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjYxNS4yMzMzOTg0Mzc1LCA1MC44NDc2NzkxMzgxODM1OTQsIC0gOTc4LjkzNDA4MjAzMTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE2MDApIG9yICh2MTk3IDw9IDE2MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJEcmFnb24gQ3JldyBBcmNoZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEcmFnb24gQ3JldyBBcmNoZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRHJhZ29uQ3Jld1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRHJhZ29uIENyZXcgQXJjaGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjczNS4xMTA4Mzk4NDM3NSwgMTI2Ljk5MDQ2MzI1NjgzNTk0LCAtIDcxMS4wOTc5NjE0MjU3ODEyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2ODE4LjU4OTM1NTQ2ODc1LCA0ODMuNzE4OTk0MTQwNjI1LCA1MTIuNzI2ODA2NjQwNjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE2MjUpIG9yICh2MTk3IDw9IDE2NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJIeWRyYSBFbmZvcmNlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkh5ZHJhIEVuZm9yY2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlZlbm9tQ3Jld1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSHlkcmEgRW5mb3JjZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1NDQ2Ljg3OTM5NDUzMTMsIDYwMS42Mjk0NTU1NjY0MSwgNzQ5LjQ1NjcyNjA3NDIyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg0NTQ3LjExNTIzNDM3NSwgMTAwMS42MDIwNTA3ODEyNSwgMzM0LjE5NTQ2NTA4Nzg5MDYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTY1MCkgb3IgKHYxOTcgPD0gMTY5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlZlbm9tb3VzIEFzc2FpbGFudCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlZlbm9tb3VzIEFzc2FpbGFudCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJWZW5vbUNyZXdRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlZlbm9tb3VzIEFzc2FpbGFudCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDU0NDYuODc5Mzk0NTMxMywgNjAxLjYyOTQ1NTU2NjQxLCA3NDkuNDU2NzI2MDc0MjIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDQ2MzcuODg1MjUzOTA2MjUsIDEwNzcuODU1OTU3MDMxMjUsIDg4Mi40MTgzOTU5OTYwOTM4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE3MDApIG9yICh2MTk3IDw9IDE3MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNYXJpbmUgQ29tbW9kb3JlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFyaW5lIENvbW1vZG9yZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYXJpbmVUcmVlSXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIENvbW1vZG9yZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDIxNzkuOTg4MjgxMjUsIDI4LjczMTIzOTMxODg0OCwgLSA2NzQwLjA1NTE3NTc4MTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDIxOTguMDA2MzQ3NjU2MywgMTI4LjcxMDc1NDM5NDUzLCAtIDcxMDkuNTA0Mzk0NTMxMyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNzI1KSBvciAodjE5NyA8PSAxNzc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWFyaW5lIFJlYXIgQWRtaXJhbCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1hcmluZSBSZWFyIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lVHJlZUlzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk1hcmluZSBSZWFyIEFkbWlyYWwiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygyMTc5Ljk4ODI4MTI1LCAyOC43MzEyMzkzMTg4NDgsIC0gNjc0MC4wNTUxNzU3ODEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygzMjk0LjMxNDIwODk4NDQsIDM4NS40MTEyNTQ4ODI4MSwgLSA3MDQ4LjYzNDI3NzM0MzgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTc3NSkgb3IgKHYxOTcgPD0gMTc5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZpc2htYW4gUmFpZGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmlzaG1hbiBSYWlkZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDMiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIFJhaWRlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTA1ODIuNzU5NzY1NjI1LCAzMzEuNzg4NDUyMTQ4NDQsIC0gODc1Ny42NjYwMTU2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTA1NTMuMjY4NTU0Njg4LCA1MjEuMzg0Mzk5NDE0MDYsIC0gODE3Ni45NDU4MDA3ODEzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE4MDApIG9yICh2MTk3IDw9IDE4MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJGaXNobWFuIENhcHRhaW4iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJGaXNobWFuIENhcHRhaW4iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDMiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIENhcHRhaW4iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEwNTgzLjA5OTYwOTM3NSwgMzMxLjc4ODQ1MjE0ODQ0LCAtIDg3NTkuNDYzODY3MTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMDc4OS40MDEzNjcxODgsIDQyNy4xODYzNzA4NDk2MSwgLSA5MTMxLjQ0MjM4MjgxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTgyNSkgb3IgKHYxOTcgPD0gMTg0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZvcmVzdCBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJGb3Jlc3QgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGb3Jlc3QgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMzIzMi42NjIxMDkzNzUsIDMzMi40MDM5NjExODE2NCwgLSA3NjI2LjQ4MTkzMzU5MzgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTM0ODkuMzk3NDYwOTM4LCA0MDAuMzAzNDk3MzE0NDUsIC0gNzc3MC4yNTE5NTMxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTg1MCkgb3IgKHYxOTcgPD0gMTg5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk15dGhvbG9naWNhbCBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNeXRob2xvZ2ljYWwgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNeXRob2xvZ2ljYWwgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMzIzMi42NjIxMDkzNzUsIDMzMi40MDM5NjExODE2NCwgLSA3NjI2LjQ4MTkzMzU5MzgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTM1MDguNjE2MjEwOTM4LCA1ODIuNDYyMjgwMjczNDQsIC0gNjk4NS4zMDM3MTA5Mzc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE5MDApIG9yICh2MTk3IDw9IDE5MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJKdW5nbGUgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSnVuZ2xlIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kMiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkp1bmdsZSBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEyNjgyLjA5NjY3OTY4OCwgMzkwLjg4NjUzNTY0NDUzLCAtIDk5MDIuMTI0MDIzNDM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMjI2Ny4xMDM1MTU2MjUsIDQ1OS43NTI2MjQ1MTE3MiwgLSAxMDI3Ny4yMDAxOTUzMTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTkyNSkgb3IgKHYxOTcgPD0gMTk3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk11c2tldGVlciBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNdXNrZXRlZXIgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTXVza2V0ZWVyIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTI2ODIuMDk2Njc5Njg4LCAzOTAuODg2NTM1NjQ0NTMsIC0gOTkwMi4xMjQwMjM0Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEzMjkxLjUwNzgxMjUsIDUyMC40NzMzODg2NzE4OCwgLSA5OTA0LjYzODY3MTg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxOTc1KSBvciAodjE5NyA8PSAxOTk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUmVib3JuIFNrZWxldG9uIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUmVib3JuIFNrZWxldG9uIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJSZWJvcm4gU2tlbGV0b24iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDk0ODAuODA3NjIsIDE0Mi4xMzA2NjEsIDU1NjYuMzczMDUsIC0gMC4wMDY1NTUwMzA1OSwgNC41Mjk1NDIzZS04LCAtIDAuOTk5OTc4NTQyLCAyLjA0OTIwNDdlLTgsIDEsIDQuNTE2MjA2OGUtOCwgMC45OTk5Nzg1NDIsIC0gMi4wMTk1NTY4ZS04LCAtIDAuMDA2NTU1MDMwNTkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gODc2MS43NzE0OCwgMTgzLjQzMTc0NywgNjE2OC4zMzMwMSwgMC45NzgwNzM1OTcsIC0gMC4wMDAwMTM5NTA3MzIsIC0gMC4yMDgyNTkwMTYsIC0gMC4wMDAwMDEwODA3MzkzLCAxLCAtIDAuMDAwMDcyMDYzMDMsIDAuMjA4MjU5MDE2LCAwLjAwMDA3MDcwODA0LCAwLjk3ODA3MzU5Nyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMDAwKSBvciAodjE5NyA8PSAyMDI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTGl2aW5nIFpvbWJpZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkxpdmluZyBab21iaWUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSGF1bnRlZFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkxpdmluZyBab21iaWUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDk0ODAuODA3NjIsIDE0Mi4xMzA2NjEsIDU1NjYuMzczMDUsIC0gMC4wMDY1NTUwMzA1OSwgNC41Mjk1NDIzZS04LCAtIDAuOTk5OTc4NTQyLCAyLjA0OTIwNDdlLTgsIDEsIDQuNTE2MjA2OGUtOCwgMC45OTk5Nzg1NDIsIC0gMi4wMTk1NTY4ZS04LCAtIDAuMDA2NTU1MDMwNTkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTAxMDMuNzUyOSwgMjM4LjU2NTk3OSwgNjE3OS43NTk3NywgMC45OTk0NzQyMjcsIDIuNzc1NDcxNGUtOCwgMC4wMzI0MjQwMzY0LCAtIDIuNTgwMDYzM2UtOCwgMSwgLSA2LjA2ODQ4NWUtOCwgLSAwLjAzMjQyNDAzNjQsIDUuOTgxNjM5ZS04LCAwLjk5OTQ3NDIyNyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMDI1KSBvciAodjE5NyA8PSAyMDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRGVtb25pYyBTb3VsIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRGVtb25pYyBTb3VsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEZW1vbmljIFNvdWwiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDk1MTYuOTkzMTY0MDYyNSwgMTc4LjAwNjUxNTUwMjkzLCA2MDc4LjQ2NTMzMjAzMTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gOTcxMi4wMzEyNSwgMjA0LjY5NTg5MjMzMzk4LCA2MTkzLjMyMjI2NTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMDUwKSBvciAodjE5NyA8PSAyMDc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUG9zZXNzZWQgTXVtbXkiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQb3Nlc3NlZCBNdW1teSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJIYXVudGVkUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUG9zZXNzZWQgTXVtbXkiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDk1MTYuOTkzMTY0MDYyNSwgMTc4LjAwNjUxNTUwMjkzLCA2MDc4LjQ2NTMzMjAzMTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gOTU0NS43NzYzNjcxODc1LCA2OS42MTk4OTU5MzUwNTksIDYzMzkuNTYxNTIzNDM3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMDc1KSBvciAodjE5NyA8PSAyMDk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUGVhbnV0IFNjb3V0IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUGVhbnV0IFNjb3V0IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk51dHNJc2xhbmRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlBlYW51dCBTY291dCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMjEwNS41MzE5OCwgMzcuMjQ5NTk5NSwgLSAxMDE5NS41MDg4LCAtIDAuNzY2MDYxNjY0LCAwLCAtIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAwLjY0Mjc2NzYwOCwgMCwgLSAwLjc2NjA2MTY2NCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyMTUwLjU4Nzg5MDYyNSwgMTIyLjQ5NzY3MzAzNDY3LCAtIDEwMzU4Ljk5NDE0MDYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMTAwKSBvciAodjE5NyA8PSAyMTI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUGVhbnV0IFByZXNpZGVudCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBlYW51dCBQcmVzaWRlbnQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTnV0c0lzbGFuZFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUGVhbnV0IFByZXNpZGVudCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMjEwNS41MzE5OCwgMzcuMjQ5NTk5NSwgLSAxMDE5NS41MDg4LCAtIDAuNzY2MDYxNjY0LCAwLCAtIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAwLjY0Mjc2NzYwOCwgMCwgLSAwLjc2NjA2MTY2NCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyMTUwLjU4Nzg5MDYyNSwgMTIyLjQ5NzY3MzAzNDY3LCAtIDEwMzU4Ljk5NDE0MDYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMTI1KSBvciAodjE5NyA8PSAyMTQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSWNlIENyZWFtIENoZWYiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJJY2UgQ3JlYW0gQ2hlZiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VDcmVhbUlzbGFuZFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSWNlIENyZWFtIENoZWYiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDgxOS4zNzY3MDksIDY0LjkyNTk3OTYsIC0gMTA5NjcuMjgzMiwgLSAwLjc2NjA2MTY2NCwgMCwgMC42NDI3Njc2MDgsIDAsIDEsIDAsIC0gMC42NDI3Njc2MDgsIDAsIC0gMC43NjYwNjE2NjQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNzg5Ljk0MTUyOCwgMjA5LjM4Mjg4OSwgLSAxMTAwOS45ODA1LCAtIDAuMDcwMzEwMTUzMSwgIi0wIiwgLSAwLjk5NzUyNTE1NiwgIi0wIiwgMS4wMDAwMDAxMiwgIi0wIiwgMC45OTc1MjUyNzUsIDAsIC0gMC4wNzAzMTAxNDU2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIxNTApIG9yICh2MTk3IDw9IDIxOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJJY2UgQ3JlYW0gQ29tbWFuZGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSWNlIENyZWFtIENvbW1hbmRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VDcmVhbUlzbGFuZFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSWNlIENyZWFtIENvbW1hbmRlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gODE5LjM3NjcwOSwgNjQuOTI1OTc5NiwgLSAxMDk2Ny4yODMyLCAtIDAuNzY2MDYxNjY0LCAwLCAwLjY0Mjc2NzYwOCwgMCwgMSwgMCwgLSAwLjY0Mjc2NzYwOCwgMCwgLSAwLjc2NjA2MTY2NCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3ODkuOTQxNTI4LCAyMDkuMzgyODg5LCAtIDExMDA5Ljk4MDUsIC0gMC4wNzAzMTAxNTMxLCAiLTAiLCAtIDAuOTk3NTI1MTU2LCAiLTAiLCAxLjAwMDAwMDEyLCAiLTAiLCAwLjk5NzUyNTI3NSwgMCwgLSAwLjA3MDMxMDE0NTYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjIwMCkgb3IgKHYxOTcgPD0gMjIyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNvb2tpZSBDcmFmdGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ29va2llIENyYWZ0ZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FrZVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkNvb2tpZSBDcmFmdGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyMDIyLjI5ODU4LCAzNi45Mjc1ODk0LCAtIDEyMDMwLjk3NjYsIC0gMC45NjEyNzM5MDksIDAsIC0gMC4yNzU1OTQ1OTIsIDAsIDEsIDAsIDAuMjc1NTk0NTkyLCAwLCAtIDAuOTYxMjczOTA5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDIzMjEuNzEyMTYsIDM2LjY5OTQ4MiwgLSAxMjIxNi43ODcxLCAtIDAuNzgwMDc0OTU0LCAwLCAwLjYyNTY4NjEwOSwgMCwgMSwgMCwgLSAwLjYyNTY4NjEwOSwgMCwgLSAwLjc4MDA3NDk1NCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMjI1KSBvciAodjE5NyA8PSAyMjQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ2FrZSBHdWFyZCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNha2UgR3VhcmQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FrZVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkNha2UgR3VhcmQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDIwMjIuMjk4NTgsIDM2LjkyNzU4OTQsIC0gMTIwMzAuOTc2NiwgLSAwLjk2MTI3MzkwOSwgMCwgLSAwLjI3NTU5NDU5MiwgMCwgMSwgMCwgMC4yNzU1OTQ1OTIsIDAsIC0gMC45NjEyNzM5MDkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTQxOC4xMTAxMSwgMzYuNjcxODk0MSwgLSAxMjI1NS43MzI0LCAwLjA2Nzc4NDQ4ODIsIDAsIDAuOTk3NzAwMDM2LCAwLCAxLCAwLCAtIDAuOTk3NzAwMDM2LCAwLCAwLjA2Nzc4NDQ4ODIpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjI1MCkgb3IgKHYxOTcgPD0gMjI3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkJha2luZyBTdGFmZiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkJha2luZyBTdGFmZiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQmFraW5nIFN0YWZmIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxOTI4LjMxNzYzLCAzNy43Mjk2NjM4LCAtIDEyODQwLjYyNiwgMC45NTEwNjg0MDEsICItMCIsIC0gMC4zMDg5ODA0NjUsIDAsIDEsICItMCIsIDAuMzA4OTgwNDY1LCAwLCAwLjk1MTA2ODQwMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxOTgwLjQzODQ4LCAzNi42NzE2NzY2LCAtIDEyOTgzLjg0MTgsIC0gMC4yNTQ0NDM3NjUsIDAsIC0gMC45NjcwODc1NjcsIDAsIDEsIDAsIDAuOTY3MDg3NTY3LCAwLCAtIDAuMjU0NDQzNzY1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIyNzUpIG9yICh2MTk3IDw9IDIyOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJIZWFkIEJha2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSGVhZCBCYWtlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSGVhZCBCYWtlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTkyOC4zMTc2MywgMzcuNzI5NjYzOCwgLSAxMjg0MC42MjYsIDAuOTUxMDY4NDAxLCAiLTAiLCAtIDAuMzA4OTgwNDY1LCAwLCAxLCAiLTAiLCAwLjMwODk4MDQ2NSwgMCwgMC45NTEwNjg0MDEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMjI1MS41NzkxLCA1Mi4yNzE0NjE1LCAtIDEzMDMzLjM5NjUsIC0gMC45OTE5NzEwMTYsIDAsIC0gMC4xMjY0NjYwOTUsIDAsIDEsIDAsIDAuMTI2NDY2MDk1LCAwLCAtIDAuOTkxOTcxMDE2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIzMDApIG9yICh2MTk3IDw9IDIzMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJDb2NvYSBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ29jb2EgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDaG9jUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ29jb2EgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDIzMS43NSwgMjMuOTAwMzAyOSwgLSAxMjIwMC4yOTIsIC0gMSwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgLSAxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxNjcuOTc4NTE2LCAyNi4yMjU0NjU4LCAtIDEyMjM4Ljg3NCwgLSAwLjkzOTcwMDk2MSwgMCwgMC4zNDE5OTgzNjksIDAsIDEsIDAsIC0gMC4zNDE5OTgzNjksIDAsIC0gMC45Mzk3MDA5NjEpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjMyNSkgb3IgKHYxOTcgPD0gMjM0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDaG9jUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMjMxLjc1LCAyMy45MDAzMDI5LCAtIDEyMjAwLjI5MiwgLSAxLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAtIDEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDcwMS4zMTIwNzMsIDI1LjU4MjQ5ODYsIC0gMTI3MDguMjE0OCwgLSAwLjM0MjA0MjY4NSwgMCwgLSAwLjkzOTY4NDM5MSwgMCwgMSwgMCwgMC45Mzk2ODQzOTEsIDAsIC0gMC4zNDIwNDI2ODUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjM1MCkgb3IgKHYxOTcgPD0gMjM3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlN3ZWV0IFRoaWVmIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU3dlZXQgVGhpZWYiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2hvY1F1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlN3ZWV0IFRoaWVmIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTUxLjE5ODI0MiwgMjMuODkwNzE0NiwgLSAxMjc3NC42MTcyLCAwLjQyMjU5Mjk5OCwgMCwgMC45MDYzMTk2MTgsIDAsIDEsIDAsIC0gMC45MDYzMTk2MTgsIDAsIDAuNDIyNTkyOTk4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE0MC4yNTgzMDEsIDI1LjU4MjQ5ODYsIC0gMTI2NTIuMzExNSwgMC4xNzM2MjQzMzcsICItMCIsIC0gMC45ODQ4MTE5MDIsIDAsIDEsICItMCIsIDAuOTg0ODExOTAyLCAwLCAwLjE3MzYyNDMzNyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMzc1KSBvciAodjE5NyA8PSAyNDAwKSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ2FuZHkgUmViZWwiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDYW5keSBSZWJlbCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDaG9jUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ2FuZHkgUmViZWwiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxNTEuMTk4MjQyLCAyMy44OTA3MTQ2LCAtIDEyNzc0LjYxNzIsIDAuNDIyNTkyOTk4LCAwLCAwLjkwNjMxOTYxOCwgMCwgMSwgMCwgLSAwLjkwNjMxOTYxOCwgMCwgMC40MjI1OTI5OTgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDQ3LjkyMzE0NTMsIDI1LjU4MjQ5ODYsIC0gMTMwMjkuMjQwMiwgLSAwLjgxOTE1NjA1MSwgMCwgLSAwLjU3MzU3MTI2NSwgMCwgMSwgMCwgMC41NzM1NzEyNjUsIDAsIC0gMC44MTkxNTYwNTEpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjQwMCkgb3IgKHYxOTcgPD0gMjQyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNhbmR5IFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNhbmR5IFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYW5keVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkNhbmR5IFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTE0OS4zMjgsIDEzLjU3NTkwMzksIC0gMTQ0NDUuNjE0MywgLSAwLjE1NjQ0NjA5OSwgMCwgLSAwLjk4NzY4NjU3NCwgMCwgMSwgMCwgMC45ODc2ODY1NzQsIDAsIC0gMC4xNTY0NDYwOTkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTQzNy41NjM0OCwgMTcuMTQ4MTI4NSwgLSAxNDM4NS42OTM0LCAwLjE3MzYyNDMzNywgIi0wIiwgLSAwLjk4NDgxMTkwMiwgMCwgMSwgIi0wIiwgMC45ODQ4MTE5MDIsIDAsIDAuMTczNjI0MzM3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI0MjUpIG9yICh2MTk3IDw9IDI0NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTbm93IERlbW9uIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vdyBEZW1vbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYW5keVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNub3cgRGVtb24iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDExNDkuMzI4LCAxMy41NzU5MDM5LCAtIDE0NDQ1LjYxNDMsIC0gMC4xNTY0NDYwOTksIDAsIC0gMC45ODc2ODY1NzQsIDAsIDEsIDAsIDAuOTg3Njg2NTc0LCAwLCAtIDAuMTU2NDQ2MDk5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDkxNi4yMjI2NTYsIDE3LjE0ODEyODUsIC0gMTQ2MzguODEyNSwgMC44NjYwMDcyNjgsIDAsIDAuNTAwMDMxNDEyLCAwLCAxLCAwLCAtIDAuNTAwMDMxNDEyLCAwLCAwLjg2NjAwNzI2OCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNDUwKSBvciAodjE5NyA8PSAyNDc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSXNsZSBPdXRsYXciKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJJc2xlIE91dGxhdyI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSXNsZSBPdXRsYXciOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NTQ5Ljg5MDYyNSwgNTUuNjg2MzU1NTkwODIwMzEsIC0gMTc5LjkxMzYwNDczNjMyODEyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2MTYyLjgxOTMzNTkzNzUsIDExLjY4NjMzNzQ3MTAwODMsIC0gOTYuNDU0ODE4NzI1NTg1OTQpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjQ3NSkgb3IgKHYxOTcgPD0gMjQ5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIklzbGFuZCBCb3kiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJJc2xhbmQgQm95IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJJc2xhbmQgQm95IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjU0OS44OTA2MjUsIDU1LjY4NjM1NTU5MDgyMDMxLCAtIDE3OS45MTM2MDQ3MzYzMjgxMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjM1Ny4zMTI1LCAyMC42MzI4MjIwMzY3NDMxNjQsIDEwMDUuNjQ4OTI1NzgxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjUwMCkgb3IgKHYxOTcgPD0gMjUyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlN1bi1raXNzZWQgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlN1bi1raXNzZWQgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU3VuLWtpc3NlZCBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjU0MS4wMjE0ODQzNzUsIDU0Ljc3MDgxMjk4ODI4MTI1LCAxMDUxLjQ2MTE4MTY0MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjM1Ny4zMTI1LCAyMC42MzI4MjIwMzY3NDMxNjQsIDEwMDUuNjQ4OTI1NzgxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjUyNSkgb3IgKHYxOTcgPD0gMjU0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIklzbGUgQ2hhbXBpb24iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJJc2xlIENoYW1waW9uIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJJc2xlIENoYW1waW9uIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjU0MS4wMjE0ODQzNzUsIDU0Ljc3MDgxMjk4ODI4MTI1LCAxMDUxLjQ2MTE4MTY0MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjg0OC45NDE0MDYyNSwgMjEuNjg2MzM0NjA5OTg1MzUsIDEwNDEuNDQ5MDk2Njc5Njg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNTUwKSBvciAodjE5NyA8PSAyNTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2VycGVudCBIdW50ZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTZXJwZW50IEh1bnRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2VycGVudCBIdW50ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NjY1LjE5MTQwNjI1LCAxMDQuNTk2NDA1MDI5Mjk2ODgsIDE1NzkuNjk0MzM1OTM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjYyMS40MTQwNjI1LCAxMjEuNDA2MzExMDM1MTU2MjUsIDEyOTAuNjg4MTEwMzUxNTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNTc1KSBvciAodjE5NyA8PSAyNTk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2t1bGwgU2xheWVyIikgb3IgKHYxOTcgPT0gMjYwMCkpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2t1bGwgU2xheWVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDMiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTa3VsbCBTbGF5ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NjY1LjE5MTQwNjI1LCAxMDQuNTk2NDA1MDI5Mjk2ODgsIDE1NzkuNjk0MzM1OTM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjgxMS41NzAzMTI1LCA4NC42MjUyNDQxNDA2MjUsIDE1NDIuMjM1MTA3NDIxODc1KTsKICAgICAgICBlbmQKICAgIGVuZAplbmQKaWYgU2VhMSB0aGVuCiAgICB0YWJsZU1vbiA9IHsKICAgICAgICAiQmFuZGl0IiwKICAgICAgICAiTW9ua2V5IiwKICAgICAgICAiR29yaWxsYSIsCiAgICAgICAgIlBpcmF0ZSIsCiAgICAgICAgIkJydXRlIiwKICAgICAgICAiRGVzZXJ0IEJhbmRpdCIsCiAgICAgICAgIkRlc2VydCBPZmZpY2VyIiwKICAgICAgICAiU25vdyBCYW5kaXQiLAogICAgICAgICJTbm93bWFuIiwKICAgICAgICAiQ2hpZWYgUGV0dHkgT2ZmaWNlciIsCiAgICAgICAgIlNreSBCYW5kaXQiLAogICAgICAgICJEYXJrIE1hc3RlciIsCiAgICAgICAgIlByaXNvbmVyIiwKICAgICAgICAiRGFuZ2Vyb3VzIFByaXNvbmVyIiwKICAgICAgICAiVG9nYSBXYXJyaW9yIiwKICAgICAgICAiR2xhZGlhdG9yIiwKICAgICAgICAiTWlsaXRhcnkgU29sZGllciIsCiAgICAgICAgIk1pbGl0YXJ5IFNweSIsCiAgICAgICAgIkZpc2htYW4gV2FycmlvciIsCiAgICAgICAgIkZpc2htYW4gQ29tbWFuZG8iLAogICAgICAgICJHb2QncyBHdWFyZCIsCiAgICAgICAgIlNoYW5kYSIsCiAgICAgICAgIlJveWFsIFNxdWFkIiwKICAgICAgICAiUm95YWwgU29sZGllciIsCiAgICAgICAgIkdhbGxleSBQaXJhdGUiLAogICAgICAgICJHYWxsZXkgQ2FwdGFpbiIKICAgIH07CmVsc2VpZiBTZWEyIHRoZW4KICAgIHRhYmxlTW9uID0gewogICAgICAgICJSYWlkZXIiLAogICAgICAgICJNZXJjZW5hcnkiLAogICAgICAgICJTd2FuIFBpcmF0ZSIsCiAgICAgICAgIkZhY3RvcnkgU3RhZmYiLAogICAgICAgICJNYXJpbmUgTGlldXRlbmFudCIsCiAgICAgICAgIk1hcmluZSBDYXB0YWluIiwKICAgICAgICAiWm9tYmllIiwKICAgICAgICAiVmFtcGlyZSIsCiAgICAgICAgIlNub3cgVHJvb3BlciIsCiAgICAgICAgIldpbnRlciBXYXJyaW9yIiwKICAgICAgICAiTGFiIFN1Ym9yZGluYXRlIiwKICAgICAgICAiSG9ybmVkIFdhcnJpb3IiLAogICAgICAgICJNYWdtYSBOaW5qYSIsCiAgICAgICAgIkxhdmEgUGlyYXRlIiwKICAgICAgICAiU2hpcCBEZWNraGFuZCIsCiAgICAgICAgIlNoaXAgRW5naW5lZXIiLAogICAgICAgICJTaGlwIFN0ZXdhcmQiLAogICAgICAgICJTaGlwIE9mZmljZXIiLAogICAgICAgICJBcmN0aWMgV2FycmlvciIsCiAgICAgICAgIlNub3cgTHVya2VyIiwKICAgICAgICAiU2VhIFNvbGRpZXIiLAogICAgICAgICJXYXRlciBGaWdodGVyIgogICAgfTsKZWxzZWlmIFNlYTMgdGhlbgogICAgdGFibGVNb24gPSB7CiAgICAgICAgIlBpcmF0ZSBNaWxsaW9uYWlyZSIsCiAgICAgICAgIkRyYWdvbiBDcmV3IFdhcnJpb3IiLAogICAgICAgICJEcmFnb24gQ3JldyBBcmNoZXIiLAogICAgICAgICJIeWRyYSBFbmZvcmNlciIsCiAgICAgICAgIlZlbm9tb3VzIEFzc2FpbGFudCIsCiAgICAgICAgIk1hcmluZSBDb21tb2RvcmUiLAogICAgICAgICJNYXJpbmUgUmVhciBBZG1pcmFsIiwKICAgICAgICAiRmlzaG1hbiBSYWlkZXIiLAogICAgICAgICJGaXNobWFuIENhcHRhaW4iLAogICAgICAgICJGb3Jlc3QgUGlyYXRlIiwKICAgICAgICAiTXl0aG9sb2dpY2FsIFBpcmF0ZSIsCiAgICAgICAgIkp1bmdsZSBQaXJhdGUiLAogICAgICAgICJNdXNrZXRlZXIgUGlyYXRlIiwKICAgICAgICAiUmVib3JuIFNrZWxldG9uIiwKICAgICAgICAiTGl2aW5nIFpvbWJpZSIsCiAgICAgICAgIkRlbW9uaWMgU291bCIsCiAgICAgICAgIlBvc2Vzc2VkIE11bW15IiwKICAgICAgICAiUGVhbnV0IFNjb3V0IiwKICAgICAgICAiUGVhbnV0IFByZXNpZGVudCIsCiAgICAgICAgIkljZSBDcmVhbSBDaGVmIiwKICAgICAgICAiSWNlIENyZWFtIENvbW1hbmRlciIsCiAgICAgICAgIkNvb2tpZSBDcmFmdGVyIiwKICAgICAgICAiQ2FrZSBHdWFyZCIsCiAgICAgICAgIkJha2luZyBTdGFmZiIsCiAgICAgICAgIkhlYWQgQmFrZXIiLAogICAgICAgICJDb2NvYSBXYXJyaW9yIiwKICAgICAgICAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIiwKICAgICAgICAiU3dlZXQgVGhpZWYiLAogICAgICAgICJDYW5keSBSZWJlbCIsCiAgICAgICAgIkNhbmR5IFBpcmF0ZSIsCiAgICAgICAgIlNub3cgRGVtb24iLAogICAgICAgICJJc2xlIE91dGxhdyIsCiAgICAgICAgIklzbGFuZCBCb3kiLAogICAgICAgICJTdW4ta2lzc2VkIFdhcnJpb3IiLAogICAgICAgICJJc2xlIENoYW1waW9uIiwKICAgICAgICAiU2VycGVudCBIdW50ZXIiLAogICAgICAgICJTa3VsbCBTbGF5ZXIiCiAgICB9OwplbmQKaWYgU2VhMSB0aGVuCiAgICBBcmVhTGlzdCA9IHsKICAgICAgICAiSnVuZ2xlIiwKICAgICAgICAiQnVnZ3kiLAogICAgICAgICJEZXNlcnQiLAogICAgICAgICJTbm93IiwKICAgICAgICAiTWFyaW5lIiwKICAgICAgICAiU2t5IiwKICAgICAgICAiUHJpc29uIiwKICAgICAgICAiQ29sb3NzZXVtIiwKICAgICAgICAiTWFnbWEiLAogICAgICAgICJGaXNobWFuIiwKICAgICAgICAiU2t5IElzbGFuZCIsCiAgICAgICAgIkZvdW50YWluIgogICAgfTsKZWxzZWlmIFNlYTIgdGhlbgogICAgQXJlYUxpc3QgPSB7CiAgICAgICAgIkFyZWEgMSIsCiAgICAgICAgIkFyZWEgMiIsCiAgICAgICAgIlpvbWJpZSIsCiAgICAgICAgIk1hcmluZSIsCiAgICAgICAgIlNub3cgTW91bnRhaW4iLAogICAgICAgICJJY2UgZmlyZSIsCiAgICAgICAgIlNoaXAiLAogICAgICAgICJGcm9zdCIsCiAgICAgICAgIkZvcmdvdHRlbiIKICAgIH07CmVsc2VpZiBTZWEzIHRoZW4KICAgIEFyZWFMaXN0ID0gewogICAgICAgICJQaXJhdGUgUG9ydCIsCiAgICAgICAgIkFtYXpvbiIsCiAgICAgICAgIk1hcmluZSBUcmVlIiwKICAgICAgICAiRGVlcCBGb3Jlc3QiLAogICAgICAgICJIYXVudGVkIENhc3RsZSIsCiAgICAgICAgIk51dCBJc2xhbmQiLAogICAgICAgICJJY2UgQ3JlYW0gSXNsYW5kIiwKICAgICAgICAiQ2FrZSBJc2xhbmQiLAogICAgICAgICJDaG9jbyBJc2xhbmQiLAogICAgICAgICJDYW5keSBJc2xhbmQiLAogICAgICAgICJUaWtpIE91dHBvc3QiCiAgICB9OwplbmQKZnVuY3Rpb24gQ2hlY2tCb3NzUXVlc3QoKQogICAgaWYgU2VhMSB0aGVuCiAgICAgICAgaWYgKFNlbGVjdEJvc3MgPT0gIlRoZSBHb3JpbGxhIEtpbmciKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVGhlIEdvcmlsbGEgS2luZyI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlRoZSBHb3JyaWxhIEtpbmciOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkp1bmdsZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyLDAwMFxuNywwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDE2MDEuNjU1Mzk1NTA3OCwgMzYuODUyMTM0NzA0NTksIDE1My4zODgwOTIwNDEwMik7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTA4OC43NTk3NywgOC4xMzQ2Mzc4MywgLSA0ODguNTU5OTA2LCAtIDAuNzA3MTM0MjQ3LCAwLCAwLjcwNzA3OTI5MSwgMCwgMSwgMCwgLSAwLjcwNzA3OTI5MSwgMCwgLSAwLjcwNzEzNDI0Nyk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJCb2JieSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJCb2JieSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkJvYmJ5IjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJCdWdneVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kOCwwMDBcbjM1LDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMTE0MC4xNzYxNDc0NjA5LCA0Ljc1MjA0OTQ0NjEwNiwgMzgyNy40MDU3NjE3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxMDg3LjM3NjA5ODYzMjgsIDQ2Ljk0OTQwOTQ4NDg2MywgNDA0MC4xNDYyNDAyMzQ0KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlRoZSBTYXciKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVGhlIFNhdyI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlRoZSBTYXciOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDc4NC44OTcxNTU3NjE3MiwgNzIuNDI3MzgzNDIyODUyLCAxNjAzLjU4MjI3NTM5MDYpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiWWV0aSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJZZXRpIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiWWV0aSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiU25vd1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxMCwwMDBcbjE4MCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygxMzg2LjgwNzM3MzA0NjksIDg3LjI3Mjc4OTAwMTQ2NSwgLSAxMjk4LjM1NzY2NjAxNTYpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygxMjE4Ljc5NTY1NDI5NjksIDEzOC4wMTE4NDA4MjAzMSwgLSAxNDg4LjAyNjI0NTExNzIpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiTW9iIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJNb2IgTGVhZGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiTW9iIExlYWRlciI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMjg0NC43MzA3MTI4OTA2LCA3LjQxODA1MDI4OTE1NDEsIDUzNTYuNjcyMzYzMjgxMyk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJWaWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVmljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiVmljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJNYXJpbmVRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDI7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDEwLDAwMFxuMTgwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNTAzNi4yNDY1ODIwMzEzLCAyOC42Nzc4MzU0NjQ0NzgsIDQzMjQuNTY2NDA2MjUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDUwMDYuNTQ1NDEwMTU2MywgODguMDMyMDgxNjA0MDA0LCA0MzUzLjE2MjEwOTM3NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJTYWJlciBFeHBlcnQiKSB0aGVuCiAgICAgICAgICAgIE5hbWVCb3NzID0gIlNhYmVyIEV4cGVydCI7CiAgICAgICAgICAgIEJvc3NNb24gPSAiU2FiZXIgRXhwZXJ0IjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxNDU4Ljg5NTAyLCAyOS44ODcwMzM1LCAtIDUwLjYzMzU2NCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJXYXJkZW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiV2FyZGVuIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiV2FyZGVuIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJJbXBlbFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAxOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQ2LDAwMFxuODUwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTI3OC4wNDkzMiwgMi4xNTE2NzQ3NSwgOTQ0LjEwMTkyOSwgMC4yMjA1NDY5NjEsIC0gMC4wMDAwMDQ0OTk0NjQsIDAuOTc1Mzc2NDI3LCAtIDAuMDAwMDE5NTQxMjU4LCAxLCAwLjAwMDAwOTAzMTYyMSwgLSAwLjk3NTM3NjQyNywgLSAwLjAwMDAyMTA1MTk3NiwgMC4yMjA1NDY5NjEpOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTE5MS44NjEzMywgMi44NDAyMDY4NiwgNjg2LjQzODcyMSwgLSAwLjczMTM4NDYzNSwgMCwgMC42ODE5NjUxNzIsIDAsIDEsIDAsIC0gMC42ODE5NjUxNzIsIDAsIC0gMC43MzEzODQ2MzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ2hpZWYgV2FyZGVuIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkNoaWVmIFdhcmRlbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkNoaWVmIFdhcmRlbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSW1wZWxRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMjsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTAsMDAwXG4xLDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDUyMDYuOTI1NzgsIDAuOTk3NzUzMzgyLCA4MTQuOTc2NzQ2LCAwLjM0MjA0MTM0MywgLSAwLjAwMDYyOTE1Njc3LCAwLjkzOTY4NDc0OSwgMC4wMDE5MTY0NTM5NCwgMC45OTk5OTgxNTIsIC0gMC4wMDAwMjgwNDIyMzQsIC0gMC45Mzk2ODI5NjEsIDAuMDAxODEwNDU0MDYsIDAuMzQyMDQxOTM5KTsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDUxOTEuODYxMzMsIDIuODQwMjA2ODYsIDY4Ni40Mzg3MjEsIC0gMC43MzEzODQ2MzUsIDAsIDAuNjgxOTY1MTcyLCAwLCAxLCAwLCAtIDAuNjgxOTY1MTcyLCAwLCAtIDAuNzMxMzg0NjM1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlN3YW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiU3dhbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlN3YW4iOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkltcGVsUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuMSw2MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg1MzI1LjA5NjE5LCA3LjAzOTA2NTg0LCA3MTkuNTcwNjc5LCAtIDAuMzA5MDYwODEyLCAwLCAwLjk1MTA0MjIzNSwgMCwgMSwgMCwgLSAwLjk1MTA0MjIzNSwgMCwgLSAwLjMwOTA2MDgxMik7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1MTkxLjg2MTMzLCAyLjg0MDIwNjg2LCA2ODYuNDM4NzIxLCAtIDAuNzMxMzg0NjM1LCAwLCAwLjY4MTk2NTE3MiwgMCwgMSwgMCwgLSAwLjY4MTk2NTE3MiwgMCwgLSAwLjczMTM4NDYzNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJNYWdtYSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIk1hZ21hIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJNYWdtYSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJNYWdtYVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxNSwwMDBcbjIsODAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNTMxNC42MjIwNzAzMTI1LCAxMi4yNjI0MjA2NTQyOTcsIDg1MTcuMjc5Mjk2ODc1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA1NzY1Ljg5Njk3MjY1NjMsIDgyLjkyMDY0NjY2NzQ4LCA4NzE4LjMwNDY4NzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiRmlzaG1hbiBMb3JkIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkZpc2htYW4gTG9yZCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkZpc2htYW4gTG9yZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRmlzaG1hblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxNSwwMDBcbjQsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDYxMTIyLjY1MjM0Mzc1LCAxOC40OTc0NDIyNDU0ODMsIDE1NjkuMzk5NzgwMjczNCk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDYxMjYwLjE1MjM0Mzc1LCAzMC45NTA4ODE5NTgwMDgsIDExOTMuNDMyOTgzMzk4NCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJXeXNwZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiV3lzcGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiV3lzcGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJTa3lFeHAxUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuNCw4MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA3ODYxLjk0NzI2NTYyNSwgNTU0NS41MTc1NzgxMjUsIC0gMzc5Ljg1OTc0MTIxMDk0KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA3ODY2LjEzMzMwMDc4MTMsIDU1NzYuNDMxMTUyMzQzOCwgLSA1NDYuNzQ4MTY4OTQ1MzEpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiVGh1bmRlciBHb2QiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVGh1bmRlciBHb2QiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJUaHVuZGVyIEdvZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiU2t5RXhwMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyMCwwMDBcbjUsODAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNzkwMy4zODI4MTI1LCA1NjM1Ljk4OTc0NjA5MzgsIC0gMTQxMC45MjM4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDc5OTQuOTg0Mzc1LCA1NzYxLjAyNTM5MDYyNSwgLSAyMDg4LjY0Nzk0OTIxODgpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ3lib3JnIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkN5Ym9yZyI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkN5Ym9yZyI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRm91bnRhaW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjAsMDAwXG43LDUwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1MjU4LjI3ODgwODU5MzgsIDM4LjUyNjkzMTc2MjY5NSwgNDA1MC4wNDQ5MjE4NzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg2MDk0LjAyNDkwMjM0MzgsIDczLjc3MDA1MDA0ODgyOCwgMzgyNS43MzQ4NjMyODEzKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiSWNlIEFkbWlyYWwiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygxMjY2LjA4OTQ4LCAyNi4xNzU3OTQ2LCAtIDEzOTkuNTc2NzgsIC0gMC41NzM1OTkyMTksIDAsIC0gMC44MTkxMzY1NiwgMCwgMSwgMCwgMC44MTkxMzY1NiwgMCwgLSAwLjU3MzU5OTIxOSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJHcmV5YmVhcmQiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiR3JleWJlYXJkIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiR3JleWJlYXJkIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA1MDgxLjM0NTIxNDg0MzgsIDg1LjIyMTY0MTU0MDUyNywgNDI1Ny4zNTg4ODY3MTg4KTsKICAgICAgICBlbmQKICAgIGVuZAogICAgaWYgU2VhMiB0aGVuCiAgICAgICAgaWYgKFNlbGVjdEJvc3MgPT0gIkRpYW1vbmQiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiRGlhbW9uZCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkRpYW1vbmQiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkFyZWExUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDI1LDAwMFxuOSwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA0MjcuNTY2NjgwOTA4MiwgNzMuMzEzNzgxNzM4MjgxLCAxODM1LjQyMDg5ODQzNzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDE1NzYuNzE2Njc0ODA0NywgMTk4LjU5MjY1MTM2NzE5LCAxMy43MjQyODYwNzk0MDcpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiSmVyZW15IikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkplcmVteSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkplcmVteSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiQXJlYTJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjUsMDAwXG4xMSw1MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNjM2Ljc5OTQzODQ3NjU2LCA3My40MTM3ODc4NDE3OTcsIDkxOC4wMDQxNTAzOTA2Myk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDIwMDYuOTI2MTQ3NDYwOSwgNDQ4Ljk1NjY2NTAzOTA2LCA4NTMuOTgyODQ5MTIxMDkpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiRmFqaXRhIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkZhaml0YSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkZhaml0YSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiTWFyaW5lUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyNSwwMDBcbjE1LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDI0NDEuOTg2MzI4MTI1LCA3My4zNTkzNDQ0ODI0MjIsIC0gMzIxNy41MzI0NzA3MDMxKTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAyMTcyLjczOTk5MDIzNDQsIDEwMy4zMjIxNjY0NDI4NywgLSA0MDE1LjAyNTM5MDYyNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJEb24gU3dhbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJEb24gU3dhbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkRvbiBTd2FuIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoMjI4Ni4yMDA0Mzk0NTMxLCAxNS4xNzc4MzkyNzkxNzUsIDg2My44Mzg4NjcxODc1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlNtb2tlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiU21va2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlNtb2tlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkljZVNpZGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjAsMDAwXG4yNSwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA1NDI5LjA0NzM2MzI4MTMsIDE1Ljk3NzU2NTc2NTM4MSwgLSA1Mjk3Ljk2MTQyNTc4MTMpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDUyNzUuMTk4NzMwNDY4OCwgMjAuNzU3MjU3NDYxNTQ4LCAtIDUyNjAuNjY2OTkyMTg3NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJBd2FrZW5lZCBJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJBd2FrZW5lZCBJY2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkF3YWtlbmVkIEljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJGcm9zdFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyMCwwMDBcbjM2LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1NjY4Ljk3ODAyNzM0MzgsIDI4LjUxOTk4OTAxMzY3MiwgLSA2NDgzLjM1MjA1MDc4MTMpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg2NDAzLjU0Mzk0NTMxMjUsIDM0MC4yOTc2Njg0NTcwMywgLSA2ODk0LjU1OTU3MDMxMjUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiVGlkZSBLZWVwZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVGlkZSBLZWVwZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJUaWRlIEtlZXBlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRm9yZ290dGVuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDEyLDUwMFxuMzgsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMzA1My45ODE0NDUzMTI1LCAyMzcuMTg5NTQ0Njc3NzMsIC0gMTAxNDUuMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMzc5NS42NDIzMzM5ODQ0LCAxMDUuODg4NzcxMDU3MTMsIC0gMTE0MjEuMzA3NjE3MTg4KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkRhcmtiZWFyZCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJEYXJrYmVhcmQiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJEYXJrYmVhcmQiOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDM2NzcuMDgyMDMxMjUsIDYyLjc1MTkzNzg2NjIxMSwgLSAzMTQ0LjgzMzI1MTk1MzEpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ3Vyc2VkIENhcHRhaW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQ3Vyc2VkIENhcHRhaW4iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJDdXJzZWQgQ2FwdGFpbiI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDkxNi45Mjg1ODksIDE4MS4wOTI3NzMsIDMzNDIyKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIk9yZGVyIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIk9yZGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiT3JkZXIiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDYyMTcuMjAyMTQ4NDM3NSwgMjguMDQ3NjQ1NTY4ODQ4LCAtIDUwNTMuMTM1NzQyMTg3NSk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGlmIFNlYTMgdGhlbgogICAgICAgIGlmIChTZWxlY3RCb3NzID09ICJTdG9uZSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJTdG9uZSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlN0b25lIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJQaXJhdGVQb3J0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDI1LDAwMFxuNDAsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMjg5Ljc2NzA1OTMyNjE3LCA0My44MTkwMTE2ODgyMzIsIDU1NzkuOTM4NDc2NTYyNSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTAyNy42NTEyNDUxMTcyLCA5Mi40MDQxNzQ4MDQ2ODgsIDY1NzguODUzMDI3MzQzOCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJIeWRyYSBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiSHlkcmEgTGVhZGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiSHlkcmEgTGVhZGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJWZW5vbUNyZXdRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMzAsMDAwXG41MiwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTQ0NS45NTQxMDE1NjI1LCA2MDEuNjI5NDU1NTY2NDEsIDc1MS40Mzc5MjcyNDYwOSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDU1NDMuODYzMjgxMjUsIDY2OC45NzM5OTkwMjM0NCwgMTk5LjAzNDE3OTY4NzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiS2lsbyBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIktpbG8gQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIktpbG8gQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiTWFyaW5lVHJlZUlzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMzUsMDAwXG41NiwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoMjE3OS4zMDEwMjUzOTA2LCAyOC43MzEyMzkzMTg4NDgsIC0gNjczOS45NzQxMjEwOTM4KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoMjc2NC4yMjMzODg2NzE5LCA0MzIuNDYxNTQ3ODUxNTYsIC0gNzE0NC40NTgwMDc4MTI1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQ2FwdGFpbiBFbGVwaGFudCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkNhcHRhaW4gRWxlcGhhbnQiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkRlZXBGb3Jlc3RJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDQwLDAwMFxuNjcsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMTMyMzIuNjgyNjE3MTg4LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzYyNi4wMTE3MTg3NSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTMzNzYuNzU3ODEyNSwgNDMzLjI4Njg5NTc1MTk1LCAtIDgwNzEuMzkyNTc4MTI1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQmVhdXRpZnVsIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkJlYXV0aWZ1bCBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkRlZXBGb3Jlc3RJc2xhbmQyIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQ1MCwwMDBcbjcwLDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDEyNjgyLjA5NjY3OTY4OCwgMzkwLjg4NjUzNTY0NDUzLCAtIDk5MDIuMTI0MDIzNDM3NSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDUyODMuNjA5Mzc1LCAyMi41NjIyMzQ4Nzg1NCwgLSAxMTAuNzgyODUyMTcyODUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ2FrZSBRdWVlbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJDYWtlIFF1ZWVuIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQ2FrZSBRdWVlbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSWNlQ3JlYW1Jc2xhbmRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMzAsMDAwXG4xMTIsNTAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gODE5LjM3NjcwOSwgNjQuOTI1OTc5NiwgLSAxMDk2Ny4yODMyLCAtIDAuNzY2MDYxNjY0LCAwLCAwLjY0Mjc2NzYwOCwgMCwgMSwgMCwgLSAwLjY0Mjc2NzYwOCwgMCwgLSAwLjc2NjA2MTY2NCk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNjc4LjY0ODgwNCwgMzgxLjM1Mzk0MywgLSAxMTExNC4yMDEyLCAtIDAuOTA4NjQxODE1LCAwLjAwMTQ5Mjk0MzM4LCAwLjQxNzU3Mzc4LCAwLjAwODM3MTE0OTE5LCAwLjk5OTg1Nzg0MywgMC4wMTQ2NDA4OTI5LCAtIDAuNDE3NDkyNTY4LCAwLjAxNjc5ODg5ODYsIC0gMC45MDg1MjQ5OSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJMb25nbWEiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiTG9uZ21hIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiTG9uZ21hIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxMDIzOC44NzU5NzY1NjMsIDM4OS43OTEyOTAyODMyLCAtIDk1NDkuNzkzOTQ1MzEyNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJTb3VsIFJlYXBlciI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlNvdWwgUmVhcGVyIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA5NTI0Ljc4OTA2MjUsIDMxNS44MDQyOTA3NzE0OCwgNjY1NS43MTkyMzgyODEzKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gInJpcF9pbmRyYSBUcnVlIEZvcm0iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAicmlwX2luZHJhIFRydWUgRm9ybSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gInJpcF9pbmRyYSBUcnVlIEZvcm0iOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDU0MTUuMzkyMDg5ODQzOCwgNTA1Ljc0MTMzMzAwNzgxLCAtIDI4MTQuMDE2NjAxNTYyNSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmZ1bmN0aW9uIE1hdGVyaWFsTW9uKCkKICAgIGlmIChTZWxlY3RNYXRlcmlhbCA9PSAiUmFkaW9hY3RpdmUgTWF0ZXJpYWwiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJGYWN0b3J5IFN0YWZmIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygyOTUsIDczLCAtIDU2KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIk15c3RpYyBEcm9wbGV0IikgdGhlbgogICAgICAgIE1Nb24gPSAiV2F0ZXIgRmlnaHRlciI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAzMzg1LCAyMzksIC0gMTA1NDIpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiTWFnbWEgT3JlIikgdGhlbgogICAgICAgIGlmIFNlYTEgdGhlbgogICAgICAgICAgICBNTW9uID0gIk1pbGl0YXJ5IFNweSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNTgxNSwgODQsIDg4MjApOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMiB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiTWFnbWEgTmluamEiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDU0MjgsIDc4LCAtIDU5NTkpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkFuZ2VsIFdpbmdzIikgdGhlbgogICAgICAgIE1Nb24gPSAiR29kJ3MgR3VhcmQiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNDY5OCwgODQ1LCAtIDE5MTIpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSA3ODU5LjA5ODE0LCA1NTQ0LjE5MDQzLCAtIDM4MS40NzYxOTYpKS5NYWduaXR1ZGUgPj0gNTAwMCkgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDc4NTkuMDk4MTQsIDU1NDQuMTkwNDMsIC0gMzgxLjQ3NjE5NikpOwogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiTGVhdGhlciIpIHRoZW4KICAgICAgICBpZiBTZWExIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJCcnV0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTE0NSwgMTUsIDQzNTApOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMiB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiTWFyaW5lIENhcHRhaW4iOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDIwMTAuNTA1OTgxNDQ1MzEyNSwgNzMuMDAxMTU5NjY3OTY4NzUsIC0gMzMyNi42MjA4NDk2MDkzNzUpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMyB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiSnVuZ2xlIFBpcmF0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTE5NzUuNzg1MTU2MjUsIDMzMS43NzM0MDY5ODI0MjE5LCAtIDEwNjIwLjAzMDI3MzQzNzUpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIlNjcmFwIE1ldGFsIikgdGhlbgogICAgICAgIGlmIFNlYTEgdGhlbgogICAgICAgICAgICBNTW9uID0gIkJydXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMTQ1LCAxNSwgNDM1MCk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEyIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJTd2FuIFBpcmF0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDg3OCwgMTIyLCAxMjM1KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTMgdGhlbgogICAgICAgICAgICBNTW9uID0gIkp1bmdsZSBQaXJhdGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDEyMTA3LCAzMzIsIC0gMTA1NDkpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkZpc2ggVGFpbCIpIHRoZW4KICAgICAgICBpZiBTZWEzIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJGaXNobWFuIFJhaWRlciI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTA5OTMsIDMzMiwgLSA4OTQwKTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTEgdGhlbgogICAgICAgICAgICBNTW9uID0gIkZpc2htYW4gV2FycmlvciI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDYxMTIzLCAxOSwgMTU2OSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDUuMzQyMzQyMzc2NzA4OTg0LCAxODE5Ljc4NDE3OTY4NzUpKS5NYWduaXR1ZGUgPj0gMTcwMDApIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDUuMzQyMzQyMzc2NzA4OTg0LCAxODE5Ljc4NDE3OTY4NzUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJEZW1vbmljIFdpc3AiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJEZW1vbmljIFNvdWwiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gOTUwNywgMTcyLCA2MTU4KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIlZhbXBpcmUgRmFuZyIpIHRoZW4KICAgICAgICBNTW9uID0gIlZhbXBpcmUiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNjAzMywgNywgLSAxMzE3KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkNvbmp1cmVkIENvY29hIikgdGhlbgogICAgICAgIE1Nb24gPSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg2MjAuNjM0NDYwNDQ5MjE4OCwgNzguOTM2NDQ3MTQzNTU0NjksIC0gMTI1ODEuMzY5MTQwNjI1KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkRyYWdvbiBTY2FsZSIpIHRoZW4KICAgICAgICBNTW9uID0gIkRyYWdvbiBDcmV3IEFyY2hlciI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNjgyNy45MTQ1NTA3ODEyNSwgNjA5LjQxMjcxOTcyNjU2MjUsIDI1Mi4zNTM4MDU1NDE5OTIyKTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkd1bnBvd2RlciIpIHRoZW4KICAgICAgICBNTW9uID0gIlBpc3RvbCBCaWxsaW9uYWlyZSI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA0NjksIDc0LCA1OTA0KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkh5ZHJhIEVuZm9yY2VyIikgdGhlbgogICAgICAgIE1Nb24gPSAiSHlkcmEgRW5mb3JjZXIiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDQ1ODEuNTE3NTc4MTI1LCAxMDAxLjU1OTA4MjAzMTI1LCA3MDQuOTM3ODY2MjEwOTM3NSk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJWZW5vbW91cyBBc3NhaWxhbnQiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJWZW5vbW91cyBBc3NhaWxhbnQiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDQ4NzkuOTIwNDEwMTU2MjUsIDEwODkuNDYxNDI1NzgxMjUsIDExMDQuMDA4MzAwNzgxMjUpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiTWluaSBUdXNrIikgdGhlbgogICAgICAgIE1Nb24gPSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoKTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlSXNsYW5kRVNQKCkKICAgIGZvciB2NDI1LCB2NDI2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgSXNsYW5kRVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDI2Lk5hbWUgfj0gIlNlYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQyNjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMzAgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0MjYpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzMC5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzMC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTMwLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTMwLkFkb3JuZWUgPSB2NDI2OwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzMC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTM2ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTEzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LkZvbnQgPSAiR290aGFtQm9sZCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0MjZbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY0MjYuTmFtZSAuLiAiICAgXG4iIC4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MjYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQyNjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgIHY0MjY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIGlzbmlsKHYxOTgpCiAgICByZXR1cm4gdjE5OCA9PSBuaWwgOwplbmQKbG9jYWwgZnVuY3Rpb24gdjIwKHYxOTkpCiAgICByZXR1cm4gbWF0aC5mbG9vcih0b251bWJlcih2MTk5KSArIDAuNSk7CmVuZApOdW1iZXIgPSBtYXRoLnJhbmRvbSgxLCAxMDAwMDAwKTsKZnVuY3Rpb24gVXBkYXRlUGxheWVyQ2hhbXMoKQogICAgZm9yIHY0MjcsIHY0MjggaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIG5vdCBpc25pbCh2NDI4LkNoYXJhY3RlcikgdGhlbgogICAgICAgICAgICAgICAgaWYgRVNQUGxheWVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAobm90IGlzbmlsKHY0MjguQ2hhcmFjdGVyLkhlYWQpIGFuZCBub3QgdjQyOC5DaGFyYWN0ZXIuSGVhZDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTE0NiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQyOC5DaGFyYWN0ZXIuSGVhZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTQ2Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNDYuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE0Ni5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE0Ni5BZG9ybmVlID0gdjQyOC5DaGFyYWN0ZXIuSGVhZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNDYuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTE1MyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjExNDYpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5Gb250U2l6ZSA9ICJTaXplMTAiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHQgPSB2NDI4Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MjguQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDI4LlRlYW0gPT0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlRlYW0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDAsIDAsIDI1NCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQyOC5DaGFyYWN0ZXIuSGVhZFsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDI4Lk5hbWUgLi4gIiB8ICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MjguQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2VcbkhlYWx0aCA6ICIgLi4gdjIwKCh2NDI4LkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggKiAxMDApIC8gdjQyOC5DaGFyYWN0ZXIuSHVtYW5vaWQuTWF4SGVhbHRoKSAuLiAiJSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0MjguQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0MjguQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUNoZXN0Q2hhbXMoKQogICAgZm9yIHY0MjksIHY0MzAgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0MzAuTmFtZSwgIkNoZXN0IikgdGhlbgogICAgICAgICAgICAgICAgaWYgQ2hlc3RFU1AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0MzAuTmFtZSwgIkNoZXN0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQzMDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQ3NSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NzUuQWRvcm5lZSA9IHY0MzA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQ4MSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjE0NzUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDMwLk5hbWUgPT0gIkNoZXN0MSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTA5LCAxMDksIDEwOSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dCA9ICJDaGVzdCAxIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzMC5OYW1lID09ICJDaGVzdDIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE3MywgMTU4LCAyMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dCA9ICJDaGVzdCAyIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzMC5OYW1lID09ICJDaGVzdDMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDg1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dCA9ICJDaGVzdCAzIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY0MzBbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzMC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQzMDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQzMDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlRGV2aWxDaGFtcygpCiAgICBmb3IgdjQzMSwgdjQzMiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgRGV2aWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDMyLk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQzMi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTE2NCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQzMi5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE2NC5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY0LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNjQuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNjQuQWRvcm5lZSA9IHY0MzIuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE2NC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTcxID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTE2NCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dCA9IHY0MzIuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0MzIuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0MzIuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMyLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDMyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDMyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUZsb3dlckNoYW1zKCkKICAgIGZvciB2NDMzLCB2NDM0IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiAoKHY0MzQuTmFtZSA9PSAiRmxvd2VyMiIpIG9yICh2NDM0Lk5hbWUgPT0gIkZsb3dlcjEiKSkgdGhlbgogICAgICAgICAgICAgICAgaWYgRmxvd2VyRVNQIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQzNDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTgzID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDM0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODMuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4My5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTgzLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTgzLkFkb3JuZWUgPSB2NDM0OwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4My5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTg5ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTE4Myk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzNC5OYW1lID09ICJGbG93ZXIxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dCA9ICJCbHVlIEZsb3dlciIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0MzQuTmFtZSA9PSAiRmxvd2VyMiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHQgPSAiUmVkIEZsb3dlciIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0MzRbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzNC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDM0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDM0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVSZWFsRnJ1aXRDaGFtcygpCiAgICBmb3IgdjQzNSwgdjQzNiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5BcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDM2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDM2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkwNyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQzNi5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5MDcuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5MDcuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MDcuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTA3LkFkb3JuZWUgPSB2NDM2LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTA3LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTE0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTA3KTsKICAgICAgICAgICAgICAgICAgICB2OTE0LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5MTQuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5MTQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHQgPSB2NDM2Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQzNi5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzNi5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzNi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQzNi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQzNi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY0MzcsIHY0MzggaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuUGluZWFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0Mzg6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY0MzguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTI2ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDM4LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHY5MjYuQWRvcm5lZSA9IHY0MzguSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHY5MjYuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MzMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHY5MjYpOwogICAgICAgICAgICAgICAgICAgIHY5MzMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2OTMzLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MzMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2OTMzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHY5MzMuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2OTMzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDE3NCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5UZXh0ID0gdjQzOC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDM4LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0MzguSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0MzguTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzguSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0MzguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0MzguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NDM5LCB2NDQwIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkJhbmFuYVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDQwOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDQwLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk0NSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0MC5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5NDUuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5NDUuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NDUuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTQ1LkFkb3JuZWUgPSB2NDQwLkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTQ1LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTUyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTQ1KTsKICAgICAgICAgICAgICAgICAgICB2OTUyLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5NTIuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5NTIuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTUyLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTUyLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTUsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NTIuVGV4dCA9IHY0NDAuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0MC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDQwLkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDQwLk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQwLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDQwLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDQwLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVJc2xhbmRFU1AoKQogICAgZm9yIHY0NDEsIHY0NDIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBJc2xhbmRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NDIuTmFtZSB+PSAiU2VhIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDQyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTIwMCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0Mik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjAwLk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjAwLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuQWRvcm5lZSA9IHY0NDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjAwLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMDYgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuRm9udCA9ICJHb3RoYW1Cb2xkIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcsIDIzNiwgMjQwKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NDJbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY0NDIuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQyLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NDI6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDQyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBpc25pbCh2MjAwKQogICAgcmV0dXJuIHYyMDAgPT0gbmlsIDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYyMCh2MjAxKQogICAgcmV0dXJuIG1hdGguZmxvb3IodG9udW1iZXIodjIwMSkgKyAwLjUpOwplbmQKTnVtYmVyID0gbWF0aC5yYW5kb20oMSwgMTAwMDAwMCk7CmZ1bmN0aW9uIFVwZGF0ZVBsYXllckNoYW1zKCkKICAgIGZvciB2NDQzLCB2NDQ0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBub3QgaXNuaWwodjQ0NC5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIEVTUFBsYXllciB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdCBpc25pbCh2NDQ0LkNoYXJhY3Rlci5IZWFkKSBhbmQgbm90IHY0NDQuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMTYgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NDQuQ2hhcmFjdGVyLkhlYWQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIxNi5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjE2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMTYuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMTYuQWRvcm5lZSA9IHY0NDQuQ2hhcmFjdGVyLkhlYWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjE2LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMjMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjE2KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0ID0gdjQ0NC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ0LkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ0NC5UZWFtID09IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5UZWFtKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygwLCAyNTUsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NDQuQ2hhcmFjdGVyLkhlYWRbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ0NC5OYW1lIC4uICIgfCAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ0LkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlXG5IZWFsdGggOiAiIC4uIHYyMCgodjQ0NC5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoICogMTAwKSAvIHY0NDQuQ2hhcmFjdGVyLkh1bWFub2lkLk1heEhlYWx0aCkgLi4gIiUiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDQ0LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDQ0LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVDaGVzdENoYW1zKCkKICAgIGZvciB2NDQ1LCB2NDQ2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDQ2Lk5hbWUsICJDaGVzdCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIENoZXN0RVNQIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDQ2Lk5hbWUsICJDaGVzdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NDY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE0OTcgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NDYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDk3LkFkb3JuZWUgPSB2NDQ2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE1MDMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxNDk3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ0Ni5OYW1lID09ICJDaGVzdDEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwOSwgMTA5LCAxMDkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHQgPSAiQ2hlc3QgMSIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NDYuTmFtZSA9PSAiQ2hlc3QyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNzMsIDE1OCwgMjEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHQgPSAiQ2hlc3QgMiIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NDYuTmFtZSA9PSAiQ2hlc3QzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHQgPSAiQ2hlc3QgMyIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NDQ2WyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NDYuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ2LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0NDY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0NDY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZURldmlsQ2hhbXMoKQogICAgZm9yIHY0NDcsIHY0NDggaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIERldmlsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjQ0OC5OYW1lLCAiRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NDguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMzQgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NDguSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMzQuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIzNC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjM0LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjM0LkFkb3JuZWUgPSB2NDQ4LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMzQuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI0MSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyMzQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHQgPSB2NDQ4Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDguSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDQ4LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDQ4Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0OC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ0OC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQ0OC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVGbG93ZXJDaGFtcygpCiAgICBmb3IgdjQ0OSwgdjQ1MCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgKCh2NDUwLk5hbWUgPT0gIkZsb3dlcjIiKSBvciAodjQ1MC5OYW1lID09ICJGbG93ZXIxIikpIHRoZW4KICAgICAgICAgICAgICAgIGlmIEZsb3dlckVTUCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NTA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI1MyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjUzLk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTMuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1My5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1My5BZG9ybmVlID0gdjQ1MDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTMuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI1OSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyNTMpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NTAuTmFtZSA9PSAiRmxvd2VyMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHQgPSAiQmx1ZSBGbG93ZXIiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDUwLk5hbWUgPT0gIkZsb3dlcjIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0ID0gIlJlZCBGbG93ZXIiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDUwWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NTAuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQ1MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ1MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlUmVhbEZydWl0Q2hhbXMoKQogICAgZm9yIHY0NTEsIHY0NTIgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQ1MjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjQ1Mi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5NjQgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NTIuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2OTY0Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2OTY0LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTY0LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjk2NC5BZG9ybmVlID0gdjQ1Mi5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjk2NC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk3MSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjk2NCk7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHY5NzEuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2OTcxLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2OTcxLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHY5NzEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHY5NzEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0ID0gdjQ1Mi5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUyLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0NTIuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NTIuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTIuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NTIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NTIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NDUzLCB2NDU0IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLlBpbmVhcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDU0OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDU0LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk4MyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ1NC5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5ODMuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5ODMuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5ODMuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTgzLkFkb3JuZWUgPSB2NDU0LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTgzLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTkwID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTgzKTsKICAgICAgICAgICAgICAgICAgICB2OTkwLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5OTAuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5OTAuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTkwLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTkwLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAxNzQsIDApOwogICAgICAgICAgICAgICAgICAgIHY5OTAuVGV4dCA9IHY0NTQuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1NC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDU0LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDU0Lk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDU0LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDU0LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDU0LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjQ1NSwgdjQ1NiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5CYW5hbmFTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQ1NjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjQ1Ni5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDAyID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDU2LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDIuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHYxMDAyLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTAwMi5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHYxMDAyLkFkb3JuZWUgPSB2NDU2LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2MTAwMi5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMDkgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMDAyKTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHYxMDA5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1NSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dCA9IHY0NTYuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1Ni5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDU2LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDU2Lk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDU2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDU2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDU2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIE1vYkVTUCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjgyMiwgdjgyMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODIzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjgyMzpGaW5kRmlyc3RDaGlsZCgiTW9iRWFwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNzIgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNzMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuUGFyZW50ID0gdjgyMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuQWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLk5hbWUgPSAiTW9iRWFwIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLkxpZ2h0SW5mbHVlbmNlID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIuNSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5QYXJlbnQgPSB2MTM3MjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3LCAyMzYsIDI0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5UZXh0LlNpemUgPSAzNTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDIxID0gbWF0aC5mbG9vcigoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgyMy5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2ODIzLk1vYkVhcC5UZXh0TGFiZWwuVGV4dCA9IHY4MjMuTmFtZSAuLiAiLSIgLi4gdjEwMjEgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGZvciB2ODI0LCB2ODI1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4MjU6RmluZEZpcnN0Q2hpbGQoIk1vYkVhcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjgyNS5Nb2JFYXA6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBTZWFFU1AgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4MjYsIHY4MjcgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5TZWFCZWFzdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODI3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjgyNzpGaW5kRmlyc3RDaGlsZCgiU2VhZXNwcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzkxID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzkyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLlBhcmVudCA9IHY4Mjc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLkFjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5OYW1lID0gIlNlYWVzcHMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuTGlnaHRJbmZsdWVuY2UgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMi41LCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLlBhcmVudCA9IHYxMzkxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcsIDIzNiwgMjQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLlRleHQuU2l6ZSA9IDM1OwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMjMgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODI3Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHY4MjcuU2VhZXNwcy5UZXh0TGFiZWwuVGV4dCA9IHY4MjcuTmFtZSAuLiAiLSIgLi4gdjEwMjMgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGZvciB2ODI4LCB2ODI5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuU2VhQmVhc3RzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgyOTpGaW5kRmlyc3RDaGlsZCgiU2VhZXNwcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjgyOS5TZWFlc3BzOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgTnBjRVNQIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODMwLCB2ODMxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4MzE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2ODMxOkZpbmRGaXJzdENoaWxkKCJOcGNFc3BlcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDEwID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDExID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLlBhcmVudCA9IHY4MzE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLkFjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5OYW1lID0gIk5wY0VzcGVzIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLkxpZ2h0SW5mbHVlbmNlID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIuNSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5QYXJlbnQgPSB2MTQxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3LCAyMzYsIDI0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5UZXh0LlNpemUgPSAzNTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDI1ID0gbWF0aC5mbG9vcigoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgzMS5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2ODMxLk5wY0VzcGVzLlRleHRMYWJlbC5UZXh0ID0gdjgzMS5OYW1lIC4uICItIiAuLiB2MTAyNSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZm9yIHY4MzIsIHY4MzMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgzMzpGaW5kRmlyc3RDaGlsZCgiTnBjRXNwZXMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY4MzMuTnBjRXNwZXM6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKZnVuY3Rpb24gaXNuaWwodjIwMikKICAgIHJldHVybiB2MjAyID09IG5pbCA7CmVuZApsb2NhbCBmdW5jdGlvbiB2MjAodjIwMykKICAgIHJldHVybiBtYXRoLmZsb29yKHRvbnVtYmVyKHYyMDMpICsgMC41KTsKZW5kCk51bWJlciA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDApOwpmdW5jdGlvbiBVcGRhdGVJc2xhbmRNaXJhZ2VFU1AoKQogICAgZm9yIHY0NTcsIHY0NTggaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBNaXJhZ2VJc2xhbmRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NTguTmFtZSA9PSAiTWlyYWdlIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ1ODpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyNzAgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NTgpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3MC5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3MC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLkFkb3JuZWUgPSB2NDU4OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3MC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjc2ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTI3MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LkZvbnQgPSAiQ29kZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ1OFsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ1OC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTguUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDU4OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQ1ODpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlQXVyYUVTUCgpCiAgICBmb3IgdjQ1OSwgdjQ2MCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIEF1cmFFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NjAuTmFtZSA9PSAiTWFzdGVyIG9mIEVuaGFuY2VtZW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDYwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI4NiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjg2Lk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjg2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuQWRvcm5lZSA9IHY0NjA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjg2LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyOTIgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjg2KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDYwWydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDYwLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ2MC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NjA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDYwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVMU0RFU1AoKQogICAgZm9yIHY0NjEsIHY0NjIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBMQURFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NjIuTmFtZSA9PSAiTGVnZW5kYXJ5IFN3b3JkIERlYWxlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ2MjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMDIgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NjIpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwMi5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwMi5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLkFkb3JuZWUgPSB2NDYyOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwMi5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzA4ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTMwMik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LkZvbnQgPSAiQ29kZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ2MlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ2Mi5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NjIuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDYyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQ2MjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlR2VhRVNQKCkKICAgIGZvciB2NDYzLCB2NDY0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgR2VhckVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ2NC5OYW1lID09ICJNZXNoUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ2NDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMTggPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NjQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMxOC5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMxOC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4LkFkb3JuZWUgPSB2NDY0OwogICAgICAgICAgICAgICAgICAgICAgICB2MTMxOC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzI0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTMxOCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LkZvbnQgPSAiQ29kZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ2NFsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ2NC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NjQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDY0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQ2NDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVHdlZW4yKHYyMDQpCiAgICBsb2NhbCB2MjA1ID0gKHYyMDQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZTsKICAgIGxvY2FsIHYyMDYgPSAzNTA7CiAgICBpZiAodjIwNSA+PSAzNTApIHRoZW4KICAgICAgICB2MjA2ID0gMzUwOwogICAgZW5kCiAgICBsb2NhbCB2MjA3ID0gVHdlZW5JbmZvLm5ldyh2MjA1IC8gdjIwNiwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpOwogICAgbG9jYWwgdjIwOCA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCwgdjIwNywgewogICAgICAgIENGcmFtZSA9IHYyMDQKICAgIH0pOwogICAgdjIwODpQbGF5KCk7CiAgICBpZiBfRy5DYW5jZWxUd2VlbjIgdGhlbgogICAgICAgIHYyMDg6Q2FuY2VsKCk7CiAgICBlbmQKICAgIF9HLkNsaXAyID0gdHJ1ZTsKICAgIHdhaXQodjIwNSAvIHYyMDYpOwogICAgX0cuQ2xpcDIgPSBmYWxzZTsKZW5kCmZ1bmN0aW9uIEJUUFoodjIwOSkKICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjA5OwogICAgdGFzay53YWl0KCk7CiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIwOTsKZW5kClR3ZWVuU3BlZWQgPSAzNTA7CmZ1bmN0aW9uIFR3ZWVuKHYyMTEpCiAgICBsb2NhbCB2MjEyID0gKHYyMTEuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZTsKICAgIGxvY2FsIHYyMTMgPSBUd2VlblNwZWVkOwogICAgaWYgKHYyMTIgPj0gMzUwKSB0aGVuCiAgICAgICAgdjIxMyA9IFR3ZWVuU3BlZWQ7CiAgICBlbmQKICAgIGxvY2FsIHYyMTQgPSBUd2VlbkluZm8ubmV3KHYyMTIgLyB2MjEzLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhcik7CiAgICBsb2NhbCB2MjE1ID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LCB2MjE0LCB7CiAgICAgICAgQ0ZyYW1lID0gdjIxMQogICAgfSk7CiAgICB2MjE1OlBsYXkoKTsKICAgIGlmIF9HLlN0b3BUd2VlbiB0aGVuCiAgICAgICAgdjIxNTpDYW5jZWwoKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gQ2FuY2VsVHdlZW4odjIxNikKICAgIGlmIG5vdCB2MjE2IHRoZW4KICAgICAgICBfRy5TdG9wVHdlZW4gPSB0cnVlOwogICAgICAgIHdhaXQoKTsKICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgIHdhaXQoKTsKICAgICAgICBfRy5TdG9wVHdlZW4gPSBmYWxzZTsKICAgIGVuZAplbmQKZnVuY3Rpb24gRXF1aXBUb29sKHYyMTcpCiAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodjIxNykgdGhlbgogICAgICAgIGxvY2FsIHY1NzAgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodjIxNyk7CiAgICAgICAgd2FpdCgpOwogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHY1NzApOwogICAgZW5kCmVuZApzcGF3bihmdW5jdGlvbigpCiAgICBsb2NhbCB2MjE4ID0gZ2V0cmF3bWV0YXRhYmxlKGdhbWUpOwogICAgbG9jYWwgdjIxOSA9IHYyMTguX19uYW1lY2FsbDsKICAgIHNldHJlYWRvbmx5KHYyMTgsIGZhbHNlKTsKICAgIHYyMTguX19uYW1lY2FsbCA9IG5ld2NjbG9zdXJlKGZ1bmN0aW9uKC4uLikKICAgICAgICBsb2NhbCB2NDY1ID0gZ2V0bmFtZWNhbGxtZXRob2QoKTsKICAgICAgICBsb2NhbCB2NDY2ID0gewogICAgICAgICAgICAuLi4KICAgICAgICB9OwogICAgICAgIGlmICh0b3N0cmluZyh2NDY1KSA9PSAiRmlyZVNlcnZlciIpIHRoZW4KICAgICAgICAgICAgaWYgKHRvc3RyaW5nKHY0NjZbMV0pID09ICJSZW1vdGVFdmVudCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmICgodG9zdHJpbmcodjQ2NlsyXSkgfj0gInRydWUiKSBhbmQgKHRvc3RyaW5nKHY0NjZbMl0pIH49ICJmYWxzZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgX0cuVXNlU2tpbGwgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSh2NDY2WzJdKSA9PSAidmVjdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjQ2NlsyXSA9IFBvc2l0aW9uU2tpbGxNYXN0ZXJ5RGV2aWxGcnVpdDsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjQ2NlsyXSA9IENGcmFtZS5uZXcoUG9zaXRpb25Ta2lsbE1hc3RlcnlEZXZpbEZydWl0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2MjE5KHVucGFjayh2NDY2KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIHYyMTkoLi4uKTsKICAgIGVuZCk7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiAoX0cuQXV0b0V2b1JhY2Ugb3IgX0cuQ2FzdGxlUmFpZCBvciBfRy5Db2xsZWN0QXp1cmUgb3IgX0cuVHdlZW5Ub0tpdHN1bmUgb3IgX0cuR2hvc3RTaGlwIG9yIF9HLlNoaXAgb3IgX0cuQXV0b19Ib2x5X1RvcmNoIG9yIF9HLlRlbGVwb3J0UGx5IG9yIF9HLkF1dG9fU2VhMyBvciBfRy5BdXRvX1NlYTIgb3IgX0cuVHdlZW5mcnVpdCBvciBfRy5BdXRvRmlzaENyZXcgb3IgX0cuQXV0b19TYWJlciBvciBfRy5BdXRvU2hhcmsgb3IgX0cuQXV0b19XYXJkZW4gb3IgX0cuQXV0b19SYWluYm93SGFraSBvciBBdXRvRmFybVJhY2Ugb3IgX0cuQXV0b1F1ZXN0UmFjZSBvciBBdXRvX0xhdyBvciBBdXRvVHVzaGl0YSBvciBfRy5BdXRvSG9seVRvcmNoIG9yIF9HLkF1dG9UZXJyb3JzaGFyayBvciBfRy5mYXJtcGlyYW55YSBvciBfRy5BdXRvX011c2tldGVlckhhdCBvciBfRy5BdXRvX09ic2VydmF0aW9uVjIgb3IgX0cuQXV0b05lYXIgb3IgX0cuQXV0b19Qb2xlVjEgb3IgX0cuQXV0b19CdWRkeSBvciBfRy5FY3RvcGxhc20gb3IgQXV0b0V2b1JhY2Ugb3IgQXV0b0JhcnRpbG8gb3IgX0cuQXV0b19DYW52YW5kZXIgb3IgX0cuQXV0b0xldmVsIG9yIF9HLkF1dG9fRHVhbEthdGFuYSBvciBBdXRvX1F1ZXN0X1lhbWFfMyBvciBBdXRvX1F1ZXN0X1lhbWFfMiBvciBBdXRvX1F1ZXN0X1lhbWFfMSBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMSBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMiBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMyBvciBfRy5DbGlwMiBvciBfRy5BdXRvX1JlZ29rdSBvciBfRy5BdXRvQm9uZSBvciBfRy5BdXRvQm9uZU5vUXVlc3Qgb3IgX0cuQXV0b0Jvc3Mgb3IgQXV0b0Zhcm1NYXNEZXZpbEZydWl0IG9yIEF1dG9IYWxsb3dTeWN0aGUgb3IgQXV0b1R1c2hpdGEgb3IgX0cuQ2FrZVByaW5jZSBvciBfRy5BdXRvX1NrdWxsR3VpdGFyIG9yIF9HLkF1dG9GYXJtU3dhbiBvciBfRy5Eb3VnaEtpbmcgb3IgX0cuQXV0b0VsaXRlb3Igb3IgQXV0b05leHRJc2xhbmQgb3IgTXVza2V0ZWVyIG9yIF9HLkF1dG9NYXRlcmlhbCBvciBBdXRvRmFybVJhY2VRdWVzdCBvciBfRy5GYWN0b3J5IG9yIF9HLkF1dG9fU2F3IG9yIF9HLkF1dG9Gcm96ZW5EaW1lbnNpb24gb3IgX0cuQXV0b0tpbGxUcmlhbCBvciBfRy5BdXRvVXBncmFkZSBvciBfRy5Ud2VlblRvRnJvemVuRGltZW5zaW9uKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkJvZHlDbGlwIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY4ODcgPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIpOwogICAgICAgICAgICAgICAgICAgIHY4ODcuTmFtZSA9ICJCb2R5Q2xpcCI7CiAgICAgICAgICAgICAgICAgICAgdjg4Ny5QYXJlbnQgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDsKICAgICAgICAgICAgICAgICAgICB2ODg3Lk1heEZvcmNlID0gVmVjdG9yMy5uZXcoMTAwMDAwLCAxMDAwMDAsIDEwMDAwMCk7CiAgICAgICAgICAgICAgICAgICAgdjg4Ny5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIDAsIDApOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJCb2R5Q2xpcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgKF9HLkF1dG9Fdm9SYWNlIG9yIF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgX0cuQXV0b19Ta3VsbEd1aXRhciBvciBfRy5DYXN0bGVSYWlkIG9yIF9HLkNvbGxlY3RBenVyZSBvciBfRy5Ud2VlblRvS2l0c3VuZSBvciBfRy5BdXRvX1NlYTMgb3IgX0cuQXV0b19TZWEyIG9yIF9HLkdob3N0U2hpcCBvciBfRy5TaGlwIG9yIF9HLkF1dG9fSG9seV9Ub3JjaCBvciBfRy5UZWxlcG9ydFBseSBvciBfRy5Ud2VlbmZydWl0IG9yIF9HLkF1dG9fU2FiZXIgb3IgX0cuQXV0b19Qb2xlVjEgb3IgX0cuQXV0b19NdXNrZXRlZXJIYXQgb3IgX0cuQXV0b0Zpc2hDcmV3IG9yIF9HLkF1dG9TaGFyayBvciBBdXRvRmFybVJhY2Ugb3IgX0cuQXV0b1F1ZXN0UmFjZSBvciBfRy5BdXRvX1dhcmRlbiBvciBBdXRvX0xhdyBvciBfRy5BdXRvX0R1YWxLYXRhbmEgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzEgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzIgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzMgb3IgQXV0b1R1c2hpdGEgb3IgX0cuQXV0b0hvbHlUb3JjaCBvciBfRy5BdXRvX0J1ZGR5IG9yIF9HLkF1dG9UZXJyb3JzaGFyayBvciBfRy5mYXJtcGlyYW55YSBvciBBdXRvX1F1ZXN0X1lhbWFfMyBvciBfRy5BdXRvX09ic2VydmF0aW9uVjIgb3IgQXV0b19RdWVzdF9ZYW1hXzIgb3IgQXV0b19RdWVzdF9ZYW1hXzEgb3IgX0cuQXV0b05lYXIgb3IgX0cuRWN0b3BsYXNtIG9yIEF1dG9Fdm9SYWNlIG9yIF9HLkF1dG9LaWxsVHJpYWwgb3IgQXV0b0JhcnRpbG8gb3IgX0cuQXV0b19SZWdva3Ugb3IgX0cuQXV0b0xldmVsIG9yIF9HLkNsaXAyIG9yIF9HLkF1dG9Cb25lIG9yIF9HLkF1dG9fQ2FudmFuZGVyIG9yIF9HLkF1dG9Cb25lTm9RdWVzdCBvciBfRy5BdXRvQm9zcyBvciBfRy5BdXRvX1NhdyBvciBBdXRvRmFybU1hc0RldmlsRnJ1aXQgb3IgQXV0b0hhbGxvd1N5Y3RoZSBvciBBdXRvVHVzaGl0YSBvciBfRy5DYWtlUHJpbmNlIG9yIF9HLkRvdWdoS2luZyBvciBfRy5BdXRvRmFybVN3YW4gb3IgX0cuQXV0b0VsaXRlb3Igb3IgQXV0b05leHRJc2xhbmQgb3IgTXVza2V0ZWVyIG9yIF9HLkF1dG9NYXRlcmlhbCBvciBfRy5GYWN0b3J5IG9yIF9HLkF1dG9Gcm96ZW5EaW1lbnNpb24gb3IgQXV0b0Zhcm1SYWNlUXVlc3Qgb3IgX0cuQXV0b1VwZ3JhZGUgb3IgX0cuVHdlZW5Ub0Zyb3plbkRpbWVuc2lvbikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4MzQsIHY4MzUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgzNTpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODM1LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKZW5kKTsKdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTdHVuIikgdGhlbgogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuU3R1bi5DaGFuZ2VkOmNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTdHVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuU3R1bi5WYWx1ZSA9IDA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmZ1bmN0aW9uIENoZWNrTWF0ZXJpYWwodjIyMSkKICAgIGZvciB2NDY3LCB2NDY4IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdldEludmVudG9yeSIpKSBkbwogICAgICAgIGlmICh0eXBlKHY0NjgpID09ICJ0YWJsZSIpIHRoZW4KICAgICAgICAgICAgaWYgKHY0NjguVHlwZSA9PSAiTWF0ZXJpYWwiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ2OC5OYW1lID09IHYyMjEpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjQ2OC5Db3VudDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIDA7CmVuZApmdW5jdGlvbiBHZXRXZWFwb25JbnZlbnRvcnkodjIyMikKICAgIGZvciB2NDY5LCB2NDcwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdldEludmVudG9yeSIpKSBkbwogICAgICAgIGlmICh0eXBlKHY0NzApID09ICJ0YWJsZSIpIHRoZW4KICAgICAgICAgICAgaWYgKHY0NzAuVHlwZSA9PSAiU3dvcmQiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ3MC5OYW1lID09IHYyMjIpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIGZhbHNlOwplbmQKbG9jYWwgdjIxID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOwpmdW5jdGlvbiBGaW5kRW5lbWllc0luUmFuZ2UodjIyMywgdjIyNCkKICAgIGxvY2FsIHYyMjUgPSAodjIxLkNoYXJhY3RlciBvciB2MjEuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpKTpHZXRQaXZvdCgpLlBvc2l0aW9uOwogICAgbG9jYWwgdjIyNiA9IG5pbDsKICAgIGZvciB2NDcxLCB2NDcyIGluIGlwYWlycyh2MjI0KSBkbwogICAgICAgIGlmIChub3QgdjQ3MjpHZXRBdHRyaWJ1dGUoIklzQm9hdCIpIGFuZCB2NDcyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSBhbmQgKHY0NzIuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjY3MSA9IHY0NzI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKTsKICAgICAgICAgICAgaWYgKHY2NzEgYW5kICgodjIyNSAtIHY2NzEuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA2MCkpIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDcyIH49IHYyMS5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodjIyMywgewogICAgICAgICAgICAgICAgICAgICAgICB2NDcyLAogICAgICAgICAgICAgICAgICAgICAgICB2NjcxCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdjIyNiA9IHY2NzE7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NDczLCB2NDc0IGluIGlwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGlmICh2NDc0LkNoYXJhY3RlciBhbmQgKHY0NzQgfj0gdjIxKSkgdGhlbgogICAgICAgICAgICBsb2NhbCB2NjcyID0gdjQ3NC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKTsKICAgICAgICAgICAgaWYgKHY2NzIgYW5kICgodjIyNSAtIHY2NzIuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA2MCkpIHRoZW4KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh2MjIzLCB7CiAgICAgICAgICAgICAgICAgICAgdjQ3NC5DaGFyYWN0ZXIsCiAgICAgICAgICAgICAgICAgICAgdjY3MgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2MjI2ID0gdjY3MjsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiB2MjI2OwplbmQKZnVuY3Rpb24gR2V0RXF1aXBwZWRUb29sKCkKICAgIGxvY2FsIHYyMjcgPSB2MjEuQ2hhcmFjdGVyOwogICAgaWYgbm90IHYyMjcgdGhlbgogICAgICAgIHJldHVybiBuaWw7CiAgICBlbmQKICAgIGZvciB2NDc1LCB2NDc2IGluIGlwYWlycyh2MjI3OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQ3NjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIHJldHVybiB2NDc2OwogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gbmlsOwplbmQKZnVuY3Rpb24gQXR0YWNrTm9Db29sRG93bigpCiAgICBsb2NhbCB2MjI4ID0ge307CiAgICBsb2NhbCB2MjI5ID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCk7CiAgICBsb2NhbCB2MjMwID0gRmluZEVuZW1pZXNJblJhbmdlKHYyMjgsIHYyMjkpOwogICAgaWYgbm90IHYyMzAgdGhlbgogICAgICAgIHJldHVybjsKICAgIGVuZAogICAgbG9jYWwgdjIzMSA9IEdldEVxdWlwcGVkVG9vbCgpOwogICAgaWYgbm90IHYyMzEgdGhlbgogICAgICAgIHJldHVybjsKICAgIGVuZAogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHY0NzcgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik7CiAgICAgICAgbG9jYWwgdjQ3OCA9IHY0Nzc6V2FpdEZvckNoaWxkKCJNb2R1bGVzIik6V2FpdEZvckNoaWxkKCJOZXQiKTpXYWl0Rm9yQ2hpbGQoIlJFL1JlZ2lzdGVyQXR0YWNrIik7CiAgICAgICAgbG9jYWwgdjQ3OSA9IHY0Nzc6V2FpdEZvckNoaWxkKCJNb2R1bGVzIik6V2FpdEZvckNoaWxkKCJOZXQiKTpXYWl0Rm9yQ2hpbGQoIlJFL1JlZ2lzdGVySGl0Iik7CiAgICAgICAgaWYgKCMgdjIyOCA+IDApIHRoZW4KICAgICAgICAgICAgdjQ3ODpGaXJlU2VydmVyKDFlLTkpOwogICAgICAgICAgICB2NDc5OkZpcmVTZXJ2ZXIodjIzMCwgdjIyOCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICB0YXNrLndhaXQoMWUtOSk7CiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKVHlwZSA9IDE7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIChUeXBlID09IDEpIHRoZW4KICAgICAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldygwLCA0MCwgMCk7CiAgICAgICAgZWxzZWlmIChUeXBlID09IDIpIHRoZW4KICAgICAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldygtIDQwLCA0MCwgMCk7CiAgICAgICAgZWxzZWlmIChUeXBlID09IDMpIHRoZW4KICAgICAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldyg0MCwgNDAsIDApOwogICAgICAgIGVsc2VpZiAoVHlwZSA9PSA0KSB0aGVuCiAgICAgICAgICAgIFBvcyA9IENGcmFtZS5uZXcoMCwgNDAsIDQwKTsKICAgICAgICBlbHNlaWYgKFR5cGUgPT0gNSkgdGhlbgogICAgICAgICAgICBQb3MgPSBDRnJhbWUubmV3KDAsIDQwLCAtIDQwKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBUeXBlID0gMTsKICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgVHlwZSA9IDI7CiAgICAgICAgd2FpdCgwLjIpOwogICAgICAgIFR5cGUgPSAzOwogICAgICAgIHdhaXQoMC4yKTsKICAgICAgICBUeXBlID0gNDsKICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgVHlwZSA9IDU7CiAgICAgICAgd2FpdCgwLjIpOwogICAgZW5kCmVuZCk7CmZ1bmN0aW9uIEF1dG9IYWtpKCkKICAgIGlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhhc0J1c28iKSB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnVzbyIpOwogICAgZW5kCmVuZApmdW5jdGlvbiB0byh2MjMyKQogICAgcmVwZWF0CiAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkNoYW5nZVN0YXRlKDE1KTsKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIzMjsKICAgICAgICB0YXNrLndhaXQoKTsKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIzMjsKICAgIHVudGlsICh2MjMyLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMjAwMAplbmQKZnVuY3Rpb24gdG8odjIzMykKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBpZiAoKCh2MjMzLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPj0gMjAwMCkgYW5kIG5vdCBBdXRvX1JhaWQgYW5kIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgIGlmIChOYW1lTW9uID09ICJGaXNobWFuUXVlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDExLjY3OTY4NzUsIDE4MTkuNzg0MTc5Njg3NSkpOwogICAgICAgICAgICBlbHNlaWYgKE1vbiA9PSAiR29kJ3MgR3VhcmQiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNDYwNy44MjI3NSwgODcyLjU0MjQ4LCAtIDE2NjcuNTU2ODgpKTsKICAgICAgICAgICAgZWxzZWlmIChOYW1lTW9uID09ICJTa3lFeHAxUXVlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNzg5NC42MTc2NzU3ODEzLCA1NTQ3LjE0MTYwMTU2MjUsIC0gMzgwLjI5MTE5ODczMDQ3KSk7CiAgICAgICAgICAgIGVsc2VpZiAoTmFtZU1vbiA9PSAiU2hpcFF1ZXN0MSIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZWxzZWlmIChOYW1lTW9uID09ICJTaGlwUXVlc3QyIikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbHNlaWYgKE5hbWVNb24gPT0gIkZyb3N0UXVlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNjUwOC41NTgxMDU0Njg4LCA4OS4wMzQ5OTYwMzI3MTUsIC0gMTMyLjgzOTUzODU3NDIyKSk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMzM7CiAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjA1KTsKICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQ6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjMzOwogICAgICAgICAgICAgICAgdW50aWwgKCh2MjMzLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAyNTAwKSBhbmQgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCkKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKbG9jYWwgdjIyID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKTsKbG9jYWwgdjIzID0gSW5zdGFuY2UubmV3KCJJbWFnZUJ1dHRvbiIpOwpsb2NhbCB2MjQgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIik7CmxvY2FsIHYyNSA9IEluc3RhbmNlLm5ldygiUGFydGljbGVFbWl0dGVyIik7CmxvY2FsIHYyNiA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik7Cgp2MjIuUGFyZW50ID0gZ2FtZS5Db3JlR3VpOwp2MjIuWkluZGV4QmVoYXZpb3IgPSBFbnVtLlpJbmRleEJlaGF2aW9yLlNpYmxpbmc7Cgp2MjMuUGFyZW50ID0gdjIyOwp2MjMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpOwp2MjMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNQp2MjMuQm9yZGVyU2l6ZVBpeGVsID0gMDsKdjIzLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMTIwODMzMzM3IC0gMC4xLCAwLCAwLjA5NTI4OTA4MTMgKyAwLjAxLCAwKTsKdjIzLlNpemUgPSBVRGltMi5uZXcoMCwgNTAsIDAsIDUwKTsKdjIzLkRyYWdnYWJsZSA9IHRydWU7CnYyMy5JbWFnZSA9ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTczNDM3NTY5NTY2OTg2IjsKCnYyNC5QYXJlbnQgPSB2MjM7CnYyNC5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygxLCAwKTsKCnYyNS5QYXJlbnQgPSB2MjM7CnYyNS5MaWdodEVtaXNzaW9uID0gMTsKdjI1LlNpemUgPSBOdW1iZXJTZXF1ZW5jZS5uZXcoewogICAgTnVtYmVyU2VxdWVuY2VLZXlwb2ludC5uZXcoMCwgMC4xKSwKICAgIE51bWJlclNlcXVlbmNlS2V5cG9pbnQubmV3KDEsIDApCn0pOwp2MjUuTGlmZXRpbWUgPSBOdW1iZXJSYW5nZS5uZXcoMC41LCAxKTsKdjI1LlJhdGUgPSAwOwp2MjUuU3BlZWQgPSBOdW1iZXJSYW5nZS5uZXcoNSwgMTApOwp2MjUuQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ldyhDb2xvcjMuZnJvbVJHQigyNTUsIDg1LCAyNTUpLCBDb2xvcjMuZnJvbVJHQig4NSwgMjU1LCAyNTUpKTsKCmxvY2FsIHY0NyA9IHYyNjpDcmVhdGUodjIzLCBUd2VlbkluZm8ubmV3KDAuNSwgRW51bS5FYXNpbmdTdHlsZS5RdWFkLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICBSb3RhdGlvbiA9IDAKfSk7CgotLSDwn5+iIFRvZ2dsZSBzdGF0ZQpsb2NhbCB0b2dnbGVkID0gdHJ1ZQoKdjIzLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpCiAgICB2MjUuUmF0ZSA9IDEwMDsKICAgIHRhc2suZGVsYXkoMSwgZnVuY3Rpb24oKQogICAgICAgIHYyNS5SYXRlID0gMDsKICAgIGVuZCk7CgogICAgdjQ3OlBsYXkoKTsKICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCBFbnVtLktleUNvZGUuRW5kLCBmYWxzZSwgZ2FtZSk7CgogICAgdjQ3LkNvbXBsZXRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICB2MjMuUm90YXRpb24gPSAwOwogICAgZW5kKTsKCiAgICBpZiBub3QgdG9nZ2xlZCB0aGVuCiAgICAgICAgLS0gQuG6rXQgdHLhuqFuZyB0aMOhaTogdG8gKyB0cuG6r25nIMSR4bq3YwogICAgICAgIHRvZ2dsZWQgPSB0cnVlCiAgICAgICAgdjIzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwCiAgICAgICAgdjIzLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsMjU1LDI1NSkKICAgICAgICBsb2NhbCB2MjM1ID0gdjI2OkNyZWF0ZSh2MjMsIFR3ZWVuSW5mby5uZXcoMC4yLCBFbnVtLkVhc2luZ1N0eWxlLkJvdW5jZSwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwgewogICAgICAgICAgICBTaXplID0gVURpbTIubmV3KDAsIDYwLCAwLCA2MCkKICAgICAgICB9KTsKICAgICAgICB2MjM1OlBsYXkoKQogICAgZWxzZQogICAgICAgIC0tIFThuq90IHRy4bqhbmcgdGjDoWk6IG5o4buPICsgdHJvbmcgbmjhurkKICAgICAgICB0b2dnbGVkID0gZmFsc2UKICAgICAgICB2MjMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgIHYyMy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LDI1NSwyNTUpCiAgICAgICAgbG9jYWwgdjQ4MyA9IHYyNjpDcmVhdGUodjIzLCBUd2VlbkluZm8ubmV3KDAuMiwgRW51bS5FYXNpbmdTdHlsZS5Cb3VuY2UsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHsKICAgICAgICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCA1MCwgMCwgNTApCiAgICAgICAgfSk7CiAgICAgICAgdjQ4MzpQbGF5KCkKICAgIGVuZAplbmQpCgotLSB4b8OhIGVmZmVjdCBt4bq3YyDEkeG7i25oCmlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5FZmZlY3QuQ29udGFpbmVyOkZpbmRGaXJzdENoaWxkKCJEZWF0aCIpIHRoZW4KICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5FZmZlY3QuQ29udGFpbmVyLkRlYXRoOkRlc3Ryb3koKTsKZW5kCmlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5FZmZlY3QuQ29udGFpbmVyOkZpbmRGaXJzdENoaWxkKCJSZXNwYXduIikgdGhlbgogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXIuUmVzcGF3bjpEZXN0cm95KCk7CmVuZAp2MTYuSG9tZTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiVGlrIFRvayIsCiAgICBEZXNjcmlwdGlvbiA9ICJDbGljayhDb3B5KSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBzZXRjbGlwYm9hcmQoImh0dHBzOi8vd3d3LnRpa3Rvay5jb20vQG5ndV9yb2Jsb3g/X3Q9WlMtOHl3akRnTlExYWgmX3I9MSIpOwogICAgZW5kCn0pOwp2MTYuSG9tZTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiWmFsbyBHcm91cCIsCiAgICBEZXNjcmlwdGlvbiA9ICJDbGljayhDb3B5KSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBzZXRjbGlwYm9hcmQoImh0dHBzOi8vemFsby5tZS9nL3R2ZHBvcDYzOSIpOwogICAgZW5kCn0pOwp2MTYuSG9tZTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUmVtZW1iZXI6IiwKICAgIERlc2NyaXB0aW9uID0gIlRoaXMgcmVhbCBCYW5hbmEgQ2F0IEh1YiwgYnV0IGEgbmV3IHZlcnNpb24gbWFkZSBieSBOZ3UgUm9ibG94LiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBzZXRjbGlwYm9hcmQoImh0dHBzOi8vd3d3LnRpa3Rvay5jb20vQGhuY19yb2Jsb3g/X3Q9WlMtOHl3akRnTlExYWgmX3I9MSIpOwogICAgZW5kCn0pOwpfRy5GYXN0QXR0YWNrU3RyaXhfTW9kZSA9ICJTdXBlciBGYXN0IEF0dGFjayI7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkZhc3RBdHRhY2tTdHJpeF9Nb2RlIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKF9HLkZhc3RBdHRhY2tTdHJpeF9Nb2RlID09ICJTdXBlciBGYXN0IEF0dGFjayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBfRy5GYXN0X0RlbGF5ID0gMWUtOTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY0OCA9IHYxNi5NYWluOkFkZERyb3Bkb3duKCJEcm9wZG93blNlbGVjdFdlYXBvbiIsIHsKICAgIFRpdGxlID0gIlNlbGVjdCB3ZWFwb24iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IHsKICAgICAgICAiTWVsZWUiLAogICAgICAgICJTd29yZCIsCiAgICAgICAgIkJsb3ggRnJ1aXRzIgogICAgfSwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjQ4OlNldFZhbHVlKCJNZWxlZSIpOwp2NDg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyMzYpCiAgICBDaG9vc2VXZWFwb24gPSB2MjM2OwplbmQpOwp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgKENob29zZVdlYXBvbiA9PSAiTWVsZWUiKSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjgzNiwgdjgzNyBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjgzNy5Ub29sVGlwID09ICJNZWxlZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHY4MzcuTmFtZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvbiA9IHY4MzcuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIChDaG9vc2VXZWFwb24gPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHYxMDI4LCB2MTAyOSBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjEwMjkuVG9vbFRpcCA9PSAiU3dvcmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b3N0cmluZyh2MTAyOS5OYW1lKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0V2VhcG9uID0gdjEwMjkuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIChDaG9vc2VXZWFwb24gPT0gIkJsb3ggRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjE0MzAsIHYxNDMxIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2MTQzMS5Ub29sVGlwID09ICJCbG94IEZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9zdHJpbmcodjE0MzEuTmFtZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvbiA9IHYxNDMxLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjQ5ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVMZXZlbCIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBMZXZlbCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NDk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyMzcpCiAgICBfRy5BdXRvTGV2ZWwgPSB2MjM3OwogICAgaWYgKHYyMzcgPT0gZmFsc2UpIHRoZW4KICAgICAgICB3YWl0KCk7CiAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICB3YWl0KCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUxldmVsOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvTGV2ZWwgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBDaGVja0xldmVsKCk7CiAgICAgICAgICAgICAgICBpZiAobm90IHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIE5hbWVNb24pIG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFiYW5kb25RdWVzdCIpOwogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZVEpOwogICAgICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lUS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdGFydFF1ZXN0IiwgTmFtZVF1ZXN0LCBRdWVzdEx2KTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgTmFtZU1vbikgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE0MzIsIHYxNDMzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0MzM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDMzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQzMy5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDMzLk5hbWUgPT0gTXMpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDMzLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDMzLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE0MzMuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQzMy5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvTGV2ZWwgb3Igbm90IHYxNDMzLlBhcmVudCBvciAodjE0MzMuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodjE0MzMuTmFtZSkgb3IgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDM0LCB2MTQzNSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5FbmVteVNwYXduczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2MTQzNS5OYW1lLCBOYW1lTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHYxNDM1LlBvc2l0aW9uKS5NYWduaXR1ZGUgPj0gMTApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQzNS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTAgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZU1vYkF1cmEiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gTmVhcmVzdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NTA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyMzgpCiAgICBfRy5BdXRvTmVhciA9IHYyMzg7CiAgICBpZiAodjIzOCA9PSBmYWxzZSkgdGhlbgogICAgICAgIHdhaXQoKTsKICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlTW9iQXVyYTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9OZWFyIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgZm9yIHY4MzgsIHY4MzkgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2ODM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2ODM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2ODM5Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY4MzkuTmFtZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKS5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODM5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjgzOS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHY4MzkuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b05lYXIgb3Igbm90IHY4MzkuUGFyZW50IG9yICh2ODM5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2ODM5Lk5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1MSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQ2FzdGxlUmFpZCIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBQaXJhdGVzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1MTpPbkNoYW5nZWQoZnVuY3Rpb24odjIzOSkKICAgIF9HLkNhc3RsZVJhaWQgPSB2MjM5OwplbmQpOwp2MTcuVG9nZ2xlQ2FzdGxlUmFpZDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkNhc3RsZVJhaWQgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2NzY0ID0gQ0ZyYW1lLm5ldygtIDU0OTYuMTc0MzIsIDMxMy43Njg5MjEsIC0gMjg0MS41MzAyNywgMC45MjQ4OTQ1MTIsIDcuMzcwNThlLTksIDAuMzgwMjIzNzUxLCAzLjU4ODEwMmUtOCwgMSwgLSAxLjA2NjY1NDQ2ZS03LCAtIDAuMzgwMjIzNzUxLCAxLjEyMjk3MTFlLTcsIDAuOTI0ODk0NTEyKTsKICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDU1MzkuMzExNTIzNDM3NSwgMzEzLjgwMDUzNzEwOTM3NSwgLSAyOTcyLjM3MjMxNDQ1MzEyNSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwMzAsIHYxMDMxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX0cuQ2FzdGxlUmFpZCBhbmQgdjEwMzE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjEwMzE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTAzMS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTAzMS5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAyMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDMxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzMS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwMzEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTAzMS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxMDMxLlBhcmVudCBvciBub3QgX0cuQ2FzdGxlUmFpZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY3NjQpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjUyID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVIYWtpRm9ydHJlc3MiLCB7CiAgICBUaXRsZSA9ICJBY3RpdmF0ZSBDb2xvciBIYWtpIChGb3J0cmVzcykiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjUyOk9uQ2hhbmdlZChmdW5jdGlvbih2MjQwKQogICAgX0cuRW5hYmxlSGFraUZvcnRyZXNzID0gdjI0MDsKZW5kKTsKdjE3LlRvZ2dsZUhha2lGb3J0cmVzczpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIGZ1bmN0aW9uIHY1Myh2MjQxLCB2MjQyKQogICAgbG9jYWwgdjI0MyA9IHsKICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgIFN0b3JhZ2VOYW1lID0gdjI0MSwKICAgICAgICAgICAgVHlwZSA9ICJBdXJhU2tpbiIsCiAgICAgICAgICAgIENvbnRleHQgPSAiRXF1aXAiCiAgICAgICAgfQogICAgfTsKICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvRnJ1aXRDdXN0b21pemVyUkYiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHYyNDMpKTsKICAgIFR3ZWVuMih2MjQyKTsKZW5kCmxvY2FsIGZ1bmN0aW9uIHY1NCh2MjQ0LCB2MjQ1KQogICAgbG9jYWwgdjI0NiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI7CiAgICBpZiAobm90IHYyNDYgb3Igbm90IHYyNDY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIGVuZAogICAgbG9jYWwgdjI0NyA9IHYyNDYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgIHJldHVybiAodjI0NyAtIHYyNDQpLk1hZ25pdHVkZSA8IHYyNDUgOwplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIGlmIF9HLkVuYWJsZUhha2lGb3J0cmVzcyB0aGVuCiAgICAgICAgICAgIHY1MygiU25vdyBXaGl0ZSIsIFZlY3RvcjMubmV3KC0gNDk3MS43MTgyNjE3MTg3NSwgMzM1Ljk1ODIyMTQzNTU0NjksIC0gMzcyMC4wNTk1NzAzMTI1KSk7CiAgICAgICAgICAgIHdoaWxlIG5vdCB2NTQoVmVjdG9yMy5uZXcoLSA0OTcxLjcxODI2MTcxODc1LCAzMzUuOTU4MjIxNDM1NTQ2OSwgLSAzNzIwLjA1OTU3MDMxMjUpLCAxKSBkbwogICAgICAgICAgICAgICAgd2FpdCgwLjEpOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICB2NTMoIlB1cmUgUmVkIiwgVmVjdG9yMy5uZXcoLSA1NDE0LjkyMDQxMDE1NjI1LCAzMTQuMjU4MjA5MjI4NTE1NiwgLSAyMjEyLjIwMTY2MDE1NjI1KSk7CiAgICAgICAgICAgIHdoaWxlIG5vdCB2NTQoVmVjdG9yMy5uZXcoLSA1NDE0LjkyMDQxMDE1NjI1LCAzMTQuMjU4MjA5MjI4NTE1NiwgLSAyMjEyLjIwMTY2MDE1NjI1KSwgMSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoMC4xKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgdjUzKCJXaW50ZXIgU2t5IiwgVmVjdG9yMy5uZXcoLSA1NDIwLjI2MzE4MzU5Mzc1LCAxMDg5LjM1ODI3NjM2NzE4NzUsIC0gMjY2Ni44MTkzMzU5Mzc1KSk7CiAgICAgICAgICAgIHdoaWxlIG5vdCB2NTQoVmVjdG9yMy5uZXcoLSA1NDIwLjI2MzE4MzU5Mzc1LCAxMDg5LjM1ODI3NjM2NzE4NzUsIC0gMjY2Ni44MTkzMzU5Mzc1KSwgMSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoMC4xKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgX0cuRW5hYmxlSGFraUZvcnRyZXNzID0gZmFsc2U7CiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgwLjUpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY1NSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdENoZXN0IiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIENoZXN0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1NTpPbkNoYW5nZWQoZnVuY3Rpb24odjI0OCkKICAgIF9HLkF1dG9Db2xsZWN0Q2hlc3QgPSB2MjQ4OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQ29sbGVjdENoZXN0IHRoZW4KICAgICAgICAgICAgbG9jYWwgdjY3MyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOwogICAgICAgICAgICBsb2NhbCB2Njc0ID0gdjY3My5Mb2NhbFBsYXllcjsKICAgICAgICAgICAgbG9jYWwgdjY3NSA9IHY2NzQuQ2hhcmFjdGVyIG9yIHY2NzQuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpIDsKICAgICAgICAgICAgbG9jYWwgdjY3NiA9IHY2NzU6R2V0UGl2b3QoKS5Qb3NpdGlvbjsKICAgICAgICAgICAgbG9jYWwgdjY3NyA9IGdhbWU6R2V0U2VydmljZSgiQ29sbGVjdGlvblNlcnZpY2UiKTsKICAgICAgICAgICAgbG9jYWwgdjY3OCA9IHY2Nzc6R2V0VGFnZ2VkKCJfQ2hlc3RUYWdnZWQiKTsKICAgICAgICAgICAgbG9jYWwgdjY3OSwgdjY4MCA9IG1hdGguaHVnZTsKICAgICAgICAgICAgZm9yIHY3NjUgPSAxLCAjIHY2NzggZG8KICAgICAgICAgICAgICAgIGxvY2FsIHY3NjYgPSB2Njc4W3Y3NjVdOwogICAgICAgICAgICAgICAgbG9jYWwgdjc2NyA9ICh2NzY2OkdldFBpdm90KCkuUG9zaXRpb24gLSB2Njc2KS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICBpZiAobm90IHY3NjY6R2V0QXR0cmlidXRlKCJJc0Rpc2FibGVkIikgYW5kICh2NzY3IDwgdjY3OSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2Njc5LCB2NjgwID0gdjc2Nywgdjc2NjsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgdjY4MCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODQwID0gdjY4MDpHZXRQaXZvdCgpLlBvc2l0aW9uOwogICAgICAgICAgICAgICAgbG9jYWwgdjg0MSA9IENGcmFtZS5uZXcodjg0MCk7CiAgICAgICAgICAgICAgICBUd2VlbjIodjg0MSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1NiA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIk1hc3RlcnkiKTsKbG9jYWwgdjU3ID0gdjE2Lk1haW46QWRkRHJvcGRvd24oIkRyb3Bkb3duTWFzdGVyeSIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBNYXN0ZXJ5IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB7CiAgICAgICAgIk5lYXIgTW9icyIKICAgIH0sCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnY1NzpTZXRWYWx1ZShUeXBlTWFzdGVyeSk7CnY1NzpPbkNoYW5nZWQoZnVuY3Rpb24odjI0OSkKICAgIFR5cGVNYXN0ZXJ5ID0gdjI0OTsKZW5kKTsKbG9jYWwgdjU4ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVNYXN0ZXJ5RnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJBdXRvIE1hc3RlcnkgRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjU4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjUwKQogICAgQXV0b0Zhcm1NYXNEZXZpbEZydWl0ID0gdjI1MDsKZW5kKTsKdjE3LlRvZ2dsZU1hc3RlcnlGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY1OSA9IHYxNi5NYWluOkFkZFNsaWRlcigiU2xpZGVySGVhbHQiLCB7CiAgICBUaXRsZSA9ICJNb2IgSFAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSAyMCwKICAgIE1pbiA9IDAsCiAgICBNYXggPSAxMDAsCiAgICBSb3VuZGluZyA9IDEsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYyNTEpCiAgICAgICAgS2lsbFBlcmNlbnQgPSB2MjUxOwogICAgZW5kCn0pOwp2NTk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTIpCiAgICBLaWxsUGVyY2VudCA9IHYyNTI7CmVuZCk7CnY1OTpTZXRWYWx1ZSgyMCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgX0cuVXNlU2tpbGwgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBfRy5Vc2VTa2lsbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDMyLCB2MTAzMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTAzMy5OYW1lID09IE1vbkZhcm0pIGFuZCB2MTAzMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwMzM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDMzLkh1bWFub2lkLkhlYWx0aCA8PSAoKHYxMDMzLkh1bWFub2lkLk1heEhlYWx0aCAqIEtpbGxQZXJjZW50KSAvIDEwMCkpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTAzMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zaXRpb25Ta2lsbE1hc3RlcnlEZXZpbEZydWl0ID0gdjEwMzMuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuRGV2aWxGcnVpdC5WYWx1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuRGV2aWxGcnVpdC5WYWx1ZSkuTW91c2VQb3MuVmFsdWUgPSBQb3NpdGlvblNraWxsTWFzdGVyeURldmlsRnJ1aXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNjA2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkRldmlsRnJ1aXQuVmFsdWUpLkxldmVsLlZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2tpbGxaIGFuZCAodjE2MDYgPj0gMSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiWiIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIloiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2tpbGxYIGFuZCAodjE2MDYgPj0gMikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiWCIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIlgiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2tpbGxDIGFuZCAodjE2MDYgPj0gMykpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiQyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkMiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2tpbGxWIGFuZCAodjE2MDYgPj0gNCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiViIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIlYiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2tpbGxGIGFuZCAodjE2MDYgPj0gNSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRiIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkYiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEF1dG9GYXJtTWFzRGV2aWxGcnVpdCBvciBub3QgX0cuVXNlU2tpbGwgb3IgKHYxMDMzLkh1bWFub2lkLkhlYWx0aCA9PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgwLjEpIGRvCiAgICAgICAgaWYgKEF1dG9GYXJtTWFzRGV2aWxGcnVpdCBhbmQgKFR5cGVNYXN0ZXJ5ID09ICJOZWFyIE1vYnMiKSkgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3Igdjg0Miwgdjg0MyBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4NDMuTmFtZSBhbmQgdjg0MzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjg0MzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjg0MzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjg0My5IdW1hbm9pZC5IZWFsdGggPD0gKCh2ODQzLkh1bWFub2lkLk1heEhlYWx0aCAqIEtpbGxQZXJjZW50KSAvIDEwMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0cuVXNlU2tpbGwgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0cuVXNlU2tpbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjg0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NDMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NDMuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODQzLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NDMuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHY4NDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2ODQzLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvRmFybU1hc0RldmlsRnJ1aXQgb3IgKG5vdCBNYXN0ZXJ5VHlwZSA9PSAiTmVhciBNb2JzIikgb3Igbm90IHY4NDMuUGFyZW50IG9yICh2ODQzLkh1bWFub2lkLkhlYWx0aCA9PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9HLlVzZVNraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NDg0ID0gdjE2Lk1haW46QWRkU2VjdGlvbigiWMawxqFuZyIpOwogICAgbG9jYWwgdjQ4NSA9IHYxNi5NYWluOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiQm9uZSBTdGF0dXMiLAogICAgICAgIENvbnRlbnQgPSAiIgogICAgfSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgICAgIGxvY2FsIHY3NjggPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCb25lcyIsICJDaGVjayIpOwogICAgICAgICAgICAgICAgdjQ4NTpTZXREZXNjKCJZb3UgaGF2ZTogIiAuLiB0b3N0cmluZyh2NzY4KSAuLiAiIEJvbmVzIik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwogICAgbG9jYWwgdjQ4NiA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQm9uZSIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIEZhcm0gQm9uZSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjQ4NjpPbkNoYW5nZWQoZnVuY3Rpb24odjU3MSkKICAgICAgICBfRy5BdXRvQm9uZSA9IHY1NzE7CiAgICAgICAgaWYgKHY1NzEgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUJvbmU6U2V0VmFsdWUoZmFsc2UpOwogICAgbG9jYWwgdjQ4NyA9IENGcmFtZS5uZXcoLSA5NTE1Ljc1LCAxNzQuODUyMTcyODUxNTYyNSwgNjA3OS40MDYyNSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9Cb25lIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODk0ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dDsKICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc3RyaW5nLmZpbmQodjg5NCwgIkRlbW9uaWMgU291bCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0Iik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjQ4Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjQ4Ny5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsICJIYXVudGVkUXVlc3QyIiwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlJlYm9ybiBTa2VsZXRvbiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIFpvbWJpZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVtb25pYyBTb3VsIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NjEsIHYxNjYyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY2MjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2MTY2MjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgKHYxNjYyLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NjIuTmFtZSA9PSAiUmVib3JuIFNrZWxldG9uIikgb3IgKHYxNjYyLk5hbWUgPT0gIkxpdmluZyBab21iaWUiKSBvciAodjE2NjIuTmFtZSA9PSAiRGVtb25pYyBTb3VsIikgb3IgKHYxNjYyLk5hbWUgPT0gIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJEZW1vbmljIFNvdWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NjIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjIuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNjYyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE2NjIuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0JvbmUgb3IgKHYxNjYyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NjIuUGFyZW50IG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFiYW5kb25RdWVzdCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0ODggPSBDRnJhbWUubmV3KC0gOTUxNS43NSwgMTc0Ljg1MjE3Mjg1MTU2MjUsIDYwNzkuNDA2MjUpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvQm9uZU5vUXVlc3QgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY0ODgpOwogICAgICAgICAgICAgICAgICAgIGlmICgodjQ4OC5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlJlYm9ybiBTa2VsZXRvbiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIFpvbWJpZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVtb25pYyBTb3VsIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQzNiwgdjE0MzcgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0Mzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjE0Mzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTQzNy5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE0MzcuTmFtZSA9PSAiUmVib3JuIFNrZWxldG9uIikgb3IgKHYxNDM3Lk5hbWUgPT0gIkxpdmluZyBab21iaWUiKSBvciAodjE0MzcuTmFtZSA9PSAiRGVtb25pYyBTb3VsIikgb3IgKHYxNDM3Lk5hbWUgPT0gIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzNy5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzNy5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDM3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDM3Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvQm9uZU5vUXVlc3Qgb3IgKHYxNDM3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE0MzcuUGFyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NDg5ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVSYW5kb21Cb25lIiwgewogICAgICAgIFRpdGxlID0gIlJhbmRvbSBCb25lcyIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjQ4OTpPbkNoYW5nZWQoZnVuY3Rpb24odjU3NCkKICAgICAgICBfRy5BdXRvUmFuZG9tQm9uZSA9IHY1NzQ7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVJhbmRvbUJvbmU6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvUmFuZG9tQm9uZSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODQ0ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJCb25lcyIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkJ1eSIsCiAgICAgICAgICAgICAgICAgICAgWzNdID0gMSwKICAgICAgICAgICAgICAgICAgICBbNF0gPSAxCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjg0NCkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZAppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY0OTAgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJDYWtlIFByaW5jZSIpOwogICAgbG9jYWwgdjQ5MSA9IHYxNi5NYWluOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiU3RhdHVzIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLmxlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpKSA9PSA4OCkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0OTE6U2V0RGVzYygiTGVmdDogIiAuLiBzdHJpbmcuc3ViKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIiksIDM5LCA0MSkgLi4gIiIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChzdHJpbmcubGVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIikpID09IDg3KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ5MTpTZXREZXNjKCJDw7JuOiAiIC4uIHN0cmluZy5zdWIoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSwgMzksIDQwKSAuLiAiIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHN0cmluZy5sZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSkgPT0gODYpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDkxOlNldERlc2MoIkPDsm46ICIgLi4gc3RyaW5nLnN1YihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpLCAzOSwgMzkpIC4uICIgIik7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQ5MTpTZXREZXNjKCJUxrAgTOG7h25oIELDoW5oIDog4pyF77iPIik7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NDkyID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVDYWtlIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gQ2FrZSBQcmluY2UiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIGxvY2FsIHY0OTMgPSB0cnVlOwogICAgdjQ5MjpPbkNoYW5nZWQoZnVuY3Rpb24odjU3NSkKICAgICAgICBfRy5DYWtlUHJpbmNlID0gdjU3NTsKICAgICAgICBpZiB2NTc1IHRoZW4KICAgICAgICAgICAgaWYgdjQ5MyB0aGVuCiAgICAgICAgICAgICAgICB2NDkzID0gZmFsc2U7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODk1ID0gQ0ZyYW1lLm5ldygtIDIwMDMuOTMyODYxMzI4MTI1LCAzODAuNDgyNDUyMzkyNTc4MSwgLSAxMjU2MS4wMTg1NTQ2ODc1KTsKICAgICAgICAgICAgICAgIFR3ZWVuKHY4OTUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIHY0OTMgPSB0cnVlOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlQ2FrZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkNha2VQcmluY2UgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBQcmluY2UiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQzOCwgdjE0MzkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0MzkuTmFtZSA9PSAiQ2FrZSBQcmluY2UiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQzOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0MzkuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzOS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzOS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDM5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkNha2VQcmluY2Ugb3Igbm90IHYxNDM5LlBhcmVudCBvciAodjE0MzkuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBQcmluY2UgW0x2LiAyMzAwXSBbUmFpZCBCb3NzXSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSBbTHYuIDIzMDBdIFtSYWlkIEJvc3NdIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5DYWtlTG9hZi5CaWdNaXJyb3IuT3RoZXIuVHJhbnNwYXJlbmN5ID09IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ29va2llIENyYWZ0ZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgR3VhcmQiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkJha2luZyBTdGFmZiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSGVhZCBCYWtlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NTQsIHYxNzU1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE3NTUuTmFtZSA9PSAiQ29va2llIENyYWZ0ZXIiKSBvciAodjE3NTUuTmFtZSA9PSAiQ2FrZSBHdWFyZCIpIG9yICh2MTc1NS5OYW1lID09ICJCYWtpbmcgU3RhZmYiKSBvciAodjE3NTUuTmFtZSA9PSAiSGVhZCBCYWtlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc1NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE3NTU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNzU1Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NTUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NTUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc1NS5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc1NS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE3NTUuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNzU1Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE3NTUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5DYWtlUHJpbmNlIG9yIG5vdCB2MTc1NS5QYXJlbnQgb3IgKHYxNzU1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuQ2FrZUxvYWYuQmlnTWlycm9yLk90aGVyLlRyYW5zcGFyZW5jeSA9PSAwKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIFtMdi4gMjMwMF0gW1JhaWQgQm9zc10iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIFtMdi4gMjMwMF0gW1JhaWQgQm9zc10iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NDk0ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVEb3VnaEtpbmciLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBEb3VnaCBLaW5nIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NDk0Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTc2KQogICAgICAgIF9HLkRvdWdoS2luZyA9IHY1NzY7CiAgICAgICAgaWYgKHY1NzYgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZURvdWdoS2luZzpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkRvdWdoS2luZyB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBLaW5nIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NDAsIHYxNDQxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQxLk5hbWUgPT0gIkRvdWdoIEtpbmciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ0MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NDEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkRvdWdoS2luZyBvciBub3QgdjE0NDEuUGFyZW50IG9yICh2MTQ0MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0OTUgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZVNwYXduQ2FrZSIsIHsKICAgICAgICBUaXRsZSA9ICJTcGF3bSBDYWtlIFByaW5jZSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gdHJ1ZQogICAgfSk7CiAgICB2NDk1Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTc3KQogICAgICAgIF9HLlNwYXduQ2FrZVByaW5jZSA9IHY1Nzc7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVNwYXduQ2FrZTpTZXRWYWx1ZSh0cnVlKTsKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLlNwYXduQ2FrZVByaW5jZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY2ODEgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQ2FrZVByaW5jZVNwYXduZXIiLAogICAgICAgICAgICAgICAgWzJdID0gdHJ1ZQogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NjgxKSk7CiAgICAgICAgICAgIGxvY2FsIHY2ODEgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQ2FrZVByaW5jZVNwYXduZXIiCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2ODEpKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEyIHRoZW4KICAgIGxvY2FsIHY0OTYgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJFY3RvcGxhc20gRmFybSIpOwogICAgbG9jYWwgdjQ5NyA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlVmF0Q2hhdEtpRGkiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBGYXJtIEVjdG9wbGFzbSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjQ5NzpPbkNoYW5nZWQoZnVuY3Rpb24odjU3OCkKICAgICAgICBfRy5FY3RvcGxhc20gPSB2NTc4OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVWYXRDaGF0S2lEaTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIF9HLkVjdG9wbGFzbSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2hpcCBEZWNraGFuZCIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2hpcCBFbmdpbmVlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2hpcCBTdGV3YXJkIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTaGlwIE9mZmljZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NDIsIHYxNDQzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTQ0My5OYW1lID09ICJTaGlwIFN0ZXdhcmQiKSBvciAodjE0NDMuTmFtZSA9PSAiU2hpcCBFbmdpbmVlciIpIG9yICh2MTQ0My5OYW1lID09ICJTaGlwIERlY2toYW5kIikgb3IgKCh2MTQ0My5OYW1lID09ICJTaGlwIE9mZmljZXIiKSBhbmQgdjE0NDM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQzLkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0My5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0My5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDMuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDQzLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5FY3RvcGxhc20gPT0gZmFsc2UpIG9yIG5vdCB2MTQ0My5QYXJlbnQgb3IgKHYxNDQzLkh1bWFub2lkLkhlYWx0aCA9PSAwKSBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYxNDQzLk5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMzNCA9IChWZWN0b3IzLm5ldyg5MDQuNDA3MjI2NTYyNSwgMTgxLjA1NzY3ODIyMjY2LCAzMzM0MS4zODY3MTg3NSkgLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMzM0ID4gMjAwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDkwNC40MDcyMjY1NjI1LCAxODEuMDU3Njc4MjIyNjYsIDMzMzQxLjM4NjcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZApsb2NhbCB2NjAgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJCb3NzIik7CmlmIFNlYTEgdGhlbgogICAgdGFibGVCb3NzID0gewogICAgICAgICJUaGUgR29yaWxsYSBLaW5nIiwKICAgICAgICAiQm9iYnkiLAogICAgICAgICJZZXRpIiwKICAgICAgICAiTW9iIExlYWRlciIsCiAgICAgICAgIlZpY2UgQWRtaXJhbCIsCiAgICAgICAgIldhcmRlbiIsCiAgICAgICAgIkNoaWVmIFdhcmRlbiIsCiAgICAgICAgIlN3YW4iLAogICAgICAgICJNYWdtYSBBZG1pcmFsIiwKICAgICAgICAiRmlzaG1hbiBMb3JkIiwKICAgICAgICAiV3lzcGVyIiwKICAgICAgICAiVGh1bmRlciBHb2QiLAogICAgICAgICJDeWJvcmciLAogICAgICAgICJTYWJlciBFeHBlcnQiCiAgICB9OwplbHNlaWYgU2VhMiB0aGVuCiAgICB0YWJsZUJvc3MgPSB7CiAgICAgICAgIkRpYW1vbmQiLAogICAgICAgICJKZXJlbXkiLAogICAgICAgICJGYWppdGEiLAogICAgICAgICJEb24gU3dhbiIsCiAgICAgICAgIlNtb2tlIEFkbWlyYWwiLAogICAgICAgICJDdXJzZWQgQ2FwdGFpbiIsCiAgICAgICAgIkRhcmtiZWFyZCIsCiAgICAgICAgIk9yZGVyIiwKICAgICAgICAiQXdha2VuZWQgSWNlIEFkbWlyYWwiLAogICAgICAgICJUaWRlIEtlZXBlciIKICAgIH07CmVsc2VpZiBTZWEzIHRoZW4KICAgIHRhYmxlQm9zcyA9IHsKICAgICAgICAiU3RvbmUiLAogICAgICAgICJIeWRyYSBMZWFkZXIiLAogICAgICAgICJLaWxvIEFkbWlyYWwiLAogICAgICAgICJDYXB0YWluIEVsZXBoYW50IiwKICAgICAgICAiQmVhdXRpZnVsIFBpcmF0ZSIsCiAgICAgICAgInJpcF9pbmRyYSBUcnVlIEZvcm0iLAogICAgICAgICJMb25nbWEiLAogICAgICAgICJTb3VsIFJlYXBlciIsCiAgICAgICAgIkNha2UgUXVlZW4iCiAgICB9OwplbmQKbG9jYWwgdjYxID0gdjE2Lk1haW46QWRkRHJvcGRvd24oIkRyb3Bkb3duQm9zcyIsIHsKICAgIFRpdGxlID0gIlNlbGVjdCBCb3NzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB0YWJsZUJvc3MsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnY2MTpTZXRWYWx1ZShfRy5TZWxlY3RCb3NzKTsKdjYxOk9uQ2hhbmdlZChmdW5jdGlvbih2MjUzKQogICAgX0cuU2VsZWN0Qm9zcyA9IHYyNTM7CmVuZCk7CmxvY2FsIHY2MiA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0Zhcm1Cb3NzIiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIEJvc3MiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjYyOk9uQ2hhbmdlZChmdW5jdGlvbih2MjU0KQogICAgX0cuQXV0b0Jvc3MgPSB2MjU0OwplbmQpOwp2MTcuVG9nZ2xlQXV0b0Zhcm1Cb3NzOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0Jvc3MgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoX0cuU2VsZWN0Qm9zcykgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTAzNCwgdjEwMzUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTAzNS5OYW1lID09IF9HLlNlbGVjdEJvc3MpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTAzNTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwMzU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDM1Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDM1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwMzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvQm9zcyBvciBub3QgdjEwMzUuUGFyZW50IG9yICh2MTAzNS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoX0cuU2VsZWN0Qm9zcykgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZChfRy5TZWxlY3RCb3NzKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoNSwgMTAsIDcpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY2MyA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIk1hdGVyaWFsIik7CmlmIFNlYTEgdGhlbgogICAgTWF0ZXJpYWxMaXN0ID0gewogICAgICAgICJTY3JhcCBNZXRhbCIsCiAgICAgICAgIkxlYXRoZXIiLAogICAgICAgICJBbmdlbCBXaW5ncyIsCiAgICAgICAgIk1hZ21hIE9yZSIsCiAgICAgICAgIkZpc2ggVGFpbCIKICAgIH07CmVsc2VpZiBTZWEyIHRoZW4KICAgIE1hdGVyaWFsTGlzdCA9IHsKICAgICAgICAiU2NyYXAgTWV0YWwiLAogICAgICAgICJMZWF0aGVyIiwKICAgICAgICAiUmFkaW9hY3RpdmUgTWF0ZXJpYWwiLAogICAgICAgICJNeXN0aWMgRHJvcGxldCIsCiAgICAgICAgIk1hZ21hIE9yZSIsCiAgICAgICAgIlZhbXBpcmUgRmFuZyIKICAgIH07CmVsc2VpZiBTZWEzIHRoZW4KICAgIE1hdGVyaWFsTGlzdCA9IHsKICAgICAgICAiU2NyYXAgTWV0YWwiLAogICAgICAgICJMZWF0aGVyIiwKICAgICAgICAiRGVtb25pYyBXaXNwIiwKICAgICAgICAiQ29uanVyZWQgQ29jb2EiLAogICAgICAgICJEcmFnb24gU2NhbGUiLAogICAgICAgICJHdW5wb3dkZXIiLAogICAgICAgICJGaXNoIFRhaWwiLAogICAgICAgICJNaW5pIFR1c2siLAogICAgICAgICJIeWRyYSBFbmZvcmNlciIsCiAgICAgICAgIlZlbm9tb3VzIEFzc2FpbGFudCIKICAgIH07CmVuZApsb2NhbCB2NjQgPSB2MTYuTWFpbjpBZGREcm9wZG93bigiRHJvcGRvd25NYXRlcmlhbCIsIHsKICAgIFRpdGxlID0gIlNlbGVjdCBNYXRlcmlhbCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gTWF0ZXJpYWxMaXN0LAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2NjQ6U2V0VmFsdWUoU2VsZWN0TWF0ZXJpYWwpOwp2NjQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTUpCiAgICBTZWxlY3RNYXRlcmlhbCA9IHYyNTU7CmVuZCk7CmxvY2FsIHY2NSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlTWF0ZXJpYWwiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gTWF0ZXJpYWwiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjY1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjU2KQogICAgX0cuQXV0b01hdGVyaWFsID0gdjI1NjsKICAgIGlmICh2MjU2ID09IGZhbHNlKSB0aGVuCiAgICAgICAgd2FpdCgpOwogICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVNYXRlcmlhbDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b01hdGVyaWFsIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgTWF0ZXJpYWxNb24oU2VsZWN0TWF0ZXJpYWwpOwogICAgICAgICAgICAgICAgVHdlZW4oTVBvcyk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoTU1vbikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTAzNiwgdjEwMzcgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwMzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDM3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTAzNy5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDM3Lk5hbWUgPT0gTU1vbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDM3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDM3Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzcuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzcuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTAzNy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxMDM3Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9NYXRlcmlhbCBvciBub3QgdjEwMzcuUGFyZW50IG9yICh2MTAzNy5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGZvciB2MTAzOCwgdjEwMzkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uRW5lbXlTcGF3bnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjEwMzkuTmFtZSwgTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHYxMDM5LlBvc2l0aW9uKS5NYWduaXR1ZGUgPj0gMTApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTAzOS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY0OTggPSB2MTYuU2VhOkFkZFNlY3Rpb24oIktpdHN1bmUgSXNsYW5kIFN0YXR1cyIpOwogICAgbG9jYWwgdjQ5OSA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICIiLAogICAgICAgIENvbnRlbnQgPSAiIgogICAgfSk7CiAgICBmdW5jdGlvbiBVcGRhdGVLaXRzdW5lKCkKICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiS2l0c3VuZUlzbGFuZCIpIHRoZW4KICAgICAgICAgICAgdjQ5OTpTZXREZXNjKCJLaXRzdW5lIElzbGFuZCA6IOKche+4jyIpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgdjQ5OTpTZXREZXNjKCJLaXRzdW5lIElzbGFuZCA6IOKdjO+4jyIpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgICAgIFVwZGF0ZUtpdHN1bmUoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CiAgICBsb2NhbCB2NTAwID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUVzcEtpdHN1bmUiLCB7CiAgICAgICAgVGl0bGUgPSAiRXNwIEtpdHN1bmUgaXNsYW5kIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTAwOk9uQ2hhbmdlZChmdW5jdGlvbih2NTc5KQogICAgICAgIEtpdHN1bmVJc2xhbmRFc3AgPSB2NTc5OwogICAgICAgIHdoaWxlIEtpdHN1bmVJc2xhbmRFc3AgZG8KICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBVcGRhdGVJc2xhbmRLaXN1bmVFU1AoKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRXNwS2l0c3VuZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBmdW5jdGlvbiBVcGRhdGVJc2xhbmRLaXN1bmVFU1AoKQogICAgICAgIGZvciB2NjgyLCB2ODMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIEtpdHN1bmVJc2xhbmRFc3AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmICh2NjgzLk5hbWUgPT0gIktpdHN1bmUgSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjY4MzpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNTE4ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NjgzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTE4Lk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MTguQWRvcm5lZSA9IHY2ODM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTUyNCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjE1MTgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NjgzWydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NjgzLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjY4My5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY2ODM6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjY4MzpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBsb2NhbCB2NTAxID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRQS2l0c3VuZSIsIHsKICAgICAgICBUaXRsZSA9ICJGbHkgdG8gS2l0c3VuZSBJc2xhbmQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MDE6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1ODApCiAgICAgICAgX0cuVHdlZW5Ub0tpdHN1bmUgPSB2NTgwOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVUUEtpdHN1bmU6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHY1ODE7CiAgICAgICAgd2hpbGUgbm90IHY1ODEgZG8KICAgICAgICAgICAgdjU4MSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJLaXRzdW5lSXNsYW5kIik7CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICBlbmQKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuVHdlZW5Ub0tpdHN1bmUgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg0NSA9IHY1ODE6RmluZEZpcnN0Q2hpbGQoIlNocmluZUFjdGl2ZSIpOwogICAgICAgICAgICAgICAgaWYgdjg0NSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMzM1LCB2MTMzNiBpbiBwYWlycyh2ODQ1OkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTMzNjpJc0EoIkJhc2VQYXJ0IikgYW5kIHYxMzM2Lk5hbWU6ZmluZCgiTmVvblNocmluZVBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzMzYuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUwMiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0QXp1cmUiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBDb2xsZWN0IEF6dXJlIEVtYmVyIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTAyOk9uQ2hhbmdlZChmdW5jdGlvbih2NTgyKQogICAgICAgIF9HLkNvbGxlY3RBenVyZSA9IHY1ODI7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUNvbGxlY3RBenVyZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkNvbGxlY3RBenVyZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQXR0YWNoZWRBenVyZUVtYmVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOldhaXRGb3JDaGlsZCgiRW1iZXJUZW1wbGF0ZSIpOkZpbmRGaXJzdENoaWxkKCJQYXJ0IikuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCnYxNi5TZWE6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkF1dG8gVHJhZGUgQXp1cmUgRW1iZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpXYWl0Rm9yQ2hpbGQoIk1vZHVsZXMiKTpXYWl0Rm9yQ2hpbGQoIk5ldCIpOldhaXRGb3JDaGlsZCgiUkYvS2l0c3VuZVN0YXR1ZVByYXkiKTpJbnZva2VTZXJ2ZXIoKTsKICAgIGVuZAp9KTsKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NTAzID0gdjE2LlNlYTpBZGRTZWN0aW9uKCJTZWEiKTsKICAgIGxvY2FsIHY1MDQgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTsKICAgIGxvY2FsIHY1MDUgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKTsKICAgIGxvY2FsIHY1MDYgPSBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTsKICAgIGxvY2FsIHY1MDcgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOwogICAgbG9jYWwgdjUwOCA9IDM1MDsKICAgIGxvY2FsIHY1MDkgPSB2MTYuU2VhOkFkZFNsaWRlcigiU2xpZGVyU3BlZWRCb2F0IiwgewogICAgICAgIFRpdGxlID0gIkJvYXQgU3BlZWQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IHY1MDgsCiAgICAgICAgTWluID0gMCwKICAgICAgICBNYXggPSAzNTAsCiAgICAgICAgUm91bmRpbmcgPSAxLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjU4MykKICAgICAgICAgICAgdjUwOCA9IHY1ODM7CiAgICAgICAgZW5kCiAgICB9KTsKICAgIHY1MDk6U2V0VmFsdWUodjUwOCk7CiAgICBsb2NhbCB2NTEwID0gdjE2LlNlYTpBZGRUb2dnbGUoIkF1dG9GaW5kUHJlaGlzdG9yaWMiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBGaW5kIFByZWhpc3RvcmljIElzbGFuZCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjE3LkF1dG9GaW5kUHJlaGlzdG9yaWM6U2V0VmFsdWUoZmFsc2UpOwogICAgdjUxMDpPbkNoYW5nZWQoZnVuY3Rpb24odjU4NCkKICAgICAgICBfRy5BdXRvRmluZFByZWhpc3RvcmljID0gdjU4NDsKICAgIGVuZCk7CiAgICBsb2NhbCB2NTExID0ge307CiAgICBsb2NhbCB2NTEyID0gZmFsc2U7CiAgICBsb2NhbCB2NTEzID0gZmFsc2U7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9GaW5kUHJlaGlzdG9yaWMgdGhlbgogICAgICAgICAgICB2NTEzID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTg1ID0gdjUwNC5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2NTg2ID0gdjU4NS5DaGFyYWN0ZXI7CiAgICAgICAgaWYgKG5vdCB2NTg2IG9yIG5vdCB2NTg2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCBmdW5jdGlvbiB2NTg3KCkKICAgICAgICAgICAgaWYgdjUxMiB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gdHJ1ZTsKICAgICAgICAgICAgZm9yIHY3NjksIHY3NzAgaW4gcGFpcnModjUxMSkgZG8KICAgICAgICAgICAgICAgIGlmICh2NzcwIGFuZCB2NzcwLlBhcmVudCBhbmQgKHY3NzAuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3NzAuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjc3MC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gZmFsc2U7CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU4OCA9IHY1ODYuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjU4OSA9IGZhbHNlOwogICAgICAgIGxvY2FsIHY1OTAgPSBuaWw7CiAgICAgICAgZm9yIHY2ODQsIHY2ODUgaW4gcGFpcnModjUwNy5Cb2F0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBsb2NhbCB2Njg2ID0gdjY4NTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKTsKICAgICAgICAgICAgaWYgKHY2ODYgYW5kICh2Njg2Lk9jY3VwYW50ID09IHY1ODgpKSB0aGVuCiAgICAgICAgICAgICAgICB2NTg5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHY1OTAgPSB2Njg2OwogICAgICAgICAgICAgICAgdjUxMVt2Njg1Lk5hbWVdID0gdjY4NjsKICAgICAgICAgICAgZWxzZWlmICh2Njg2IGFuZCAodjY4Ni5PY2N1cGFudCA9PSBuaWwpKSB0aGVuCiAgICAgICAgICAgICAgICB2NTg3KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIG5vdCB2NTg5IHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIHY1OTAuTWF4U3BlZWQgPSB2NTA4OwogICAgICAgIHY1OTAuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldyh2NTkwLlBvc2l0aW9uLlgsIHY1OTAuUG9zaXRpb24uWSwgdjU5MC5Qb3NpdGlvbi5aKSkgKiB2NTkwLkNGcmFtZS5Sb3RhdGlvbiA7CiAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQodHJ1ZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgZm9yIHY2ODcsIHY2ODggaW4gcGFpcnModjUwNy5Cb2F0czpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2Njg4OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2Njg4LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZm9yIHY2ODksIHY2OTAgaW4gcGFpcnModjU4NjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NjkwOklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2NjkwLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU5MyA9IHsKICAgICAgICAgICAgIlNoaXB3cmVja0lzbGFuZCIsCiAgICAgICAgICAgICJTYW5kSXNsYW5kIiwKICAgICAgICAgICAgIlRyZWVJc2xhbmQiLAogICAgICAgICAgICAiVGlueUlzbGFuZCIsCiAgICAgICAgICAgICJNeXN0aWNJc2xhbmQiLAogICAgICAgICAgICAiS2l0c3VuZUlzbGFuZCIsCiAgICAgICAgICAgICJGcm96ZW5EaW1lbnNpb24iCiAgICAgICAgfTsKICAgICAgICBmb3IgdjY5MSwgdjY5MiBpbiBpcGFpcnModjU5MykgZG8KICAgICAgICAgICAgbG9jYWwgdjY5MyA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKHY2OTIpOwogICAgICAgICAgICBpZiAodjY5MyBhbmQgdjY5MzpJc0EoIk1vZGVsIikpIHRoZW4KICAgICAgICAgICAgICAgIHY2OTM6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTk0ID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICAgICAgaWYgdjU5NCB0aGVuCiAgICAgICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KGZhbHNlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgX0cuQXV0b0ZpbmRQcmVoaXN0b3JpYyA9IGZhbHNlOwogICAgICAgICAgICBpZiBub3QgdjUxMyB0aGVuCiAgICAgICAgICAgICAgICB2MTQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJCYW5hbmEgQ2F0IEh1YiIsCiAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICLEkOG6o28gRHVuZyBOaGFtIFTDrG0gVGjhuqV5IiwKICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDEwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHY1MTMgPSB0cnVlOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MTQgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0ZpbmRNaXJhZ2UiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBGaW5kIE1pcmFnZSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjE3LkF1dG9GaW5kTWlyYWdlOlNldFZhbHVlKGZhbHNlKTsKICAgIHY1MTQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1OTUpCiAgICAgICAgX0cuQXV0b0ZpbmRNaXJhZ2UgPSB2NTk1OwogICAgZW5kKTsKICAgIGxvY2FsIHY1MTEgPSB7fTsKICAgIGxvY2FsIHY1MTIgPSBmYWxzZTsKICAgIGxvY2FsIHY1MTMgPSBmYWxzZTsKICAgIHY1MDUuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgX0cuQXV0b0ZpbmRNaXJhZ2UgdGhlbgogICAgICAgICAgICB2NTEzID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTk2ID0gdjUwNC5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2NTk3ID0gdjU5Ni5DaGFyYWN0ZXI7CiAgICAgICAgaWYgKG5vdCB2NTk3IG9yIG5vdCB2NTk3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCBmdW5jdGlvbiB2NTk4KCkKICAgICAgICAgICAgaWYgdjUxMiB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gdHJ1ZTsKICAgICAgICAgICAgZm9yIHY3NzEsIHY3NzIgaW4gcGFpcnModjUxMSkgZG8KICAgICAgICAgICAgICAgIGlmICh2NzcyIGFuZCB2NzcyLlBhcmVudCBhbmQgKHY3NzIuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3NzIuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjc3Mi5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gZmFsc2U7CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU5OSA9IHY1OTcuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjYwMCA9IGZhbHNlOwogICAgICAgIGxvY2FsIHY2MDEgPSBuaWw7CiAgICAgICAgZm9yIHY2OTQsIHY2OTUgaW4gcGFpcnModjUwNy5Cb2F0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBsb2NhbCB2Njk2ID0gdjY5NTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKTsKICAgICAgICAgICAgaWYgKHY2OTYgYW5kICh2Njk2Lk9jY3VwYW50ID09IHY1OTkpKSB0aGVuCiAgICAgICAgICAgICAgICB2NjAwID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHY2MDEgPSB2Njk2OwogICAgICAgICAgICAgICAgdjUxMVt2Njk1Lk5hbWVdID0gdjY5NjsKICAgICAgICAgICAgZWxzZWlmICh2Njk2IGFuZCAodjY5Ni5PY2N1cGFudCA9PSBuaWwpKSB0aGVuCiAgICAgICAgICAgICAgICB2NTk4KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIG5vdCB2NjAwIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIHY2MDEuTWF4U3BlZWQgPSB2NTA4OwogICAgICAgIHY2MDEuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldyh2NjAxLlBvc2l0aW9uLlgsIHY2MDEuUG9zaXRpb24uWSwgdjYwMS5Qb3NpdGlvbi5aKSkgKiB2NjAxLkNGcmFtZS5Sb3RhdGlvbiA7CiAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQodHJ1ZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgZm9yIHY2OTcsIHY2OTggaW4gcGFpcnModjUwNy5Cb2F0czpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2Njk4OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2Njk4LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZm9yIHY2OTksIHY3MDAgaW4gcGFpcnModjU5NzpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NzAwOklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2NzAwLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYwNCA9IHsKICAgICAgICAgICAgIlNoaXB3cmVja0lzbGFuZCIsCiAgICAgICAgICAgICJTYW5kSXNsYW5kIiwKICAgICAgICAgICAgIlRyZWVJc2xhbmQiLAogICAgICAgICAgICAiVGlueUlzbGFuZCIsCiAgICAgICAgICAgICJQcmVoaXN0b3JpY0lzbGFuZCIsCiAgICAgICAgICAgICJLaXRzdW5lSXNsYW5kIiwKICAgICAgICAgICAgIkZyb3plbkRpbWVuc2lvbiIKICAgICAgICB9OwogICAgICAgIGZvciB2NzAxLCB2NzAyIGluIGlwYWlycyh2NjA0KSBkbwogICAgICAgICAgICBsb2NhbCB2NzAzID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQodjcwMik7CiAgICAgICAgICAgIGlmICh2NzAzIGFuZCB2NzAzOklzQSgiTW9kZWwiKSkgdGhlbgogICAgICAgICAgICAgICAgdjcwMzpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MDUgPSB2NTA3Lk1hcDpGaW5kRmlyc3RDaGlsZCgiTXlzdGljSXNsYW5kIik7CiAgICAgICAgaWYgdjYwNSB0aGVuCiAgICAgICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KGZhbHNlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgX0cuQXV0b0ZpbmRNaXJhZ2UgPSBmYWxzZTsKICAgICAgICAgICAgaWYgbm90IHY1MTMgdGhlbgogICAgICAgICAgICAgICAgdjE0Ok5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiQmFuYW5hIENhdCBIdWIiLAogICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSAixJDhuqNvIELDrSDhuqhuIFTDrG0gVGjhuqV5IiwKICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDEwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHY1MTMgPSB0cnVlOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MTUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0ZpbmRGcm96ZW4iLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBGaW5kIExldmlhdGhhbiBJc2xhbmQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHYxNy5BdXRvRmluZEZyb3plbjpTZXRWYWx1ZShmYWxzZSk7CiAgICB2NTE1Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjA2KQogICAgICAgIF9HLkF1dG9GaW5kRnJvemVuID0gdjYwNjsKICAgIGVuZCk7CiAgICBsb2NhbCB2NTExID0ge307CiAgICBsb2NhbCB2NTEyID0gZmFsc2U7CiAgICBsb2NhbCB2NTEzID0gZmFsc2U7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9GaW5kRnJvemVuIHRoZW4KICAgICAgICAgICAgdjUxMyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYwNyA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjYwOCA9IHY2MDcuQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjYwOCBvciBub3QgdjYwODpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gdjYwOSgpCiAgICAgICAgICAgIGlmIHY1MTIgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IHRydWU7CiAgICAgICAgICAgIGZvciB2NzczLCB2Nzc0IGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgICAgICBpZiAodjc3NCBhbmQgdjc3NC5QYXJlbnQgYW5kICh2Nzc0Lk5hbWUgPT0gIlZlaGljbGVTZWF0IikgYW5kIG5vdCB2Nzc0Lk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHY3NzQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IGZhbHNlOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MTAgPSB2NjA4Lkh1bWFub2lkOwogICAgICAgIGxvY2FsIHY2MTEgPSBmYWxzZTsKICAgICAgICBsb2NhbCB2NjEyID0gbmlsOwogICAgICAgIGZvciB2NzA0LCB2NzA1IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgbG9jYWwgdjcwNiA9IHY3MDU6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgIGlmICh2NzA2IGFuZCAodjcwNi5PY2N1cGFudCA9PSB2NjEwKSkgdGhlbgogICAgICAgICAgICAgICAgdjYxMSA9IHRydWU7CiAgICAgICAgICAgICAgICB2NjEyID0gdjcwNjsKICAgICAgICAgICAgICAgIHY1MTFbdjcwNS5OYW1lXSA9IHY3MDY7CiAgICAgICAgICAgIGVsc2VpZiAodjcwNiBhbmQgKHY3MDYuT2NjdXBhbnQgPT0gbmlsKSkgdGhlbgogICAgICAgICAgICAgICAgdjYwOSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBpZiBub3QgdjYxMSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICB2NjEyLk1heFNwZWVkID0gdjUwODsKICAgICAgICB2NjEyLkNGcmFtZSA9IENGcmFtZS5uZXcoVmVjdG9yMy5uZXcodjYxMi5Qb3NpdGlvbi5YLCB2NjEyLlBvc2l0aW9uLlksIHY2MTIuUG9zaXRpb24uWikpICogdjYxMi5DRnJhbWUuUm90YXRpb24gOwogICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KHRydWUsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgIGZvciB2NzA3LCB2NzA4IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjcwODpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjcwOC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGZvciB2NzA5LCB2NzEwIGluIHBhaXJzKHY2MDg6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjcxMDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjcxMC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MTUgPSB7CiAgICAgICAgICAgICJTaGlwd3JlY2tJc2xhbmQiLAogICAgICAgICAgICAiU2FuZElzbGFuZCIsCiAgICAgICAgICAgICJUcmVlSXNsYW5kIiwKICAgICAgICAgICAgIlRpbnlJc2xhbmQiLAogICAgICAgICAgICAiTXlzdGljSXNsYW5kIiwKICAgICAgICAgICAgIktpdHN1bmVJc2xhbmQiLAogICAgICAgICAgICAiUHJlaGlzdG9yaWNJc2xhbmQiCiAgICAgICAgfTsKICAgICAgICBmb3IgdjcxMSwgdjcxMiBpbiBpcGFpcnModjYxNSkgZG8KICAgICAgICAgICAgbG9jYWwgdjcxMyA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKHY3MTIpOwogICAgICAgICAgICBpZiAodjcxMyBhbmQgdjcxMzpJc0EoIk1vZGVsIikpIHRoZW4KICAgICAgICAgICAgICAgIHY3MTM6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjE2ID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQoIkZyb3plbkRpbWVuc2lvbiIpOwogICAgICAgIGlmIHY2MTYgdGhlbgogICAgICAgICAgICB2NTA2OlNlbmRLZXlFdmVudChmYWxzZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgIF9HLkF1dG9GaW5kRnJvemVuID0gZmFsc2U7CiAgICAgICAgICAgIGlmIG5vdCB2NTEzIHRoZW4KICAgICAgICAgICAgICAgIHYxNDpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIkJhbmFuYSBDYXQgSHViIiwKICAgICAgICAgICAgICAgICAgICBDb250ZW50ID0gIsSQ4bqjbyBMZXZpYXRoYW4gVMOsbSBUaOG6pXkiLAogICAgICAgICAgICAgICAgICAgIER1cmF0aW9uID0gMTAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdjUxMyA9IHRydWU7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUxNiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJBdXRvQ29tZVRpa2kiLCB7CiAgICAgICAgVGl0bGUgPSAiR28gQmFjayBUbyBUaWtpIE91dHBvc3QiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MTY6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MTcpCiAgICAgICAgX0cuQXV0b0NvbWVUaWtpID0gdjYxNzsKICAgIGVuZCk7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9Db21lVGlraSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjE4ID0gdjUwNC5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2NjE5ID0gdjYxOC5DaGFyYWN0ZXI7CiAgICAgICAgaWYgKG5vdCB2NjE5IG9yIG5vdCB2NjE5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjIwID0gdjYxOS5IdW1hbm9pZDsKICAgICAgICBsb2NhbCB2NjIxID0gbmlsOwogICAgICAgIGZvciB2NzE0LCB2NzE1IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgbG9jYWwgdjcxNiA9IHY3MTU6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgIGlmICh2NzE2IGFuZCAodjcxNi5PY2N1cGFudCA9PSB2NjIwKSkgdGhlbgogICAgICAgICAgICAgICAgdjYyMSA9IHY3MTY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgaWYgdjYyMSB0aGVuCiAgICAgICAgICAgIHY2MjEuTWF4U3BlZWQgPSB2NTA4OwogICAgICAgICAgICBsb2NhbCB2Nzc2ID0gQ0ZyYW1lLm5ldygtIDE2MjE3Ljc1NjgzNTkzNzUsIDkuMTI2NzYxNDM2NDYyNDAyLCA0NDYuMDY1MzY4NjUyMzQzNzUpOwogICAgICAgICAgICBsb2NhbCB2Nzc3ID0gdjYyMS5Qb3NpdGlvbjsKICAgICAgICAgICAgbG9jYWwgdjc3OCA9IHY3NzYuUG9zaXRpb247CiAgICAgICAgICAgIGxvY2FsIHY3NzkgPSAodjc3OCAtIHY3NzcpLnVuaXQ7CiAgICAgICAgICAgIGxvY2FsIHY3ODAgPSB2Nzc5ICogdjYyMS5NYXhTcGVlZCAqIHY1MDUuUmVuZGVyU3RlcHBlZDpXYWl0KCkgOwogICAgICAgICAgICB2NjIxLkNGcmFtZSA9IHY2MjEuQ0ZyYW1lICsgdjc4MCA7CiAgICAgICAgICAgIGxvY2FsIHY3ODIgPSBDRnJhbWUubmV3KHY3NzcsIHY3NzgpOwogICAgICAgICAgICB2NjIxLkNGcmFtZSA9IENGcmFtZS5uZXcodjYyMS5Qb3NpdGlvbiwgdjc3OCk7CiAgICAgICAgICAgIGlmICgodjYyMS5Qb3NpdGlvbiAtIHY3NzgpLm1hZ25pdHVkZSA8IDEyMCkgdGhlbgogICAgICAgICAgICAgICAgX0cuQXV0b0NvbWVUaWtpID0gZmFsc2U7CiAgICAgICAgICAgICAgICB2NTA2OlNlbmRLZXlFdmVudChmYWxzZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MTcgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0NvbWVIeWRyYSIsIHsKICAgICAgICBUaXRsZSA9ICJHbyBCYWNrIFRvIEh5ZHJhIElzbGFuZCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUxNzpPbkNoYW5nZWQoZnVuY3Rpb24odjYyMikKICAgICAgICBfRy5BdXRvQ29tZUh5ZHJhID0gdjYyMjsKICAgIGVuZCk7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9Db21lSHlkcmEgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYyMyA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjYyNCA9IHY2MjMuQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjYyNCBvciBub3QgdjYyNDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYyNSA9IHY2MjQuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjYyNiA9IG5pbDsKICAgICAgICBmb3IgdjcxNywgdjcxOCBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MTkgPSB2NzE4OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjcxOSBhbmQgKHY3MTkuT2NjdXBhbnQgPT0gdjYyNSkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MjYgPSB2NzE5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIHY2MjYgdGhlbgogICAgICAgICAgICB2NjI2Lk1heFNwZWVkID0gdjUwODsKICAgICAgICAgICAgbG9jYWwgdjc4NCA9IENGcmFtZS5uZXcoNTE5My45Mzc1LCAtIDAuMDQ2OTAyODk0OTczNzU0ODgsIDE2MzEuNTc4MzY5MTQwNjI1KTsKICAgICAgICAgICAgbG9jYWwgdjc4NSA9IHY2MjYuUG9zaXRpb247CiAgICAgICAgICAgIGxvY2FsIHY3ODYgPSB2Nzg0LlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Nzg3ID0gKHY3ODYgLSB2Nzg1KS51bml0OwogICAgICAgICAgICBsb2NhbCB2Nzg4ID0gdjc4NyAqIHY2MjYuTWF4U3BlZWQgKiB2NTA1LlJlbmRlclN0ZXBwZWQ6V2FpdCgpIDsKICAgICAgICAgICAgdjYyNi5DRnJhbWUgPSB2NjI2LkNGcmFtZSArIHY3ODggOwogICAgICAgICAgICBsb2NhbCB2NzkwID0gQ0ZyYW1lLm5ldyh2Nzg1LCB2Nzg2KTsKICAgICAgICAgICAgdjYyNi5DRnJhbWUgPSBDRnJhbWUubmV3KHY2MjYuUG9zaXRpb24sIHY3ODYpOwogICAgICAgICAgICBpZiAoKHY2MjYuUG9zaXRpb24gLSB2Nzg2KS5tYWduaXR1ZGUgPCAxMjApIHRoZW4KICAgICAgICAgICAgICAgIF9HLkF1dG9Db21lSHlkcmEgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KGZhbHNlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE2LlNlYTpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIlRyYXZlbCB0byBIdW50aW5nIFpvbmUiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTY5MTcuMTU0Mjk2ODc1LCA3Ljc1NzU5NjAxNTkzMDE3NiwgNTExLjgyMDMxMjUpKTsKICAgICAgICBlbmQKICAgIH0pOwogICAgbG9jYWwgdjUxMSA9IHt9OwogICAgbG9jYWwgdjUxOCA9IHsKICAgICAgICAiQmVhc3QgSHVudGVyIiwKICAgICAgICAiU2xlaWdoIiwKICAgICAgICAiTWlyYWNsZSIsCiAgICAgICAgIlRoZSBTZW50aW5lbCIsCiAgICAgICAgIkd1YXJkaWFuIiwKICAgICAgICAiTGFudGVybiIsCiAgICAgICAgIkRpbmdoeSIsCiAgICAgICAgIlBpcmF0ZVNsb29wIiwKICAgICAgICAiUGlyYXRlQnJpZ2FkZSIsCiAgICAgICAgIlBpcmF0ZUdyYW5kQnJpZ2FkZSIsCiAgICAgICAgIk1hcmluZUdyYW5kQnJpZ2FkZSIsCiAgICAgICAgIk1hcmluZUJyaWdhZGUiLAogICAgICAgICJNYXJpbmVTbG9vcCIKICAgIH07CiAgICBsb2NhbCB2NTE5ID0gdjE2LlNlYTpBZGREcm9wZG93bigiRHJvcGRvd25Cb2F0IiwgewogICAgICAgIFRpdGxlID0gIlNlbGVjdCBCb2F0IiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIFZhbHVlcyA9IHY1MTgsCiAgICAgICAgTXVsdGkgPSBmYWxzZSwKICAgICAgICBEZWZhdWx0ID0gMQogICAgfSk7CiAgICB2NTE5OlNldFZhbHVlKHNlbGVjdGVkQm9hdCk7CiAgICB2NTE5Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjI3KQogICAgICAgIHNlbGVjdGVkQm9hdCA9IHY2Mjc7CiAgICBlbmQpOwogICAgbG9jYWwgZnVuY3Rpb24gdjUyMCh2NjI4KQogICAgICAgIGxvY2FsIHY2MjkgPSB7CiAgICAgICAgICAgIFsxXSA9ICJCdXlCb2F0IiwKICAgICAgICAgICAgWzJdID0gdjYyOAogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjYyOSkpOwogICAgICAgIHRhc2suZGVsYXkoMiwgZnVuY3Rpb24oKQogICAgICAgICAgICBmb3Igdjc5MSwgdjc5MiBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiAodjc5MjpJc0EoIk1vZGVsIikgYW5kICh2NzkyLk5hbWUgPT0gdjYyOCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODk2ID0gdjc5MjpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKTsKICAgICAgICAgICAgICAgICAgICBpZiAodjg5NiBhbmQgbm90IHY4OTYuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjUxMVt2NjI4XSA9IHY4OTY7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAogICAgbG9jYWwgZnVuY3Rpb24gdjUyMSgpCiAgICAgICAgZm9yIHY3MjAsIHY3MjEgaW4gcGFpcnModjUxMSkgZG8KICAgICAgICAgICAgaWYgKHY3MjEgYW5kIHY3MjEuUGFyZW50IGFuZCAodjcyMS5OYW1lID09ICJWZWhpY2xlU2VhdCIpIGFuZCBub3QgdjcyMS5PY2N1cGFudCkgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4yKHY3MjEuQ0ZyYW1lKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgZm9yIHY3MjIsIHY3MjMgaW4gcGFpcnModjUxMSkgZG8KICAgICAgICAgICAgaWYgKHY3MjMgYW5kIHY3MjMuUGFyZW50IGFuZCAodjcyMy5OYW1lID09ICJWZWhpY2xlU2VhdCIpIGFuZCBub3QgdjcyMy5PY2N1cGFudCkgdGhlbgogICAgICAgICAgICAgICAgdjUxMVt2NzIyXSA9IHY3MjM7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHYxNi5TZWE6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJCdXkgQm9hZCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgdjUyMChzZWxlY3RlZEJvYXQpOwogICAgICAgIGVuZAogICAgfSk7CiAgICB2MTYuU2VhOkFkZEJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiRmx5IFRvIE15IEJvYXQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIHY1MjEoKTsKICAgICAgICBlbmQKICAgIH0pOwogICAgbG9jYWwgdjUyMiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUZXJyb3JzaGFyayIsIHsKICAgICAgICBUaXRsZSA9ICJBdHRhY2sgVGVycm9yc2hhcmsiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjI6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzApCiAgICAgICAgX0cuQXV0b1RlcnJvcnNoYXJrID0gdjYzMDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlVGVycm9yc2hhcms6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvVGVycm9yc2hhcmsgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ0NCwgdjE0NDUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDUuTmFtZSA9PSAiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQ1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ0NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NDUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ0NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvVGVycm9yc2hhcmsgb3Igbm90IHYxNDQ1LlBhcmVudCBvciAodjE0NDUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTIzID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVBpcmFuaGEiLCB7CiAgICAgICAgVGl0bGUgPSAiQXR0YWNrIFBpcmFuaGEiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjM6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzEpCiAgICAgICAgX0cuZmFybXBpcmFueWEgPSB2NjMxOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVQaXJhbmhhOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuZmFybXBpcmFueWEgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiUGlyYW5oYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQ2LCB2MTQ0NyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0Ny5OYW1lID09ICJQaXJhbmhhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0NDc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDQ3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ3Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NDcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuZmFybXBpcmFueWEgb3Igbm90IHYxNDQ3LlBhcmVudCBvciAodjE0NDcuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiUGlyYW5oYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJQaXJhbmhhIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUyNCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVTaGFyayIsIHsKICAgICAgICBUaXRsZSA9ICJBdHRhY2sgU2hhcmsiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzIpCiAgICAgICAgX0cuQXV0b1NoYXJrID0gdjYzMjsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlU2hhcms6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvU2hhcmsgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ0OCwgdjE0NDkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDkuTmFtZSA9PSAiU2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQ5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ0OTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NDkuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0OS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDkuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ0OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b1NoYXJrIG9yIG5vdCB2MTQ0OS5QYXJlbnQgb3IgKHYxNDQ5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0cy5QaXJhdGVHcmFuZEJyaWdhZGUuVmVoaWNsZVNlYXQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAxLCAwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRlcnJvcnNoYXJrIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTI1ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUZpc2hDcmV3IiwgewogICAgICAgIFRpdGxlID0gIkF0dGFjayBGaXNoIENyZXciLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjU6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzMpCiAgICAgICAgX0cuQXV0b0Zpc2hDcmV3ID0gdjYzMzsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRmlzaENyZXc6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvRmlzaENyZXcgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRmlzaCBDcmV3IE1lbWJlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDUwLCB2MTQ1MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1MS5OYW1lID09ICJGaXNoIENyZXcgTWVtYmVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0NTE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDUxLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDUxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NTEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDUxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NTEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9GaXNoQ3JldyBvciBub3QgdjE0NTEuUGFyZW50IG9yICh2MTQ1MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHMuUGlyYXRlR3JhbmRCcmlnYWRlLlZlaGljbGVTZWF0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMSwgMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkZpc2ggQ3JldyBNZW1iZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkZpc2ggQ3JldyBNZW1iZXIiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MjYgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlU2hpcCIsIHsKICAgICAgICBUaXRsZSA9ICJBdHRhY2sgU2hpcCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUyNjpPbkNoYW5nZWQoZnVuY3Rpb24odjYzNCkKICAgICAgICBfRy5TaGlwID0gdjYzNDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlU2hpcDpTZXRWYWx1ZShmYWxzZSk7CiAgICBmdW5jdGlvbiBDaGVja1BpcmF0ZUJvYXQoKQogICAgICAgIGxvY2FsIHY2MzUgPSB7CiAgICAgICAgICAgICJQaXJhdGVHcmFuZEJyaWdhZGUiLAogICAgICAgICAgICAiUGlyYXRlQnJpZ2FkZSIKICAgICAgICB9OwogICAgICAgIGZvciB2NzI0LCB2NzI1IGluIG5leHQsIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpIGRvCiAgICAgICAgICAgIGlmICh0YWJsZS5maW5kKHY2MzUsIHY3MjUuTmFtZSkgYW5kIHY3MjU6RmluZEZpcnN0Q2hpbGQoIkhlYWx0aCIpIGFuZCAodjcyNS5IZWFsdGguVmFsdWUgPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHY3MjU7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLlNoaXAgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIENoZWNrUGlyYXRlQm9hdCgpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDMyLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAzMiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMzOCA9IENoZWNrUGlyYXRlQm9hdCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXduKFR3ZWVuKHYxMzM4LkVuZ2luZS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0gMjAsIDApKSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBaW1Cb3RTa2lsbFBvc2l0aW9uID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgLSA1LCAwKSA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTa2lsbGFpbWJvdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvU2tpbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IHYxMzM4IG9yIG5vdCB2MTMzOC5QYXJlbnQgb3IgKHYxMzM4LkhlYWx0aC5WYWx1ZSA8PSAwKSBvciBub3QgQ2hlY2tQaXJhdGVCb2F0KCkKICAgICAgICAgICAgICAgICAgICAgICAgU2tpbGxhaW1ib3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvU2tpbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MjcgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlR2hvc3RTaGlwIiwgewogICAgICAgIFRpdGxlID0gIkF0dGFjayBHaG9zdCBTaGlwIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTI3Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjM2KQogICAgICAgIF9HLkdob3N0U2hpcCA9IHY2MzY7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUdob3N0U2hpcDpTZXRWYWx1ZShmYWxzZSk7CiAgICBmdW5jdGlvbiBDaGVja1BpcmF0ZUJvYXQoKQogICAgICAgIGxvY2FsIHY2MzcgPSB7CiAgICAgICAgICAgICJGaXNoQm9hdCIKICAgICAgICB9OwogICAgICAgIGZvciB2NzI2LCB2NzI3IGluIG5leHQsIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpIGRvCiAgICAgICAgICAgIGlmICh0YWJsZS5maW5kKHY2MzcsIHY3MjcuTmFtZSkgYW5kIHY3Mjc6RmluZEZpcnN0Q2hpbGQoIkhlYWx0aCIpIGFuZCAodjcyNy5IZWFsdGguVmFsdWUgPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHY3Mjc7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIF9HLmJqaXJGaXNoQm9hdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgQ2hlY2tQaXJhdGVCb2F0KCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMzIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDMyLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzM5ID0gQ2hlY2tQaXJhdGVCb2F0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhd24oVHdlZW4odjEzMzkuRW5naW5lLkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgLSAyMCwgMCksIDEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9Ta2lsbCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTa2lsbGFpbWJvdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBaW1Cb3RTa2lsbFBvc2l0aW9uID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgLSA1LCAwKSA7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIHYxMzM5LlBhcmVudCBvciAodjEzMzkuSGVhbHRoLlZhbHVlIDw9IDApIG9yIG5vdCBDaGVja1BpcmF0ZUJvYXQoKQogICAgICAgICAgICAgICAgICAgICAgICBBdXRvU2tpbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgU2tpbGxhaW1ib3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuYmppckZpc2hCb2F0IHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBDaGVja1BpcmF0ZUJvYXQoKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpDYXB0dXJlQ29udHJvbGxlcigpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6QnV0dG9uMURvd24oVmVjdG9yMi5uZXcoMTI4MCwgNjcyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1MiwgdjE0NTMgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTQ1MzpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDUzLlRvb2xUaXAgPT0gIk1lbGVlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTQ1Myk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJDIiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1NCwgdjE0NTUgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTQ1NTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDU1LlRvb2xUaXAgPT0gIkJsb3ggRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNDU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiViIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJWIiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDU2LCB2MTQ1NyBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNDU3OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NTcuVG9vbFRpcCA9PSAiU3dvcmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNDU3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1OCwgdjE0NTkgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTQ1OTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDU5LlRvb2xUaXAgPT0gIkd1biIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE0NTkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTI4ID0gdjE2Lk1haW46QWRkU2VjdGlvbigiRWxpdGUiKTsKICAgIGxvY2FsIHY1MjkgPSB2MTYuTWFpbjpBZGRQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIkVsaXRlIFN0YXR1cyIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjUyOTpTZXREZXNjKCJFbGl0ZSBCb3NzOiDinIXvuI8gfCBLaWxsZWQ6ICAiIC4uIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVsaXRlSHVudGVyIiwgIlByb2dyZXNzIikpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY1Mjk6U2V0RGVzYygiRWxpdGUgQm9zczog4p2M77iPIHwgS2lsbGVkOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVsaXRlSHVudGVyIiwgIlByb2dyZXNzIikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUzMCA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlRWxpdGUiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBFbGl0ZSBIdW50ZXIiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzgpCiAgICAgICAgX0cuQXV0b0VsaXRlID0gdjYzODsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRWxpdGU6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9FbGl0ZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiRGlhYmxvIikgb3Igc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkRlYW5kcmUiKSBvciBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiVXJiYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjYzLCB2MTY2NCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjY0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTY2NDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE2NjQuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NjQuTmFtZSA9PSAiRGlhYmxvIikgb3IgKHYxNjY0Lk5hbWUgPT0gIkRlYW5kcmUiKSBvciAodjE2NjQuTmFtZSA9PSAiVXJiYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjE2NjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2NC5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2NC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9FbGl0ZSA9PSBmYWxzZSkgb3IgKHYxNjY0Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NjQuUGFyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbGl0ZUh1bnRlciIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NTMxID0gdjE2LlNlYTpBZGRTZWN0aW9uKCJNaXJhZ2UgSXNsYW5kIik7CiAgICBsb2NhbCB2NTMyID0gdjE2LlNlYTpBZGRQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIlN0YXR1cyIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY3OTMgPSBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIikuU2t5Lk1vb25UZXh0dXJlSWQ7CiAgICAgICAgICAgICAgICBpZiAodjc5MyA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQ5NDMxIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjEwMCUiOwogICAgICAgICAgICAgICAgZWxzZWlmICh2NzkzID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNDkwNTIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiNzUlIjsKICAgICAgICAgICAgICAgIGVsc2VpZiAodjc5MyA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQzNzMzIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjUwJSI7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHY3OTMgPT0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTcwOTE1MDQwMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICIyNSUiOwogICAgICAgICAgICAgICAgZWxzZWlmICh2NzkzID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNDk2ODAiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiMTUlIjsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICIwJSI7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lLldvcmtzcGFjZS5NYXA6RmluZEZpcnN0Q2hpbGQoIk15c3RpY0lzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBNaXJhZ2VTdGF0dXMgPSAi4pyF77iPIjsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBNaXJhZ2VTdGF0dXMgPSAi4p2M77iPIjsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICAgICAgdjUzMjpTZXREZXNjKCJNaXJhZ2U6ICIgLi4gTWlyYWdlU3RhdHVzIC4uICIgfCBGdWxsIE1vb246ICIgLi4gRnVsbE1vb25TdGF0dXMpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKICAgIHYxNi5TZWE6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJGbHkgVG8gVGhlIEhpZ2ggTW91bnRhaW4iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIFR3ZWVuVG9IaWdoZXN0UG9pbnQoKTsKICAgICAgICBlbmQKICAgIH0pOwogICAgZnVuY3Rpb24gVHdlZW5Ub0hpZ2hlc3RQb2ludCgpCiAgICAgICAgbG9jYWwgdjYzOSA9IGdldEhpZ2hlc3RQb2ludCgpOwogICAgICAgIGlmIHY2MzkgdGhlbgogICAgICAgICAgICBUd2VlbjIodjYzOS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDIxMS44OCwgMCkpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBmdW5jdGlvbiBnZXRIaWdoZXN0UG9pbnQoKQogICAgICAgIGlmIG5vdCBnYW1lLldvcmtzcGFjZS5NYXA6RmluZEZpcnN0Q2hpbGQoIk15c3RpY0lzbGFuZCIpIHRoZW4KICAgICAgICAgICAgcmV0dXJuIG5pbDsKICAgICAgICBlbmQKICAgICAgICBmb3IgdjcyOCwgdjcyOSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5NeXN0aWNJc2xhbmQ6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjcyOTpJc0EoIk1lc2hQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY3MjkuTWVzaElkID09ICJyYnhhc3NldGlkOi8vODMxOTAyNzY5NTE5MTQiKSB0aGVuIC0tdGhheSBpZCDhuqNuaCB2w6BvCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY3Mjk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmxvY2FsIHY2NiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUcEFkdmFuY2VkIiwgewogICAgVGl0bGUgPSAiRmx5IFRvIEFkdmFuY2VkIEZydWl0IERlYWxlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NjY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTcpCiAgICBfRy5BdXRvVHBBZHZhbmNlZCA9IHYyNTc7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9UcEFkdmFuY2VkIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjczMCA9IGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuTlBDczpGaW5kRmlyc3RDaGlsZCgiQWR2YW5jZWQgRnJ1aXQgRGVhbGVyIik7CiAgICAgICAgICAgIGlmICh2NzMwIGFuZCB2NzMwOklzQSgiTW9kZWwiKSkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg1NiA9IHY3MzAuUHJpbWFyeVBhcnQgYW5kIHY3MzAuUHJpbWFyeVBhcnQuUG9zaXRpb24gOwogICAgICAgICAgICAgICAgaWYgdjg1NiB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcodjg1NikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY2NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUd2VlbkdlYXIiLCB7CiAgICBUaXRsZSA9ICJGbHkgVG8gR2VhciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Njc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTgpCiAgICBfRy5Ud2VlblRvR2VhciA9IHYyNTg7CmVuZCk7CnYxNy5Ub2dnbGVUd2VlbkdlYXI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLlR3ZWVuVG9HZWFyIHRoZW4KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJNeXN0aWNJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDQwLCB2MTA0MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5NeXN0aWNJc2xhbmQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjEwNDE6SXNBKCJNZXNoUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0MS5NYXRlcmlhbCA9PSBFbnVtLk1hdGVyaWFsLk5lb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjEwNDEuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHY2OCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVsb2NrbW9vbiIsIHsKICAgIFRpdGxlID0gIkxvb2sgTW9vbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Njg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTkpCiAgICBfRy5BdXRvTG9ja01vb24gPSB2MjU5OwplbmQpOwp2MTcuVG9nZ2xlbG9ja21vb246U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9Mb2NrTW9vbiB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2Nzk0ID0gZ2FtZS5MaWdodGluZzpHZXRNb29uRGlyZWN0aW9uKCk7CiAgICAgICAgICAgICAgICBsb2NhbCB2Nzk1ID0gZ2FtZS5Xb3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUucCArICh2Nzk0ICogMTAwKSA7CiAgICAgICAgICAgICAgICBnYW1lLldvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSA9IENGcmFtZS5sb29rQXQoZ2FtZS5Xb3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUucCwgdjc5NSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvTG9ja01vb24gdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUU6RmlyZVNlcnZlcigiQWN0aXZhdGVBYmlsaXR5Iik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjY5ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9TYWJlciIsIHsKICAgIFRpdGxlID0gIkF1dG8gU2FiZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjY5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjYwKQogICAgX0cuQXV0b19TYWJlciA9IHYyNjA7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvU2FiZXI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIChfRy5BdXRvX1NhYmVyIGFuZCAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMjAwKSkgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLkZpbmFsLlBhcnQuVHJhbnNwYXJlbmN5ID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLkRvb3IuVHJhbnNwYXJlbmN5ID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gMTYxMi41NTg4NCwgMzYuOTc3NDEzMiwgMTQ4LjcxOTU0MywgMC4zNzA5MTI3OSwgMy4wNzE3MTVlLTksIC0gMC45Mjg2Njc3MjQsIDMuOTcwOTk1ZS04LCAxLCAxLjkxNjc5MzVlLTgsIDAuOTI4NjY3NzI0LCAtIDQuMzk4Njk4ZS04LCAwLjM3MDkxMjc5KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlMS5CdXR0b24uQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGUyLkJ1dHRvbi5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5RdWVzdFBsYXRlcy5QbGF0ZTMuQnV0dG9uLkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlNC5CdXR0b24uQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGU1LkJ1dHRvbi5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTYxMi41NTg4NCwgMzYuOTc3NDEzMiwgMTQ4LjcxOTU0MywgMC4zNzA5MTI3OSwgMy4wNzE3MTVlLTksIC0gMC45Mjg2Njc3MjQsIDMuOTcwOTk1ZS04LCAxLCAxLjkxNjc5MzVlLTgsIDAuOTI4NjY3NzI0LCAtIDQuMzk4Njk4ZS04LCAwLjM3MDkxMjc5KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuRGVzZXJ0LkJ1cm4uUGFydC5UcmFuc3BhcmVuY3kgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlRvcmNoIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVG9yY2giKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJUb3JjaCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygxMTE0LjYxNDc1LCA1LjA0Njc5NzI4LCA0MzUwLjIyODAzLCAtIDAuNjQ4NDY2NTg3LCAtIDEuMjg3OTkwOWUtOSwgMC43NjEyNDMxMDUsIC0gNS43MDY1MjllLTEwLCAxLCAxLjIwNTg0NTRlLTksIC0gMC43NjEyNDMxMDUsIDMuNDc1NDQ4OGUtMTAsIC0gMC42NDg0NjY1ODcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDE2MTAuMDA3NTcsIDExLjUwNDk4NTgsIDE2NC4wMDE1ODcsIDAuOTg0ODA3NTUxLCAtIDAuMTY3NzIyMjg1LCAtIDAuMDQ0OTgxODE0OSwgMC4xNzM2NDk0MywgMC45NTEyNDQyMzUsIDAuMjU0OTEyMTk4LCAwLjAwMDAzNDIzNzI4LCAtIDAuMjU4ODUwNTE1LCAwLjk2NTkxNzQwOCkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiU2lja01hbiIpIH49IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJHZXRDdXAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIkN1cCIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiRmlsbEN1cCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5DdXApOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDApOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlNpY2tNYW4iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpID09IG5pbCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlJpY2hTb24iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMjk2Ny41OTUyMSwgLSA0LjkxMDg5ODIxLCA1MzI4LjcwNzAzLCAwLjM0MjIwODU2NCwgLSAwLjAyMjc4NDkwNTUsIDAuOTM5MzQ3ODA0LCAwLjAyNTE2MDM4MTYsIDAuOTk5NTY5NzE0LCAwLjAxNTA3OTYxNjYsIC0gMC45MzkyODcxMjYsIDAuMDE4NDczOTczNSwgMC4zNDI2MzQ1NTkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc5OSwgdjE4MDAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODAwLk5hbWUgPT0gIk1vYiBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciBbTHYuIDEyMF0gW0Jvc3NdIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODAwOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTgwMDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE4MDAuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDAuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAwLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAwLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTgwMC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjE4MDAuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCBfRy5BdXRvX1NhYmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpID09IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJSaWNoU29uIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJSZWxpYyIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxNDA0LjkxNTA0LCAyOS45NzczMjczLCAzLjgwNTk4MTE2LCAwLjg3NjUxNDQ5NCwgNS42NjkwNjg4ZS05LCAwLjQ4MTM3NTQ1NiwgMi41Mzg1MmUtOCwgMSwgLSA1Ljc5OTk1NmUtOCwgLSAwLjQ4MTM3NTQ1NiwgNi4zMDU3MjY0ZS04LCAwLjg3NjUxNDQ5NCkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNhYmVyIEV4cGVydCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiU2FiZXIgRXhwZXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjAsIHYxNDYxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDYxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ2MS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDYxLk5hbWUgPT0gIlNhYmVyIEV4cGVydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjEuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE0NjEuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQ2MS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxNDYxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgX0cuQXV0b19TYWJlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJQbGFjZVJlbGljIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NzAgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1BvbGVWMSIsIHsKICAgIFRpdGxlID0gIkF1dG8gUG9sZSBWMSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NzA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjEpCiAgICBfRy5BdXRvX1BvbGVWMSA9IHYyNjE7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvUG9sZVYxOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjcxID0gQ0ZyYW1lLm5ldygtIDc3NDguMDE4NTU0Njg3NSwgNTYwNi44MDYxNTIzNDM3NSwgLSAyMzA1Ljg5ODY4MTY0MDYyNSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fUG9sZVYxIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJUaHVuZGVyIEdvZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNDIsIHYxMDQzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDMuTmFtZSA9PSAiVGh1bmRlciBHb2QiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTA0My5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0My5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDMuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1BvbGVWMSBvciBub3QgdjEwNDMuUGFyZW50IG9yICh2MTA0My5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY3MS5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY3MSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA3NzQ4LjAxODU1NDY4NzUsIDU2MDYuODA2MTUyMzQzNzUsIC0gMjMwNS44OTg2ODE2NDA2MjUpKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGh1bmRlciBHb2QiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUaHVuZGVyIEdvZCIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjcyID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9TYXciLCB7CiAgICBUaXRsZSA9ICJBdXRvIFNoYXJrIFNhdyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NzI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjIpCiAgICBfRy5BdXRvX1NhdyA9IHYyNjI7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvU2F3OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjcxID0gQ0ZyYW1lLm5ldygtIDY5MC4zMzA4MTA1NDY4OCwgMTUuMDk0MjUxNjMyNjksIDE1ODIuMjM4MDM3MTA5NCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU2F3IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJUaGUgU2F3IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA0NCwgdjEwNDUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0NS5OYW1lID09ICJUaGUgU2F3IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTA0NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwNDUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ1Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA0NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19TYXcgb3Igbm90IHYxMDQ1LlBhcmVudCBvciAodjEwNDUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2NzEuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDE1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NzEpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNjkwLjMzMDgxMDU0Njg4LCAxNS4wOTQyNTE2MzI2OSwgMTU4Mi4yMzgwMzcxMDk0KSk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRoZSBTYXciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUaGUgU2F3IikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NzMgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1dhcmRlbiIsIHsKICAgIFRpdGxlID0gIkF1dG8gV2FyZGVuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3MzpPbkNoYW5nZWQoZnVuY3Rpb24odjI2MykKICAgIF9HLkF1dG9fV2FyZGVuID0gdjI2MzsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9XYXJkZW46U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NzQgPSBDRnJhbWUubmV3KDUxODYuMTQ2OTcyNjU2MjUsIDI0Ljg2Njg0MjI2OTg5NzQ2LCA4MzIuMTg4NTM3NTk3NjU2Mik7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fV2FyZGVuIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDaGllZiBXYXJkZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDQ2LCB2MTA0NyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ3Lk5hbWUgPT0gIkNoaWVmIFdhcmRlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNDc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDQ3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0Ny5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0Ny5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNDcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fV2FyZGVuIG9yIG5vdCB2MTA0Ny5QYXJlbnQgb3IgKHYxMDQ3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjc0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAxNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjc0KTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1MTg2LjE0Njk3MjY1NjI1LCAyNC44NjY4NDIyNjk4OTc0NiwgODMyLjE4ODUzNzU5NzY1NjIpKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2hpZWYgV2FyZGVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2hpZWYgV2FyZGVuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY1MzMgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlSGFsbG93IiwgewogICAgICAgIFRpdGxlID0gIkhhbGxvdyBTY3l0aGUiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzM6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDApCiAgICAgICAgQXV0b0hhbGxvd1N5Y3RoZSA9IHY2NDA7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUhhbGxvdzpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIEF1dG9IYWxsb3dTeWN0aGUgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ2MiwgdjE0NjMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2MTQ2My5OYW1lLCAiU291bCBSZWFwZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ2My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYzLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxNDYzLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoQXV0b0hhbGxvd1N5Y3RoZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIYWxsb3cgRXNzZW5jZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGFsbG93IEVzc2VuY2UiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA4OTMyLjMyMjI2NTYyNSwgMTQ2LjgzMTU0Mjk2ODc1LCA2MDYyLjU1MDc4MTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChDRnJhbWUubmV3KC0gODkzMi4zMjIyNjU2MjUsIDE0Ni44MzE1NDI5Njg3NSwgNjA2Mi41NTA3ODEyNSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA4CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJIYWxsb3cgRXNzZW5jZSIpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvSGFsbG93U3ljdGhlIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NTcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkJvbmVzIiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQnV5IiwKICAgICAgICAgICAgICAgICAgICBbM10gPSAxLAogICAgICAgICAgICAgICAgICAgIFs0XSA9IDEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODU3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MzQgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlWWFtYSIsIHsKICAgICAgICBUaXRsZSA9ICJZYW1hIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTM0Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjQxKQogICAgICAgIF9HLkF1dG9ZYW1hID0gdjY0MTsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlWWFtYTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9ZYW1hIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbGl0ZUh1bnRlciIsICJQcm9ncmVzcyIpID49IDMwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuV2F0ZXJmYWxsLlNlYWxlZEthdGFuYS5IYW5kbGUuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSBvciBub3QgX0cuQXV0b1lhbWEKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTM1ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZVR1c2hpdGEiLCB7CiAgICAgICAgVGl0bGUgPSAiVHVzaGl0YSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzNTpPbkNoYW5nZWQoZnVuY3Rpb24odjY0MikKICAgICAgICBBdXRvVHVzaGl0YSA9IHY2NDI7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVR1c2hpdGE6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvVHVzaGl0YSB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkxvbmdtYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEzNDAsIHYxMzQxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMzQxLk5hbWUgPT0gKCJMb25nbWEiIG9yICh2MTM0MS5OYW1lID09ICJMb25nbWEiKSkpIGFuZCAodjEzNDEuSHVtYW5vaWQuSGVhbHRoID4gMCkgYW5kIHYxMzQxOklzQSgiTW9kZWwiKSBhbmQgdjEzNDE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMzQxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoU2VsZWN0V2VhcG9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxMzQxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQxLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0MS5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEF1dG9UdXNoaXRhIG9yIG5vdCB2MTM0MS5QYXJlbnQgb3IgKHYxMzQxLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTAyMzguODc1OTc2NTYzLCAzODkuNzkxMjkwMjgzMiwgLSA5NTQ5Ljc5Mzk0NTMxMjUpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTM2ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUhvbHkiLCB7CiAgICAgICAgVGl0bGUgPSAiTGlnaHQgVGhlIEhvbHkgVG9yY2giLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzY6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDMpCiAgICAgICAgX0cuQXV0b19Ib2x5X1RvcmNoID0gdjY0MzsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlSG9seTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fSG9seV9Ub3JjaCB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTA3NTIsIDQxNywgLSA5MzY2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Ib2x5X1RvcmNoIG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMDc1MiwgNDE3LCAtIDkzNjYpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTE2NzIsIDMzNCwgLSA5NDc0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Ib2x5X1RvcmNoIG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMTY3MiwgMzM0LCAtIDk0NzQpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTIxMzIsIDUyMSwgLSAxMDY1NSkpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fSG9seV9Ub3JjaCBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTIxMzIsIDUyMSwgLSAxMDY1NSkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzMzNiwgNDg2LCAtIDY5ODUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEzMzM2LCA0ODYsIC0gNjk4NSkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzQ4OSwgMzMyLCAtIDc5MjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEzNDg5LCAzMzIsIC0gNzkyNSkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmxvY2FsIHY3NSA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvQ2FudmFuZGVyIiwgewogICAgVGl0bGUgPSAiQXV0byBDYW52YW5kZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjc1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjY0KQogICAgX0cuQXV0b19DYW52YW5kZXIgPSB2MjY0OwplbmQpOwp2MTcuVG9nZ2xlQXV0b0NhbnZhbmRlcjpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY3MSA9IENGcmFtZS5uZXcoNTMxMS4wNzQyMTg3NSwgNDI2LjAyNDM4MzU0NDkyMTksIDE2NS4xMjc2MjQ1MTE3MTg3NSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fQ2FudmFuZGVyIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA0OCwgdjEwNDkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0OS5OYW1lID09ICJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTA0OTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwNDkuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA0OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19DYW52YW5kZXIgb3Igbm90IHYxMDQ5LlBhcmVudCBvciAodjEwNDkuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2NzEuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDE1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NzEpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDUzMTEuMDc0MjE4NzUsIDQyNi4wMjQzODM1NDQ5MjE5LCAxNjUuMTI3NjI0NTExNzE4NzUpKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkJlYXV0aWZ1bCBQaXJhdGUiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY3NiA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvTXVza2V0ZWVySGF0IiwgewogICAgVGl0bGUgPSAiQXV0byBNdXNrZXRlZXIgSGF0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3NjpPbkNoYW5nZWQoZnVuY3Rpb24odjI2NSkKICAgIF9HLkF1dG9fTXVza2V0ZWVySGF0ID0gdjI2NTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9NdXNrZXRlZXJIYXQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgwLjEpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fTXVza2V0ZWVySGF0IHRoZW4KICAgICAgICAgICAgICAgIGlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxODAwKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIikuS2lsbGVkQmFuZGl0cyA9PSBmYWxzZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkZvcmVzdCBQaXJhdGUiKSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIjUwIikgYW5kIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRm9yZXN0IFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTU1OSwgdjE1NjAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNTYwLk5hbWUgPT0gIkZvcmVzdCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjAuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE1NjAuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTYwLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3NNb24gPSB2MTU2MC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE1NjAuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19NdXNrZXRlZXJIYXQgPT0gZmFsc2UpIG9yIG5vdCB2MTU2MC5QYXJlbnQgb3IgKHYxNTYwLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEzMjA2LjQ1MjE0ODQzOCwgNDI1Ljg5MTk5ODI5MTAyLCAtIDc5NjQuNTUzNzEwOTM3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3NS40ODkyNTc4MTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoVmVjdG9yMy5uZXcoLSAxMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3NS40ODkyNTc4MTI1KSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMzApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0YXJ0UXVlc3QiLCAiQ2l0aXplblF1ZXN0IiwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxODAwKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIikuS2lsbGVkQm9zcyA9PSBmYWxzZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkNhcHRhaW4gRWxlcGhhbnQiKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjY1LCB2MTY2NiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NjYuTmFtZSA9PSAiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lRWxlcGhhbnQgPSB2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVFbGVwaGFudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19NdXNrZXRlZXJIYXQgPT0gZmFsc2UpIG9yICh2MTY2Ni5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNjY2LlBhcmVudCBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTMzNzQuODg5NjQ4NDM4LCA0MjEuMjc3NTI2ODU1NDcsIC0gODIyNS4yMDg5ODQzNzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTI0NDMuODY3MTg3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzUuNDg5MjU3ODEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKENGcmFtZS5uZXcoLSAxMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3NS40ODkyNTc4MTI1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiLCAiQ2l0aXplbiIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMTgwMCkgYW5kIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIsICJDaXRpemVuIikgPT0gMikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTI1MTIuMTM4NjcxODc1LCAzNDAuMzkyNzkxNzQ4MDUsIC0gOTg3Mi44MjAzMTI1KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2NzcgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b09ic2VydmF0aW9uVjIiLCB7CiAgICBUaXRsZSA9ICJBdXRvIE9ic2VydmF0aW9uIFYyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3NzpPbkNoYW5nZWQoZnVuY3Rpb24odjI2NikKICAgIF9HLkF1dG9fT2JzZXJ2YXRpb25WMiA9IHYyNjY7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvT2JzZXJ2YXRpb25WMjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b19PYnNlcnZhdGlvblYyIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIsICJDaXRpemVuIikgPT0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLkF1dG9fTXVza2V0ZWVySGF0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCYW5hbmEiKSBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkFwcGxlIikgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQaW5lYXBwbGUiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjQ0NC43ODUxNTYyNSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzMuMTgwNjY0MDYyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19PYnNlcnZhdGlvblYyIG9yICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEyNDQ0Ljc4NTE1NjI1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3My4xODA2NjQwNjI1KSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIiwgIkNpdGl6ZW4iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGcnVpdCBCb3dsIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGcnVpdCBCb3dsIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTA5MjAuMTI1LCA2MjQuMjAyNzU4Nzg5MDYsIC0gMTAyNjYuOTk1MTE3MTg4KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX09ic2VydmF0aW9uVjIgb3IgKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTA5MjAuMTI1LCA2MjQuMjAyNzU4Nzg5MDYsIC0gMTAyNjYuOTk1MTE3MTg4KSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIktlblRhbGsyIiwgIlN0YXJ0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIktlblRhbGsyIiwgIkJ1eSIpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNTYxLCB2MTU2MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNTYyLk5hbWUgPT0gIkFwcGxlIikgb3IgKHYxNTYyLk5hbWUgPT0gIkJhbmFuYSIpIG9yICh2MTU2Mi5OYW1lID09ICJQaW5lYXBwbGUiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTYyLkhhbmRsZS5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDEsIDEwKSA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LCB2MTU2Mi5IYW5kbGUsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBfRy5BdXRvX011c2tldGVlckhhdCA9IHRydWU7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2NzggPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1JhaW5ib3dIYWtpIiwgewogICAgVGl0bGUgPSAiQXV0byBSYWluYm93IEhha2kiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjc4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjY3KQogICAgX0cuQXV0b19SYWluYm93SGFraSA9IHYyNjc7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvUmFpbmJvd0hha2k6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgwLjEpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fUmFpbmJvd0hha2kgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMTg5Mi4wNzAzMTI1LCA5MzAuNTc2NzIxMTkxNDEsIC0gODc2MC4xNTkxNzk2ODc1KSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKChWZWN0b3IzLm5ldygtIDExODkyLjA3MDMxMjUsIDkzMC41NzY3MjExOTE0MSwgLSA4NzYwLjE1OTE3OTY4NzUpIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkhvcm5lZE1hbiIsICJCZXQiKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIlN0b25lIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlN0b25lIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE1NjMsIHYxNTY0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNTY0Lk5hbWUgPT0gIlN0b25lIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVJhaW5ib3cgPSB2MTU2NC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE1NjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU2NC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVSYWluYm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU2NC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yICh2MTU2NC5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNTY0LlBhcmVudCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEwODYuMTE2MjEsIDM4Ljg0MjU5MDMsIDY3NjguNzE0MzYpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkh5ZHJhIExlYWRlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJIeWRyYSBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY2OSwgdjE2NzAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NzAuTmFtZSA9PSAiSHlkcmEgTGVhZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVJhaW5ib3cgPSB2MTY3MC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NzAuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY3MC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NzAuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVSYWluYm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY3MC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yICh2MTY3MC5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNjcwLlBhcmVudCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1NzEzLjk4ODc3LCA2MDEuOTIyOTc0LCAyMDIuNzUxMjUxKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIktpbG8gQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIktpbG8gQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzYyLCB2MTc2MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc2My5OYW1lID09ICJLaWxvIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lUmFpbmJvdyA9IHYxNzYzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTc2My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzYzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NjMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVSYWluYm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgKHYxNzYzLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE3NjMuUGFyZW50IG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDI4NzcuNjE3NDMsIDQyMy41NTg2ODUsIC0gNzIwNy4zMTAwNikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzc0LCB2MTc3NSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc3NS5OYW1lID09ICJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVJhaW5ib3cgPSB2MTc3NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE3NzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc3NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NzUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzc1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lUmFpbmJvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yICh2MTc3NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNzc1LlBhcmVudCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEzNDg1LjAyODMsIDMzMS43MDkyNTksIC0gODAxMi40ODczKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE4MDIsIHYxODAzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODAzLk5hbWUgPT0gIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lUmFpbmJvdyA9IHYxODAzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTgwMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwMy5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVSYWluYm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgKHYxODAzLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE4MDMuUGFyZW50IG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDUzMTIuMzU5ODYzMjgxMywgMjAuMTQxMjAxMDE5Mjg3LCAtIDEwLjE1ODUzODgxODM1OSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMTg5Mi4wNzAzMTI1LCA5MzAuNTc2NzIxMTkxNDEsIC0gODc2MC4xNTkxNzk2ODc1KSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKChWZWN0b3IzLm5ldygtIDExODkyLjA3MDMxMjUsIDkzMC41NzY3MjExOTE0MSwgLSA4NzYwLjE1OTE3OTY4NzUpIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkhvcm5lZE1hbiIsICJCZXQiKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHY3OSA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvU2t1bGxHdWl0YXIiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFNrdWxsIEd1aXRhciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Nzk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjgpCiAgICBfRy5BdXRvX1NrdWxsR3VpdGFyID0gdjI2ODsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9Ta3VsbEd1aXRhcjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b19Ta3VsbEd1aXRhciB0aGVuCiAgICAgICAgICAgICAgICBpZiAoR2V0V2VhcG9uSW52ZW50b3J5KCJTa3VsbCBHdWl0YXIiKSA9PSBmYWxzZSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDk2ODEuNDU4OTg0Mzc1LCA2LjEzOTg4MDY1NzE5NjA0NSwgNjM0MS4zNzIwNzAzMTI1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6RmluZEZpcnN0Q2hpbGQoIlNrZWxldG9uIE1hY2hpbmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJzb3VsR3VpdGFyQnV5IiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uQ2FuZGxlMS5UcmFuc3BhcmVuY3kgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQxLkxlZnQuUGFydC5UcmFuc3BhcmVuY3kgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXN0MiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDg3NjIuNjkxNDA2MjUsIDE3Ni44NDc4MzkzNTU0Njg3NSwgNjE3MS4zMDc2MTcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKChDRnJhbWUubmV3KC0gODc2Mi42OTE0MDYyNSwgMTc2Ljg0NzgzOTM1NTQ2ODc1LCA2MTcxLjMwNzYxNzE4NzUpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzKSBvciBub3QgX0cuQXV0b19Ta3VsbEd1aXRhcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDcuTGVmdC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQ2LkxlZnQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkNS5MZWZ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDQuUmlnaHQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkMy5MZWZ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDIuUmlnaHQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkMS5SaWdodC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlRhYmxldC5TZWdtZW50MTpGaW5kRmlyc3RDaGlsZCgiQ2xpY2tEZXRlY3RvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDE6RmluZEZpcnN0Q2hpbGQoIkNsaWNrRGV0ZWN0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXN0NCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk1NTMuNTk4NjMyODEyNSwgNjUuNjIzMzgyNTY4MzU5MzgsIDYwNDEuNTg4Mzc4OTA2MjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKChDRnJhbWUubmV3KC0gOTU1My41OTg2MzI4MTI1LCA2NS42MjMzODI1NjgzNTkzOCwgNjA0MS41ODgzNzg5MDYyNSkuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMpIG9yIG5vdCBfRy5BdXRvX1NrdWxsR3VpdGFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0My5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDMuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0NC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0NC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDYuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ2LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDYuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0OC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDguQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTAuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxMC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxMC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxMC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXN0MyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkZpbmRGaXJzdENoaWxkKCJHaG9zdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE3OTggPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiR3VpdGFyUHV6emxlUHJvZ3Jlc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzJdID0gIkdob3N0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MTc5OCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkxpdmluZyBab21iaWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTgwNCwgdjE4MDUgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODA1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxODA1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjE4MDUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4MDUuTmFtZSA9PSAiTGl2aW5nIFpvbWJpZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwNS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwNS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDIwLCAwKSA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMDE2MC43ODcxMDkzNzUsIDEzOC42NjE2OTczODc2OTUzLCA1OTU1LjAzMDc2MTcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpDYXB0dXJlQ29udHJvbGxlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6QnV0dG9uMURvd24oVmVjdG9yMi5uZXcoMTI4MCwgNjcyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTAxNjAuNzg3MTA5Mzc1LCAxMzguNjYxNjk3Mzg3Njk1MywgNTk1NS4wMzA3NjE3MTg3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJncmF2ZXN0b25lRXZlbnQiLCAyKSwgIkVycm9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDg2NTMuMjA2MDU0Njg3NSwgMTQwLjk4NDg3ODU0MDAzOTA2LCA2MTYwLjAzMzIwMzEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ3JhdmVzdG9uZUV2ZW50IiwgMiksICJOb3RoaW5nIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oIldhaXQgRnVsbCBNb29uIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdyYXZlc3RvbmVFdmVudCIsIDIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NjgxLjQ1ODk4NDM3NSwgNi4xMzk4ODA2NTcxOTYwNDUsIDYzNDEuMzcyMDcwMzEyNSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjgwID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9CdWRkeSIsIHsKICAgIFRpdGxlID0gIkF1dG8gQnVkZHkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjgwOk9uQ2hhbmdlZChmdW5jdGlvbih2MjY5KQogICAgX0cuQXV0b19CdWRkeSA9IHYyNjk7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvQnVkZHk6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2ODEgPSBDRnJhbWUubmV3KC0gNzMxLjIwMzQzMDE3NTc4MTIsIDM4MS41NjU4ODc0NTExNzE5LCAtIDExMTk4LjQ5NTExNzE4NzUpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX0J1ZGR5IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA1MCwgdjEwNTEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA1MS5OYW1lID09ICJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDUxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTA1MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwNTEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNTEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDUxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDUxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA1MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19CdWRkeSBvciBub3QgdjEwNTEuUGFyZW50IG9yICh2MTA1MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4MS5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4MSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA3MzEuMjAzNDMwMTc1NzgxMiwgMzgxLjU2NTg4NzQ1MTE3MTksIC0gMTExOTguNDk1MTE3MTg3NSkpOwogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjgyID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9EdWFsS2F0YW5hIiwgewogICAgVGl0bGUgPSAiQXV0byBDREsiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjgyOk9uQ2hhbmdlZChmdW5jdGlvbih2MjcwKQogICAgX0cuQXV0b19EdWFsS2F0YW5hID0gdjI3MDsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9EdWFsS2F0YW5hOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX0R1YWxLYXRhbmEgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlR1c2hpdGEiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlR1c2hpdGEiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJZYW1hIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJZYW1hIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVHVzaGl0YSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVHVzaGl0YSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVHVzaGl0YSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiVHVzaGl0YSIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIllhbWEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiTG9hZEl0ZW0iLCAiVHVzaGl0YSIpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX0R1YWxLYXRhbmEgdGhlbgogICAgICAgICAgICAgICAgaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSAyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJFdmlsIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJFdmlsIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSA1KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJHb29kIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJHb29kIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gNikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBCb3NzIFtMdi4gMjAyNV0gW0Jvc3NdIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIEJvc3MgW0x2LiAyMDI1XSBbQm9zc10iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gQm9zcyBbTHYuIDIwMjVdIFtCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxODQyLCB2MTg0MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxODQzLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiBCb3NzIikgb3IgKHYxODQzLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTg0My5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE4NDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBwb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4NDMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTg0My5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTg0My5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4NDMuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODQzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxODQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxODQzLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoKENGcmFtZS5uZXcoLSAxMjM2MS43MDYwNTQ2ODc1LCA2MDMuMzU0Nzk3MzYzMjgxMiwgLSA2NTUwLjUzNDE3OTY4NzUpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTIzNjEuNzA2MDU0Njg3NSwgNjAzLjM1NDc5NzM2MzI4MTIsIC0gNjU1MC41MzQxNzk2ODc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjI1My41NDE5OTIxODc1LCA1OTguODk5OTYzMzc4OTA2MiwgLSA2NTQ2LjgzODg2NzE4NzUpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjM2MS43MDYwNTQ2ODc1LCA2MDMuMzU0Nzk3MzYzMjgxMiwgLSA2NTUwLjUzNDE3OTY4NzUpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEF1dG9fUXVlc3RfWWFtYV8xIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJNeXRob2xvZ2ljYWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA1MiwgdjEwNTMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA1My5OYW1lID09ICJNeXRob2xvZ2ljYWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDUzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAwLCAtIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvX0R1YWxLYXRhbmEgPT0gZmFsc2UpIG9yIChBdXRvX1F1ZXN0X1lhbWFfMSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTM0NTEuNDY0ODQzNzUsIDU0My43MTI4OTA2MjUsIC0gNjk2MS4wMDI5Mjk2ODc1KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIEF1dG9fUXVlc3RfWWFtYV8yIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODU4LCB2ODU5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4NTk6RmluZEZpcnN0Q2hpbGQoIkhhemVFU1AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY4NTkuSGF6ZUVTUC5TaXplID0gVURpbTIubmV3KDUwLCA1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjg1OS5IYXplRVNQLk1heERpc3RhbmNlID0gImluZiI7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGZvciB2ODYwLCB2ODYxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4NjE6RmluZEZpcnN0Q2hpbGQoIkhhemVFU1AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY4NjEuSGF6ZUVTUC5TaXplID0gVURpbTIubmV3KDUwLCA1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjg2MS5IYXplRVNQLk1heERpc3RhbmNlID0gImluZiI7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGZvciB2NzMxLCB2NzMyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgKEF1dG9fUXVlc3RfWWFtYV8yIGFuZCB2NzMyOkZpbmRGaXJzdENoaWxkKCJIYXplRVNQIikgYW5kICgodjczMi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gRmFybVBvc3NFc3AuUG9zaXRpb24pLm1hZ25pdHVkZSA8PSAzMDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjczMi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IEZhcm1Qb3NzRXNwOwogICAgICAgICAgICAgICAgICAgIHY3MzIuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdjczMi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjczMi5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJCb2R5VmVsb2NpdHkiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDU4ID0gSW5zdGFuY2UubmV3KCJCb2R5VmVsb2NpdHkiLCB2NzMyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTA1OC5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KDEsIDEsIDEpICogbWF0aC5odWdlIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEwNTguVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEF1dG9fUXVlc3RfWWFtYV8yIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgZm9yIHY4NjUsIHY4NjYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjg2NjpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHY4NjYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4NjYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODY2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODY2Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg2Ni5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHY4NjYuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHY4NjYuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2ODY2Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBhbmQgdjg2Ni5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODY2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19EdWFsS2F0YW5hID09IGZhbHNlKSBvciAoQXV0b19RdWVzdF9ZYW1hXzIgPT0gZmFsc2UpIG9yIG5vdCB2ODY2LlBhcmVudCBvciAodjg2Ni5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHY4NjY6RmluZEZpcnN0Q2hpbGQoIkhhemVFU1AiKQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxMzQyLCB2MTM0MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxMzQzOkZpbmRGaXJzdENoaWxkKCJIYXplRVNQIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEzNDMuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTM0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZU1vbiAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b19RdWVzdF9ZYW1hXzMgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkhhbGxvdyBFc3NlbmNlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlN1bW1vbmVyLkRldGVjdGlvbi5DRnJhbWUpOwogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJIZWxsRGltZW5zaW9uIikgdGhlbgogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBbTHYuIDIyMDBdIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gW0x2LiAyMjAwXSBbQm9zc10iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkhlbGwncyBNZXNzZW5nZXIgW0x2LiAyMjAwXSBbQm9zc10iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjQxLCB2MTY0MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNjQyLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiIpIG9yICh2MTY0Mi5OYW1lID09ICJDdXJzZWQgU2tlbGV0b24iKSBvciAodjE2NDIuTmFtZSA9PSAiSGVsbCdzIE1lc3NlbmdlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY0Mi5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFN3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY0Mi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NDIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NDIuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NDIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE2NDIuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNjQyLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NDIuSHVtYW5vaWQuSGVhbHRoIDw9IDApIGFuZCB2MTY0Mi5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjE2NDIuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTY0Mi5QYXJlbnQgb3IgKEF1dG9fUXVlc3RfWWFtYV8zID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVsbERpbWVuc2lvbi5Ub3JjaDEuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVtKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlbGxEaW1lbnNpb24uVG9yY2gyLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWxsRGltZW5zaW9uLlRvcmNoMy5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVsbERpbWVuc2lvbi5FeGl0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvX0R1YWxLYXRhbmEgPT0gZmFsc2UpIG9yIChBdXRvX1F1ZXN0X1lhbWFfMyA9PSBmYWxzZSkgb3IgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gMykKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciIpIG9yIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIFtMdi4gMjEwMF0gW1JhaWQgQm9zc10iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY3MSwgdjE2NzIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NzIuTmFtZSA9PSAiU291bCBSZWFwZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjcyLkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY3Mi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvX0R1YWxLYXRhbmEgPT0gZmFsc2UpIG9yIChBdXRvX1F1ZXN0X1lhbWFfMyA9PSBmYWxzZSkgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIkhlbGxEaW1lbnNpb24iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk1NzAuMDMzMjAzMTI1LCAzMTUuOTM0NjkyMzgyODEyNSwgNjcyNi44OTMwNjY0MDYyNSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJvbmVzIiwgIkJ1eSIsIDEsIDEpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b19RdWVzdF9UdXNoaXRhXzEgdGhlbgogICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gOTU0Ni45OTAyMzQzNzUsIDIxLjEzOTg5MjU3ODEyNSwgNDY4Ni4xMTQyNTc4MTI1KSk7CiAgICAgICAgICAgIHdhaXQoNSk7CiAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA2MTIwLjA1NzYxNzE4NzUsIDE2LjQ1NTc4MDAyOTI5Njg3NSwgLSAyMjUwLjY5NzI2NTYyNSkpOwogICAgICAgICAgICB3YWl0KDUpOwogICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gOTUzMy4yMzkyNTc4MTI1LCA3LjI1NDQ0NTU1MjgyNTkyOCwgLSA4MzcyLjY5OTIxODc1KSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b19RdWVzdF9UdXNoaXRhXzIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoKENGcmFtZS5uZXcoLSA1NTM5LjMxMTUyMzQzNzUsIDMxMy44MDA1MzcxMDkzNzUsIC0gMjk3Mi4zNzIzMTQ0NTMxMjUpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDYxLCB2MTA2MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEF1dG9fUXVlc3RfVHVzaGl0YV8yIGFuZCB2MTA2MjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2MTA2MjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgKHYxMDYyLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMDYyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDIwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDYyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDYyLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDYyLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDYyLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjEwNjIuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTA2Mi5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEwNjIuSHVtYW5vaWQuSGVhbHRoIDw9IDApIGFuZCB2MTA2Mi5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjEwNjIuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTA2Mi5QYXJlbnQgb3IgKEF1dG9fUXVlc3RfVHVzaGl0YV8yID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA1NTQ1LjEyNDAyMzQzNzUsIDMxMy44MDA1MzcxMDkzNzUsIC0gMjk3Ni42MTY0NTUwNzgxMjUpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEF1dG9fUXVlc3RfVHVzaGl0YV8zIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiIpIG9yIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4gW0x2LiAyMTc1XSBbQm9zc10iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDY0LCB2MTQ2NSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ2NS5OYW1lID09ICJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ2NS5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFN3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDY1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjUuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjUuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY1Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTQ2NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQ2NS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTQ2NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgYW5kIHYxNDY1Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjUuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvX0R1YWxLYXRhbmEgPT0gZmFsc2UpIG9yIChBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9PSBmYWxzZSkgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIkhlYXZlbmx5RGltZW5zaW9uIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA3MDkuMzEzMjkzNDU3MDMxMiwgMzgxLjYwMDU4NTkzNzUsIC0gMTEwMTEuMzk2NDg0Mzc1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIkhlYXZlbmx5RGltZW5zaW9uIikgdGhlbgogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBbTHYuIDIyMDBdIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gW0x2LiAyMjAwXSBbQm9zc10iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkhlYXZlbidzIEd1YXJkaWFuIFtMdi4gMjIwMF0gW0Jvc3NdIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY1MCwgdjE2NTEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTY1MS5OYW1lID09ICJDdXJzZWQgU2tlbGV0b24iKSBvciAodjE2NTEuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIikgb3IgKHYxNjUxLk5hbWUgPT0gIkhlYXZlbidzIEd1YXJkaWFuIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjUxLkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjUxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY1MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY1MS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY1MS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTY1MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE2NTEuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTY1MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgYW5kIHYxNjUxLkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTY1MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNjUxLlBhcmVudCBvciAoQXV0b19RdWVzdF9UdXNoaXRhXzMgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWF2ZW5seURpbWVuc2lvbi5Ub3JjaDEuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlYXZlbmx5RGltZW5zaW9uLlRvcmNoMi5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVhdmVubHlEaW1lbnNpb24uVG9yY2gzLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWF2ZW5seURpbWVuc2lvbi5FeGl0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0R1YWxLYXRhbmEgb3Igbm90IEF1dG9fUXVlc3RfVHVzaGl0YV8zIG9yIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDYpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEyIHRoZW4KICAgIGxvY2FsIHY1MzcgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlRmFjdG9yeSIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIEZhY3RvcnkiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1Mzc6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDQpCiAgICAgICAgX0cuRmFjdG9yeSA9IHY2NDQ7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUZhY3Rvcnk6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5GYWN0b3J5IHRoZW4KICAgICAgICAgICAgICAgIGlmIGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNvcmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMzQ0LCB2MTM0NSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEzNDUuTmFtZSA9PSAiQ29yZSIpIGFuZCAodjEzNDUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDQ0OC40Njc1NiwgMTk5LjM1Njc4MSwgLSA0NDEuMzg5MjUyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuRmFjdG9yeSBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KDQ0OC40Njc1NiwgMTk5LjM1Njc4MSwgLSA0NDEuMzg5MjUyKSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ1Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0NS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ1Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxMzQ1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTM0NS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IHYxMzQ1LlBhcmVudCBvciAodjEzNDUuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIChfRy5GYWN0b3J5ID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJDb3JlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDQ0OC40Njc1NiwgMTk5LjM1Njc4MSwgLSA0NDEuMzg5MjUyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuRmFjdG9yeSBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KDQ0OC40Njc1NiwgMTk5LjM1Njc4MSwgLSA0NDEuMzg5MjUyKSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmxvY2FsIHY4MyA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvRmFybVN3YW4iLCB7CiAgICBUaXRsZSA9ICJBdXRvIFN3YW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjgzOk9uQ2hhbmdlZChmdW5jdGlvbih2MjcxKQogICAgX0cuQXV0b19GYXJtU3dhbiA9IHYyNzE7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvRmFybVN3YW46U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9GYXJtU3dhbiB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRvbiBTd2FuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA2MywgdjEwNjQgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEwNjQuTmFtZSA9PSAiRG9uIFN3YW4iKSBhbmQgKHYxMDY0Lkh1bWFub2lkLkhlYWx0aCA+IDApIGFuZCB2MTA2NDpJc0EoIk1vZGVsIikgYW5kIHYxMDY0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTA2NDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2NC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDY0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b0Zhcm1Td2FuID09IGZhbHNlKSBvciAodjEwNjQuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoMjI4NC45MTIxMDkzNzUsIDE1LjUzNzY2NjMyMDgwMSwgOTA1LjQ4MjkxMDE1NjI1KSk7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgKChDRnJhbWUubmV3KDIyODQuOTEyMTA5Mzc1LCAxNS41Mzc2NjYzMjA4MDEsIDkwNS40ODI5MTAxNTYyNSkuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDQpIG9yIChfRy5BdXRvRmFybVN3YW4gPT0gZmFsc2UpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2ODQgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1Jlbmdva3UiLCB7CiAgICBUaXRsZSA9ICJSZW5nb2t1IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4NDpPbkNoYW5nZWQoZnVuY3Rpb24odjI3MikKICAgIF9HLkF1dG9fUmVnb2t1ID0gdjI3MjsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9SZW5nb2t1OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvX1JlZ29rdSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkhpZGRlbiBLZXkiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhpZGRlbiBLZXkiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiSGlkZGVuIEtleSIpOwogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNjU3MS4xMjAxMTcxODc1LCAyOTkuMjMwMjg1NjQ0NTMsIC0gNjk2Ny44NDE3OTY4NzUpKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTbm93IEx1cmtlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQXJjdGljIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTQ2NiwgdjE0NjcgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKHYxNDY3Lk5hbWUgPT0gIlNub3cgTHVya2VyIikgb3IgKHYxNDY3Lk5hbWUgPT0gIkFyY3RpYyBXYXJyaW9yIikpIGFuZCAodjE0NjcuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY3Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTQ2Ny5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE0NjcuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ2Ny5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIaWRkZW4gS2V5Iikgb3IgKF9HLkF1dG9fUmVnb2t1ID09IGZhbHNlKSBvciBub3QgdjE0NjcuUGFyZW50IG9yICh2MTQ2Ny5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1NDM5LjcxNjc5Njg3NSwgODQuNDIwOTQ0MjEzODY3LCAtIDY3MTUuMTYzNTc0MjE4OCkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKaWYgKFNlYTIgb3IgU2VhMykgdGhlbgogICAgbG9jYWwgdjUzOCA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVIYWtpQ29sb3IiLCB7CiAgICAgICAgVGl0bGUgPSAiQnV5IEhha2kgQ29sb3IiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1Mzg6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDUpCiAgICAgICAgX0cuQXV0b19CdXlfRW5jaGFuY2VtZW50ID0gdjY0NTsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlSGFraUNvbG9yOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b19CdXlfRW5jaGFuY2VtZW50IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NjcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkNvbG9yc0RlYWxlciIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIjIiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjg2NykpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZAppZiBTZWEyIHRoZW4KICAgIGxvY2FsIHY1MzkgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZVN3b3JkTGVuZ2VuZCIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIEJ1eSBMZW5nZW5kYXJ5IFN3b3JkIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTM5Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjQ2KQogICAgICAgIF9HLkJ1eUxlbmdlbmRTd29yZCA9IHY2NDY7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVN3b3JkTGVuZ2VuZDpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIChfRy5CdXlMZW5nZW5kU3dvcmQgb3IgVHJpcGxlX0EpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODk3ID0gewogICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTGVnZW5kYXJ5U3dvcmREZWFsZXIiLAogICAgICAgICAgICAgICAgICAgICAgICBbMl0gPSAiMiIKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4OTcpKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZAppZiBTZWEyIHRoZW4KICAgIGxvY2FsIHY1NDAgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUV2b1JhY2UiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBVcGdyYWRlIFJhY2UgVjIiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1NDA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDcpCiAgICAgICAgX0cuQXV0b0V2b1JhY2UgPSB2NjQ3OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVFdm9SYWNlOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHdhaXQoMC4xKSBkbwogICAgICAgICAgICAgICAgaWYgX0cuQXV0b0V2b1JhY2UgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2U6RmluZEZpcnN0Q2hpbGQoIkV2b2x2ZWQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBbGNoZW1pc3QiLCAiMSIpID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAyNzc5LjgzNTIxLCA3Mi45NjYxNDA3LCAtIDM1NzQuMDIwMDIsIC0gMC43MzA0ODQ5MDMsIDYuMzkwMTQxZS04LCAtIDAuNjgyOTI4ODYsIDMuNTk5NjMyMmUtOCwgMSwgNS41MDY2NzAzZS04LCAwLjY4MjkyODg2LCAxLjU2NDI0NjdlLTgsIC0gMC43MzA0ODQ5MDMpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoVmVjdG9yMy5uZXcoLSAyNzc5LjgzNTIxLCA3Mi45NjYxNDA3LCAtIDM1NzQuMDIwMDIpIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsICIyIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBbGNoZW1pc3QiLCAiMSIpID09IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGbG93ZXIgMSIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGbG93ZXIgMSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRmxvd2VyMS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAobm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGbG93ZXIgMiIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGbG93ZXIgMiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRmxvd2VyMi5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAobm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGbG93ZXIgMyIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGbG93ZXIgMyIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiWm9tYmllIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxODM0LCB2MTgzNSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4MzUuTmFtZSA9PSAiWm9tYmllIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxODM1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODM1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MzUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE4MzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE4MzUuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAzIikgb3Igbm90IHYxODM1LlBhcmVudCBvciAodjE4MzUuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIChfRy5BdXRvRXZvUmFjZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNTY4NS45MjMzMzk4NDM4LCA0OC40ODAxMjU0MjcyNDYsIC0gODUzLjIzNzI0MzY1MjM0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBbGNoZW1pc3QiLCAiMSIpID09IDIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsICIzIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwplbmQKbG9jYWwgdjg1ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVBdXRvVCIsIHsKICAgIFRpdGxlID0gIkF1dG8gVHVybiBPbiBSYWNlIFYzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4NTpPbkNoYW5nZWQoZnVuY3Rpb24odjI3MykKICAgIF9HLkF1dG9UID0gdjI3MzsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9UOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvVCB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRTpGaXJlU2VydmVyKCJBY3RpdmF0ZUFiaWxpdHkiKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2ODYgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9ZIiwgewogICAgVGl0bGUgPSAiQXV0byBUdXJuIE9uIFJhY2UgVjQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjg2Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mjc0KQogICAgX0cuQXV0b1kgPSB2Mjc0OwplbmQpOwp2MTcuVG9nZ2xlQXV0b1k6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9ZIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiWSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIlkiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjg3ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVBdXRvS2VuIiwgewogICAgVGl0bGUgPSAiQXV0byBLZW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjg3Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mjc1KQogICAgX0cuQXV0b0tlbiA9IHYyNzU7CiAgICBpZiB2Mjc1IHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRTpGaXJlU2VydmVyKCJLZW4iLCB0cnVlKTsKICAgIGVsc2UKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRTpGaXJlU2VydmVyKCJLZW4iLCBmYWxzZSk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUF1dG9LZW46U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9LZW4gdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUU6RmlyZVNlcnZlcigiS2VuIiwgdHJ1ZSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjg4ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVTYXZlU3Bhd24iLCB7CiAgICBUaXRsZSA9ICJBdXRvIFNhdmUgU3Bhd20gUG9pbnQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjg4Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mjc2KQogICAgX0cuU2F2ZVNwYXduID0gdjI3NjsKICAgIGlmIHYyNzYgdGhlbgogICAgICAgIGxvY2FsIHY2NDggPSB7CiAgICAgICAgICAgIFsxXSA9ICJTZXRTcGF3blBvaW50IgogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjY0OCkpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVTYXZlU3Bhd246U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLlNhdmVTcGF3biB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2Nzk3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJTZXRTcGF3blBvaW50IgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY3OTcpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2ODkgPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuVXRpbC5DYW1lcmFTaGFrZXIpOwp2ODk6U3RvcCgpOwpsb2NhbCB2OTAgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZUJyaW5nTW9iIiwgewogICAgVGl0bGUgPSAiQnJpbmcgTW9iIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjkwOk9uQ2hhbmdlZChmdW5jdGlvbih2Mjc3KQogICAgX0cuQnJpbmdNb2IgPSB2Mjc3OwplbmQpOwp2MTcuVG9nZ2xlQnJpbmdNb2I6U2V0VmFsdWUodHJ1ZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgZm9yIHY3MzMsIHY3MzQgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiAoX0cuQnJpbmdNb2IgYW5kIGJyaW5nbW9iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKCh2NzM0Lk5hbWUgPT0gTW9uRmFybSkgYW5kIHY3MzQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2NzM0Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NzM0Lk5hbWUgPT0gIkZhY3RvcnkgU3RhZmYiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHY3MzQuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIEZhcm1Qb3MuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDAwMDAwMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IEZhcm1Qb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjczNC5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjczNC5OYW1lID09IE1vbkZhcm0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjczNC5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gRmFybVBvcy5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMDAwMDAwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gRmFybVBvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjczNC5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY5MSA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlUmVtb3ZlTm90aWZ5IiwgewogICAgVGl0bGUgPSAiUmVtb3ZlIE5vdGlmeSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2OTE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzgpCiAgICBSZW1vdmVOb3RpZnkgPSB2Mjc4OwplbmQpOwp2MTcuVG9nZ2xlUmVtb3ZlTm90aWZ5OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgUmVtb3ZlTm90aWZ5IHRoZW4KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5Ob3RpZmljYXRpb25zLkVuYWJsZWQgPSBmYWxzZTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTm90aWZpY2F0aW9ucy5FbmFibGVkID0gdHJ1ZTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2OTIgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVdoaXRlIiwgewogICAgVGl0bGUgPSAiV2hpdGUgU2NyZWVuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY5MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI3OSkKICAgIF9HLldoaXRlU2NyZWVuID0gdjI3OTsKICAgIGlmIChfRy5XaGl0ZVNjcmVlbiA9PSB0cnVlKSB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIik6U2V0M2RSZW5kZXJpbmdFbmFibGVkKGZhbHNlKTsKICAgIGVsc2VpZiAoX0cuV2hpdGVTY3JlZW4gPT0gZmFsc2UpIHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKTpTZXQzZFJlbmRlcmluZ0VuYWJsZWQodHJ1ZSk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZVdoaXRlOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjkzID0gdjE2LlNldHRpbmc6QWRkU2VjdGlvbigiU2tpbGwiKTsKbG9jYWwgdjk0ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVaIiwgewogICAgVGl0bGUgPSAiWiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnY5NDpPbkNoYW5nZWQoZnVuY3Rpb24odjI4MCkKICAgIFNraWxsWiA9IHYyODA7CmVuZCk7CnYxNy5Ub2dnbGVaOlNldFZhbHVlKHRydWUpOwpsb2NhbCB2OTUgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVgiLCB7CiAgICBUaXRsZSA9ICJYIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjk1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjgxKQogICAgU2tpbGxYID0gdjI4MTsKZW5kKTsKdjE3LlRvZ2dsZVg6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5NiA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlQyIsIHsKICAgIFRpdGxlID0gIkMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2OTY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyODIpCiAgICBTa2lsbEMgPSB2MjgyOwplbmQpOwp2MTcuVG9nZ2xlQzpTZXRWYWx1ZSh0cnVlKTsKbG9jYWwgdjk3ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVWIiwgewogICAgVGl0bGUgPSAiViIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnY5NzpPbkNoYW5nZWQoZnVuY3Rpb24odjI4MykKICAgIFNraWxsViA9IHYyODM7CmVuZCk7CnYxNy5Ub2dnbGVWOlNldFZhbHVlKHRydWUpOwpsb2NhbCB2OTggPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZUYiLCB7CiAgICBUaXRsZSA9ICJGIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY5ODpPbkNoYW5nZWQoZnVuY3Rpb24odjI4NCkKICAgIFNraWxsRiA9IHYyODQ7CmVuZCk7CnYxNy5Ub2dnbGVGOlNldFZhbHVlKHRydWUpOwpsb2NhbCB2OTkgPSB2MTYuU3RhdHVzOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJJbmZvcm1hdGlvbiIsCiAgICBDb250ZW50ID0gIuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgVxuIiAuLiAiTmFtZSA6ICIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRpc3BsYXlOYW1lIC4uICIgKEAiIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5OYW1lIC4uICIpXG4iIC4uICJMZXZlbCA6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSAuLiAiXG4iIC4uICJCZWxpIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkJlbGkuVmFsdWUgLi4gIlxuIiAuLiAiRnJhZ21lbnRzIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkZyYWdtZW50cy5WYWx1ZSAuLiAiXG4iIC4uICJXYW50ZWQgQmVsaSA6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIubGVhZGVyc3RhdHNbIkJvdW50eS9Ib25vciJdLlZhbHVlIC4uICJcbiIgLi4gIkhQOiAiIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoIC4uICIvIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLk1heEhlYWx0aCAuLiAiXG4iIC4uICJFbmVyZ3kgOiAiIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuRW5lcmd5LlZhbHVlIC4uICIvIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkVuZXJneS5NYXhWYWx1ZSAuLiAiXG4iIC4uICJSYWNlIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgLi4gIlxuIiAuLiAiRnJ1aXQgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuRGV2aWxGcnVpdC5WYWx1ZSAuLiAiXG4iIC4uICLilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEiCn0pOwpsb2NhbCB2MTAwID0gdjE2LlN0YXR1czpBZGRQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiVGltZSIsCiAgICBDb250ZW50ID0gIiIKfSk7CmxvY2FsIGZ1bmN0aW9uIHYxMDEoKQogICAgbG9jYWwgdjI4NSA9IG9zLmRhdGUoIip0Iik7CiAgICBsb2NhbCB2Mjg2ID0gdjI4NS5ob3VyICUgMjQgOwogICAgbG9jYWwgdjI4NyA9ICgodjI4NiA8IDEyKSBhbmQgIkFNIikgb3IgIlBNIiA7CiAgICBsb2NhbCB2Mjg4ID0gc3RyaW5nLmZvcm1hdCgiJTAyaTolMDJpOiUwMmkgJXMiLCAoKHYyODYgLSAxKSAlIDEyKSArIDEsIHYyODUubWluLCB2Mjg1LnNlYywgdjI4Nyk7CiAgICBsb2NhbCB2Mjg5ID0gc3RyaW5nLmZvcm1hdCgiJTAyZC8lMDJkLyUwNGQiLCB2Mjg1LmRheSwgdjI4NS5tb250aCwgdjI4NS55ZWFyKTsKICAgIGxvY2FsIHYyOTAgPSBnYW1lOkdldFNlcnZpY2UoIkxvY2FsaXphdGlvblNlcnZpY2UiKTsKICAgIGxvY2FsIHYyOTEgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTsKICAgIGxvY2FsIHYyOTIgPSB2MjkxLkxvY2FsUGxheWVyOwogICAgbG9jYWwgdjI5MyA9IHYyOTIuTmFtZTsKICAgIGxvY2FsIHYyOTQgPSAiVW5rbm93biI7CiAgICBsb2NhbCB2Mjk1LCB2Mjk2ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHJldHVybiB2MjkwOkdldENvdW50cnlSZWdpb25Gb3JQbGF5ZXJBc3luYyh2MjkyKTsKICAgIGVuZCk7CiAgICBpZiB2Mjk1IHRoZW4KICAgICAgICB2Mjk0ID0gdjI5NjsKICAgIGVuZAogICAgdjEwMDpTZXREZXNjKHYyODkgLi4gIi0iIC4uIHYyODggLi4gIiBbICIgLi4gdjI5NCAuLiAiIF0iKTsKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRydWUgZG8KICAgICAgICB2MTAxKCk7CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuUmVuZGVyU3RlcHBlZDpXYWl0KCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjEwMiA9IHYxNi5TdGF0dXM6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIlNlcnZlciB0aW1lIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKbG9jYWwgZnVuY3Rpb24gdjEwMygpCiAgICBsb2NhbCB2Mjk3ID0gbWF0aC5mbG9vcih3b3Jrc3BhY2UuRGlzdHJpYnV0ZWRHYW1lVGltZSArIDAuNSk7CiAgICBsb2NhbCB2Mjk4ID0gbWF0aC5mbG9vcih2Mjk3IC8gKDYwIF4gMikpICUgMjQgOwogICAgbG9jYWwgdjI5OSA9IG1hdGguZmxvb3IodjI5NyAvIDYwKSAlIDYwIDsKICAgIGxvY2FsIHYzMDAgPSB2Mjk3ICUgNjAgOwogICAgdjEwMjpTZXREZXNjKHN0cmluZy5mb3JtYXQoIiUwMmQgVGnhur9uZy0lMDJkIFBow7p0LSUwMmQgR2nDonkiLCB2Mjk4LCB2Mjk5LCB2MzAwKSk7CmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIHBjYWxsKHYxMDMpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxMDQgPSB2MTYuU3RhdHVzOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJGcm96ZW4gRGltZW5zaW9uIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiRnJvemVuRGltZW5zaW9uIikgdGhlbgogICAgICAgICAgICAgICAgdjEwNDpTZXREZXNjKCLinIUiKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgdjEwNDpTZXREZXNjKCLinYwiKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTA1ID0gdjE2LlN0YXR1czpBZGRJbnB1dCgiSW5wdXQiLCB7CiAgICBUaXRsZSA9ICJTZXJ2ZXIgSUQiLAogICAgRGVmYXVsdCA9ICIiLAogICAgUGxhY2Vob2xkZXIgPSAiIiwKICAgIE51bWVyaWMgPSBmYWxzZSwKICAgIEZpbmlzaGVkID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYzMDEpCiAgICAgICAgX0cuSm9iID0gdjMwMTsKICAgIGVuZAp9KTsKdjE2LlN0YXR1czpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiSm9pbiBTZXJ2ZXIgSUQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UoZ2FtZS5wbGFjZUlkLCBfRy5Kb2IsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcik7CiAgICBlbmQKfSk7CnYxNi5TdGF0dXM6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkNvcHkgU2VydmVyIElEIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBzZXRjbGlwYm9hcmQodG9zdHJpbmcoZ2FtZS5Kb2JJZCkpOwogICAgZW5kCn0pOwpsb2NhbCB2MTA2ID0gdjE2LlN0YXR1czpBZGRUb2dnbGUoIk15VG9nZ2xlIiwgewogICAgVGl0bGUgPSAiU3BhbSBKb2luIFNlcnZlciBJRCIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMDIpCiAgICBfRy5Kb2luID0gdjMwMjsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuSm9pbiB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UoZ2FtZS5wbGFjZUlkLCBfRy5Kb2IsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcik7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjEwNyA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZU1lbGVlIiwgewogICAgVGl0bGUgPSAiTWVsZWUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEwNzpPbkNoYW5nZWQoZnVuY3Rpb24odjMwMykKICAgIF9HLkF1dG9fU3RhdHNfTWVsZWUgPSB2MzAzOwplbmQpOwp2MTcuVG9nZ2xlTWVsZWU6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTA4ID0gdjE2LlN0YXRzOkFkZFRvZ2dsZSgiVG9nZ2xlRGUiLCB7CiAgICBUaXRsZSA9ICJEZWZlbnNlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMDQpCiAgICBfRy5BdXRvX1N0YXRzX0RlZmVuc2UgPSB2MzA0OwplbmQpOwp2MTcuVG9nZ2xlRGU6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTA5ID0gdjE2LlN0YXRzOkFkZFRvZ2dsZSgiVG9nZ2xlU3dvcmQiLCB7CiAgICBUaXRsZSA9ICJTd29yZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzA1KQogICAgX0cuQXV0b19TdGF0c19Td29yZCA9IHYzMDU7CmVuZCk7CnYxNy5Ub2dnbGVTd29yZDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMTAgPSB2MTYuU3RhdHM6QWRkVG9nZ2xlKCJUb2dnbGVHdW4iLCB7CiAgICBUaXRsZSA9ICJHdW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExMDpPbkNoYW5nZWQoZnVuY3Rpb24odjMwNikKICAgIF9HLkF1dG9fU3RhdHNfR3VuID0gdjMwNjsKZW5kKTsKdjE3LlRvZ2dsZUd1bjpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMTEgPSB2MTYuU3RhdHM6QWRkVG9nZ2xlKCJUb2dnbGVGcnVpdCIsIHsKICAgIFRpdGxlID0gIkZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMDcpCiAgICBfRy5BdXRvX1N0YXRzX0RldmlsX0ZydWl0ID0gdjMwNzsKZW5kKTsKdjE3LlRvZ2dsZUZydWl0OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19EZXZpbF9GcnVpdCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3MzcgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIkRlbW9uIEZydWl0IiwKICAgICAgICAgICAgICAgIFszXSA9IDMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjczNykpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU3RhdHNfR3VuIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjczOCA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICBbMl0gPSAiR3VuIiwKICAgICAgICAgICAgICAgIFszXSA9IDMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjczOCkpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU3RhdHNfU3dvcmQgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzM5ID0gewogICAgICAgICAgICAgICAgWzFdID0gIkFkZFBvaW50IiwKICAgICAgICAgICAgICAgIFsyXSA9ICJTd29yZCIsCiAgICAgICAgICAgICAgICBbM10gPSAzCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY3MzkpKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1N0YXRzX0RlZmVuc2UgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzQwID0gewogICAgICAgICAgICAgICAgWzFdID0gIkFkZFBvaW50IiwKICAgICAgICAgICAgICAgIFsyXSA9ICJEZWZlbnNlIiwKICAgICAgICAgICAgICAgIFszXSA9IDMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjc0MCkpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU3RhdHNfTWVsZWUgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzQxID0gewogICAgICAgICAgICAgICAgWzFdID0gIkFkZFBvaW50IiwKICAgICAgICAgICAgICAgIFsyXSA9ICJNZWxlZSIsCiAgICAgICAgICAgICAgICBbM10gPSAzCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY3NDEpKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTEyID0ge307CmZvciB2MzA4LCB2MzA5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldENoaWxkcmVuKCkpIGRvCiAgICB0YWJsZS5pbnNlcnQodjExMiwgdjMwOS5OYW1lKTsKZW5kCmxvY2FsIHYxMTMgPSB2MTYuUGxheWVyOkFkZERyb3Bkb3duKCJTZWxlY3RlZFBseSIsIHsKICAgIFRpdGxlID0gIlNlbGVjdCBQbGF5ZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IHYxMTIsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnYxMTM6U2V0VmFsdWUoX0cuU2VsZWN0UGx5KTsKdjExMzpPbkNoYW5nZWQoZnVuY3Rpb24odjMxMCkKICAgIF9HLlNlbGVjdFBseSA9IHYzMTA7CmVuZCk7CnYxNi5QbGF5ZXI6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkxvYWQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHRhYmxlLmNsZWFyKHYxMTIpOwogICAgICAgIGZvciB2NTQxLCB2NTQyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIHRhYmxlLmluc2VydCh2MTEyLCB2NTQyLk5hbWUpOwogICAgICAgIGVuZAogICAgZW5kCn0pOwpsb2NhbCB2MTE0ID0gdjE2LlBsYXllcjpBZGRUb2dnbGUoIlRvZ2dsZVRlbGVwb3J0IiwgewogICAgVGl0bGUgPSAiVFAgVG8gUGxheWVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTEpCiAgICBfRy5UZWxlcG9ydFBseSA9IHYzMTE7CiAgICBpZiAodjMxMSA9PSBmYWxzZSkgdGhlbgogICAgICAgIHdhaXQoKTsKICAgICAgICBBdXRvSGFraSgpOwogICAgICAgIFR3ZWVuMihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlVGVsZXBvcnQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5UZWxlcG9ydFBseSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVyczpGaW5kRmlyc3RDaGlsZChfRy5TZWxlY3RQbHkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIoZ2FtZS5QbGF5ZXJzW19HLlNlbGVjdFBseV0uQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1NiA9IHYxNi5QbGF5ZXI6QWRkU2VjdGlvbigiT3RoZXIiKTsKbG9jYWwgdjExNSA9IHYxNi5QbGF5ZXI6QWRkVG9nZ2xlKCJUb2dnbGVOb0NsaXAiLCB7CiAgICBUaXRsZSA9ICJOb2NsaXAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2MTE1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzEyKQogICAgX0cuTE9mID0gdjMxMjsKZW5kKTsKdjE3LlRvZ2dsZU5vQ2xpcDpTZXRWYWx1ZSh0cnVlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkxPZiB0aGVuCiAgICAgICAgICAgICAgICBmb3Igdjg2OCwgdjg2OSBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjg2OTpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODY5LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjExNiA9IHYxNi5QbGF5ZXI6QWRkVG9nZ2xlKCJUb2dnbGVXYWxrb25XYXRlciIsIHsKICAgIFRpdGxlID0gIldhbGsgT24gV2F0ZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2MTE2Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzEzKQogICAgX0cuV2Fsa29uV2F0ZXIgPSB2MzEzOwplbmQpOwp2MTcuVG9nZ2xlV2Fsa29uV2F0ZXI6U2V0VmFsdWUodHJ1ZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5XYWxrb25XYXRlciB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiV2F0ZXJCYXNlLVBsYW5lIl0uU2l6ZSA9IFZlY3RvcjMubmV3KDEwMDAsIDExMiwgMTAwMCk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJXYXRlckJhc2UtUGxhbmUiXS5TaXplID0gVmVjdG9yMy5uZXcoMTAwMCwgODAsIDEwMDApOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxMTcgPSB2MTYuUGxheWVyOkFkZFRvZ2dsZSgiVG9nZ2xlRW5hYmxlUHZwIiwgewogICAgVGl0bGUgPSAiRW5hYmxlIFBWUCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTE3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzE0KQogICAgX0cuRW5hYmxlZFB2UCA9IHYzMTQ7CmVuZCk7CnYxNy5Ub2dnbGVFbmFibGVQdnA6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkVuYWJsZWRQdlAgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlB2cERpc2FibGVkLlZpc2libGUgPT0gdHJ1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVuYWJsZVB2cCIpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjExOCA9IHYxNi5UZWxlcG9ydDpBZGRTZWN0aW9uKCJTZWEiKTsKbG9jYWwgdjExOSA9IHYxNi5UZWxlcG9ydDpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9TZWEyIiwgewogICAgVGl0bGUgPSAiQXV0byBTZWEgMiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTE5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzE1KQogICAgX0cuQXV0b19TZWEyID0gdjMxNTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9TZWEyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TZWEyIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgdjgwMCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWU7CiAgICAgICAgICAgICAgICBpZiAoKHY4MDAgPj0gNzAwKSBhbmQgV29ybGQxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2UuRG9vci5DYW5Db2xsaWRlID09IGZhbHNlKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkljZS5Eb29yLlRyYW5zcGFyZW5jeSA9PSAxKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM0NiA9IENGcmFtZS5uZXcoNDg0OS4yOTg4MywgNS42NTEzODE0OSwgNzE5LjYxMTg3Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoKHYxMzQ2LlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzKSBvciAoX0cuQXV0b19TZWEyID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkRyZXNzcm9zYVF1ZXN0UHJvZ3Jlc3MiLCAiRGV0ZWN0aXZlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJLZXkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDEzNDcuNzEyNCwgMzcuMzc1MTYwMiwgLSAxMzI1LjY0ODgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKChWZWN0b3IzLm5ldygxMzQ3LjcxMjQsIDM3LjM3NTE2MDIsIC0gMTMyNS42NDg4KSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgb3IgKF9HLkF1dG9fU2VhMiA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkljZS5Eb29yLkNhbkNvbGxpZGUgPT0gZmFsc2UpIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSWNlLkRvb3IuVHJhbnNwYXJlbmN5ID09IDEpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2ODAsIHYxNjgxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY4MS5OYW1lID09ICJJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdCB2MTY4MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjgxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTY4MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE2ODEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVTZWNvbmQgPSB2MTY4MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2ODEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjgxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjgxLkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY4MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2ODEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVTZWNvbmQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjgxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1NlYTIgb3Igbm90IHYxNjgxLlBhcmVudCBvciAodjE2ODEuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsRHJlc3Nyb3NhIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJJY2UgQWRtaXJhbCIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldyg1LCAxMCwgNykpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMjAgPSB2MTYuVGVsZXBvcnQ6QWRkVG9nZ2xlKCJUb2dnbGVBdXRvU2VhMyIsIHsKICAgIFRpdGxlID0gIkF1dG8gU2VhIDMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEyMDpPbkNoYW5nZWQoZnVuY3Rpb24odjMxNikKICAgIF9HLkF1dG9fU2VhMyA9IHYzMTY7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvU2VhMzpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9TZWEzIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE1MDApIGFuZCBXb3JsZDIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBfRy5BdXRvTGV2ZWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXNbJ0NvbW1GXyddOkludm9rZVNlcnZlcigiWlF1ZXN0UHJvZ3Jlc3MiLCAiR2VuZXJhbCIpID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDE5MjYuMzIyMTQzNTU0NywgMTIuODE5ODUxODc1MzA1LCAxNzM4LjMwOTIwNDEwMTYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gMTkyNi4zMjIxNDM1NTQ3LCAxMi44MTk4NTE4NzUzMDUsIDE3MzguMzA5MjA0MTAxNikuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJaUXVlc3RQcm9ncmVzcyIsICJCZWdpbiIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoInJpcF9pbmRyYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTU3OCwgdjE1NzkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNTc5Lk5hbWUgPT0gInJpcF9pbmRyYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lVGhpcmQgPSB2MTU3OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTU3OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU3OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVRoaXJkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NzkuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU3OS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTc5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxab3UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9TZWEzID09IGZhbHNlKSBvciAodjE1NzkuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTU3OS5QYXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoInJpcF9pbmRyYSIpIGFuZCAoKENGcmFtZS5uZXcoLSAyNjg4MC45MzM1OTM3NSwgMjIuODQ4NTU0NjExMjA2LCA0NzMuMTg5NTE0MTYwMTYpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDI2ODgwLjkzMzU5Mzc1LCAyMi44NDg1NTQ2MTEyMDYsIDQ3My4xODk1MTQxNjAxNikpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnYxNi5UZWxlcG9ydDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU2VhIDEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbE1haW4iKTsKICAgIGVuZAp9KTsKdjE2LlRlbGVwb3J0OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTZWEgMiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsRHJlc3Nyb3NhIik7CiAgICBlbmQKfSk7CnYxNi5UZWxlcG9ydDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU2VhIDMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbFpvdSIpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuVGVsZXBvcnQ6QWRkU2VjdGlvbigiSXNsYW5kIik7CmlmIFNlYTEgdGhlbgogICAgSXNsYW5kTGlzdCA9IHsKICAgICAgICAiV2luZE1pbGwiLAogICAgICAgICJNYXJpbmUiLAogICAgICAgICJNaWRkbGUgVG93biIsCiAgICAgICAgIkp1bmdsZSIsCiAgICAgICAgIlBpcmF0ZSBWaWxsYWdlIiwKICAgICAgICAiRGVzZXJ0IiwKICAgICAgICAiU25vdyBJc2xhbmQiLAogICAgICAgICJNYXJpbmVGb3JkIiwKICAgICAgICAiQ29sb3NzZXVtIiwKICAgICAgICAiU2t5IElzbGFuZCAxIiwKICAgICAgICAiU2t5IElzbGFuZCAyIiwKICAgICAgICAiU2t5IElzbGFuZCAzIiwKICAgICAgICAiUHJpc29uIiwKICAgICAgICAiTWFnbWEgVmlsbGFnZSIsCiAgICAgICAgIlVuZGVyIFdhdGVyIElzbGFuZCIsCiAgICAgICAgIkZvdW50YWluIENpdHkiLAogICAgICAgICJTaGFuayBSb29tIiwKICAgICAgICAiTW9iIElzbGFuZCIKICAgIH07CmVsc2VpZiBTZWEyIHRoZW4KICAgIElzbGFuZExpc3QgPSB7CiAgICAgICAgIlRoZSBDYWZlIiwKICAgICAgICAiRnJpc3QgU3BvdCIsCiAgICAgICAgIkRhcmsgQXJlYSIsCiAgICAgICAgIkZsYW1pbmdvIE1hbnNpb24iLAogICAgICAgICJGbGFtaW5nbyBSb29tIiwKICAgICAgICAiR3JlZW4gWm9uZSIsCiAgICAgICAgIkZhY3RvcnkiLAogICAgICAgICJDb2xvc3N1aW0iLAogICAgICAgICJab21iaWUgSXNsYW5kIiwKICAgICAgICAiVHdvIFNub3cgTW91bnRhaW4iLAogICAgICAgICJQdW5rIEhhemFyZCIsCiAgICAgICAgIkN1cnNlZCBTaGlwIiwKICAgICAgICAiSWNlIENhc3RsZSIsCiAgICAgICAgIkZvcmdvdHRlbiBJc2xhbmQiLAogICAgICAgICJVc3NvcCBJc2xhbmQiLAogICAgICAgICJNaW5pIFNreSBJc2xhbmQiCiAgICB9OwplbHNlaWYgU2VhMyB0aGVuCiAgICBJc2xhbmRMaXN0ID0gewogICAgICAgICJNYW5zaW9uIiwKICAgICAgICAiUG9ydCBUb3duIiwKICAgICAgICAiR3JlYXQgVHJlZSIsCiAgICAgICAgIkNhc3RsZSBPbiBUaGUgU2VhIiwKICAgICAgICAiTWluaVNreSIsCiAgICAgICAgIkh5ZHJhIElzbGFuZCIsCiAgICAgICAgIkZsb2F0aW5nIFR1cnRsZSIsCiAgICAgICAgIkhhdW50ZWQgQ2FzdGxlIiwKICAgICAgICAiSWNlIENyZWFtIElzbGFuZCIsCiAgICAgICAgIlBlYW51dCBJc2xhbmQiLAogICAgICAgICJDYWtlIElzbGFuZCIsCiAgICAgICAgIkNvY29hIElzbGFuZCIsCiAgICAgICAgIkNhbmR5IElzbGFuZCIsCiAgICAgICAgIlRpa2kgT3V0cG9zdCIKICAgIH07CmVuZApsb2NhbCB2MTIxID0gdjE2LlRlbGVwb3J0OkFkZERyb3Bkb3duKCJEcm9wZG93bklzbGFuZCIsIHsKICAgIFRpdGxlID0gIlNlbGVjdCBJc2xhbmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IElzbGFuZExpc3QsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnYxMjE6U2V0VmFsdWUoX0cuU2VsZWN0SXNsYW5kKTsKdjEyMTpPbkNoYW5nZWQoZnVuY3Rpb24odjMxNykKICAgIF9HLlNlbGVjdElzbGFuZCA9IHYzMTc7CmVuZCk7CnYxNi5UZWxlcG9ydDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiVGVsZXBvcnQgVG8gSXNsYW5kIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJXaW5kTWlsbCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoOTc5Ljc5ODk1MDE5NTMxLCAxNi41MTY2MTMwMDY1OTIsIDE0MjkuMDQ2NjMwODU5NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNYXJpbmUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjU2Ni40Mjk2ODc1LCA2Ljg1NTY2ODA2NzkzMjEsIDIwNDUuMjU2MTAzNTE1NikpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNaWRkbGUgVG93biIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA2OTAuMzMwODEwNTQ2ODgsIDE1LjA5NDI1MTYzMjY5LCAxNTgyLjIzODAzNzEwOTQpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiSnVuZ2xlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE2MTIuNzk1Nzc2MzY3MiwgMzYuODUyMDgxMjk4ODI4LCAxNDkuMTI4NDMzMjI3NTQpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUGlyYXRlIFZpbGxhZ2UiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTE4MS4zMDkzMjYxNzE5LCA0Ljc1MTQ5MDU5Mjk1NjUsIDM4MDMuNTQ1NjU0Mjk2OSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJEZXNlcnQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDk0NC4xNTc4OTc5NDkyMiwgMjAuOTE5NzI5MjMyNzg4LCA0MzczLjMwMDI5Mjk2ODgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiU25vdyBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDEzNDcuODA2NzYyNjk1MywgMTA0LjY2ODA2MDMwMjczLCAtIDEzMTkuNzM3MDYwNTQ2OSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNYXJpbmVGb3JkIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDQ5MTQuODIxMjg5MDYyNSwgNTAuOTYzNjI2ODYxNTcyLCA0MjgxLjAyNzgzMjAzMTMpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ29sb3NzZXVtIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE0MjcuNjIwMzYxMzI4MSwgNy4yODgxMDc4NzIwMDkzLCAtIDI3OTIuNzcyMjE2Nzk2OSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJTa3kgSXNsYW5kIDEiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNDg2OS4xMDI1MzkwNjI1LCA3MzMuNDYwNTEwMjUzOTEsIC0gMjY2Ny4wMTgwNjY0MDYzKSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNreSBJc2xhbmQgMiIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA0NjA3LjgyMjc1LCA4NzIuNTQyNDgsIC0gMTY2Ny41NTY4OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJTa3kgSXNsYW5kIDMiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNzg5NC42MTc2NzU3ODEzLCA1NTQ3LjE0MTYwMTU2MjUsIC0gMzgwLjI5MTE5ODczMDQ3KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlByaXNvbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNDg3NS4zMzAwNzgxMjUsIDUuNjUxOTgxODMwNTk2OSwgNzM0Ljg1MDIxOTcyNjU2KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1hZ21hIFZpbGxhZ2UiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNTI0Ny43MTYzMDg1OTM4LCAxMi44ODM5MzQwMjA5OTYsIDg1MDQuOTY4NzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiVW5kZXIgV2F0ZXIgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCAxMS42Nzk2ODc1LCAxODE5Ljc4NDE3OTY4NzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRm91bnRhaW4gQ2l0eSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNTEyNy4xMjg0MTc5Njg4LCA1OS41MDEzNjU2NjE2MjEsIDQxMDUuNDQ1ODAwNzgxMykpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJTaGFuayBSb29tIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE0NDIuMTY1NTMsIDI5Ljg3ODgyNjEsIC0gMjguMzU0NzQ3OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNb2IgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI4NTAuMjAwNjgsIDcuMzkyMjQ3NjgsIDUzNTQuOTkyNjgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiVGhlIENhZmUiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gMjgxLjkzNzA3Mjc1MzkwNjI1LCAzMDYuMTMwNjE1MjM0Mzc1LCA2MDkuMjgwMDI5Mjk2ODc1KSk7CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAzODAuNDc5Mjc4NTY0NDUsIDc3LjIyMDM5MDMxOTgyNCwgMjU1LjgyNTUwMDQ4ODI4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZyaXN0IFNwb3QiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTEuMzExNDU1NzI2NjI0LCAyOS4yNzY3MzMzOTg0MzgsIDI3NzEuNTIyNDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJEYXJrIEFyZWEiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDM3ODAuMDMwMjczNDM3NSwgMjIuNjUyMTY0NDU5MjI5LCAtIDM0OTguNTg1OTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGbGFtaW5nbyBNYW5zaW9uIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDI4MS45MzcwNzI3NTM5MDYyNSwgMzA2LjEzMDYxNTIzNDM3NSwgNjA5LjI4MDAyOTI5Njg3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGbGFtaW5nbyBSb29tIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyMjg0LjkxMjEwOTM3NSwgMTUuMTUyMDM0NzU5NTIxNDg0LCA5MDUuNDgyOTEwMTU2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiR3JlZW4gWm9uZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyNDQ4LjUzMDAyOTI5NjksIDczLjAxNjEwNTY1MTg1NSwgLSAzMjEwLjYzMDYxNTIzNDQpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRmFjdG9yeSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNDI0LjEyNjk4MzY0MjU4LCAyMTEuMTYxNzEyNjQ2NDgsIC0gNDI3LjU0MDQ5NjgyNjE3KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNvbG9zc3VpbSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxNTAzLjYyMjQzNjUyMzQsIDIxOS43OTU2MjM3NzkzLCAxMzY5LjMxMDE4MDY2NDEpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiWm9tYmllIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA1NjIyLjAzMzIwMzEyNSwgNDkyLjE5NjA0NDkyMTg4LCAtIDc4MS43ODU1MjI0NjA5NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJUd28gU25vdyBNb3VudGFpbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNzUzLjE0Mjg4MzMwMDc4LCA0MDguMjM1NTk1NzAzMTMsIC0gNTI3NC42MTQ3NDYwOTM4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlB1bmsgSGF6YXJkIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDYxMjcuNjU0Mjk2ODc1LCAxNS45NTE3NjIxOTk0MDIsIC0gNTA0MC4yODYxMzI4MTI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkN1cnNlZCBTaGlwIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuNDAxOTc3NTM5MDYsIDEyNS4wNTcxMjg5MDYyNSwgMzI4ODUuODc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkljZSBDYXN0bGUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDYxNDguNDExNjIxMDkzOCwgMjk0LjM4Njg3MTMzNzg5LCAtIDY3NDEuMTE2Njk5MjE4OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGb3Jnb3R0ZW4gSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDMwMzIuNzY0MTYwMTU2MywgMzE3Ljg5NjcyODUxNTYzLCAtIDEwMDc1LjM3MzA0Njg3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJVc3NvcCBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDQ4MTYuODYxODE2NDA2MywgOC40NTk5ODg1OTQwNTUyLCAyODYzLjgxOTU4MDA3ODEpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWluaSBTa3kgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI4OC43NDA2MDA1ODU5NCwgNDkzMjYuMzE2NDA2MjUsIC0gMzUyNDguNTkzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiR3JlYXQgVHJlZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjY4MS4yNzM2ODE2NDA2LCAxNjgyLjgwOTIwNDEwMTYsIC0gNzE5MC45ODUzNTE1NjI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNhc3RsZSBPbiBUaGUgU2VhIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDUwNzUuNTA5Mjc3MzQzNzUsIDMxNC41MTU1MDI5Mjk2ODc1LCAtIDMxNTAuMDIyNDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNaW5pU2t5IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI2MC42NTU1Nzg2MTMyOCwgNDkzMjUuODA0Njg3NSwgLSAzNTI1My41NzAzMTI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlBvcnQgVG93biIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyOTAuNzM3NjcwODk4NDM3NSwgNi43Mjk5NTI4MTIxOTQ4MjQsIDUzNDMuNTUzNzEwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJIeWRyYSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDU2NjEuNTMyMjI2NTYyNSwgMTAxMy4wOTA3NTkyNzczNDM4LCAtIDMzNC45NjQ5OTYzMzc4OTA2KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZsb2F0aW5nIFR1cnRsZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxMzI3NC41MjgzMjAzMTMsIDUzMS44MjA3Mzk3NDYwOSwgLSA3NTc5LjIyMjY1NjI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1hbnNpb24iKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gMTI0NjguNTM4MDg1OTM3NSwgMzc1LjAwOTQyOTkzMTY0MDYsIC0gNzU1NC42MjU0ODgyODEyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDYXN0bGUgT24gVGhlIFNlYSIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA1MDc1LjUwOTI3NzM0Mzc1LCAzMTQuNTE1NTAyOTI5Njg3NSwgLSAzMTUwLjAyMjQ2MDkzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiSGF1bnRlZCBDYXN0bGUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gOTUxNS4zNzIwNzAzMTI1LCAxNjQuMDA2MjQwODQ0NzMsIDU3ODYuMDYxMDM1MTU2MikpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJJY2UgQ3JlYW0gSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDkwMi41NjgxNzYyNjk1MywgNzkuOTMyMDQ0OTgyOTEsIC0gMTA5ODguODQ3NjU2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUGVhbnV0IElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyMDYyLjc0NzU1ODU5MzgsIDUwLjQ3Mzg5MjIxMTkxNCwgLSAxMDIzMi41NjgzNTkzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ2FrZSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTg4NC43NzQ3ODAyNzM0Mzc1LCAxOS4zMjc1MjYwOTI1MjkyOTcsIC0gMTE2NjYuODk3NDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDb2NvYSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDg3Ljk0Mjc2NDI4MjIyNjU2LCA3My41NTQ1MTIwMjM5MjU3OCwgLSAxMjMxOS40NjQ4NDM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDYW5keSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTAxNC40MjQxOTQzMzU5Mzc1LCAxNDkuMTEwNjg3MjU1ODU5MzgsIC0gMTQ1NTUuOTYyODkwNjI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlRpa2kgT3V0cG9zdCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxNjU0Mi40NDcyNjU2MjUsIDU1LjY4NjMyODg4NzkzOTQ1LCAxMDQ0LjQxNjUwMzkwNjI1KSk7CiAgICAgICAgZW5kCiAgICBlbmQKfSk7CnYxNi5UZWxlcG9ydDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU3RvcCBUZWxlcG9ydCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgQ2FuY2VsVHdlZW4oKTsKICAgIGVuZAp9KTsKdjE2LlZpc3VhbDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRmFrZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjMxOCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyOwogICAgICAgIGxvY2FsIHYzMTkgPSByZXF1aXJlKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Ob3RpZmljYXRpb24pOwogICAgICAgIGxvY2FsIHYzMjAgPSB2MzE4OldhaXRGb3JDaGlsZCgiRGF0YSIpOwogICAgICAgIGxvY2FsIHYzMjEgPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6V2FpdEZvckNoaWxkKCJFWFBGdW5jdGlvbiIpKTsKICAgICAgICBsb2NhbCB2MzIyID0gcmVxdWlyZShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lci5MZXZlbFVwKTsKICAgICAgICBsb2NhbCB2MzIzID0gcmVxdWlyZShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuVXRpbC5Tb3VuZCk7CiAgICAgICAgbG9jYWwgdjMyNCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5VdGlsLlNvdW5kLlN0b3JhZ2UuT3RoZXI6RmluZEZpcnN0Q2hpbGQoIkxldmVsVXBfUHJveHkiKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuVXRpbC5Tb3VuZC5TdG9yYWdlLk90aGVyOkZpbmRGaXJzdENoaWxkKCJMZXZlbFVwIikgOwogICAgICAgIGZ1bmN0aW9uIHYxMjkodjU0MykKICAgICAgICAgICAgbG9jYWwgdjU0NCA9IHY1NDM7CiAgICAgICAgICAgIHdoaWxlIHRydWUgZG8KICAgICAgICAgICAgICAgIGxvY2FsIHY2NDksIHY2NTAgPSBzdHJpbmcuZ3N1Yih2NTQ0LCAiXigtPyVkKykoJWQlZCVkKSIsICIlMSwlMiIpOwogICAgICAgICAgICAgICAgdjU0NCA9IHY2NDk7CiAgICAgICAgICAgICAgICBpZiAodjY1MCA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybiB2NTQ0OwogICAgICAgIGVuZAogICAgICAgIHYzMTkubmV3KCI8Q29sb3I9WWVsbG93PlFVRVNUIENPTVBMRVRFRCE8Q29sb3I9Lz4iKTpEaXNwbGF5KCk7CiAgICAgICAgdjMxOS5uZXcoIkVhcm5lZDxDb2xvcj1ZZWxsb3c+OSw5OTksOTk5LDk5OSw5OTkgRXhwLjxDb2xvcj0vPigrTm9uZSkiKTpEaXNwbGF5KCk7CiAgICAgICAgdjMxOS5uZXcoIkVhcm5lZDxDb2xvcj1HcmVlbj4kOSw5OTksOTk5LDk5OSw5OTk8Q29sb3I9Lz4iKTpEaXNwbGF5KCk7CiAgICAgICAgdjMxOC5EYXRhLkV4cC5WYWx1ZSA9IDk5OTk5OTk5OTk5OTsKICAgICAgICB2MzE4LkRhdGEuQmVsaS5WYWx1ZSA9IHYzMTguRGF0YS5CZWxpLlZhbHVlICsgOTk5OTk5OTk5OTk5IDsKICAgICAgICBkZWxheSA9IDA7CiAgICAgICAgY291bnQgPSAwOwogICAgICAgIHdoaWxlICh2MzE4LkRhdGEuRXhwLlZhbHVlIC0gdjMyMSh2MzIwLkxldmVsLlZhbHVlKSkgPiAwIGRvCiAgICAgICAgICAgIHYzMTguRGF0YS5FeHAuVmFsdWUgPSB2MzE4LkRhdGEuRXhwLlZhbHVlIC0gdjMyMSh2MzIwLkxldmVsLlZhbHVlKSA7CiAgICAgICAgICAgIHYzMTguRGF0YS5MZXZlbC5WYWx1ZSA9IHYzMTguRGF0YS5MZXZlbC5WYWx1ZSArIDEgOwogICAgICAgICAgICB2MzE4LkRhdGEuUG9pbnRzLlZhbHVlID0gdjMxOC5EYXRhLlBvaW50cy5WYWx1ZSArIDMgOwogICAgICAgICAgICB2MzIyKHsKICAgICAgICAgICAgICAgIHYzMTgKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHYzMjMuUGxheSh2MzIzLCB2MzI0LlZhbHVlKTsKICAgICAgICAgICAgdjMxOS5uZXcoIjxDb2xvcj1HcmVlbj5MRVZFTCBVUCE8Q29sb3I9Lz4oIiAuLiB2MzE4LkRhdGEuTGV2ZWwuVmFsdWUgLi4gIikiKTpEaXNwbGF5KCk7CiAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxIDsKICAgICAgICAgICAgaWYgKGNvdW50ID49IDUpIHRoZW4KICAgICAgICAgICAgICAgIGRlbGF5ID0gdGljaygpOwogICAgICAgICAgICAgICAgY291bnQgPSAwOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAp9KTsKdjE2LlZpc3VhbDpBZGRJbnB1dCgiSW5wdXRfTGV2ZWwiLCB7CiAgICBUaXRsZSA9ICJMZXZlbCIsCiAgICBEZWZhdWx0ID0gIiIsCiAgICBQbGFjZWhvbGRlciA9ICIuLi4iLAogICAgTnVtZXJpYyA9IGZhbHNlLAogICAgRmluaXNoZWQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjMyNykKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsnTG9jYWxQbGF5ZXInXS5EYXRhLkxldmVsLlZhbHVlID0gdG9udW1iZXIodjMyNyk7CiAgICBlbmQKfSk7CnYxNi5WaXN1YWw6QWRkSW5wdXQoIklucHV0X0VYUCIsIHsKICAgIFRpdGxlID0gIkVYUCIsCiAgICBEZWZhdWx0ID0gIiIsCiAgICBQbGFjZWhvbGRlciA9ICIuLi4iLAogICAgTnVtZXJpYyA9IGZhbHNlLAogICAgRmluaXNoZWQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjMyOSkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsnTG9jYWxQbGF5ZXInXS5EYXRhLkV4cC5WYWx1ZSA9IHRvbnVtYmVyKHYzMjkpOwogICAgZW5kCn0pOwp2MTYuVmlzdWFsOkFkZElucHV0KCJJbnB1dF9CZWxpIiwgewogICAgVGl0bGUgPSAiQmVsaSIsCiAgICBEZWZhdWx0ID0gIiIsCiAgICBQbGFjZWhvbGRlciA9ICIuLi4iLAogICAgTnVtZXJpYyA9IGZhbHNlLAogICAgRmluaXNoZWQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjMzMSkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsnTG9jYWxQbGF5ZXInXS5EYXRhLkJlbGkuVmFsdWUgPSB0b251bWJlcih2MzMxKTsKICAgIGVuZAp9KTsKdjE2LlZpc3VhbDpBZGRJbnB1dCgiSW5wdXRfRnJhZ21lbnRzIiwgewogICAgVGl0bGUgPSAiRnJhZ21lbnRzIiwKICAgIERlZmF1bHQgPSAiIiwKICAgIFBsYWNlaG9sZGVyID0gIi4uLiIsCiAgICBOdW1lcmljID0gZmFsc2UsCiAgICBGaW5pc2hlZCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MzMzKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWydMb2NhbFBsYXllciddLkRhdGEuRnJhZ21lbnRzLlZhbHVlID0gdG9udW1iZXIodjMzMyk7CiAgICBlbmQKfSk7CmxvY2FsIHYxMjIgPSBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJSZW1vdGVzIikuQ29tbUZfOkludm9rZVNlcnZlcigiR2V0RnJ1aXRzIik7ClRhYmxlX0RldmlsRnJ1aXRTbmlwZXIgPSB7fTsKU2hvcERldmlsU2VsbCA9IHt9Owpmb3IgdjMzNSwgdjMzNiBpbiBuZXh0LCB2MTIyIGRvCiAgICB0YWJsZS5pbnNlcnQoVGFibGVfRGV2aWxGcnVpdFNuaXBlciwgdjMzNi5OYW1lKTsKICAgIGlmIHYzMzYuT25TYWxlIHRoZW4KICAgICAgICB0YWJsZS5pbnNlcnQoU2hvcERldmlsU2VsbCwgdjMzNi5OYW1lKTsKICAgIGVuZAplbmQKX0cuU2VsZWN0RnJ1aXQgPSAiRHJhZ29uLURyYWdvbiI7Cl9HLlBlcm1hbmVudEZydWl0ID0gIkRyYWdvbi1EcmFnb24iOwpfRy5BdXRvQnV5RnJ1aXRTbmlwZXIgPSBmYWxzZTsKX0cuQXV0b1N3aXRjaFBlcm1hbmVudEZydWl0ID0gZmFsc2U7CmxvY2FsIHYxMjMgPSB2MTYuRnJ1aXQ6QWRkRHJvcGRvd24oIkRyb3Bkb3duRnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJTZWxlY3QgRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IFRhYmxlX0RldmlsRnJ1aXRTbmlwZXIsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnYxMjM6U2V0VmFsdWUoX0cuU2VsZWN0RnJ1aXQpOwp2MTIzOk9uQ2hhbmdlZChmdW5jdGlvbih2MzM3KQogICAgX0cuU2VsZWN0RnJ1aXQgPSB2MzM3OwplbmQpOwpsb2NhbCB2MTExID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlRnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJCdXkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExMTpPbkNoYW5nZWQoZnVuY3Rpb24odjMzOCkKICAgIGlmIHYzMzggdGhlbgogICAgICAgIF9HLkF1dG9CdXlGcnVpdFNuaXBlciA9IHRydWU7CiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJHZXRGcnVpdHMiKTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHVyY2hhc2VSYXdGcnVpdCIsIF9HLlNlbGVjdEZydWl0LCBmYWxzZSk7CiAgICAgICAgZW5kKTsKICAgICAgICBfRy5BdXRvQnV5RnJ1aXRTbmlwZXIgPSBmYWxzZTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlRnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTI0ID0gdjE2LkZydWl0OkFkZERyb3Bkb3duKCJEcm9wZG93blBlcm1hbmVudEZydWl0IiwgewogICAgVGl0bGUgPSAiU2VsZWN0IFBlcm1hbmVudCBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gVGFibGVfRGV2aWxGcnVpdFNuaXBlciwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjEyNDpTZXRWYWx1ZShfRy5QZXJtYW5lbnRGcnVpdCk7CnYxMjQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMzkpCiAgICBfRy5QZXJtYW5lbnRGcnVpdCA9IHYzMzk7CmVuZCk7CmxvY2FsIHYxMjUgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVQZXJtYW5lbnRGcnVpdCIsIHsKICAgIFRpdGxlID0gIlVzZSBQZXJtYW5lbnQgRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEyNTpPbkNoYW5nZWQoZnVuY3Rpb24odjM0MCkKICAgIGlmIHYzNDAgdGhlbgogICAgICAgIF9HLkF1dG9Td2l0Y2hQZXJtYW5lbnRGcnVpdCA9IHRydWU7CiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCB2NzQyID0gewogICAgICAgICAgICAgICAgWzFdID0gIlN3aXRjaEZydWl0IiwKICAgICAgICAgICAgICAgIFsyXSA9IF9HLlBlcm1hbmVudEZydWl0CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY3NDIpKTsKICAgICAgICBlbmQpOwogICAgICAgIF9HLkF1dG9Td2l0Y2hQZXJtYW5lbnRGcnVpdCA9IGZhbHNlOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVQZXJtYW5lbnRGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMjYgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVTdG9yZSIsIHsKICAgIFRpdGxlID0gIlN0b3JlIEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDEpCiAgICBfRy5BdXRvU3RvcmVGcnVpdCA9IHYzNDE7CmVuZCk7CnYxNy5Ub2dnbGVTdG9yZTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b1N0b3JlRnJ1aXQgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBfRy5BdXRvU3RvcmVGcnVpdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQm9tYiBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCb21iIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJCb21iLUJvbWIiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQm9tYiBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGlrZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGlrZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU3Bpa2UtU3Bpa2UiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3Bpa2UgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQ2hvcCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJDaG9wIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJDaG9wLUNob3AiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmxhZGUgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3ByaW5nIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwcmluZyBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU3ByaW5nLVNwcmluZyIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcHJpbmcgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUm9ja2V0IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIktpbG8gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlJvY2tldC1Sb2NrZXQiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiS2lsbyBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTbW9rZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTbW9rZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU21va2UtU21va2UiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU21va2UgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3BpbiBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGluIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTcGluLVNwaW4iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3BpbiBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGbGFtZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGbGFtZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRmxhbWUtRmxhbWUiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxhbWUgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmFsY29uIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZhbGNvbiBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRmFsY29uIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoImFsY29uIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkljZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJJY2UgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkljZS1JY2UiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSWNlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNhbmQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2FuZCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU2FuZC1TYW5kIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNhbmQgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRGFyayBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEYXJrIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJEYXJrLURhcmsiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRGFyayBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJHaG9zdCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSZXZpdmUgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkdob3N0LUdob3N0IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJldml2ZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEaWFtb25kIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRpYW1vbmQgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkRpYW1vbmQtRGlhbW9uZCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEaWFtb25kIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkxpZ2h0IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxpZ2h0IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJMaWdodC1MaWdodCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJMaWdodCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMb3ZlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxvdmUgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkxvdmUtTG92ZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJMb3ZlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJ1YmJlciBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSdWJiZXIgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlJ1YmJlci1SdWJiZXIiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUnViYmVyIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJhcnJpZXIgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmFycmllciBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiQmFycmllci1CYXJyaWVyIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJhcnJpZXIgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTWFnbWEgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWFnbWEgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIk1hZ21hLU1hZ21hIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIk1hZ21hIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlBvcnRhbCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQb3J0YWwgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkRvb3ItRG9vciIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQb3J0YWwgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUXVha2UgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUXVha2UgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlF1YWtlLVF1YWtlIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlF1YWtlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJ1ZGRoYSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCdWRkaGEgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdWRkaGEiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQnVkZGhhIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNwaWRlciBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGlkZXIgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNwaWRlci1TcGlkZXIiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3BpZGVyIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJpcmQ6IFBob2VuaXggRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUGhvZW5peCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUGhvZW5peCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQaG9lbml4IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJ1bWJsZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSdW1ibGUgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlJ1bWJsZS1SdW1ibGUiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUnVtYmxlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlBhaW4gRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUGFpbiBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUGFpbi1QYWluIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBhaW4gRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiR3Jhdml0eSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJHcmF2aXR5IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJHcmF2aXR5LUdyYXZpdHkiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiR3Jhdml0eSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRG91Z2gtRG91Z2giLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRG91Z2ggRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU2hhZG93IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNoYWRvdyBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU2hhZG93LVNoYWRvdyIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTaGFkb3cgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVmVub20gRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVmVub20gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlZlbm9tLVZlbm9tIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlZlbm9tIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkNvbnRyb2wgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ29udHJvbCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiQ29udHJvbC1Db250cm9sIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkNvbnRyb2wgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3Bpcml0IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaXJpdCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU291bC1Tb3VsIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaXJpdCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJEcmFnb24tRHJhZ29uIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGVvcGFyZCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJMZW9wYXJkIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiTGVvcGFyZC1MZW9wYXJkIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxlb3BhcmQgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxMjcgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVSYW5kb21GcnVpdCIsIHsKICAgIFRpdGxlID0gIlJhbmRvbSBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTI3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQyKQogICAgX0cuUmFuZG9tX0F1dG8gPSB2MzQyOwplbmQpOwp2MTcuVG9nZ2xlUmFuZG9tRnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLlJhbmRvbV9BdXRvIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNvdXNpbiIsICJCdXkiKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTI4ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdFRQIiwgewogICAgVGl0bGUgPSAiR2V0IEZydWl0IChUUCkiLAogICAgRGVzY3JpcHRpb24gPSAiUmlzayIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDMpCiAgICBfRy5Db2xsZWN0RnJ1aXRUUCA9IHYzNDM7CmVuZCk7CnYxNy5Ub2dnbGVDb2xsZWN0VFA6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5Db2xsZWN0RnJ1aXRUUCB0aGVuCiAgICAgICAgICAgIGZvciB2ODAxLCB2ODAyIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2ODAyLk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjgwMi5IYW5kbGUuQ0ZyYW1lOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMjkgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0IiwgewogICAgVGl0bGUgPSAiR2V0IEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDQpCiAgICBfRy5Ud2VlbmZydWl0ID0gdjM0NDsKZW5kKTsKdjE3LlRvZ2dsZUNvbGxlY3Q6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5Ud2VlbmZydWl0IHRoZW4KICAgICAgICAgICAgZm9yIHY4MDMsIHY4MDQgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY4MDQuTmFtZSwgIkZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4MDQuSGFuZGxlLkNGcmFtZSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2LkZydWl0OkFkZFNlY3Rpb24oIkVzcCIpOwpsb2NhbCB2MTMwID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlRXNwUGxheWVyIiwgewogICAgVGl0bGUgPSAiUGxheWVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDUpCiAgICBFU1BQbGF5ZXIgPSB2MzQ1OwogICAgVXBkYXRlUGxheWVyQ2hhbXMoKTsKZW5kKTsKdjE3LlRvZ2dsZUVzcFBsYXllcjpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMzEgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BGcnVpdCIsIHsKICAgIFRpdGxlID0gIkZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDYpCiAgICBEZXZpbEZydWl0RVNQID0gdjM0NjsKICAgIHdoaWxlIERldmlsRnJ1aXRFU1AgZG8KICAgICAgICB3YWl0KCk7CiAgICAgICAgVXBkYXRlRGV2aWxDaGFtcygpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVFc3BGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMzIgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BJc2xhbmQiLCB7CiAgICBUaXRsZSA9ICJJc2xhbmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzMjpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NykKICAgIElzbGFuZEVTUCA9IHYzNDc7CiAgICB3aGlsZSBJc2xhbmRFU1AgZG8KICAgICAgICB3YWl0KCk7CiAgICAgICAgVXBkYXRlSXNsYW5kRVNQKCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUVzcElzbGFuZDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMzMgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BGbG93ZXIiLCB7CiAgICBUaXRsZSA9ICJGbG93ZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzMzpPbkNoYW5nZWQoZnVuY3Rpb24odjM0OCkKICAgIEZsb3dlckVTUCA9IHYzNDg7CiAgICBVcGRhdGVGbG93ZXJDaGFtcygpOwplbmQpOwp2MTcuVG9nZ2xlRXNwRmxvd2VyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgRmxvd2VyRVNQIHRoZW4KICAgICAgICAgICAgVXBkYXRlRmxvd2VyQ2hhbXMoKTsKICAgICAgICBlbmQKICAgICAgICBpZiBEZXZpbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgVXBkYXRlRGV2aWxDaGFtcygpOwogICAgICAgIGVuZAogICAgICAgIGlmIENoZXN0RVNQIHRoZW4KICAgICAgICAgICAgVXBkYXRlQ2hlc3RDaGFtcygpOwogICAgICAgIGVuZAogICAgICAgIGlmIEVTUFBsYXllciB0aGVuCiAgICAgICAgICAgIFVwZGF0ZVBsYXllckNoYW1zKCk7CiAgICAgICAgZW5kCiAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgVXBkYXRlUmVhbEZydWl0Q2hhbXMoKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTM0ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlRXNwUmVhbEZydWl0IiwgewogICAgVGl0bGUgPSAiUmVhbCBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTM0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQ5KQogICAgUmVhbEZydWl0RXNwID0gdjM0OTsKICAgIHdoaWxlIFJlYWxGcnVpdEVzcCBkbwogICAgICAgIHdhaXQoKTsKICAgICAgICBVcGRhdGVSZWFsRnJ1aXRFc3AoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlRXNwUmVhbEZydWl0OlNldFZhbHVlKGZhbHNlKTsKZnVuY3Rpb24gVXBkYXRlUmVhbEZydWl0RXNwKCkKICAgIGZvciB2NTQ4LCB2NTQ5IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY1NDk6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFc3AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY1NDkuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTA2NiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjU0OS5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHYxMDY2Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2MTA2Ni5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwNjYuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2MTA2Ni5BZG9ybmVlID0gdjU0OS5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjEwNjYuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDczID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTA2Nik7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2MTA3My5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHYxMDczLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2MTA3My5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDczLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2MTA3My5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTA3My5UZXh0ID0gdjU0OS5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NTQ5LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY1NDkuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY1NDkuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NDkuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY1NDkuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY1NDkuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NTUwLCB2NTUxIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLlBpbmVhcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NTUxOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RXNwIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NTUxLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwODUgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY1NTEuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2MTA4NS5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjEwODUuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDg1LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwODUuQWRvcm5lZSA9IHY1NTEuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHYxMDg1LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTA5MiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEwODUpOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTc0LCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5UZXh0ID0gdjU1MS5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NTUxLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY1NTEuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY1NTEuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NTEuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY1NTEuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY1NTEuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NTUyLCB2NTUzIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkJhbmFuYVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NTUzOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RXNwIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NTUzLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMDQgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY1NTMuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2MTEwNC5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjExMDQuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMTA0LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjExMDQuQWRvcm5lZSA9IHY1NTMuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHYxMTA0LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTExMSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjExMDQpOwogICAgICAgICAgICAgICAgICAgIHYxMTExLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2MTExMS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHYxMTExLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjU1LCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5UZXh0ID0gdjU1My5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NTUzLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY1NTMuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY1NTMuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NTMuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY1NTMuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY1NTMuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmxvY2FsIHYxMzUgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVJc2xhbmRNaXJhZ2VFc3AiLCB7CiAgICBUaXRsZSA9ICJNaXJhZ2UgSXNsYW5kIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTApCiAgICBJc2xhbmRNaXJhZ2VFc3AgPSB2MzUwOwogICAgd2hpbGUgSXNsYW5kTWlyYWdlRXNwIGRvCiAgICAgICAgd2FpdCgpOwogICAgICAgIFVwZGF0ZUlzbGFuZE1pcmFnZUVzcCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVJc2xhbmRNaXJhZ2VFc3A6U2V0VmFsdWUoZmFsc2UpOwpmdW5jdGlvbiBpc25pbCh2MzUxKQogICAgcmV0dXJuIHYzNTEgPT0gbmlsIDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYyMCh2MzUyKQogICAgcmV0dXJuIG1hdGguZmxvb3IodG9udW1iZXIodjM1MikgKyAwLjUpOwplbmQKTnVtYmVyID0gbWF0aC5yYW5kb20oMSwgMTAwMDAwMCk7CmZ1bmN0aW9uIFVwZGF0ZUlzbGFuZE1pcmFnZUVzcCgpCiAgICBmb3IgdjU1NCwgdjU1NSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIE1pcmFnZUlzbGFuZEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjU1NS5OYW1lID09ICJNaXJhZ2UgSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NTU1OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM0NyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjU1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ3Lk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ3LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDcuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDcuQWRvcm5lZSA9IHY1NTU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ3LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNTMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMzQ3KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuRm9udCA9IEVudW0uRm9udC5Db2RlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0OwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5Ub3A7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODAsIDI0NSwgMjQ1KTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY1NTVbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY1NTUuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NTU1LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIE0iIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjU1NTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgIHY1NTU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmxvY2FsIHYxMzYgPSB7CiAgICAiRmxhbWUiLAogICAgIkljZSIsCiAgICAiUXVha2UiLAogICAgIkxpZ2h0IiwKICAgICJEYXJrIiwKICAgICJTcGlkZXIiLAogICAgIlJ1bWJsZSIsCiAgICAiTWFnbWEiLAogICAgIkJ1ZGRoYSIsCiAgICAiU2FuZCIsCiAgICAiUGhvZW5peCIsCiAgICAiRG91Z2giCn07CmxvY2FsIHYxMzcgPSB2MTYuUmFpZDpBZGREcm9wZG93bigiRHJvcGRvd25SYWlkIiwgewogICAgVGl0bGUgPSAiU2VsZWN0IENoaXAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IHYxMzYsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnYxMzc6U2V0VmFsdWUoU2VsZWN0Q2hpcCk7CnYxMzc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTMpCiAgICBTZWxlY3RDaGlwID0gdjM1MzsKZW5kKTsKbG9jYWwgdjEzOCA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlQnV5IiwgewogICAgVGl0bGUgPSAiQnV5IENoaXAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzODpPbkNoYW5nZWQoZnVuY3Rpb24odjM1NCkKICAgIF9HLkF1dG9fQnV5X0NoaXBzX0R1bmdlb24gPSB2MzU0OwplbmQpOwp2MTcuVG9nZ2xlQnV5OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19CdXlfQ2hpcHNfRHVuZ2VvbiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDUgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIlJhaWRzTnBjIiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU2VsZWN0IiwKICAgICAgICAgICAgICAgICAgICBbM10gPSBTZWxlY3RDaGlwCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNSkpOwogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMzkgPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZVN0YXJ0IiwgewogICAgVGl0bGUgPSAiQXV0byBTdGFydCBSYWlkIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTUpCiAgICBfRy5BdXRvX1N0YXJ0UmFpZCA9IHYzNTU7CmVuZCk7CnYxNy5Ub2dnbGVTdGFydDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b19TdGFydFJhaWQgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWydMb2NhbFBsYXllciddLlBsYXllckd1aS5NYWluLlRpbWVyLlZpc2libGUgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAobm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDEiKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGVjaWFsIE1pY3JvY2hpcCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3BlY2lhbCBNaWNyb2NoaXAiKSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgU2VhMiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDY0MzguNzM1MzUsIDI1MC42NDUzNTUsIC0gNDUwMS41MDY4NCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE1NDcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gIlNldFNwYXduUG9pbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjE1NDcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNpcmNsZUlzbGFuZC5SYWlkU3VtbW9uMi5CdXR0b24uTWFpbi5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIFNlYTMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA1MDc1LjUwOTI3NzM0Mzc1LCAzMTQuNTE1NTAyOTI5Njg3NSwgLSAzMTUwLjAyMjQ2MDkzNzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNTAxNy40MDg2OSwgMzE0Ljg0NDA1NSwgLSAyODIzLjAxMjcsIC0gMC45MjU3NDM4MTgsIDQuNDgyMTc1ZS04LCAtIDAuMzc4MTUxMjM4LCA0LjU1NTAzMTVlLTksIDEsIDEuMDczNzc1NmUtNywgMC4zNzgxNTEyMzgsIDkuNzY4MTYyZS04LCAtIDAuOTI1NzQzODE4KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTY1NiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiU2V0U3Bhd25Qb2ludCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MTY1NikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkJvYXQgQ2FzdGxlIl0uUmFpZFN1bW1vbjIuQnV0dG9uLk1haW4uQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjE0MCA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlTmV4dElzbGFuZCIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBSYWlkIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTYpCiAgICBBdXRvTmV4dElzbGFuZCA9IHYzNTY7CiAgICBpZiBub3QgdjM1NiB0aGVuCiAgICAgICAgX0cuQXV0b05lYXIgPSBmYWxzZTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlTmV4dElzbGFuZDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIGxvY2FsIHYzNTcgPSB7fTsKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b05leHRJc2xhbmQgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2ODA2ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjsKICAgICAgICAgICAgICAgIGlmICh2ODA2IGFuZCB2ODA2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTAwID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MDEgPSB2ODA2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgaWYgKCgodjkwMSAtIFZlY3RvcjMubmV3KC0gNjQzOC43MzUzNSwgMjUwLjY0NTM1NSwgLSA0NTAxLjUwNjg0KSkuTWFnbml0dWRlIDwgMSkgb3IgKCh2OTAxIC0gVmVjdG9yMy5uZXcoLSA1MDE3LjQwODY5LCAzMTQuODQ0MDU1LCAtIDI4MjMuMDEyNykpLk1hZ25pdHVkZSA8IDEpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYzNTcgPSB7fTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiB2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgX0cuQXV0b05lYXIgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmICh2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMiIpIGFuZCBub3QgdjM1N1siSXNsYW5kIDIiXSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMiIpLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYzNTdbIklzbGFuZCAyIl0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAzIikgYW5kIG5vdCB2MzU3WyJJc2xhbmQgMyJdKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAzIikuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjM1N1siSXNsYW5kIDMiXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDQiKSBhbmQgbm90IHYzNTdbIklzbGFuZCA0Il0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDQiKS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MzU3WyJJc2xhbmQgNCJdID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNSIpIGFuZCBub3QgdjM1N1siSXNsYW5kIDUiXSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNSIpLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYzNTdbIklzbGFuZCA1Il0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNDEgPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZUF3YWtlIiwgewogICAgVGl0bGUgPSAiQXV0byBBd2FrZW5pbmcgRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0MTpPbkNoYW5nZWQoZnVuY3Rpb24odjM1OCkKICAgIEF1dG9Bd2FrZW5BYmlsaXRpZXMgPSB2MzU4OwplbmQpOwp2MTcuVG9nZ2xlQXdha2U6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIEF1dG9Bd2FrZW5BYmlsaXRpZXMgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBd2FrZW5lciIsICJBd2FrZW4iKTsKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTQyID0gdjE2LlJhaWQ6QWRkVG9nZ2xlKCJUb2dnbGVHZXRGcnVpdCIsIHsKICAgIFRpdGxlID0gIkdpdmUgVXAgTm9ybWFsIEZydWl04oCUPlJhaWQgQ2hpcCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQyOk9uQ2hhbmdlZChmdW5jdGlvbih2MzU5KQogICAgX0cuQXV0b2ZydWl0ID0gdjM1OTsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvZnJ1aXQgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiUm9ja2V0LVJvY2tldCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTcGluLVNwaW4iCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQ2hvcC1DaG9wIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNwcmluZy1TcHJpbmciCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQm9tYi1Cb21iIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNtb2tlLVNtb2tlIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNwaWtlLVNwaWtlIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkZsYW1lLUZsYW1lIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkZhbGNvbi1GYWxjb24iCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiSWNlLUljZSIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTYW5kLVNhbmQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiRGFyay1EYXJrIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkdob3N0LUdob3N0IgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkRpYW1vbmQtRGlhbW9uZCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJMaWdodC1MaWdodCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJSdWJiZXItUnViYmVyIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkJhcnJpZXItQmFycmllciIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKaWYgU2VhMiB0aGVuCiAgICB2MTYuUmFpZDpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIkZseSBUbyBUaGUgUmFpZCBSb29tIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDY0MzguNzM1MzUsIDI1MC42NDUzNTUsIC0gNDUwMS41MDY4NCkpOwogICAgICAgIGVuZAogICAgfSk7CmVsc2VpZiBTZWEzIHRoZW4KICAgIHYxNi5SYWlkOkFkZEJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiRmx5IFRvIFRoZSBSYWlkIFJvb20iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNTA3NS41MDkyNzczNDM3NSwgMzE0LjUxNTUwMjkyOTY4NzUsIC0gMzE1MC4wMjI0NjA5Mzc1KSk7CiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNTAxNy40MDg2OSwgMzE0Ljg0NDA1NSwgLSAyODIzLjAxMjcsIC0gMC45MjU3NDM4MTgsIDQuNDgyMTc1ZS04LCAtIDAuMzc4MTUxMjM4LCA0LjU1NTAzMTVlLTksIDEsIDEuMDczNzc1NmUtNywgMC4zNzgxNTEyMzgsIDkuNzY4MTYyZS04LCAtIDAuOTI1NzQzODE4KSk7CiAgICAgICAgZW5kCiAgICB9KTsKZW5kCmxvY2FsIHY1NiA9IHYxNi5SYWlkOkFkZFNlY3Rpb24oIkxhdyIpOwpsb2NhbCB2MTQzID0gdjE2LlJhaWQ6QWRkVG9nZ2xlKCJUb2dnbGVMYXciLCB7CiAgICBUaXRsZSA9ICJBdXRvIFJhaWQgTG93IChGdWxseSkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0MzpPbkNoYW5nZWQoZnVuY3Rpb24odjM2MCkKICAgIEF1dG9fTGF3ID0gdjM2MDsKZW5kKTsKdjE3LlRvZ2dsZUxhdzpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgQXV0b19MYXcgdGhlbgogICAgICAgICAgICAgICAgaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIk1pY3JvY2hpcCIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIk1pY3JvY2hpcCIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiTWljcm9jaGlwIiwgIjEiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIk1pY3JvY2hpcCIsICIyIik7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIEF1dG9fTGF3IHRoZW4KICAgICAgICAgICAgICAgIGlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTWljcm9jaGlwIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIk1pY3JvY2hpcCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNpcmNsZUlzbGFuZC5SYWlkU3VtbW9uLkJ1dHRvbi5NYWluLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ2OCwgdjE0NjkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjkuTmFtZSA9PSAiT3JkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDY5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCB2MTQ2OS5QYXJlbnQgb3IgKHYxNDY5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoQXV0b19MYXcgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA2MjE3LjIwMjE0ODQzNzUsIDI4LjA0NzY0NTU2ODg0OCwgLSA1MDUzLjEzNTc0MjE4NzUpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CnYxNi5SYWNlOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUZW1wbGUgT2YgVGltZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoMjgyODYuMzU1NDY4NzUsIDE0ODk1LjMwMTc1NzgxMjUsIDEwMi42MjQ2OTQ4MjQyMTg3NSkpOwogICAgZW5kCn0pOwp2MTYuUmFjZTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQXV0byBQdWxsIExldmVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyODI4Ni4zNTU0Njg3NSwgMTQ4OTUuMzAxNzU3ODEyNSwgMTAyLjYyNDY5NDgyNDIxODc1KSk7CiAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjg1NzUuMTgxNjQwNjI1LCAxNDkzNi42Mjc5Mjk2ODc1LCA3Mi4zMTYzNjgxMDMwMjczNCkpOwogICAgZW5kCn0pOwp2MTYuUmFjZTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiVFAgQnV5IEdlYXIgTlBDIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyODI4Ni4zNTU0Njg3NSwgMTQ4OTUuMzAxNzU3ODEyNSwgMTAyLjYyNDY5NDgyNDIxODc1KSk7CiAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjg5ODEuNTUyNzM0Mzc1LCAxNDg4OC40MjY3NTc4MTI1LCAtIDEyMC4yNDU4NDk2MDkzNzUpKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2LlJhY2U6QWRkU2VjdGlvbigiUmFjZSIpOwp2MTYuUmFjZTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUmFjZSBEb29yIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyODI4Ni4zNTU0Njg3NSwgMTQ4OTUuMzAxNzU3ODEyNSwgMTAyLjYyNDY5NDgyNDIxODc1KSk7CiAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiSHVtYW4iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI5MjIxLjgyMjI2NTYyNSwgMTQ4OTAuOTc1NTg1OTM3NSwgLSAyMDUuOTkxMTQ5OTAyMzQzNzUpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiU2t5cGllYSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjg5NjAuMTU4MjAzMTI1LCAxNDkxOS42MjQwMjM0Mzc1LCAyMzUuMDM5NDg5NzQ2MDkzNzUpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiRmlzaG1hbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjgyMzEuMTc1NzgxMjUsIDE0ODkwLjk3NTU4NTkzNzUsIC0gMjExLjY0MTczODg5MTYwMTU2KSk7CiAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkN5Ym9yZyIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjg1MDIuNjgxNjQwNjI1LCAxNDg5NS45NzU1ODU5Mzc1LCAtIDQyMy43Mjc5MzU3OTEwMTU2KSk7CiAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkdob3VsIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODY3NC4yNDQxNDA2MjUsIDE0ODkwLjY3Njc1NzgxMjUsIDQ0NS40MzEwNjA3OTEwMTU2KSk7CiAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIk1pbmsiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI5MDEyLjM0MTc5Njg3NSwgMTQ4OTAuOTc1NTg1OTM3NSwgLSAzODAuMTQ5MjYxNDc0NjA5NCkpOwogICAgICAgIGVuZAogICAgZW5kCn0pOwpsb2NhbCB2MTQ0ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVIdW1hbmFuZGdob3VsIiwgewogICAgVGl0bGUgPSAiT3ZlcmNvbWUgQ2hhbGxlbmdlcyBbSHVtYW4vR2hvdWxdIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjEpCiAgICBLaWxsQXVyYSA9IHYzNjE7CmVuZCk7CnYxNy5Ub2dnbGVIdW1hbmFuZGdob3VsOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjE0NSA9IHYxNi5SYWNlOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b3RyaWFsIiwgewogICAgVGl0bGUgPSAiT3ZlcmNvbWUgQ2hhbGxlbmdlcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQ1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzYyKQogICAgX0cuQXV0b1F1ZXN0UmFjZSA9IHYzNjI7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvdHJpYWw6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9RdWVzdFJhY2UgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiSHVtYW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMTIzLCB2MTEyNCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTEyNDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjExMjQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMTI0Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExMjQuSHVtYW5vaWQuSGVhbHRoID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExMjQuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvUXVlc3RSYWNlIG9yIG5vdCB2MTEyNC5QYXJlbnQgb3IgKHYxMTI0Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiU2t5cGllYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NzAsIHYxNDcxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLlNreVRyaWFsLk1vZGVsOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ3MS5OYW1lID09ICJzbm93aXNsYW5kX0N5bGluZGVyLjA4MSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJUUFoodjE0NzEuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAwLCAwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkZpc2htYW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNTgyLCB2MTU4MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLlNlYUJlYXN0cy5TZWFCZWFzdDE6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNTgzLk5hbWUgPT0gIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTU4My5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzQ2LCB2MTc0NyBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTc0NzpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc0Ny5Ub29sVGlwID09ICJNZWxlZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNzQ3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NDgsIHYxNzQ5IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNzQ5OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzQ5LlRvb2xUaXAgPT0gIkJsb3ggRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTc0OSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzUwLCB2MTc1MSBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTc1MTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc1MS5Ub29sVGlwID09ICJTd29yZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNzUxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NTIsIHYxNzUzIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNzUzOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzUzLlRvb2xUaXAgPT0gIkd1biIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNzUzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkN5Ym9yZyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDI4NjU0LCAxNDg5OC43ODMyLCAtIDMwLCAxLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAxKSk7CiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiR2hvdWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzY0LCB2MTc2NSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc2NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE3NjU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNzY1Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NjUuSHVtYW5vaWQuSGVhbHRoID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NjUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvUXVlc3RSYWNlIG9yIG5vdCB2MTc2NS5QYXJlbnQgb3IgKHYxNzY1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiTWluayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE3OTAsIHYxNzkxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzkxLk5hbWUgPT0gIlN0YXJ0UG9pbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTc5MS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDEwLCAwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjE0NiA9IHYxNi5SYWNlOkFkZFRvZ2dsZSgiVG9nZ2xlS2lsbFRyaWFsIiwgewogICAgVGl0bGUgPSAiS2lsbCBUcmlhbCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQ2Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzYzKQogICAgX0cuQXV0b0tpbGxUcmlhbCA9IHYzNjM7CmVuZCk7CnYxNy5Ub2dnbGVLaWxsVHJpYWw6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9LaWxsVHJpYWwgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4NzAsIHY4NzEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjg3MS5OYW1lIGFuZCAodjg3MS5OYW1lIH49IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5OYW1lKSBhbmQgKCh2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAwLCA1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9LaWxsVHJpYWwgb3Igbm90IHY4NzEuUGFyZW50IG9yICh2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2NTYgPSB2MTYuUmFjZTpBZGRTZWN0aW9uKCIiKTsKbG9jYWwgdjE0NyA9IHYxNi5SYWNlOkFkZFRvZ2dsZSgiVG9nZ2xlRmFybVJhY2UiLCB7CiAgICBUaXRsZSA9ICJGYXJtIFJhY2UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKbG9jYWwgdjE0OCA9IGZhbHNlOwp2MTQ3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzY0KQogICAgdjE0OCA9IHYzNjQ7CmVuZCk7CnYxNy5Ub2dnbGVGYXJtUmFjZTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIHYxNDggdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSYWNlVHJhbnNmb3JtZWQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmFjZVRyYW5zZm9ybWVkLlZhbHVlID09IHRydWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgX0cuQXV0b0JvbmVOb1F1ZXN0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5Njk4LjQ3MzYzMjgxMjUsIDQ0NS4wOTQ0MjEzODY3MTg3NSwgNjU0NS44NTI1MzkwNjI1KSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlJhY2VUcmFuc2Zvcm1lZC5WYWx1ZSA9PSBmYWxzZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBfRy5BdXRvQm9uZU5vUXVlc3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIlkiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiWSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgX0cuQXV0b0JvbmVOb1F1ZXN0ID0gZmFsc2U7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE0OSA9IHYxNi5SYWNlOkFkZFRvZ2dsZSgiVG9nZ2xlVXBncmFkZSIsIHsKICAgIFRpdGxlID0gIkJ1eSBHZWFyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjUpCiAgICBfRy5BdXRvVXBncmFkZSA9IHYzNjU7CiAgICBpZiBfRy5BdXRvVXBncmFkZSB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVXBncmFkZVJhY2UiLCAiQnV5Iik7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZVVwZ3JhZGU6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NTYgPSB2MTYuU2hvcDpBZGRTZWN0aW9uKCJIYWtpIik7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJHZXBwbyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SGFraSIsICJHZXBwbyIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQnVzbyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SGFraSIsICJCdXNvIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTb3J1IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlIYWtpIiwgIlNvcnUiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIktlbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiS2VuVGFsayIsICJCdXkiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2LlNob3A6QWRkU2VjdGlvbigiS2nhur9tIik7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDdXRsYXNzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkN1dGxhc3MiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkthdGFuYSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJLYXRhbmEiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIklyb24gTWFjZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJJcm9uIE1hY2UiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkR1ZWwgS2F0YW5hIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkR1ZWwgS2F0YW5hIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUcmlwbGUgS2F0YW5hIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIlRyaXBsZSBLYXRhbmEiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlBpcGUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiUGlwZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRHVhbC1IZWFkZWQgQmxhZGUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiRHVhbC1IZWFkZWQgQmxhZGUiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJpc2VudG8iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiQmlzZW50byIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU291bCBDYW5lIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIlNvdWwgQ2FuZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUG9sZSBWMiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRodW5kZXJHb2RUYWxrIik7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5TaG9wOkFkZFNlY3Rpb24oIlbDtSIpOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQmxhY2sgTGVnIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlCbGFja0xlZyIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRWxlY3RybyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RybyIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRmlzaG1hbiBLYXJhdGUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUZpc2htYW5LYXJhdGUiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkRyYWdvbiBDbGF3IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIkRyYWdvbkNsYXciLCAiMSIpOwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiRHJhZ29uQ2xhdyIsICIyIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTdXBlcmh1bWFuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTdXBlcmh1bWFuIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJEZWF0aCBTdGVwIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlEZWF0aFN0ZXAiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNoYXJrbWFuIEthcmF0ZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U2hhcmttYW5LYXJhdGUiLCB0cnVlKTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTaGFya21hbkthcmF0ZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRWxlY3RyaWMgQ2xhdyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RyaWNDbGF3Iik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJEcmFnb24gVGFsb24iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eURyYWdvblRhbG9uIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJHb2RodW1hbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5R29kaHVtYW4iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNhbmd1aW5lIEFydCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U2FuZ3VpbmVBcnQiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2LlNob3A6QWRkU2VjdGlvbigiT3RoZXIiKTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlJlc2V0IFN0YXRzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIlJlZnVuZCIsICIxIik7CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJSZWZ1bmQiLCAiMiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUmFuZG9tIFJhY2UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiUmVyb2xsIiwgIjEiKTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIlJlcm9sbCIsICIyIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDaGFuZ2UgVG8gR2hvdWwgUmFjZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjM2NiA9IHsKICAgICAgICAgICAgWzFdID0gIkVjdG9wbGFzbSIsCiAgICAgICAgICAgIFsyXSA9ICJDaGFuZ2UiLAogICAgICAgICAgICBbM10gPSA0CiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MzY2KSk7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDaGFuZ2UgVG8gQ3lib3JnIFJhY2UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYzNjcgPSB7CiAgICAgICAgICAgIFsxXSA9ICJDeWJvcmdUcmFpbmVyIiwKICAgICAgICAgICAgWzJdID0gIkJ1eSIKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzNjcpKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkNoYW5nZSB0byBEcmFjbyIsCiAgICBEZXNjcmlwdGlvbiA9ICJTZWEgMyBPbmx5IiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDU2NjEuNTMyMjI2NTYyNSwgMTAxMy4wOTA3NTkyNzczNDM4LCAtIDMzNC45NjQ5OTYzMzc4OTA2KSk7CiAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNTgxNC40MjcyNDYwOTM3NSwgMTIwOC4zMjY3ODIyMjY1NjI1LCA4ODQuNTc4NTUyMjQ2MDkzOCkpOwogICAgICAgIGxvY2FsIHYzNjggPSBWZWN0b3IzLm5ldyg1ODE0LjQyNzI0NjA5Mzc1LCAxMjA4LjMyNjc4MjIyNjU2MjUsIDg4NC41Nzg1NTIyNDYwOTM4KTsKICAgICAgICBsb2NhbCB2MzY5ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOwogICAgICAgIGxvY2FsIHYzNzAgPSB2MzY5LkNoYXJhY3RlciBvciB2MzY5LkNoYXJhY3RlckFkZGVkOldhaXQoKSA7CiAgICAgICAgcmVwZWF0CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICB1bnRpbCAodjM3MC5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjM2OCkuTWFnbml0dWRlIDwgMQogICAgICAgIGxvY2FsIHYzNzEgPSB7CiAgICAgICAgICAgIFsxXSA9IHsKICAgICAgICAgICAgICAgIE5QQyA9ICJEcmFnb24gV2l6YXJkIiwKICAgICAgICAgICAgICAgIENvbW1hbmQgPSAiRHJhZ29uUmFjZSIKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9JbnRlcmFjdERyYWdvblF1ZXN0Iik6SW52b2tlU2VydmVyKHVucGFjayh2MzcxKSk7CiAgICBlbmQKfSk7CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJSZWpvaW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnQoZ2FtZS5QbGFjZUlkLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcik7CiAgICBlbmQKfSk7CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJIb3AgU2VydmVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBIb3AoKTsKICAgIGVuZAp9KTsKZnVuY3Rpb24gSG9wKCkKICAgIGxvY2FsIHYzNzIgPSBnYW1lLlBsYWNlSWQ7CiAgICBsb2NhbCB2MzczID0ge307CiAgICBsb2NhbCB2Mzc0ID0gIiI7CiAgICBsb2NhbCB2Mzc1ID0gb3MuZGF0ZSgiISp0IikuaG91cjsKICAgIGxvY2FsIHYzNzYgPSBmYWxzZTsKICAgIGZ1bmN0aW9uIFRQUmV0dXJuZXIoKQogICAgICAgIGxvY2FsIHY1NTY7CiAgICAgICAgaWYgKHYzNzQgPT0gIiIpIHRoZW4KICAgICAgICAgICAgdjU1NiA9IGdhbWUuSHR0cFNlcnZpY2U6SlNPTkRlY29kZShnYW1lOkh0dHBHZXQoImh0dHBzOi8vZ2FtZXMucm9ibG94LmNvbS92MS9nYW1lcy8iIC4uIHYzNzIgLi4gIi9zZXJ2ZXJzL1B1YmxpYz9zb3J0T3JkZXI9QXNjJmxpbWl0PTEwMCIpKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHY1NTYgPSBnYW1lLkh0dHBTZXJ2aWNlOkpTT05EZWNvZGUoZ2FtZTpIdHRwR2V0KCJodHRwczovL2dhbWVzLnJvYmxveC5jb20vdjEvZ2FtZXMvIiAuLiB2MzcyIC4uICIvc2VydmVycy9QdWJsaWM/c29ydE9yZGVyPUFzYyZsaW1pdD0xMDAmY3Vyc29yPSIgLi4gdjM3NCkpOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1NTcgPSAiIjsKICAgICAgICBpZiAodjU1Ni5uZXh0UGFnZUN1cnNvciBhbmQgKHY1NTYubmV4dFBhZ2VDdXJzb3Igfj0gIm51bGwiKSBhbmQgKHY1NTYubmV4dFBhZ2VDdXJzb3Igfj0gbmlsKSkgdGhlbgogICAgICAgICAgICB2Mzc0ID0gdjU1Ni5uZXh0UGFnZUN1cnNvcjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTU4ID0gMDsKICAgICAgICBmb3IgdjY1MSwgdjY1MiBpbiBwYWlycyh2NTU2LmRhdGEpIGRvCiAgICAgICAgICAgIGxvY2FsIHY2NTMgPSB0cnVlOwogICAgICAgICAgICB2NTU3ID0gdG9zdHJpbmcodjY1Mi5pZCk7CiAgICAgICAgICAgIGlmICh0b251bWJlcih2NjUyLm1heFBsYXllcnMpID4gdG9udW1iZXIodjY1Mi5wbGF5aW5nKSkgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4NzIsIHY4NzMgaW4gcGFpcnModjM3MykgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjU1OCB+PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NTU3ID09IHRvc3RyaW5nKHY4NzMpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NjUzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodG9udW1iZXIodjM3NSkgfj0gdG9udW1iZXIodjg3MykpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE0NzIgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MzczID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodjM3MywgdjM3NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdjU1OCA9IHY1NTggKyAxIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgaWYgKHY2NTMgPT0gdHJ1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh2MzczLCB2NTU3KTsKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UodjM3MiwgdjU1NywgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyKTsKICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZnVuY3Rpb24gdjExOCgpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIFRQUmV0dXJuZXIoKTsKICAgICAgICAgICAgICAgIGlmICh2Mzc0IH49ICIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVFBSZXR1cm5lcigpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIHYxMTgoKTsKZW5kCmxvY2FsIHY1NiA9IHYxNi5NaXNjOkFkZFNlY3Rpb24oIlRlYW0iKTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlBpcmF0ZXMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlNldFRlYW0iLCAiUGlyYXRlcyIpOwogICAgZW5kCn0pOwp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiTWFyaW5lcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU2V0VGVhbSIsICJNYXJpbmVzIik7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5NaXNjOkFkZFNlY3Rpb24oIkNvZGUiKTsKbG9jYWwgdjE1MCA9IHsKICAgICJLSVRUX1JFU0VUIiwKICAgICJTdWIyVW5jbGVLaXphcnUiLAogICAgIlNVQjJHQU1FUlJPQk9UX1JFU0VUMSIsCiAgICAiU3ViMkZlcjk5OSIsCiAgICAiRW55dV9pc19Qcm8iLAogICAgIkpDV0siLAogICAgIlN0YXJjb2RlSEVPIiwKICAgICJNYWdpY0J1cyIsCiAgICAiS2l0dEdhbWluZyIsCiAgICAiU3ViMkNhcHRhaW5NYXVpIiwKICAgICJTdWIyT2ZmaWNhbE5vb2JpZSIsCiAgICAiVGhlR3JlYXRBY2UiLAogICAgIlN1YjJOb29iTWFzdGVyMTIzIiwKICAgICJTdWIyRGFpZ3JvY2siLAogICAgIkF4aW9yZSIsCiAgICAiU3RyYXdIYXRNYWluZSIsCiAgICAiVGFudGFpR2FtaW5nIiwKICAgICJCbHV4eHkiLAogICAgIlNVQjJHQU1FUlJPQk9UX0VYUDEiLAogICAgIkNoYW5kbGVyIiwKICAgICJOT01PUkVIQUNLIiwKICAgICJCQU5FWFBMT0lUIiwKICAgICJXaWxkRGFyZXMiLAogICAgIkJvc3NCdWlsZCIsCiAgICAiR2V0UHJhbmtlZCIsCiAgICAiRUFSTl9GUlVJVFMiLAogICAgIkZJR0hUNEZSVUlUIiwKICAgICJOT0VYUExPSVRFUiIsCiAgICAiTk9PQjJBRE1JTiIsCiAgICAiQ09ERVNMSURFIiwKICAgICJBRE1JTkhBQ0tFRCIsCiAgICAiQURNSU5EQVJFUyIsCiAgICAiZnJ1aXRjb25jZXB0cyIsCiAgICAia3JhenlkYXJlcyIsCiAgICAiVFJJUExFQUJVU0UiLAogICAgIlNFQVRST0xMSU5HIiwKICAgICIyNE5PQURNSU4iLAogICAgIlJFV0FSREZVTiIsCiAgICAiTkVXVFJPTEwiLAogICAgImZ1ZGQxMF92MiIsCiAgICAiRnVkZDEwIiwKICAgICJCaWduZXdzIiwKICAgICJTRUNSRVRfQURNSU4iCn07CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJSZWRlZW0gQWxsIENvZGUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGZvciB2NTU5LCB2NTYwIGluIGlwYWlycyh2MTUwKSBkbwogICAgICAgICAgICBSZWRlZW1Db2RlKHY1NjApOwogICAgICAgIGVuZAogICAgZW5kCn0pOwpmdW5jdGlvbiBSZWRlZW1Db2RlKHYzNzcpCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5SZWRlZW06SW52b2tlU2VydmVyKHYzNzcpOwplbmQKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiVGl0bGVzIik7CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUaXRsZXMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYzNzggPSB7CiAgICAgICAgICAgIFsxXSA9ICJnZXRUaXRsZXMiCiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2Mzc4KSk7CiAgICAgICAgZ2FtZS5QbGF5ZXJzLmxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlRpdGxlcy5WaXNpYmxlID0gdHJ1ZTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiQXdha2VuaW5nIik7CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJBd2FrZW5pbmciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLkF3YWtlbmluZ1RvZ2dsZXIuVmlzaWJsZSA9IHRydWU7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5NaXNjOkFkZFNlY3Rpb24oIk1pc2MiKTsKbG9jYWwgdjE1MSA9IHYxNi5NaXNjOkFkZFRvZ2dsZSgiVG9nZ2xlUmVqb2luIiwgewogICAgVGl0bGUgPSAiUmVqb2luIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjE1MTpPbkNoYW5nZWQoZnVuY3Rpb24odjM4MSkKICAgIF9HLkF1dG9SZWpvaW4gPSB2MzgxOwplbmQpOwp2MTcuVG9nZ2xlUmVqb2luOlNldFZhbHVlKHRydWUpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvUmVqb2luIHRoZW4KICAgICAgICAgICAgZ2V0Z2VudigpLnJlam9pbiA9IGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpLlJvYmxveFByb21wdEd1aS5wcm9tcHRPdmVybGF5LkNoaWxkQWRkZWQ6Q29ubmVjdChmdW5jdGlvbih2ODA4KQogICAgICAgICAgICAgICAgaWYgKCh2ODA4Lk5hbWUgPT0gIkVycm9yUHJvbXB0IikgYW5kIHY4MDg6RmluZEZpcnN0Q2hpbGQoIk1lc3NhZ2VBcmVhIikgYW5kIHY4MDguTWVzc2FnZUFyZWE6RmluZEZpcnN0Q2hpbGQoIkVycm9yRnJhbWUiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnQoZ2FtZS5QbGFjZUlkKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1NiA9IHYxNi5NaXNjOkFkZFNlY3Rpb24oIkZvZyIpOwpsb2NhbCBmdW5jdGlvbiB2MTUyKCkKICAgIGxvY2FsIHYzODIgPSBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIik7CiAgICBpZiB2MzgyOkZpbmRGaXJzdENoaWxkKCJCYXNlQXRtb3NwaGVyZSIpIHRoZW4KICAgICAgICB2MzgyLkJhc2VBdG1vc3BoZXJlOkRlc3Ryb3koKTsKICAgIGVuZAogICAgaWYgdjM4MjpGaW5kRmlyc3RDaGlsZCgiU2VhVGVycm9yQ0MiKSB0aGVuCiAgICAgICAgdjM4Mi5TZWFUZXJyb3JDQzpEZXN0cm95KCk7CiAgICBlbmQKICAgIGlmIHYzODI6RmluZEZpcnN0Q2hpbGQoIkxpZ2h0aW5nTGF5ZXJzIikgdGhlbgogICAgICAgIGlmIHYzODIuTGlnaHRpbmdMYXllcnM6RmluZEZpcnN0Q2hpbGQoIkF0bW9zcGhlcmUiKSB0aGVuCiAgICAgICAgICAgIHYzODIuTGlnaHRpbmdMYXllcnMuQXRtb3NwaGVyZTpEZXN0cm95KCk7CiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgpOwogICAgICAgIGlmIHYzODIuTGlnaHRpbmdMYXllcnM6RmluZEZpcnN0Q2hpbGQoIkRhcmtGb2ciKSB0aGVuCiAgICAgICAgICAgIHYzODIuTGlnaHRpbmdMYXllcnMuRGFya0ZvZzpEZXN0cm95KCk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIHYzODIuRm9nRW5kID0gMTAwMDAwOwplbmQKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRo4bupYyBU4buJbmgiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHYxNTIoKTsKICAgIGVuZAp9KTsKbG9jYWwgdjE1MyA9IHYxNi5NaXNjOkFkZFRvZ2dsZSgiVG9nZ2xlQW50aUJhbmQiLCB7CiAgICBUaXRsZSA9ICJBbnRpIEJhbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnYxNTM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODQpCiAgICBfRy5BbnRpQmFuZCA9IHYzODQ7CmVuZCk7CmxvY2FsIHYxNTQgPSB7CiAgICAxNzg4NDg4MSwKICAgIDEyMDE3MzYwNCwKICAgIDkxMjM0OAp9OwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BbnRpQmFuZCB0aGVuCiAgICAgICAgICAgIGZvciB2ODA5LCB2ODEwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgICAgIGlmIHRhYmxlLmZpbmQodjE1NCwgdjgxMC5Vc2VySWQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBIb3AoKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTYgPSB2MTYuU2VhOkFkZFNlY3Rpb24oIkxldmlhdGhhbiIpOwp2MTYuU2VhOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgTGV2aWF0aGFuIENoaXAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkluZm9MZXZpYXRoYW4iLCAiMiIpOwogICAgZW5kCn0pOwpsb2NhbCB2MTU1ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRQRnJvemVuRGltZW5zaW9uIiwgewogICAgVGl0bGUgPSAiRmx5IFRvIEZyb3plbiBEaW1lbnNpb24iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE1NTpPbkNoYW5nZWQoZnVuY3Rpb24odjM4NSkKICAgIF9HLlR3ZWVuVG9Gcm96ZW5EaW1lbnNpb24gPSB2Mzg1OwplbmQpOwp2MTU1OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgbG9jYWwgdjM4NjsKICAgIHdoaWxlIG5vdCB2Mzg2IGRvCiAgICAgICAgdjM4NiA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJGcm96ZW5EaW1lbnNpb24iKTsKICAgICAgICB3YWl0KCk7CiAgICBlbmQKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLlR3ZWVuVG9Gcm96ZW5EaW1lbnNpb24gdGhlbgogICAgICAgICAgICBpZiB2Mzg2IHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKHYzODYuQ0ZyYW1lKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NTYxID0gdjE2LlNlYTpBZGRQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIkxldmlhdGhhbiBDaGlwIFN0YXR1cyIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjgxMSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkluZm9MZXZpYXRoYW4iLCAiMSIpOwogICAgICAgICAgICAgICAgaWYgKHY4MTEgPT0gNSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY1NjE6U2V0RGVzYygiTGV2aWF0aGFuIElzIE91dCBUaGVyZSIpOwogICAgICAgICAgICAgICAgZWxzZWlmICh2ODExID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NTYxOlNldERlc2MoIkkgRG9uJ3QgS25vdyIpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY1NjE6U2V0RGVzYygiTXVhOiAiIC4uIHRvc3RyaW5nKHY4MTEpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKZW5kCmxvY2FsIHYxNTYgPSB2MTYuU2VhOkFkZFNlY3Rpb24oIkRyYWNvIik7CmxvY2FsIHYxNTcgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlQmxhemVFbWJlciIsIHsKICAgIFRpdGxlID0gIkF1dG8gQmxhemUgRW1iZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE1NzpPbkNoYW5nZWQoZnVuY3Rpb24odjM4NykKICAgIF9HLkF1dG9CbGF6ZUVtYmVyID0gdjM4NzsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0JsYXplRW1iZXIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJNb2R1bGVzIik6V2FpdEZvckNoaWxkKCJOZXQiKTpXYWl0Rm9yQ2hpbGQoIlJFL0RyYWdvbkRvam9FbWJlciIpOkZpcmVTZXJ2ZXIoKTsKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTU4ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVJlY2VpdmVRdWVzdCIsIHsKICAgIFRpdGxlID0gIkdldCBCbGF6ZSBFbWJlciBRdWVzdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTU4Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzg4KQogICAgX0cuQXV0b1JlY2VpdmVRdWVzdCA9IHYzODg7CiAgICBpZiBfRy5BdXRvUmVjZWl2ZVF1ZXN0IHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg1NjYxLjUzMjIyNjU2MjUsIDEwMTMuMDkwNzU5Mjc3MzQzOCwgLSAzMzQuOTY0OTk2MzM3ODkwNikpOwogICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDU4MTQuNDI3MjQ2MDkzNzUsIDEyMDguMzI2NzgyMjI2NTYyNSwgODg0LjU3ODU1MjI0NjA5MzgpKTsKICAgICAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY4NzQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRleHQgPSAiUmVxdWVzdFF1ZXN0IgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0RyYWdvbkh1bnRlciIpOkludm9rZVNlcnZlcih1bnBhY2sodjg3NCkpOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY4NzUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRleHQgPSAiQ2hlY2siCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY4NzYgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0RyYWdvbkh1bnRlciIpOkludm9rZVNlcnZlcih1bnBhY2sodjg3NSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTU5ID0gdjE2LlNlYTpBZGRQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiQmxhemUgRW1iZXIgUXVlc3QgU3RhdHVzIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBsb2NhbCB2NjU0ID0gewogICAgICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgICAgIENvbnRleHQgPSAiQ2hlY2siCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGxvY2FsIHY2NTUgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0RyYWdvbkh1bnRlciIpOkludm9rZVNlcnZlcih1bnBhY2sodjY1NCkpOwogICAgICAgICAgICBpZiAodHlwZW9mKHY2NTUpID09ICJ0YWJsZSIpIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODc3LCB2ODc4IGluIHBhaXJzKHY2NTUpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4NzggPT0gIkRlZmVhdCAzIFZlbm9tb3VzIEFzc2FpbGFudHMgb24gSHlkcmEgSXNsYW5kLiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjE1OTpTZXREZXNjKCJEZWZlYXQgMyBWZW5vbW91cyBBc3NhaWxhbnRzIG9uIEh5ZHJhIElzbGFuZC4iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY4NzggPT0gIkRlZmVhdCAzIEh5ZHJhIEVuZm9yY2VycyBvbiBIeWRyYSBJc2xhbmQuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2MTU5OlNldERlc2MoIkRlZmVhdCAzIEh5ZHJhIEVuZm9yY2VycyBvbiBIeWRyYSBJc2xhbmQuIik7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2ODc4ID09ICJEZXN0cm95IDEwIHRyZWVzIG9uIEh5ZHJhIElzbGFuZC4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYxNTk6U2V0RGVzYygiRGVzdHJveSAxMCB0cmVlcyBvbiBIeWRyYSBJc2xhbmQuIik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcHJpbnQodjY1NSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjE2MCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVIeWRyYVRyZWUiLCB7CiAgICBUaXRsZSA9ICJEZXN0cm95IHRyZWVzIGF0IEh5ZHJhIElzbGFuZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTYwOk9uQ2hhbmdlZChmdW5jdGlvbih2Mzg5KQogICAgX0cuQXV0b0h5ZHJhVHJlZSA9IHYzODk7CmVuZCk7CmxvY2FsIGZ1bmN0aW9uIHYxNjEodjM5MCkKICAgIGxvY2FsIHYzOTEgPSBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTsKICAgIHYzOTE6U2VuZEtleUV2ZW50KHRydWUsIHYzOTAsIGZhbHNlLCBnYW1lKTsKICAgIHYzOTE6U2VuZEtleUV2ZW50KGZhbHNlLCB2MzkwLCBmYWxzZSwgZ2FtZSk7CmVuZApsb2NhbCBmdW5jdGlvbiB2MTYyKHYzOTIpCiAgICBsb2NhbCB2MzkzID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOwogICAgbG9jYWwgdjM5NCA9IHYzOTMuQmFja3BhY2s7CiAgICBmb3IgdjU2MiwgdjU2MyBpbiBwYWlycyh2Mzk0OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgKHY1NjM6SXNBKCJUb29sIikgYW5kICh2NTYzLlRvb2xUaXAgPT0gdjM5MikpIHRoZW4KICAgICAgICAgICAgdjU2My5QYXJlbnQgPSB2MzkzLkNoYXJhY3RlcjsKICAgICAgICAgICAgZm9yIHY4MTIsIHY4MTMgaW4gaXBhaXJzKHsKICAgICAgICAgICAgICAgICJaIiwKICAgICAgICAgICAgICAgICJYIiwKICAgICAgICAgICAgICAgICJDIiwKICAgICAgICAgICAgICAgICJWIiwKICAgICAgICAgICAgICAgICJGIgogICAgICAgICAgICB9KSBkbwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHYxNjEodjgxMyk7CiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjU2My5QYXJlbnQgPSB2Mzk0OwogICAgICAgICAgICBicmVhazsKICAgICAgICBlbmQKICAgIGVuZAplbmQKbG9jYWwgdjE2MyA9IHsKICAgIENGcmFtZS5uZXcoNTI4OC42MTk2Mjg5MDYyNSwgMTAwNS40MDAwMjQ0MTQwNjI1LCAzOTIuNDMwMTE0NzQ2MDkzNzUpLAogICAgQ0ZyYW1lLm5ldyg1MzQzLjM5NDUzMTI1LCAxMDA0LjE5OTg5MDEzNjcxODgsIDM2MS4wNjg3NTYxMDM1MTU2KSwKICAgIENGcmFtZS5uZXcoNTIzNS43ODU2NDQ1MzEyNSwgMTAwNC4xOTk4OTAxMzY3MTg4LCA0MzEuNDUzMDk0NDgyNDIxOSksCiAgICBDRnJhbWUubmV3KDUzMjEuMzA2MTUyMzQzNzUsIDEwMDQuMTk5ODkwMTM2NzE4OCwgNDQwLjg5NTE0MTYwMTU2MjUpLAogICAgQ0ZyYW1lLm5ldyg1MjU4Ljk2NDg0Mzc1LCAxMDA0LjE5OTg5MDEzNjcxODgsIDM0NS41MDUyNDkwMjM0Mzc1KQp9OwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvSHlkcmFUcmVlIHRoZW4KICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgZm9yIHY4MTQsIHY4MTUgaW4gaXBhaXJzKHYxNjMpIGRvCiAgICAgICAgICAgICAgICBpZiBub3QgX0cuQXV0b0h5ZHJhVHJlZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuMih2ODE1KTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MTYgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOwogICAgICAgICAgICAgICAgaWYgKHY4MTYgYW5kIHY4MTY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MDIgPSAodjgxNi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgxNS5Qb3NpdGlvbikuTWFnbml0dWRlOwogICAgICAgICAgICAgICAgICAgIGlmICh2OTAyIDw9IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiTWVsZWUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiU3dvcmQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiR3VuIik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKdjE1NjpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiVGVsZXBvcnQgVG8gRHJhZ29uIERvam8iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDU2NjEuNTMyMjI2NTYyNSwgMTAxMy4wOTA3NTkyNzczNDM4LCAtIDMzNC45NjQ5OTYzMzc4OTA2KSk7CiAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNTgxNC40MjcyNDYwOTM3NSwgMTIwOC4zMjY3ODIyMjY1NjI1LCA4ODQuNTc4NTUyMjQ2MDkzOCkpOwogICAgZW5kCn0pOwp2MTU2OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDcmFmdCBWb2xjYW5pYyBNYWduZXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYzOTUgPSB7CiAgICAgICAgICAgIFsxXSA9ICJDcmFmdEl0ZW0iLAogICAgICAgICAgICBbMl0gPSAiQ3JhZnQiLAogICAgICAgICAgICBbM10gPSAiVm9sY2FuaWMgTWFnbmV0IgogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjM5NSkpOwogICAgZW5kCn0pOwpsb2NhbCB2MTY0ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3RGaXJlRmxvd2VycyIsIHsKICAgIFRpdGxlID0gIkNvbGxlY3QgRmlyZSBGbG93ZXJzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNjQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzOTYpCiAgICBfRy5BdXRvQ29sbGVjdEZpcmVGbG93ZXJzID0gdjM5NjsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0NvbGxlY3RGaXJlRmxvd2VycyB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NDcgPSB3b3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoIkZpcmVGbG93ZXJzIik7CiAgICAgICAgICAgIGlmIHY3NDcgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY5MDMsIHY5MDQgaW4gcGFpcnModjc0NzpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2OTA0OklzQSgiTW9kZWwiKSBhbmQgdjkwNC5QcmltYXJ5UGFydCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM2NyA9IHY5MDQuUHJpbWFyeVBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzY4ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM2OSA9ICh2MTM2NyAtIHYxMzY4KS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTM2OSA8PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyh2MTM2NykpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTY1ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVdoaXRlQmVsdCIsIHsKICAgIFRpdGxlID0gIkF0byBXaGl0ZSBCZWx0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNjU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzOTcpCiAgICBfRy5BdXRvTGV2ZWwgPSB2Mzk3OwogICAgaWYgdjM5NyB0aGVuCiAgICAgICAgbG9jYWwgdjY1NiA9IHsKICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgTlBDID0gIkRvam8gVHJhaW5lciIsCiAgICAgICAgICAgICAgICBDb21tYW5kID0gIlJlcXVlc3RRdWVzdCIKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9JbnRlcmFjdERyYWdvblF1ZXN0Iik6SW52b2tlU2VydmVyKHVucGFjayh2NjU2KSk7CiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSBfRy5BdXRvTGV2ZWwgZG8KICAgICAgICAgICAgICAgIGxvY2FsIHY4MTcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgICAgICAgICBOUEMgPSAiRG9qbyBUcmFpbmVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgQ29tbWFuZCA9ICJDbGFpbVF1ZXN0IgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0ludGVyYWN0RHJhZ29uUXVlc3QiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MTcpKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTY2ID0gdjE2LlNlYTpBZGRQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiRHJhY28gUmFjZSIsCiAgICBDb250ZW50ID0gIiIKfSk7CmxvY2FsIHYxNjcgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlVHJpYWxUZWxlcG9ydCIsIHsKICAgIFRpdGxlID0gIkZseSBUbyBUcmlhbCBEb29yIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNjc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzOTgpCiAgICBfRy5BdXRvVHJpYWxUZWxlcG9ydCA9IHYzOTg7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9UcmlhbFRlbGVwb3J0IHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc0OCA9IHdvcmtzcGFjZS5NYXAuUHJlaGlzdG9yaWNJc2xhbmQ6RmluZEZpcnN0Q2hpbGQoIlRyaWFsVGVsZXBvcnQiKTsKICAgICAgICAgICAgaWYgKHY3NDggYW5kIHY3NDg6SXNBKCJQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KHY3NDguUG9zaXRpb24pKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE2OCA9IHYxNi5TZWE6QWRkU2VjdGlvbigiUHJlaGlzdG9yaWMgSXNsYW5kIik7CmxvY2FsIHYxNjkgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJQcmVoaXN0b3JpYyBJc2xhbmQgU3RhdHVzIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBnZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgdjE2OTpTZXREZXNjKCJQcmVoaXN0b3JpYyBJc2xhbmQ6IOKche+4jyIpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB2MTY5OlNldERlc2MoIlByZWhpc3RvcmljIElzbGFuZDog4p2M77iPIik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjE3MCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUUFZvbGNhbm8iLCB7CiAgICBUaXRsZSA9ICJGbHkgVG8gUHJlaGlzdG9yaWMgSXNsYW5kIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNzA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzOTkpCiAgICBfRy5Ud2VlblRvUHJlaGlzdG9yaWMgPSB2Mzk5OwplbmQpOwp2MTcuVG9nZ2xlVFBWb2xjYW5vOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgbG9jYWwgdjQwMDsKICAgIHdoaWxlIG5vdCB2NDAwIGRvCiAgICAgICAgdjQwMCA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY0lzbGFuZCIpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuVHdlZW5Ub1ByZWhpc3RvcmljIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc0OSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY0lzbGFuZCIpOwogICAgICAgICAgICBpZiB2NzQ5IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NzkgPSB2NzQ5OkZpbmRGaXJzdENoaWxkKCJDb3JlIikgYW5kIHY3NDkuQ29yZTpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNSZWxpYyIpIDsKICAgICAgICAgICAgICAgIGxvY2FsIHY4ODAgPSB2ODc5IGFuZCB2ODc5OkZpbmRGaXJzdENoaWxkKCJTa3VsbCIpIDsKICAgICAgICAgICAgICAgIGlmIHY4ODAgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KHY4ODAuUG9zaXRpb24pKTsKICAgICAgICAgICAgICAgICAgICBfRy5Ud2VlblRvUHJlaGlzdG9yaWMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTcxID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZURlZmVuZFZvbGNhbm8iLCB7CiAgICBUaXRsZSA9ICJTYWZlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNzE6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MDEpCiAgICBfRy5BdXRvRGVmZW5kVm9sY2FubyA9IHY0MDE7CmVuZCk7CmxvY2FsIHYxMDcgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlTWVsZWUiLCB7CiAgICBUaXRsZSA9ICJVc2UgTWVsZWUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEwNzpPbkNoYW5nZWQoZnVuY3Rpb24odjQwMikKICAgIF9HLlVzZU1lbGVlID0gdjQwMjsKZW5kKTsKbG9jYWwgdjEwOSA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVTd29yZCIsIHsKICAgIFRpdGxlID0gIlVzZSBTd29yZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA5Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDAzKQogICAgX0cuVXNlU3dvcmQgPSB2NDAzOwplbmQpOwpsb2NhbCB2MTEwID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUd1biIsIHsKICAgIFRpdGxlID0gIlVzZSBHdW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExMDpPbkNoYW5nZWQoZnVuY3Rpb24odjQwNCkKICAgIF9HLlVzZUd1biA9IHY0MDQ7CmVuZCk7CmxvY2FsIGZ1bmN0aW9uIHYxNzIodjQwNSkKICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCB2NDA1LCBmYWxzZSwgZ2FtZSk7CiAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIHY0MDUsIGZhbHNlLCBnYW1lKTsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYxNzMoKQogICAgbG9jYWwgdjQwNiA9IGdhbWUuV29ya3NwYWNlLk1hcC5QcmVoaXN0b3JpY0lzbGFuZC5Db3JlOkZpbmRGaXJzdENoaWxkKCJJbnRlcmlvckxhdmEiKTsKICAgIGlmICh2NDA2IGFuZCB2NDA2OklzQSgiTW9kZWwiKSkgdGhlbgogICAgICAgIHY0MDY6RGVzdHJveSgpOwogICAgZW5kCiAgICBsb2NhbCB2NDA3ID0gZ2FtZS5Xb3Jrc3BhY2UuTWFwOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY0lzbGFuZCIpOwogICAgaWYgdjQwNyB0aGVuCiAgICAgICAgZm9yIHY3NTAsIHY3NTEgaW4gcGFpcnModjQwNzpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiAodjc1MTpJc0EoIlBhcnQiKSBhbmQgdjc1MS5OYW1lOmxvd2VyKCk6ZmluZCgibGF2YSIpKSB0aGVuCiAgICAgICAgICAgICAgICB2NzUxOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGxvY2FsIHY0MDggPSBnYW1lLldvcmtzcGFjZS5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICBpZiB2NDA4IHRoZW4KICAgICAgICBmb3Igdjc1Miwgdjc1MyBpbiBwYWlycyh2NDA4OkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY3NTM6SXNBKCJNb2RlbCIpIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2OTA1LCB2OTA2IGluIHBhaXJzKHY3NTM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjkwNjpJc0EoIk1lc2hQYXJ0IikgYW5kIHY5MDYuTmFtZTpsb3dlcigpOmZpbmQoImxhdmEiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2OTA2OkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKbG9jYWwgZnVuY3Rpb24gdjE3NCgpCiAgICBsb2NhbCB2NDA5ID0gZ2FtZS5Xb3Jrc3BhY2UuTWFwLlByZWhpc3RvcmljSXNsYW5kLkNvcmUuVm9sY2Fub1JvY2tzOwogICAgZm9yIHY1NjQsIHY1NjUgaW4gcGFpcnModjQwOTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY1NjU6SXNBKCJNb2RlbCIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc1NCA9IHY1NjU6RmluZEZpcnN0Q2hpbGQoInZvbGNhbm9yb2NrIik7CiAgICAgICAgICAgIGlmICh2NzU0IGFuZCB2NzU0OklzQSgiTWVzaFBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg4MSA9IHY3NTQuQ29sb3I7CiAgICAgICAgICAgICAgICBpZiAoKHY4ODEgPT0gQ29sb3IzLmZyb21SR0IoMTg1LCA1MywgNTYpKSBvciAodjg4MSA9PSBDb2xvcjMuZnJvbVJHQigxODUsIDUzLCA1NykpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY3NTQ7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBuaWw7CmVuZApsb2NhbCBmdW5jdGlvbiB2MTYyKHY0MTApCiAgICBsb2NhbCB2NDExID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOwogICAgbG9jYWwgdjQxMiA9IHY0MTEuQmFja3BhY2s7CiAgICBmb3IgdjU2NiwgdjU2NyBpbiBwYWlycyh2NDEyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgKHY1Njc6SXNBKCJUb29sIikgYW5kICh2NTY3LlRvb2xUaXAgPT0gdjQxMCkpIHRoZW4KICAgICAgICAgICAgdjU2Ny5QYXJlbnQgPSB2NDExLkNoYXJhY3RlcjsKICAgICAgICAgICAgZm9yIHY4MTgsIHY4MTkgaW4gaXBhaXJzKHsKICAgICAgICAgICAgICAgICJaIiwKICAgICAgICAgICAgICAgICJYIiwKICAgICAgICAgICAgICAgICJDIiwKICAgICAgICAgICAgICAgICJWIiwKICAgICAgICAgICAgICAgICJGIgogICAgICAgICAgICB9KSBkbwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHYxNzIodjgxOSk7CiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjU2Ny5QYXJlbnQgPSB2NDEyOwogICAgICAgICAgICBicmVhazsKICAgICAgICBlbmQKICAgIGVuZAplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0RlZmVuZFZvbGNhbm8gdGhlbgogICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICBwY2FsbCh2MTczKTsKICAgICAgICAgICAgbG9jYWwgdjc1NyA9IHYxNzQoKTsKICAgICAgICAgICAgaWYgdjc1NyB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODgyID0gQ0ZyYW1lLm5ldyh2NzU3LlBvc2l0aW9uICsgVmVjdG9yMy5uZXcoMCwgMCwgMCkpOwogICAgICAgICAgICAgICAgVHdlZW4yKHY4ODIpOwogICAgICAgICAgICAgICAgbG9jYWwgdjg4MyA9IHY3NTcuQ29sb3I7CiAgICAgICAgICAgICAgICBpZiAoKHY4ODMgfj0gQ29sb3IzLmZyb21SR0IoMTg1LCA1MywgNTYpKSBhbmQgKHY4ODMgfj0gQ29sb3IzLmZyb21SR0IoMTg1LCA1MywgNTcpKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY3NTcgPSB2MTc0KCk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMjUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMjYgPSAoKHYxMTI1IC0gdjc1Ny5Qb3NpdGlvbikgLSBWZWN0b3IzLm5ldygwLCAwLCAwKSkuTWFnbml0dWRlOwogICAgICAgICAgICAgICAgICAgIGlmICh2MTEyNiA8PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlVzZU1lbGVlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjIoIk1lbGVlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5Vc2VTd29yZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTYyKCJTd29yZCIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuVXNlR3VuIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjIoIkd1biIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBfRy5Ud2VlblRvUHJlaGlzdG9yaWMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBfRy5Ud2VlblRvUHJlaGlzdG9yaWMgPSB0cnVlOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTc1ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUtpbGxBdXJhIiwgewogICAgVGl0bGUgPSAiQXR0YWNrIEdvbGVtcyBBdXJhIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNzU6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MTMpCiAgICBLaWxsQXVyYSA9IHY0MTM7CmVuZCk7CnYxNy5Ub2dnbGVLaWxsQXVyYTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEtpbGxBdXJhIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgZm9yIHY4ODQsIHY4ODUgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2ODg1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2ODg1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2ODg1Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg4NS5IdW1hbm9pZC5IZWFsdGggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg4NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEtpbGxBdXJhIG9yIG5vdCB2ODg1LlBhcmVudCBvciAodjg4NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNzYgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdEJvbmUiLCB7CiAgICBUaXRsZSA9ICJDb2xsZWN0IEJvbmUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE3NjpPbkNoYW5nZWQoZnVuY3Rpb24odjQxNCkKICAgIF9HLkF1dG9Db2xsZWN0Qm9uZSA9IHY0MTQ7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9Db2xsZWN0Qm9uZSB0aGVuCiAgICAgICAgICAgIGZvciB2ODIwLCB2ODIxIGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgaWYgKHY4MjE6SXNBKCJCYXNlUGFydCIpIGFuZCAodjgyMS5OYW1lID09ICJEaW5vQm9uZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcodjgyMS5Qb3NpdGlvbikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNzcgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdEVnZyIsIHsKICAgIFRpdGxlID0gIkNvbGxlY3QgRHJhZ29uIEVnZyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTc3Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDE1KQogICAgX0cuQXV0b0NvbGxlY3RFZ2cgPSB2NDE1OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQ29sbGVjdEVnZyB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NTggPSB3b3Jrc3BhY2UuTWFwLlByZWhpc3RvcmljSXNsYW5kLkNvcmUuU3Bhd25lZERyYWdvbkVnZ3M6R2V0Q2hpbGRyZW4oKTsKICAgICAgICAgICAgaWYgKCMgdjc1OCA+IDApIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4ODYgPSB2NzU4W21hdGgucmFuZG9tKDEsICMgdjc1OCldOwogICAgICAgICAgICAgICAgaWYgKHY4ODY6SXNBKCJNb2RlbCIpIGFuZCB2ODg2LlByaW1hcnlQYXJ0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHY4ODYuUHJpbWFyeVBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyNyA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyOCA9IHY4ODYuUHJpbWFyeVBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMjkgPSAodjExMjcgLSB2MTEyOCkuTWFnbml0dWRlOwogICAgICAgICAgICAgICAgICAgIGlmICh2MTEyOSA8PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CgoKCgotLSA9PT09PT09PT09PT09PT09PSBTQUZFIE1FTlUgVE9HR0xFIChSSUdIVFNISUZUKSA9PT09PT09PT09PT09PT09PQotLSBOb24tZGVzdHJ1Y3RpdmUgdG9nZ2xlOiBvbmx5IGhpZGVzL3Nob3dzIFNjcmVlbkd1aSBpbnN0ZWFkIG9mIERlc3Ryb3koKQpsb2NhbCBVSVMgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQoKbG9jYWwgZnVuY3Rpb24gZmluZE1haW5HdWkoKQogICAgLS0gVHJ5IENvcmVHdWkgZmlyc3QgKGNvbW1vbiBmb3IgVUkgbGlicykKICAgIGZvciBfLHYgaW4gaXBhaXJzKGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjpJc0EoIlNjcmVlbkd1aSIpIHRoZW4KICAgICAgICAgICAgcmV0dXJuIHYKICAgICAgICBlbmQKICAgIGVuZAogICAgLS0gRmFsbGJhY2sgdG8gUGxheWVyR3VpCiAgICBsb2NhbCBwZyA9IFBsYXllcnMuTG9jYWxQbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIlBsYXllckd1aSIpCiAgICBpZiBwZyB0aGVuCiAgICAgICAgZm9yIF8sdiBpbiBpcGFpcnMocGc6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgaWYgdjpJc0EoIlNjcmVlbkd1aSIpIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiB2CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gbmlsCmVuZAoKbG9jYWwgTWFpbkd1aSA9IGZpbmRNYWluR3VpKCkKbG9jYWwgVmlzaWJsZSA9IHRydWUKClVJUy5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQsIGdwKQogICAgaWYgZ3AgdGhlbiByZXR1cm4gZW5kCiAgICBpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5SaWdodFNoaWZ0IHRoZW4KICAgICAgICBWaXNpYmxlID0gbm90IFZpc2libGUKICAgICAgICBpZiBNYWluR3VpIHRoZW4KICAgICAgICAgICAgTWFpbkd1aS5FbmFibGVkID0gVmlzaWJsZQogICAgICAgIGVuZAogICAgZW5kCmVuZCkKLS0gPT09PT09PT09PT09PT09PT0gRU5EIE1FTlUgVE9HR0xFID09PT09PT09PT09PT09PT09CgoKCi0tID09PT09PT09PT09PT09PT09IEZVTEwgVE9HR0xFIEZJWCA9PT09PT09PT09PT09PT09PQpsb2NhbCBVSVMgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQpsb2NhbCBDb3JlR3VpID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIikKbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIGxwID0gUGxheWVycy5Mb2NhbFBsYXllcgoKbG9jYWwgR1VJX05BTUUgPSAiQk5fVE9HR0xFX0dVSSIKaWYgQ29yZUd1aTpGaW5kRmlyc3RDaGlsZChHVUlfTkFNRSkgdGhlbgogICAgQ29yZUd1aVtHVUlfTkFNRV06RGVzdHJveSgpCmVuZAoKbG9jYWwgU2NyZWVuR3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQpTY3JlZW5HdWkuTmFtZSA9IEdVSV9OQU1FClNjcmVlbkd1aS5SZXNldE9uU3Bhd24gPSBmYWxzZQpTY3JlZW5HdWkuUGFyZW50ID0gQ29yZUd1aQoKbG9jYWwgVG9nZ2xlQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKVG9nZ2xlQnRuLlNpemUgPSBVRGltMi5mcm9tT2Zmc2V0KDUwLDUwKQpUb2dnbGVCdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMCwxMCwwLjUsLTI1KQpUb2dnbGVCdG4uVGV4dCA9ICLiiaEiClRvZ2dsZUJ0bi5UZXh0U2NhbGVkID0gdHJ1ZQpUb2dnbGVCdG4uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMgpUb2dnbGVCdG4uUGFyZW50ID0gU2NyZWVuR3VpCgpsb2NhbCBmdW5jdGlvbiBmaW5kTWFpbigpCiAgICBmb3IgXyx2IGluIHBhaXJzKFNjcmVlbkd1aTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgIGlmIHY6SXNBKCJGcmFtZSIpIGFuZCB2Lk5hbWU6bG93ZXIoKTpmaW5kKCJtYWluIikgdGhlbgogICAgICAgICAgICByZXR1cm4gdgogICAgICAgIGVuZAogICAgZW5kCmVuZAoKbG9jYWwgb3BlbmVkID0gdHJ1ZQpsb2NhbCBmdW5jdGlvbiBzZXRWaXNpYmxlKHN0YXRlKQogICAgbG9jYWwgbWFpbiA9IGZpbmRNYWluKCkKICAgIGlmIG1haW4gdGhlbgogICAgICAgIG1haW4uVmlzaWJsZSA9IHN0YXRlCiAgICBlbmQKZW5kCgpUb2dnbGVCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBvcGVuZWQgPSBub3Qgb3BlbmVkCiAgICBzZXRWaXNpYmxlKG9wZW5lZCkKZW5kKQoKVUlTLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCwgZ3ApCiAgICBpZiBncCB0aGVuIHJldHVybiBlbmQKICAgIGlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlJpZ2h0Q29udHJvbCB0aGVuCiAgICAgICAgb3BlbmVkID0gbm90IG9wZW5lZAogICAgICAgIHNldFZpc2libGUob3BlbmVkKQogICAgZW5kCmVuZCkKCnRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KDIpIGRvCiAgICAgICAgaWYgbm90IFNjcmVlbkd1aS5QYXJlbnQgdGhlbgogICAgICAgICAgICBTY3JlZW5HdWkuUGFyZW50ID0gQ29yZUd1aQogICAgICAgICAgICBzZXRWaXNpYmxlKG9wZW5lZCkKICAgICAgICBlbmQKICAgIGVuZAplbmQpCi0tID09PT09PT09PT09PT09PT09IEVORCBUT0dHTEUgRklYID09PT09PT09PT09PT09PT09CgoKLS0gPT09PT0gT0xJT1MgSFVCIENPUkUgPT09PT0KLS0gT2xpb3MgQmFuYW5hLVN0eWxlIEZhcm0gKExpZ2h0IE9iZikKcmVwZWF0IHRhc2sud2FpdCgpIHVudGlsIGdhbWU6SXNMb2FkZWQoKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCgotLSA9PT09PSBLRVkgQ0hFQ0sgPT09PT0KbG9jYWwgX0s9e1siT0xJT1MtQUxQSEEiXT0xLFsiT0xJT1MtQkVUQSJdPTEsWyJPTElPUy1WSVAiXT0xLFsiT0xJT1MtUFJPIl09MX0KaWYgbm90IGdldGdlbnYoKS5LZXkgb3Igbm90IF9LW2dldGdlbnYoKS5LZXldIHRoZW4KICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpLaWNrKCJJbnZhbGlkIGtleSIpCiAgICByZXR1cm4KZW5kCgotLSA9PT09PSBTRVJWSUNFUyA9PT09PQpsb2NhbCBTPWdhbWU6R2V0U2VydmljZQpsb2NhbCBQPVMoZ2FtZSwiUGxheWVycyIpLkxvY2FsUGxheWVyCmxvY2FsIFJTPVMoZ2FtZSwiUnVuU2VydmljZSIpCgotLSA9PT09PSBVSSA9PT09PQpsb2NhbCBHPUluc3RhbmNlLm5ldygiU2NyZWVuR3VpIixQOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIikpCkcuTmFtZT0iT2xpb3NIdWIiCmxvY2FsIEY9SW5zdGFuY2UubmV3KCJGcmFtZSIsRyk7Ri5TaXplPVVEaW0yLmZyb21TY2FsZSguMzIsLjI4KTtGLlBvc2l0aW9uPVVEaW0yLmZyb21TY2FsZSguMzQsLjM2KQpGLkJhY2tncm91bmRDb2xvcjM9Q29sb3IzLmZyb21SR0IoMjIsMjIsMjIpO0YuQWN0aXZlPXRydWU7Ri5EcmFnZ2FibGU9dHJ1ZQpsb2NhbCBCPUluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIsRik7Qi5TaXplPVVEaW0yLmZyb21TY2FsZSguODUsLjMpO0IuUG9zaXRpb249VURpbTIuZnJvbVNjYWxlKC4wNzUsLjE1KQpCLlRleHQ9IkFVVE8gRkFSTSA6IE9GRiI7Qi5UZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpO0IuQmFja2dyb3VuZENvbG9yMz1Db2xvcjMuZnJvbVJHQig0MCw0MCw0MCkKCi0tID09PT09IEZBUk0gQ09SRSAoQmFuYW5hLXN0eWxlIHRlbXBsYXRlKSA9PT09PQpsb2NhbCBPTj1mYWxzZQpsb2NhbCBmdW5jdGlvbiBnZXRDaGFyKCkKICAgIGxvY2FsIGM9UC5DaGFyYWN0ZXIKICAgIHJldHVybiBjIGFuZCBjOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIGMKZW5kCgpsb2NhbCBmdW5jdGlvbiBtb3ZlVG8oY2YpCiAgICBsb2NhbCBjPWdldENoYXIoKTsgaWYgbm90IGMgdGhlbiByZXR1cm4gZW5kCiAgICBjLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lPWNmCmVuZAoKbG9jYWwgZnVuY3Rpb24gbmVhcmVzdE1vYigpCiAgICAtLSBnZW5lcmljIHNjYW4gKHNhZmUgdGVtcGxhdGUpCiAgICBsb2NhbCBtb2JzPXdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiRW5lbWllcyIpIG9yIHdvcmtzcGFjZQogICAgbG9jYWwgaHJwPWdldENoYXIoKSBhbmQgZ2V0Q2hhcigpLkh1bWFub2lkUm9vdFBhcnQKICAgIGlmIG5vdCBocnAgdGhlbiByZXR1cm4gZW5kCiAgICBsb2NhbCBiZXN0LGRpc3QKICAgIGZvciBfLG0gaW4gaXBhaXJzKG1vYnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBsb2NhbCBoPW06RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgbG9jYWwgcj1tOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICBpZiBoIGFuZCByIGFuZCBoLkhlYWx0aD4wIHRoZW4KICAgICAgICAgICAgbG9jYWwgZD0oci5Qb3NpdGlvbi1ocnAuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICBpZiBub3QgZGlzdCBvciBkPGRpc3QgdGhlbiBiZXN0LGRpc3Q9cixkIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gYmVzdAplbmQKCnRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgUlMuSGVhcnRiZWF0OldhaXQoKSBkbwogICAgICAgIGlmIE9OIHRoZW4KICAgICAgICAgICAgbG9jYWwgdD1uZWFyZXN0TW9iKCkKICAgICAgICAgICAgaWYgdCB0aGVuIG1vdmVUbyh0LkNGcmFtZSpDRnJhbWUubmV3KDAsMCwtMykpIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCkIuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBPTj1ub3QgT04KICAgIEIuVGV4dD1PTiBhbmQgIkFVVE8gRkFSTSA6IE9OIiBvciAiQVVUTyBGQVJNIDogT0ZGIgplbmQpCgpwcmludCgiT2xpb3MgTG9hZGVkIikKCg=="))()
